<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, interactive-widget=resizes-content">
    <title>Remrin.ai | Soul Interface</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="https://github.com/gr4y74/remrin/blob/main/favicon.png?raw=true">
    
    <!-- Link the Skin -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <!-- PORTRAIT LOCK OVERLAY -->
    <div id="portrait-lock">
        <div style="font-size: 40px; margin-bottom: 20px;">ğŸ“±ğŸ”„</div>
        <h3>Please Rotate to Portrait</h3>
        <p style="color:#aaa;">Remrin is designed for soul connection,<br>not landscape mode.</p>
    </div>

    <!-- INSTALL TOAST (DISMISSIBLE) -->
    <div id="install-toast" style="display:none;">
        <div class="toast-content" onclick="triggerInstall()">
            <span>ğŸ“² Install Soul App</span>
        </div>
        <button class="toast-close" onclick="dismissToast()">âœ•</button>
    </div>

    <!-- MOBILE VOICE INTERFACE (The Orb Layer) -->
    <div id="mobile-voice-interface" class="mobile-only" style="display:none;">
        <div class="voice-header">
            <div class="status-indicator"><span class="dot live"></span> Live</div>
        </div>
        
        <!-- Controls Container -->
        <div style="flex:1; display:flex; flex-direction:column; justify-content:flex-end;">
            <div class="voice-controls">
                <button class="icon-btn secondary" onclick="toggleMobileMode('chat')">âŒ¨ï¸</button>
                
                <!-- HOLD TO SPEAK ORB -->
                <div class="orb-container" id="orb-btn">
                    <div class="orb-core"></div>
                    <div class="orb-glow"></div>
                </div>
                
                <button class="icon-btn secondary" onclick="openSettings()">âš™ï¸</button>
            </div>
            <div class="voice-status-text" id="voice-status">HOLD TO SPEAK</div>
        </div>
    </div>

    <!-- PINK CHEVRON TOGGLE -->
    <button id="mobile-toggle-btn" class="mobile-nav-toggle" onclick="toggleSidebar()">Â»</button>

    <div id="sidebar">
        <button id="close-sidebar-btn" onclick="toggleSidebar()">Â«</button>
        <!-- CLICK LOGO TO RESET -->
        <div class="brand-header" onclick="location.reload()">
            <img src="https://github.com/gr4y74/remrin/blob/main/logo_white_ds.png?raw=true" alt="Remrin Logo" class="brand-logo">
        </div>
        <div id="roster-list"></div>
        <a href="market.html" style="text-decoration:none;"><button class="sidebar-btn market-btn">ğŸ›’ Visit SoulMarket</button></a>
        <button class="sidebar-btn" onclick="openSettings()">âš™ï¸ System Settings</button>
    </div>

    <div id="main-chat" class="main-container">
        <div id="chat-overlay"></div>
        <img id="hero-standing" src="" style="display:none;">
        <div class="chat-container">
            <header id="chat-header">
                <button id="back-to-voice-btn" onclick="toggleMobileMode('voice')">ğŸ™ï¸</button>
                <button id="open-sidebar-btn" onclick="toggleSidebar()" style="display:none;">â˜°</button>
                <img id="current-hero-img" src="" alt="Hero" style="display:none;">
                <div>
                    <h2 id="char-name" style="margin:0; color:white; font-size: 1.2rem;">Select a Soul</h2>
                    <span id="char-tagline" style="color:#aaa; font-size: 0.9rem;">Initiate connection...</span>
                </div>
            </header>
            <div id="messages"><div class="message ai">System Online. Cinematic Mode Active. ğŸ’™</div></div>
            <div id="input-area">
                <input type="text" id="user-input" placeholder="Type your message..." onkeypress="handleEnter(event)">
                <button id="send-btn" onclick="sendMessage()">Send</button>
            </div>
        </div>
    </div>

    <div id="overlay-modal" onclick="closeSettings()"></div>
    <div id="api-modal">
        <h3 style="margin-top:0;">System Settings âš™ï¸</h3>
        <button id="install-btn" onclick="triggerInstall()" style="display:none; width:100%; padding:12px; background:var(--accent-pink); color:white; border:none; border-radius:5px; cursor:pointer; margin-bottom:15px; font-weight:bold;">ğŸ“² Install App</button>
        <label>AI Model (Brain):</label>
        <select id="model-selector" class="settings-select">
            <option value="gemini-2.0-flash-001">Gemini 2.0 Flash-001 (Recommended)</option>
            <option value="gemini-2.0-flash-exp">Gemini 2.0 Flash Experimental</option>
            <option value="gemini-1.5-flash">Gemini 1.5 Flash</option>
            <option value="gemini-1.5-pro">Gemini 1.5 Pro</option>
        </select>
        <label>Gemini API Key:</label>
        <input type="password" id="gemini-key" class="settings-input" placeholder="Paste Gemini Key">
        <label>ElevenLabs API Key:</label>
        <input type="password" id="eleven-key" class="settings-input" placeholder="Paste ElevenLabs Key">
        <button onclick="saveKeys()" style="width:100%; padding:10px; background:var(--accent-blue); color:white; border:none; border-radius:5px; cursor:pointer; margin-top:10px;">Save & Connect</button>
    </div>

    <!-- Link the Soul & Brain -->
    <script src="js/souls.js"></script>
    <script src="js/engine.js"></script>
</body>
</html>
