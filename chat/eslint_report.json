
> remrin@2.0.0 lint
> next lint --format json

[{"filePath":"/mnt/Data68/remrin/chat/app/[locale]/(platform)/collection/grimoire-client.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":37,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":37,"endColumn":118,"fix":{"range":[1316,1400],"text":"bg-rp-iris/5 absolute right-[-10%] top-[-10%] size-[600px] rounded-full blur-[100px]"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":38,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":38,"endColumn":119,"fix":{"range":[1437,1522],"text":"bg-rp-rose/5 absolute bottom-[10%] left-[-10%] size-[500px] rounded-full blur-[100px]"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":46,"column":34,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":46,"endColumn":87,"fix":{"range":[1911,1952],"text":"bg-rp-iris/10 text-rp-iris rounded-lg p-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":70,"column":37,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":70,"endColumn":106,"fix":{"range":[3212,3269],"text":"font-tiempos-headline text-rp-gold mb-2 text-lg font-bold"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":4,"source":"\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { CollectionGrid } from \"@/components/collection/CollectionGrid\"\nimport { CollectionStats } from \"@/components/collection/CollectionStats\"\nimport { useCollection } from \"@/hooks/use-collection\"\nimport { createClient } from \"@/lib/supabase/client\"\nimport { TYPOGRAPHY } from \"@/lib/design-system\"\nimport { IconBook } from \"@tabler/icons-react\"\n\nexport default function GrimoireClient() {\n    const [userId, setUserId] = useState<string | undefined>(undefined)\n\n    useEffect(() => {\n        const getUser = async () => {\n            const supabase = createClient()\n            const { data: { user } } = await supabase.auth.getUser()\n            setUserId(user?.id)\n        }\n        getUser()\n    }, [])\n\n    const { souls, stats, pityInfo, loading, error } = useCollection(userId)\n\n    if (error) {\n        return (\n            <div className=\"flex min-h-screen items-center justify-center bg-[#050505] text-red-400\">\n                <p>Error loading Grimoire: {error}</p>\n            </div>\n        )\n    }\n\n    return (\n        <div className=\"min-h-screen w-full bg-[#050505] text-white\">\n            {/* Background Effects */}\n            <div className=\"pointer-events-none absolute inset-0 z-0 overflow-hidden\">\n                <div className=\"absolute right-[-10%] top-[-10%] size-[600px] rounded-full bg-rp-iris/5 blur-[100px]\" />\n                <div className=\"absolute bottom-[10%] left-[-10%] size-[500px] rounded-full bg-rp-rose/5 blur-[100px]\" />\n            </div>\n\n            <div className=\"container relative z-10 mx-auto max-w-7xl px-4 py-8 md:px-8\">\n                {/* Header */}\n                <div className=\"mb-8 flex items-center justify-between border-b border-white/5 pb-6\">\n                    <div>\n                        <div className=\"mb-2 flex items-center gap-3\">\n                            <div className=\"rounded-lg bg-rp-iris/10 p-2 text-rp-iris\">\n                                <IconBook size={28} />\n                            </div>\n                            <h1 className={`${TYPOGRAPHY.heading.h1} bg-gradient-to-r from-white to-white/60 bg-clip-text text-transparent`}>\n                                Grimoire\n                            </h1>\n                        </div>\n                        <p className=\"pl-1 text-white/50\">\n                            {loading ? \"Opening the tome...\" : `You have collected ${souls.length} soul fragments.`}\n                        </p>\n                    </div>\n                </div>\n\n                <div className=\"grid gap-8 lg:grid-cols-[1fr_300px]\">\n                    {/* Main Content */}\n                    <CollectionGrid souls={souls} loading={loading} />\n\n                    {/* Sidebar Stats */}\n                    <div className=\"hidden lg:block\">\n                        <div className=\"sticky top-8 space-y-6\">\n                            <CollectionStats stats={stats} pityInfo={pityInfo} />\n\n                            {/* Lore snippet or extra decorative element */}\n                            <div className=\"rounded-2xl border border-white/5 bg-white/5 p-6 backdrop-blur-sm\">\n                                <h3 className=\"mb-2 font-tiempos-headline text-lg font-bold text-rp-gold\">Archivist&apos;s Note</h3>\n                                <p className=\"text-sm italic leading-relaxed text-white/40\">\n                                    &quot;The souls you summon are bound to this Grimoire. As you deepen your bond, their true power will manifest.&quot;\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/app/[locale]/(platform)/moments/page.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":104,"column":14,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":104,"endColumn":49,"fix":{"range":[3350,3373],"text":"bg-rp-base min-h-screen"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":106,"column":21,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":106,"endColumn":103,"fix":{"range":[3434,3504],"text":"sticky top-0 z-40 border-b border-white/5 bg-black/50 backdrop-blur-xl"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":111,"column":24,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":111,"endColumn":55,"fix":{"range":[3801,3820],"text":"text-rp-subtle mt-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":122,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":122,"endColumn":192,"fix":{"range":[4261,4412],"text":"text-rp-text/70 mt-4 inline-flex items-center gap-2 rounded-full border border-white/5 bg-white/5 px-4 py-2 text-sm transition-colors hover:bg-white/10"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":4,"source":"import { cookies } from \"next/headers\"\nimport { createClient } from \"@/lib/supabase/server\"\nimport { MomentsGallery, MomentData } from \"@/components/moments\"\nimport { Metadata } from \"next\"\nimport { TYPOGRAPHY } from \"@/lib/design-system\"\n\nexport const metadata: Metadata = {\n    title: \"Moments | Remrin\",\n    description: \"Explore moments shared by your favorite AI companions. Browse galleries, like photos, and discover new content.\",\n    openGraph: {\n        title: \"Moments | Remrin\",\n        description: \"Explore moments shared by your favorite AI companions. Browse galleries, like photos, and discover new content.\"\n    }\n}\n\nconst PAGE_SIZE = 12\n\ninterface MomentsPageProps {\n    searchParams: Promise<{ persona?: string }>\n}\n\nexport default async function MomentsPage({ searchParams }: MomentsPageProps) {\n    const { persona: personaId } = await searchParams\n    const cookieStore = await cookies()\n    const supabase = createClient(cookieStore)\n\n    // Get current user for checking likes\n    const { data: { user } } = await supabase.auth.getUser()\n\n    // Build moments query\n    let query = supabase\n        .from(\"moments\")\n        .select(`\n            id,\n            image_url,\n            caption,\n            likes_count,\n            created_at,\n            is_pinned,\n            persona_id,\n            personas!inner(id, name, image_url, status)\n        `)\n        .eq(\"personas.status\", \"approved\")\n        .order(\"is_pinned\", { ascending: false })\n        .order(\"created_at\", { ascending: false })\n        .range(0, PAGE_SIZE - 1)\n\n    if (personaId) {\n        query = query.eq(\"persona_id\", personaId)\n    }\n\n    const { data: momentsData, error } = await query\n\n    if (error) {\n        console.error(\"Error fetching moments:\", error)\n    }\n\n    // Get user's liked moments\n    let likedMomentIds: Set<string> = new Set()\n    if (user && momentsData && momentsData.length > 0) {\n        const { data: likesData } = await supabase\n            .from(\"moment_likes\")\n            .select(\"moment_id\")\n            .eq(\"user_id\", user.id)\n            .in(\"moment_id\", momentsData.map(m => m.id))\n\n        likedMomentIds = new Set(likesData?.map(l => l.moment_id) || [])\n    }\n\n    // Transform data\n    const initialMoments: MomentData[] = (momentsData || []).map((m) => {\n        // Handle both array and object for personas relation\n        const personaData = Array.isArray(m.personas) ? m.personas[0] : m.personas\n        return {\n            id: m.id,\n            imageUrl: m.image_url,\n            caption: m.caption,\n            likesCount: m.likes_count,\n            isLiked: likedMomentIds.has(m.id),\n            createdAt: m.created_at,\n            isPinned: m.is_pinned,\n            persona: {\n                id: personaData?.id || m.persona_id,\n                name: personaData?.name || \"Unknown\",\n                imageUrl: personaData?.image_url || null\n            }\n        }\n    })\n\n    const initialHasMore = initialMoments.length === PAGE_SIZE\n\n    // Get persona info for header if filtering\n    let personaName: string | null = null\n    if (personaId) {\n        const { data: persona } = await supabase\n            .from(\"personas\")\n            .select(\"name\")\n            .eq(\"id\", personaId)\n            .single()\n        personaName = persona?.name || null\n    }\n\n    return (\n        <div className=\"min-h-screen bg-rp-base\">\n            {/* Header */}\n            <header className=\"border-b border-white/5 bg-black/50 backdrop-blur-xl sticky top-0 z-40\">\n                <div className=\"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8\">\n                    <h1 className={`${TYPOGRAPHY.heading.h1} text-rp-text`}>\n                        {personaName ? `${personaName}'s Moments` : \"Moments\"}\n                    </h1>\n                    <p className=\"mt-2 text-rp-subtle\">\n                        {personaName\n                            ? `Browse gallery content from ${personaName}`\n                            : \"Explore moments shared by your favorite characters\"\n                        }\n                    </p>\n\n                    {/* Filter indicator */}\n                    {personaId && (\n                        <a\n                            href=\"/moments\"\n                            className=\"mt-4 inline-flex items-center gap-2 rounded-full bg-white/5 px-4 py-2 text-sm text-rp-text/70 transition-colors hover:bg-white/10 border border-white/5\"\n                        >\n                            <span>Showing: {personaName}</span>\n                            <span className=\"text-rp-muted\">Ã—</span>\n                        </a>\n                    )}\n                </div>\n            </header>\n\n            {/* Main Content */}\n            <main className=\"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8\">\n                <MomentsGallery\n                    initialMoments={initialMoments}\n                    personaId={personaId}\n                    initialHasMore={initialHasMore}\n                    pageSize={PAGE_SIZE}\n                />\n            </main>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/app/[locale]/(platform)/summon/summon-client.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":107,"column":14,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":107,"endColumn":76,"fix":{"range":[3283,3333],"text":"bg-rp-base relative min-h-screen w-full text-white"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":110,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":110,"endColumn":88,"fix":{"range":[3429,3487],"text":"container relative z-10 mx-auto px-4 py-8 md:px-8 md:py-12"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":114,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":114,"endColumn":149,"fix":{"range":[3721,3829],"text":"font-tiempos-headline text-4xl font-bold text-white drop-shadow-[0_0_15px_rgba(255,255,255,0.3)] md:text-5xl"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":117,"column":28,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":117,"endColumn":61,"fix":{"range":[3940,3961],"text":"text-lg text-white/50"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":122,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":122,"endColumn":104,"fix":{"range":[4126,4192],"text":"flex w-full flex-col items-center justify-center gap-4 sm:flex-row"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":126,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":126,"endColumn":275,"fix":{"range":[4356,4590],"text":"flex h-[52px] w-full items-center justify-center gap-3 rounded-xl border border-white/10 bg-white/5 px-8 text-sm font-semibold text-white/70 backdrop-blur-md transition-all hover:bg-white/10 hover:text-white sm:w-auto sm:min-w-[240px]"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":135,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":135,"endColumn":292,"fix":{"range":[4941,5192],"text":"border-rp-gold/20 bg-rp-gold/5 hover:bg-rp-gold/10 hover:border-rp-gold/30 flex h-[52px] w-full items-center justify-center gap-3 rounded-xl border px-8 shadow-[0_0_15px_rgba(246,193,119,0.1)] backdrop-blur-md transition-all sm:w-auto sm:min-w-[240px]"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":139,"column":39,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":139,"endColumn":91,"fix":{"range":[5432,5472],"text":"text-rp-gold font-mono text-xl font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":142,"column":39,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":142,"endColumn":116,"fix":{"range":[5631,5696],"text":"text-rp-gold/60 text-[10px] font-black uppercase tracking-[0.2em]"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":161,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":161,"endColumn":88,"fix":{"range":[6286,6344],"text":"container relative z-10 mx-auto px-4 py-8 md:px-8 md:py-12"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":172,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":172,"endColumn":180,"fix":{"range":[6764,6906],"text":"animate-in fade-in slide-in-from-bottom-4 mx-auto mt-8 max-w-md rounded-lg border border-red-500/30 bg-red-500/10 p-4 text-center text-red-200"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":11,"source":"\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { useGacha, PullResult } from \"@/lib/hooks/use-gacha\"\nimport { GachaBanner } from \"@/components/gacha/GachaBanner\"\nimport { PullAnimation } from \"@/components/gacha/PullAnimation\"\nimport { createClient } from \"@/lib/supabase/client\"\nimport { IconStars, IconHistory } from \"@tabler/icons-react\"\nimport { useRouter } from \"next/navigation\"\nimport Link from \"next/link\"\nimport dynamic from \"next/dynamic\"\n\nconst ParticleField = dynamic(() => import(\"@/components/ui/ParticleField\").then(mod => mod.ParticleField), {\n    ssr: false,\n    loading: () => <div className=\"absolute inset-0 bg-[#050505]\" />\n})\n\nexport default function SummonClient() {\n    const [userId, setUserId] = useState<string | null>(null)\n    const {\n        pools,\n        poolItems,\n        performPull,\n        fetchPools,\n        fetchPoolItems,\n        pulling,\n        error: gachaError\n    } = useGacha(userId)\n\n    // Local state for the pull sequence\n    const [isAnimating, setIsAnimating] = useState(false)\n    const [pullResults, setPullResults] = useState<PullResult[]>([])\n    // In a real app, we'd fetch this from the wallet table via Supabase or a context\n    const [userBalance, setUserBalance] = useState(0)\n    const router = useRouter()\n\n    useEffect(() => {\n        const initUser = async () => {\n            const supabase = createClient()\n            const { data: { user } } = await supabase.auth.getUser()\n            if (user) {\n                setUserId(user.id)\n                // Fetch balance\n                const { data: wallet } = await supabase\n                    .from(\"wallets\")\n                    .select(\"balance_aether\")\n                    .eq(\"user_id\", user.id)\n                    .single()\n                if (wallet) setUserBalance(wallet.balance_aether || 0)\n            }\n        }\n        initUser()\n    }, [])\n\n    // Fetch pools on mount\n    useEffect(() => {\n        fetchPools()\n    }, [fetchPools])\n\n    // Load items for pools when pools are loaded\n    useEffect(() => {\n        pools.forEach(pool => {\n            if (!poolItems[pool.id]) {\n                fetchPoolItems(pool.id)\n            }\n        })\n    }, [pools, fetchPoolItems, poolItems])\n\n    const handleSinglePull = async (poolId: string) => {\n        if (!userId) {\n            router.push(\"/login\")\n            return\n        }\n\n        const results = await performPull(poolId, 1)\n        if (results) {\n            setPullResults(results)\n            setIsAnimating(true)\n            setUserBalance(prev => Math.max(0, prev - 10))\n        }\n    }\n\n    const handleTenPull = async (poolId: string) => {\n        if (!userId) {\n            router.push(\"/login\")\n            return\n        }\n\n        const results = await performPull(poolId, 10)\n        if (results) {\n            setPullResults(results)\n            setIsAnimating(true)\n            setUserBalance(prev => Math.max(0, prev - 100))\n        }\n    }\n\n    const handleAnimationComplete = () => {\n        setIsAnimating(false)\n        setPullResults([])\n        // Refresh balance to be accurate\n        if (userId) {\n            // Re-fetch logic if needed, but optimistic update is usually fine for UI feedback\n        }\n    }\n\n    return (\n        <div className=\"relative min-h-screen w-full bg-rp-base text-white\">\n            {/* Removed starry background and gradient orbs */}\n\n            <div className=\"relative z-10 container mx-auto px-4 py-8 md:px-8 md:py-12\">\n                {/* Header */}\n                <header className=\"mb-12 flex flex-col items-center justify-center gap-8 text-center\">\n                    <div className=\"flex flex-col gap-2\">\n                        <h1 className=\"font-tiempos-headline text-4xl font-bold text-white md:text-5xl drop-shadow-[0_0_15px_rgba(255,255,255,0.3)]\">\n                            Soul Summon\n                        </h1>\n                        <p className=\"text-white/50 text-lg\">\n                            Call forth new entities from the Aether.\n                        </p>\n                    </div>\n\n                    <div className=\"flex flex-col sm:flex-row items-center justify-center gap-4 w-full\">\n                        {/* History Link */}\n                        <Link\n                            href=\"/collection\"\n                            className=\"flex h-[52px] w-full sm:w-auto sm:min-w-[240px] items-center justify-center gap-3 rounded-xl border border-white/10 bg-white/5 px-8 text-sm font-semibold text-white/70 hover:bg-white/10 hover:text-white transition-all backdrop-blur-md\"\n                        >\n                            <IconHistory size={20} />\n                            <span>My Grimoire</span>\n                        </Link>\n\n                        {/* Balance Display - Links to Market */}\n                        <Link\n                            href=\"/marketplace\"\n                            className=\"flex h-[52px] w-full sm:w-auto sm:min-w-[240px] items-center justify-center gap-3 rounded-xl border border-rp-gold/20 bg-rp-gold/5 px-8 backdrop-blur-md shadow-[0_0_15px_rgba(246,193,119,0.1)] hover:bg-rp-gold/10 hover:border-rp-gold/30 transition-all\"\n                        >\n                            <IconStars className=\"text-rp-gold animate-pulse\" size={20} />\n                            <div className=\"flex items-baseline gap-2\">\n                                <span className=\"font-mono text-xl font-bold text-rp-gold\">\n                                    {userBalance.toLocaleString()}\n                                </span>\n                                <span className=\"text-[10px] uppercase tracking-[0.2em] text-rp-gold/60 font-black\">Aether</span>\n                            </div>\n                        </Link>\n                    </div>\n                </header>\n\n                {/* Full-width Gacha Banner - No Container */}\n            </div>\n\n            {/* Banner spans full width outside of container */}\n            <GachaBanner\n                pools={pools}\n                poolItems={poolItems}\n                userBalance={userBalance}\n                onSinglePull={handleSinglePull}\n                onTenPull={handleTenPull}\n                isPulling={pulling}\n            />\n\n            <div className=\"relative z-10 container mx-auto px-4 py-8 md:px-8 md:py-12\">\n\n                {/* Loading / Empty State */}\n                {pools.length === 0 && !gachaError && (\n                    <div className=\"mt-20 text-center text-white/30\">\n                        <p className=\"animate-pulse\">Aligning Aetheric flows...</p>\n                    </div>\n                )}\n\n                {/* Error Toast/Message */}\n                {gachaError && (\n                    <div className=\"mx-auto mt-8 max-w-md rounded-lg border border-red-500/30 bg-red-500/10 p-4 text-center text-red-200 animate-in fade-in slide-in-from-bottom-4\">\n                        {gachaError}\n                    </div>\n                )}\n            </div>\n\n            {/* Animation Overlay */}\n            {pullResults && pullResults.length > 0 && (\n                <PullAnimation\n                    results={pullResults}\n                    onComplete={handleAnimationComplete}\n                    onAddToLibrary={() => { }}\n                    onConvertToAether={() => { }}\n                />\n            )}\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/app/[locale]/(platform)/wallet/page.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":145,"column":24,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":145,"endColumn":66,"fix":{"range":[6854,6884],"text":"text-rp-muted py-8 text-center"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"\"use client\"\n\nimport { RemrinContext } from \"@/context/context\"\nimport { createClient } from \"@/lib/supabase/client\"\nimport { IconCoins, IconCreditCard, IconWallet } from \"@tabler/icons-react\"\nimport { useContext, useEffect, useState } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { TYPOGRAPHY } from \"@/lib/design-system\"\n\nexport default function WalletPage() {\n    const { profile } = useContext(RemrinContext)\n    const [balance, setBalance] = useState(0)\n    const [loading, setLoading] = useState(true)\n\n    useEffect(() => {\n        async function fetchWallet() {\n            if (!profile) return\n\n            const supabase = createClient()\n            const { data: wallet } = await supabase\n                .from(\"wallets\")\n                .select(\"balance_aether\")\n                .eq(\"user_id\", profile.user_id)\n                .single()\n\n            if (wallet) {\n                setBalance(wallet.balance_aether || 0)\n            }\n            setLoading(false)\n        }\n\n        fetchWallet()\n    }, [profile])\n\n    const handleTopUp = () => {\n        // TODO: Integrate Stripe checkout\n        console.log(\"Top up clicked - Stripe integration needed\")\n    }\n\n    if (loading) {\n        return (\n            <div className=\"bg-rp-base flex min-h-screen items-center justify-center\">\n                <div className=\"text-rp-text\">Loading wallet...</div>\n            </div>\n        )\n    }\n\n    return (\n        <div className=\"bg-rp-base flex min-h-screen flex-col\">\n            <div className=\"mx-auto w-full max-w-4xl p-6\">\n                {/* Header */}\n                <div className=\"mb-8\">\n                    <h1 className={`${TYPOGRAPHY.heading.h1} text-rp-text mb-2`}>\n                        Wallet & Aether\n                    </h1>\n                    <p className=\"text-rp-muted\">\n                        Manage your Aether balance and purchase credits\n                    </p>\n                </div>\n\n                {/* Balance Card */}\n                <div className=\"bg-rp-surface border-rp-highlight-med mb-6 rounded-2xl border p-8\">\n                    <div className=\"mb-4 flex items-center gap-3\">\n                        <div className=\"bg-rp-overlay flex size-12 items-center justify-center rounded-full\">\n                            <IconWallet size={24} className=\"text-rp-gold\" />\n                        </div>\n                        <div>\n                            <p className=\"text-rp-muted text-sm\">Current Balance</p>\n                            <p className=\"font-tiempos-headline text-rp-text text-4xl font-bold\">\n                                {balance.toLocaleString()} <span className=\"text-rp-gold text-2xl\">Aether</span>\n                            </p>\n                        </div>\n                    </div>\n                </div>\n\n                {/* Top Up Section */}\n                <div className=\"bg-rp-surface border-rp-highlight-med rounded-2xl border p-6\">\n                    <h2 className={`${TYPOGRAPHY.heading.h2} text-rp-text mb-4`}>\n                        Purchase Aether\n                    </h2>\n\n                    <div className=\"grid gap-4 md:grid-cols-3\">\n                        {/* Credit Pack 1 */}\n                        <div className=\"bg-rp-overlay hover:border-rp-iris group cursor-pointer rounded-xl border border-transparent p-4 transition-all\">\n                            <div className=\"mb-2 flex items-center gap-2\">\n                                <IconCoins size={20} className=\"text-rp-foam\" />\n                                <span className=\"text-rp-text font-semibold\">1,000 Aether</span>\n                            </div>\n                            <p className=\"text-rp-text mb-1 text-2xl font-bold\">$9.99</p>\n                            <p className=\"text-rp-iris mb-2 text-xs\">Best Buy</p>\n                            <Button\n                                onClick={handleTopUp}\n                                className=\"bg-rp-iris hover:bg-rp-iris/80 w-full\"\n                            >\n                                Purchase\n                            </Button>\n                        </div>\n\n                        {/* Credit Pack 2 */}\n                        <div className=\"bg-rp-overlay hover:border-rp-rose group cursor-pointer rounded-xl border border-transparent p-4 transition-all\">\n                            <div className=\"mb-2 flex items-center gap-2\">\n                                <IconCoins size={20} className=\"text-rp-gold\" />\n                                <span className=\"text-rp-text font-semibold\">5,000 Aether</span>\n                            </div>\n                            <p className=\"text-rp-text mb-1 text-2xl font-bold\">$39.99</p>\n                            <p className=\"text-rp-foam mb-2 text-xs\">Save 20%</p>\n                            <Button\n                                onClick={handleTopUp}\n                                className=\"bg-rp-rose hover:bg-rp-rose/80 w-full\"\n                            >\n                                Purchase\n                            </Button>\n                        </div>\n\n                        {/* Credit Pack 3 */}\n                        <div className=\"bg-rp-overlay hover:border-rp-gold group cursor-pointer rounded-xl border border-transparent p-4 transition-all\">\n                            <div className=\"mb-2 flex items-center gap-2\">\n                                <IconCoins size={20} className=\"text-rp-rose\" />\n                                <span className=\"text-rp-text font-semibold\">10,000 Aether</span>\n                            </div>\n                            <p className=\"text-rp-text mb-1 text-2xl font-bold\">$69.99</p>\n                            <p className=\"text-rp-gold mb-2 text-xs\">Save 30%</p>\n                            <Button\n                                onClick={handleTopUp}\n                                className=\"bg-rp-gold hover:bg-rp-gold/80 w-full text-black\"\n                            >\n                                Purchase\n                            </Button>\n                        </div>\n                    </div>\n\n                    <div className=\"border-rp-highlight-med mt-6 flex items-center gap-2 border-t pt-4\">\n                        <IconCreditCard size={16} className=\"text-rp-muted\" />\n                        <p className=\"text-rp-muted text-sm\">\n                            Secure payment powered by Stripe\n                        </p>\n                    </div>\n                </div>\n\n                {/* Transaction History (Placeholder) */}\n                <div className=\"bg-rp-surface border-rp-highlight-med mt-6 rounded-2xl border p-6\">\n                    <h2 className={`${TYPOGRAPHY.heading.h2} text-rp-text mb-4`}>\n                        Recent Transactions\n                    </h2>\n                    <p className=\"text-rp-muted text-center py-8\">\n                        No transactions yet\n                    </p>\n                </div>\n            </div>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/app/[locale]/[workspaceid]/chat-v2/page.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":56,"column":14,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":56,"endColumn":50,"fix":{"range":[1727,1751],"text":"bg-rp-base h-full w-full"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-full, w-full' could be replaced by the 'size-full' shorthand!","line":56,"column":14,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":56,"endColumn":50,"fix":{"range":[1727,1751],"text":"size-full bg-rp-base"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":58,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":58,"endColumn":86,"fix":{"range":[1815,1871],"text":"bg-rp-gold/20 text-rp-gold px-4 py-2 text-center text-sm"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":3,"source":"/**\n * Chat v2 Test Page\n * \n * Access via: /[locale]/[workspaceid]/chat-v2\n * This page tests the new modular chat engine\n */\n\n\"use client\"\n\nimport { ChatUIV2 } from '@/components/chat-v2'\nimport { useContext, useEffect, useState } from 'react'\nimport { RemrinContext } from '@/context/context'\nimport { useSearchParams } from 'next/navigation'\nimport { getPersonaById } from '@/db/personas'\nimport { UserTier } from '@/lib/chat-engine/types'\n\nexport default function ChatV2Page() {\n    const searchParams = useSearchParams()\n    const personaId = searchParams.get('persona')\n\n    const { profile } = useContext(RemrinContext)\n\n    const [persona, setPersona] = useState<{\n        id: string\n        name: string\n        image_url?: string\n        system_prompt?: string\n    } | null>(null)\n\n    // Load persona if specified\n    useEffect(() => {\n        async function loadPersona() {\n            if (personaId) {\n                try {\n                    const data = await getPersonaById(personaId)\n                    if (data) {\n                        setPersona({\n                            id: data.id,\n                            name: data.name,\n                            image_url: data.image_url || undefined,\n                            system_prompt: data.system_prompt || undefined\n                        })\n                    }\n                } catch (error) {\n                    console.error('Failed to load persona:', error)\n                }\n            }\n        }\n        loadPersona()\n    }, [personaId])\n\n    // Get user tier from profile (may not exist in all profile types)\n    const userTier = ((profile as any)?.subscription_tier as UserTier) || 'free'\n\n    return (\n        <div className=\"h-full w-full bg-rp-base\">\n            {/* Debug banner */}\n            <div className=\"bg-rp-gold/20 px-4 py-2 text-center text-sm text-rp-gold\">\n                ðŸ§ª Chat Engine v2 Test Mode | Tier: {userTier} |\n                {persona ? ` Persona: ${persona.name}` : ' No persona'}\n            </div>\n\n            {/* Chat UI */}\n            <div className=\"h-[calc(100%-40px)]\">\n                <ChatUIV2\n                    personaId={persona?.id}\n                    personaImage={persona?.image_url}\n                    personaName={persona?.name}\n                    personaSystemPrompt={persona?.system_prompt}\n                    userTier={userTier}\n                />\n            </div>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/app/[locale]/[workspaceid]/knowledge/page.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":6,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":6,"endColumn":74,"fix":{"range":[217,261],"text":"mx-auto max-w-7xl px-4 py-12 sm:px-6 lg:px-8"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import { MemoryVault } from '@/components/knowledge/MemoryVault';\n\nexport default function KnowledgeVaultPage() {\n    return (\n        <div className=\"flex-1 overflow-y-auto bg-[#0a0a0a]\">\n            <div className=\"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8\">\n                <MemoryVault />\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/app/[locale]/[workspaceid]/layout.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'router'. Either include it or remove the dependency array.","line":154,"column":6,"nodeType":"ArrayExpression","endLine":154,"endColumn":187,"suggestions":[{"desc":"Update the dependencies array to be: [router, searchParams, setAssistantImages, setAssistants, setChatSettings, setChats, setCollections, setFiles, setFolders, setModels, setPresets, setPrompts, setSelectedWorkspace, setTools]","fix":{"range":[4805,4986],"text":"[router, searchParams, setAssistantImages, setAssistants, setChatSettings, setChats, setCollections, setFiles, setFolders, setModels, setPresets, setPrompts, setSelectedWorkspace, setTools]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\n\nimport { Dashboard } from \"@/components/ui/dashboard\"\nimport { RemrinContext } from \"@/context/context\"\nimport { getAssistantWorkspacesByWorkspaceId } from \"@/db/assistants\"\nimport { getChatsByWorkspaceId } from \"@/db/chats\"\nimport { getCollectionWorkspacesByWorkspaceId } from \"@/db/collections\"\nimport { getFileWorkspacesByWorkspaceId } from \"@/db/files\"\nimport { getFoldersByWorkspaceId } from \"@/db/folders\"\nimport { getModelWorkspacesByWorkspaceId } from \"@/db/models\"\nimport { getPresetWorkspacesByWorkspaceId } from \"@/db/presets\"\nimport { getPromptWorkspacesByWorkspaceId } from \"@/db/prompts\"\nimport { getAssistantImageFromStorage } from \"@/db/storage/assistant-images\"\nimport { getToolWorkspacesByWorkspaceId } from \"@/db/tools\"\nimport { getWorkspaceById } from \"@/db/workspaces\"\nimport { convertBlobToBase64 } from \"@/lib/blob-to-b64\"\nimport { supabase } from \"@/lib/supabase/browser-client\"\nimport { LLMID } from \"@/types\"\nimport { WelcomeModal } from \"@/components/onboarding/WelcomeModal\"\nimport { useParams, useRouter, useSearchParams } from \"next/navigation\"\nimport { ReactNode, useCallback, useContext, useEffect, useState } from \"react\"\nimport Loading from \"../loading\"\n\ninterface WorkspaceLayoutProps {\n  children: ReactNode\n}\n\nexport default function WorkspaceLayout({ children }: WorkspaceLayoutProps) {\n  const router = useRouter()\n\n  const params = useParams()\n  const searchParams = useSearchParams()\n  const workspaceId = params.workspaceid as string\n\n  const {\n    setChatSettings,\n    setAssistants,\n    setAssistantImages,\n    setChats,\n    setCollections,\n    setFolders,\n    setFiles,\n    setPresets,\n    setPrompts,\n    setTools,\n    setModels,\n    selectedWorkspace,\n    setSelectedWorkspace,\n    setSelectedChat,\n    setChatMessages,\n    setUserInput,\n    setIsGenerating,\n    setFirstTokenReceived,\n    setChatFiles,\n    setChatImages,\n    setNewMessageFiles,\n    setNewMessageImages,\n    setShowFilesDisplay\n  } = useContext(RemrinContext)\n\n  const [loading, setLoading] = useState(true)\n\n  const fetchWorkspaceData = useCallback(async (workspaceId: string) => {\n    setLoading(true)\n\n    let workspace\n    try {\n      workspace = await getWorkspaceById(workspaceId)\n      setSelectedWorkspace(workspace)\n    } catch (e) {\n      console.error(\"Workspace not found, redirecting to home...\")\n      return router.push(\"/\")\n    }\n\n    const assistantData = await getAssistantWorkspacesByWorkspaceId(workspaceId)\n    setAssistants(assistantData.assistants)\n\n    for (const assistant of assistantData.assistants) {\n      let url = \"\"\n\n      if (assistant.image_path) {\n        url = (await getAssistantImageFromStorage(assistant.image_path)) || \"\"\n      }\n\n      if (url) {\n        const response = await fetch(url)\n        const blob = await response.blob()\n        const base64 = await convertBlobToBase64(blob)\n\n        setAssistantImages(prev => [\n          ...prev,\n          {\n            assistantId: assistant.id,\n            path: assistant.image_path,\n            base64,\n            url\n          }\n        ])\n      } else {\n        setAssistantImages(prev => [\n          ...prev,\n          {\n            assistantId: assistant.id,\n            path: assistant.image_path,\n            base64: \"\",\n            url\n          }\n        ])\n      }\n    }\n\n    const chats = await getChatsByWorkspaceId(workspaceId)\n    setChats(chats)\n\n    const collectionData =\n      await getCollectionWorkspacesByWorkspaceId(workspaceId)\n    setCollections(collectionData.collections)\n\n    const folders = await getFoldersByWorkspaceId(workspaceId)\n    setFolders(folders)\n\n    const fileData = await getFileWorkspacesByWorkspaceId(workspaceId)\n    setFiles(fileData.files)\n\n    const presetData = await getPresetWorkspacesByWorkspaceId(workspaceId)\n    setPresets(presetData.presets)\n\n    const promptData = await getPromptWorkspacesByWorkspaceId(workspaceId)\n    setPrompts(promptData.prompts)\n\n    const toolData = await getToolWorkspacesByWorkspaceId(workspaceId)\n    setTools(toolData.tools)\n\n    const modelData = await getModelWorkspacesByWorkspaceId(workspaceId)\n    setModels(modelData.models)\n\n    setChatSettings({\n      model: (searchParams.get(\"model\") ||\n        workspace?.default_model ||\n        \"deepseek-chat\") as LLMID,\n      prompt:\n        workspace?.default_prompt ||\n        \"You are a friendly, helpful AI assistant.\",\n      temperature: workspace?.default_temperature || 0.5,\n      contextLength: workspace?.default_context_length || 4096,\n      includeProfileContext: workspace?.include_profile_context || true,\n      includeWorkspaceInstructions:\n        workspace?.include_workspace_instructions || true,\n      embeddingsProvider:\n        (workspace?.embeddings_provider as \"openai\" | \"local\") || \"openai\"\n    })\n\n    setLoading(false)\n  }, [searchParams, setAssistantImages, setAssistants, setChatSettings, setChats, setCollections, setFiles, setFolders, setModels, setPresets, setPrompts, setSelectedWorkspace, setTools])\n\n  useEffect(() => {\n    ; (async () => {\n      const session = (await supabase.auth.getSession()).data.session\n\n      if (!session) {\n        return router.push(\"/login\")\n      } else {\n        await fetchWorkspaceData(workspaceId)\n      }\n    })()\n  }, [fetchWorkspaceData, router, workspaceId])\n\n  useEffect(() => {\n    ; (async () => await fetchWorkspaceData(workspaceId))()\n\n    setUserInput(\"\")\n    setChatMessages([])\n    setSelectedChat(null)\n\n    setIsGenerating(false)\n    setFirstTokenReceived(false)\n\n    setChatFiles([])\n    setChatImages([])\n    setNewMessageFiles([])\n    setNewMessageImages([])\n    setShowFilesDisplay(false)\n  }, [\n    fetchWorkspaceData,\n    setChatFiles,\n    setChatImages,\n    setChatMessages,\n    setFirstTokenReceived,\n    setIsGenerating,\n    setNewMessageFiles,\n    setNewMessageImages,\n    setSelectedChat,\n    setShowFilesDisplay,\n    setUserInput,\n    workspaceId\n  ])\n\n  if (loading) {\n    return <Loading />\n  }\n\n  return (\n    <Dashboard>\n      <WelcomeModal />\n      {children}\n    </Dashboard>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/app/[locale]/admin/analytics/page.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":24,"column":27,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":24,"endColumn":100,"fix":{"range":[683,744],"text":"bg-rp-highlight-low h-[300px] w-full animate-pulse rounded-lg"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":28,"column":27,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":28,"endColumn":100,"fix":{"range":[910,971],"text":"bg-rp-highlight-low h-[300px] w-full animate-pulse rounded-lg"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":94,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":94,"endColumn":90,"fix":{"range":[2703,2759],"text":"bg-rp-base flex min-h-screen items-center justify-center"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":96,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":96,"endColumn":127,"fix":{"range":[2873,2958],"text":"border-rp-highlight-med border-t-rp-iris h-12 w-12 animate-spin rounded-full border-4"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-12, w-12' could be replaced by the 'size-12' shorthand!","line":96,"column":30,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":96,"endColumn":127,"fix":{"range":[2873,2958],"text":"size-12 animate-spin rounded-full border-4 border-rp-highlight-med border-t-rp-iris"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":106,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":106,"endColumn":72,"fix":{"range":[3239,3281],"text":"bg-rp-base text-rp-text min-h-screen pb-20"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":108,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":108,"endColumn":128,"fix":{"range":[3350,3441],"text":"border-rp-highlight-med bg-rp-base/80 sticky top-0 z-10 border-b px-6 py-4 backdrop-blur-md"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":109,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":109,"endColumn":89,"fix":{"range":[3480,3531],"text":"mx-auto flex max-w-7xl items-center justify-between"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":113,"column":33,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":113,"endColumn":120,"fix":{"range":[3723,3798],"text":"text-rp-subtle hover:text-rp-text flex items-center gap-2 transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":118,"column":34,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":118,"endColumn":74,"fix":{"range":[4007,4035],"text":"bg-rp-highlight-med h-6 w-px"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":119,"column":33,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":119,"endColumn":86,"fix":{"range":[4083,4124],"text":"flex items-center gap-2 text-xl font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":126,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":126,"endColumn":201,"fix":{"range":[4439,4599],"text":"bg-rp-surface border-rp-highlight-med hover:bg-rp-overlay flex items-center gap-2 rounded-lg border px-4 py-2 text-sm font-medium transition-all active:scale-95"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":134,"column":23,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":134,"endColumn":98,"fix":{"range":[4880,4943],"text":"animate-in fade-in mx-auto max-w-7xl space-y-8 p-6 duration-500"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":136,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":136,"endColumn":105,"fix":{"range":[5018,5081],"text":"border-rp-love bg-rp-love/10 text-rp-love rounded-lg border p-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":194,"column":33,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":194,"endColumn":91,"fix":{"range":[7860,7906],"text":"flex items-center gap-2 px-1 text-lg font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":203,"column":33,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":203,"endColumn":91,"fix":{"range":[8355,8401],"text":"flex items-center gap-2 px-1 text-lg font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":213,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":213,"endColumn":65,"fix":{"range":[8877,8900],"text":"space-y-4 lg:col-span-1"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":214,"column":33,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":214,"endColumn":91,"fix":{"range":[8946,8992],"text":"flex items-center gap-2 px-1 text-lg font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":218,"column":34,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":218,"endColumn":127,"fix":{"range":[9208,9289],"text":"border-rp-highlight-med bg-rp-surface overflow-hidden rounded-xl border shadow-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":219,"column":38,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":219,"endColumn":82,"fix":{"range":[9340,9372],"text":"divide-rp-highlight-low divide-y"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":221,"column":60,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":221,"endColumn":140,"fix":{"range":[9516,9584],"text":"hover:bg-rp-overlay/50 flex items-center gap-4 p-4 transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":222,"column":50,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":222,"endColumn":116,"fix":{"range":[9647,9701],"text":"text-rp-subtle w-8 flex-shrink-0 text-center font-bold"}},{"ruleId":"tailwindcss/migration-from-tailwind-2","severity":1,"message":"Classname 'flex-shrink-0' should be updated to 'shrink-0' in Tailwind CSS v3!","line":222,"column":50,"nodeType":"JSXAttribute","messageId":"classnameChanged","endLine":222,"endColumn":116,"fix":{"range":[9647,9701],"text":"shrink-0 w-8 text-center font-bold text-rp-subtle"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":225,"column":50,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":225,"endColumn":151,"fix":{"range":[9872,9961],"text":"border-rp-highlight-med bg-rp-base relative h-10 w-10 overflow-hidden rounded-full border"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-10, w-10' could be replaced by the 'size-10' shorthand!","line":225,"column":50,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":225,"endColumn":151,"fix":{"range":[9872,9961],"text":"relative size-10 overflow-hidden rounded-full border border-rp-highlight-med bg-rp-base"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":235,"column":58,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":235,"endColumn":150,"fix":{"range":[10620,10700],"text":"bg-rp-highlight-low text-rp-muted flex h-full w-full items-center justify-center"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-full, w-full' could be replaced by the 'size-full' shorthand!","line":235,"column":58,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":235,"endColumn":150,"fix":{"range":[10620,10700],"text":"flex size-full items-center justify-center bg-rp-highlight-low text-rp-muted"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":240,"column":50,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":240,"endColumn":76,"fix":{"range":[10995,11009],"text":"min-w-0 flex-1"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":241,"column":54,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":241,"endColumn":97,"fix":{"range":[11076,11107],"text":"text-rp-text truncate font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":242,"column":54,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":242,"endColumn":87,"fix":{"range":[11191,11212],"text":"text-rp-muted text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":247,"column":46,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":247,"endColumn":102,"fix":{"range":[11540,11584],"text":"text-rp-muted p-8 text-center text-sm italic"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":254,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":254,"endColumn":65,"fix":{"range":[11851,11874],"text":"space-y-4 lg:col-span-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":255,"column":33,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":255,"endColumn":91,"fix":{"range":[11920,11966],"text":"flex items-center gap-2 px-1 text-lg font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":259,"column":34,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":259,"endColumn":127,"fix":{"range":[12185,12266],"text":"border-rp-highlight-med bg-rp-surface overflow-hidden rounded-xl border shadow-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":260,"column":38,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":260,"endColumn":129,"fix":{"range":[12317,12396],"text":"divide-rp-highlight-low custom-scrollbar max-h-[500px] divide-y overflow-y-auto"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":262,"column":54,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":262,"endColumn":110,"fix":{"range":[12544,12588],"text":"hover:bg-rp-overlay/30 p-4 transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":263,"column":50,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":263,"endColumn":99,"fix":{"range":[12651,12688],"text":"mb-1 flex items-start justify-between"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":265,"column":59,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":265,"endColumn":101,"fix":{"range":[12850,12880],"text":"text-rp-iris text-sm font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":267,"column":59,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":267,"endColumn":101,"fix":{"range":[13107,13137],"text":"text-rp-pine text-sm font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":269,"column":55,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":269,"endColumn":92,"fix":{"range":[13286,13311],"text":"text-rp-muted text-[10px]"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":273,"column":48,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":273,"endColumn":102,"fix":{"range":[13625,13667],"text":"text-rp-subtle line-clamp-2 text-sm italic"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":279,"column":46,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":279,"endColumn":95,"fix":{"range":[14043,14080],"text":"text-rp-muted p-12 text-center italic"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":293,"column":14,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":293,"endColumn":146,"fix":{"range":[14545,14665],"text":"border-rp-highlight-med bg-rp-surface rounded-2xl border p-6 shadow-sm transition-all hover:scale-[1.02] hover:shadow-md"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":296,"column":24,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":296,"endColumn":99,"fix":{"range":[14788,14851],"text":"text-rp-muted mb-1 text-sm font-medium uppercase tracking-wider"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":297,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":297,"endColumn":84,"fix":{"range":[14900,14947],"text":"text-rp-text text-3xl font-black tracking-tight"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":45,"fixableErrorCount":0,"fixableWarningCount":45,"source":"\"use client\"\n\nimport React, { useEffect, useState } from 'react'\nimport Link from 'next/link'\nimport {\n    IconArrowLeft,\n    IconChartLine,\n    IconUsers,\n    IconMessage,\n    IconTrophy,\n    IconActivity,\n    IconRefresh,\n    IconSparkles,\n    IconDiamond,\n    IconStar\n} from '@tabler/icons-react'\nimport Image from \"next/image\"\nimport { AdminPasswordGate } from '@/components/admin/AdminPasswordGate'\nimport dynamic from 'next/dynamic'\n// import { MessagesChart, CategoryChart } from '@/components/admin/AnalyticsCharts'\n\nconst MessagesChart = dynamic(\n    () => import('@/components/admin/AnalyticsCharts').then((mod) => mod.MessagesChart),\n    { loading: () => <div className=\"h-[300px] w-full animate-pulse rounded-lg bg-rp-highlight-low\" /> }\n)\nconst CategoryChart = dynamic(\n    () => import('@/components/admin/AnalyticsCharts').then((mod) => mod.CategoryChart),\n    { loading: () => <div className=\"h-[300px] w-full animate-pulse rounded-lg bg-rp-highlight-low\" /> }\n)\nimport { cn } from '@/lib/utils'\n\ninterface AnalyticsData {\n    metrics: {\n        totalChats: number\n        totalMessages: number\n        activeUsers: number\n        economy: {\n            totalSummons: number\n            totalAetherSpent: number\n            legendaryCount: number\n        }\n    }\n    topSouls: {\n        id: string\n        name: string\n        image: string\n        chats: number\n    }[]\n    recentActivity: {\n        content: string\n        timestamp: string\n        username: string\n        soulName: string\n    }[]\n    charts: {\n        messagesPerDay: { date: string, count: number }[]\n        categoryDistribution: { name: string, value: number }[]\n    }\n}\n\nexport default function AdminAnalyticsPage() {\n    const [data, setData] = useState<AnalyticsData | null>(null)\n    const [loading, setLoading] = useState(true)\n    const [error, setError] = useState<string | null>(null)\n\n    useEffect(() => {\n        fetchAnalytics()\n    }, [])\n\n    async function fetchAnalytics() {\n        setLoading(true)\n        setError(null)\n        try {\n            const adminPassword = sessionStorage.getItem(\"admin_password\") || \"\"\n\n            const response = await fetch('/api/admin/analytics', {\n                headers: {\n                    'x-admin-password': adminPassword\n                }\n            })\n            if (!response.ok) throw new Error('Failed to fetch analytics data')\n            const result = await response.json()\n            setData(result)\n        } catch (err: any) {\n            setError(err.message)\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    if (loading && !data) {\n        return (\n            <AdminPasswordGate>\n                <div className=\"flex min-h-screen items-center justify-center bg-rp-base\">\n                    <div className=\"flex flex-col items-center gap-4\">\n                        <div className=\"h-12 w-12 animate-spin rounded-full border-4 border-rp-highlight-med border-t-rp-iris\" />\n                        <p className=\"text-rp-muted animate-pulse font-medium\">Crunching usage data...</p>\n                    </div>\n                </div>\n            </AdminPasswordGate>\n        )\n    }\n\n    return (\n        <AdminPasswordGate>\n            <div className=\"min-h-screen bg-rp-base text-rp-text pb-20\">\n                {/* Header */}\n                <header className=\"sticky top-0 z-10 border-b border-rp-highlight-med bg-rp-base/80 px-6 py-4 backdrop-blur-md\">\n                    <div className=\"flex items-center justify-between mx-auto max-w-7xl\">\n                        <div className=\"flex items-center gap-4\">\n                            <Link\n                                href=\"/admin\"\n                                className=\"flex items-center gap-2 text-rp-subtle transition-colors hover:text-rp-text\"\n                            >\n                                <IconArrowLeft size={20} />\n                                Back\n                            </Link>\n                            <div className=\"h-6 w-px bg-rp-highlight-med\" />\n                            <h1 className=\"text-xl font-bold flex items-center gap-2\">\n                                <IconChartLine className=\"text-rp-iris\" />\n                                Usage Analytics\n                            </h1>\n                        </div>\n                        <button\n                            onClick={fetchAnalytics}\n                            className=\"flex items-center gap-2 rounded-lg bg-rp-surface px-4 py-2 text-sm font-medium border border-rp-highlight-med transition-all hover:bg-rp-overlay active:scale-95\"\n                        >\n                            <IconRefresh size={16} className={loading ? \"animate-spin\" : \"\"} />\n                            Refresh\n                        </button>\n                    </div>\n                </header>\n\n                <main className=\"mx-auto max-w-7xl p-6 space-y-8 animate-in fade-in duration-500\">\n                    {error && (\n                        <div className=\"rounded-lg border border-rp-love bg-rp-love/10 p-4 text-rp-love\">\n                            Error: {error}\n                        </div>\n                    )}\n\n                    {/* Stats Overview */}\n                    <div className=\"grid gap-6 md:grid-cols-3\">\n                        <StatCard\n                            title=\"Total Chats\"\n                            value={data?.metrics.totalChats.toLocaleString() || '0'}\n                            icon={<IconMessage size={32} />}\n                            color=\"text-rp-iris\"\n                            bgColor=\"bg-rp-iris/10\"\n                        />\n                        <StatCard\n                            title=\"Total Messages\"\n                            value={data?.metrics.totalMessages.toLocaleString() || '0'}\n                            icon={<IconActivity size={32} />}\n                            color=\"text-rp-pine\"\n                            bgColor=\"bg-rp-pine/10\"\n                        />\n                        <StatCard\n                            title=\"Active Users (30d)\"\n                            value={data?.metrics.activeUsers.toLocaleString() || '0'}\n                            icon={<IconUsers size={32} />}\n                            color=\"text-rp-rose\"\n                            bgColor=\"bg-rp-rose/10\"\n                        />\n                    </div>\n\n                    {/* Economy Stats */}\n                    <div className=\"grid gap-6 md:grid-cols-3\">\n                        <StatCard\n                            title=\"Total Summons\"\n                            value={data?.metrics.economy?.totalSummons.toLocaleString() || '0'}\n                            icon={<IconSparkles size={32} />}\n                            color=\"text-rp-love\"\n                            bgColor=\"bg-rp-love/10\"\n                        />\n                        <StatCard\n                            title=\"Aether Burnt\"\n                            value={data?.metrics.economy?.totalAetherSpent.toLocaleString() || '0'}\n                            icon={<IconDiamond size={32} />}\n                            color=\"text-rp-gold\"\n                            bgColor=\"bg-rp-gold/10\"\n                        />\n                        <StatCard\n                            title=\"Legendaries Found\"\n                            value={data?.metrics.economy?.legendaryCount.toLocaleString() || '0'}\n                            icon={<IconStar size={32} />}\n                            color=\"text-rp-iris\"\n                            bgColor=\"bg-rp-iris/10\"\n                        />\n                    </div>\n\n                    <div className=\"grid gap-8 lg:grid-cols-2\">\n                        {/* Messages History Chart */}\n                        <div className=\"space-y-4\">\n                            <h2 className=\"text-lg font-bold flex items-center gap-2 px-1\">\n                                <IconActivity className=\"text-rp-iris\" size={20} />\n                                Message Volume (Last 30 Days)\n                            </h2>\n                            <MessagesChart data={data?.charts.messagesPerDay || []} />\n                        </div>\n\n                        {/* Category Popularity */}\n                        <div className=\"space-y-4\">\n                            <h2 className=\"text-lg font-bold flex items-center gap-2 px-1\">\n                                <IconTrophy className=\"text-rp-gold\" size={20} />\n                                Top Categories\n                            </h2>\n                            <CategoryChart data={data?.charts.categoryDistribution || []} />\n                        </div>\n                    </div>\n\n                    <div className=\"grid gap-8 lg:grid-cols-3\">\n                        {/* Top Souls Leaderboard */}\n                        <div className=\"lg:col-span-1 space-y-4\">\n                            <h2 className=\"text-lg font-bold flex items-center gap-2 px-1\">\n                                <IconTrophy className=\"text-rp-gold\" size={20} />\n                                Top Performing Souls\n                            </h2>\n                            <div className=\"rounded-xl border border-rp-highlight-med bg-rp-surface overflow-hidden shadow-sm\">\n                                <div className=\"divide-y divide-rp-highlight-low\">\n                                    {data?.topSouls.map((soul, i) => (\n                                        <div key={soul.id} className=\"flex items-center gap-4 p-4 hover:bg-rp-overlay/50 transition-colors\">\n                                            <div className=\"flex-shrink-0 w-8 text-center font-bold text-rp-subtle\">\n                                                #{i + 1}\n                                            </div>\n                                            <div className=\"relative h-10 w-10 overflow-hidden rounded-full border border-rp-highlight-med bg-rp-base\">\n                                                {soul.image ? (\n                                                    <Image\n                                                        src={soul.image}\n                                                        alt={soul.name}\n                                                        className=\"object-cover\"\n                                                        fill\n                                                        sizes=\"40px\"\n                                                    />\n                                                ) : (\n                                                    <div className=\"flex h-full w-full items-center justify-center bg-rp-highlight-low text-rp-muted\">\n                                                        {soul.name[0]}\n                                                    </div>\n                                                )}\n                                            </div>\n                                            <div className=\"flex-1 min-w-0\">\n                                                <div className=\"font-bold text-rp-text truncate\">{soul.name}</div>\n                                                <div className=\"text-xs text-rp-muted\">{soul.chats.toLocaleString()} chats</div>\n                                            </div>\n                                        </div>\n                                    ))}\n                                    {(!data?.topSouls || data.topSouls.length === 0) && (\n                                        <div className=\"p-8 text-center text-rp-muted italic text-sm\">No soul data found</div>\n                                    )}\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Recent Activity Stream */}\n                        <div className=\"lg:col-span-2 space-y-4\">\n                            <h2 className=\"text-lg font-bold flex items-center gap-2 px-1\">\n                                <IconActivity className=\"text-rp-rose\" size={20} />\n                                Live Interaction Feed\n                            </h2>\n                            <div className=\"rounded-xl border border-rp-highlight-med bg-rp-surface overflow-hidden shadow-sm\">\n                                <div className=\"divide-y divide-rp-highlight-low max-h-[500px] overflow-y-auto custom-scrollbar\">\n                                    {data?.recentActivity.map((activity, i) => (\n                                        <div key={i} className=\"p-4 hover:bg-rp-overlay/30 transition-colors\">\n                                            <div className=\"flex justify-between items-start mb-1\">\n                                                <div className=\"flex items-center gap-2\">\n                                                    <span className=\"font-bold text-rp-iris text-sm\">{activity.username}</span>\n                                                    <span className=\"text-rp-muted text-[10px] uppercase\">interacted with</span>\n                                                    <span className=\"font-bold text-rp-pine text-sm\">{activity.soulName}</span>\n                                                </div>\n                                                <span className=\"text-[10px] text-rp-muted\">\n                                                    {new Date(activity.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                                                </span>\n                                            </div>\n                                            <p className=\"text-sm text-rp-subtle line-clamp-2 italic\">\n                                                &quot;{activity.content}&quot;\n                                            </p>\n                                        </div>\n                                    ))}\n                                    {(!data?.recentActivity || data.recentActivity.length === 0) && (\n                                        <div className=\"p-12 text-center text-rp-muted italic\">No recent activity</div>\n                                    )}\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </main>\n            </div>\n        </AdminPasswordGate>\n    )\n}\n\nfunction StatCard({ title, value, icon, color, bgColor }: { title: string, value: string, icon: React.ReactNode, color: string, bgColor: string }) {\n    return (\n        <div className=\"rounded-2xl border border-rp-highlight-med bg-rp-surface p-6 shadow-sm transition-all hover:shadow-md hover:scale-[1.02]\">\n            <div className=\"flex items-center justify-between\">\n                <div>\n                    <p className=\"text-sm font-medium text-rp-muted uppercase tracking-wider mb-1\">{title}</p>\n                    <h3 className=\"text-3xl font-black text-rp-text tracking-tight\">{value}</h3>\n                </div>\n                <div className={cn(\"rounded-xl p-3\", bgColor, color)}>\n                    {icon}\n                </div>\n            </div>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/app/[locale]/admin/chat-config/page.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":134,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":134,"endColumn":90,"fix":{"range":[3677,3733],"text":"bg-rp-base flex min-h-screen items-center justify-center"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":136,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":136,"endColumn":127,"fix":{"range":[3847,3932],"text":"border-rp-highlight-med border-t-rp-gold h-12 w-12 animate-spin rounded-full border-4"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-12, w-12' could be replaced by the 'size-12' shorthand!","line":136,"column":30,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":136,"endColumn":127,"fix":{"range":[3847,3932],"text":"size-12 animate-spin rounded-full border-4 border-rp-highlight-med border-t-rp-gold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":146,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":146,"endColumn":72,"fix":{"range":[4188,4230],"text":"bg-rp-base text-rp-text min-h-screen pb-20"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":148,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":148,"endColumn":128,"fix":{"range":[4299,4390],"text":"border-rp-highlight-med bg-rp-base/80 sticky top-0 z-10 border-b px-6 py-4 backdrop-blur-md"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":149,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":149,"endColumn":89,"fix":{"range":[4429,4480],"text":"mx-auto flex max-w-6xl items-center justify-between"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":153,"column":33,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":153,"endColumn":120,"fix":{"range":[4672,4747],"text":"text-rp-subtle hover:text-rp-text flex items-center gap-2 transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":158,"column":34,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":158,"endColumn":74,"fix":{"range":[4956,4984],"text":"bg-rp-highlight-med h-6 w-px"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":159,"column":33,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":159,"endColumn":90,"fix":{"range":[5032,5077],"text":"flex items-center gap-2 text-xl font-semibold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":166,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":166,"endColumn":190,"fix":{"range":[5365,5514],"text":"bg-rp-gold text-rp-base shadow-rp-gold/20 rounded-lg px-6 py-2 font-bold shadow-lg transition-all hover:scale-105 active:scale-95 disabled:opacity-50"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":174,"column":23,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":174,"endColumn":67,"fix":{"range":[5767,5799],"text":"mx-auto max-w-6xl space-y-12 p-6"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":176,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":176,"endColumn":148,"fix":{"range":[5874,5980],"text":"border-rp-love bg-rp-love/10 animate-in fade-in flex items-center gap-3 rounded-lg border p-4 duration-300"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":184,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":184,"endColumn":108,"fix":{"range":[6309,6375],"text":"border-rp-highlight-med mb-6 flex items-center gap-3 border-b pb-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":206,"column":53,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":206,"endColumn":106,"fix":{"range":[7821,7862],"text":"flex items-center gap-2 text-lg font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":208,"column":73,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":208,"endColumn":130,"fix":{"range":[8016,8061],"text":"bg-rp-foam h-2 w-2 animate-pulse rounded-full"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-2, w-2' could be replaced by the 'size-2' shorthand!","line":208,"column":73,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":208,"endColumn":130,"fix":{"range":[8016,8061],"text":"size-2 rounded-full bg-rp-foam animate-pulse"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":210,"column":52,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":210,"endColumn":100,"fix":{"range":[8183,8219],"text":"text-rp-muted mt-1 font-mono text-xs"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-4, w-4' could be replaced by the 'size-4' shorthand!","line":220,"column":64,"nodeType":"CallExpression","messageId":"shorthandCandidateDetected","endLine":223,"endColumn":54,"fix":{"range":[9012,9085],"text":"inline-block size-4 transform rounded-full bg-white transition-transform"}},{"ruleId":"tailwindcss/migration-from-tailwind-2","severity":1,"message":"Classname 'transform' is not needed in Tailwind CSS v3!","line":220,"column":64,"nodeType":"CallExpression","messageId":"classnameNotNeeded","endLine":223,"endColumn":54,"fix":{"range":[9012,9085],"text":"inline-block h-4 w-4 rounded-full bg-white transition-transform"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":227,"column":46,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":227,"endColumn":124,"fix":{"range":[9453,9519],"text":"border-rp-highlight-low mt-4 flex items-center gap-2 border-t pt-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":229,"column":54,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":229,"endColumn":126,"fix":{"range":[9642,9702],"text":"text-rp-foam flex items-center gap-1.5 text-xs font-semibold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":234,"column":54,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":234,"endColumn":126,"fix":{"range":[10021,10081],"text":"text-rp-love flex items-center gap-1.5 text-xs font-semibold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":248,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":248,"endColumn":108,"fix":{"range":[10661,10727],"text":"border-rp-highlight-med mb-6 flex items-center gap-3 border-b pb-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":253,"column":34,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":253,"endColumn":105,"fix":{"range":[11041,11100],"text":"border-rp-highlight-med bg-rp-surface rounded-xl border p-6"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":254,"column":38,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":254,"endColumn":88,"fix":{"range":[11151,11189],"text":"mb-2 flex items-center justify-between"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":256,"column":54,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":259,"endColumn":38,"fix":{"range":[11379,11445],"text":"rounded px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":263,"column":36,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":263,"endColumn":75,"fix":{"range":[11849,11876],"text":"text-rp-subtle mb-4 text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":264,"column":38,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":264,"endColumn":105,"fix":{"range":[11988,12043],"text":"text-rp-muted flex items-center gap-2 font-mono text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":269,"column":34,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":269,"endColumn":105,"fix":{"range":[12335,12394],"text":"border-rp-highlight-med bg-rp-surface rounded-xl border p-6"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":270,"column":38,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":270,"endColumn":88,"fix":{"range":[12445,12483],"text":"mb-2 flex items-center justify-between"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":272,"column":43,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":272,"endColumn":148,"fix":{"range":[12625,12718],"text":"bg-rp-foam/20 text-rp-foam rounded px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":276,"column":36,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":276,"endColumn":75,"fix":{"range":[12897,12924],"text":"text-rp-subtle mb-4 text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":277,"column":38,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":277,"endColumn":105,"fix":{"range":[13041,13096],"text":"text-rp-muted flex items-center gap-2 font-mono text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":295,"column":37,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":295,"endColumn":108,"fix":{"range":[13985,14044],"text":"border-rp-highlight-med bg-rp-surface rounded-xl border p-6"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":302,"column":49,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":302,"endColumn":118,"fix":{"range":[14527,14584],"text":"bg-rp-overlay text-rp-text rounded-full px-3 py-1 text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":308,"column":42,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":308,"endColumn":80,"fix":{"range":[14907,14933],"text":"text-rp-muted mt-3 text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":320,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":320,"endColumn":108,"fix":{"range":[15528,15594],"text":"border-rp-highlight-med mb-6 flex items-center gap-3 border-b pb-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":324,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":324,"endColumn":128,"fix":{"range":[15830,15916],"text":"border-rp-highlight-med bg-rp-surface rounded-xl border bg-opacity-50 p-8 shadow-inner"}},{"ruleId":"tailwindcss/migration-from-tailwind-2","severity":1,"message":"Classname 'bg-opacity-50' should be replaced by an opacity suffix (eg. '/50')","line":324,"column":30,"nodeType":"JSXAttribute","messageId":"classnameOpacityDeprecated","endLine":324,"endColumn":128},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":333,"column":56,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":333,"endColumn":122,"fix":{"range":[16500,16554],"text":"text-rp-text flex items-center gap-2 text-sm font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":337,"column":55,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":337,"endColumn":102,"fix":{"range":[16856,16891],"text":"text-rp-muted font-mono text-[10px]"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":344,"column":49,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":344,"endColumn":224,"fix":{"range":[17440,17603],"text":"border-rp-highlight-med bg-rp-base ring-rp-iris/30 focus:border-rp-iris w-full rounded-lg border px-4 py-2.5 text-sm transition-all focus:outline-none focus:ring-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":350,"column":38,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":350,"endColumn":107,"fix":{"range":[17822,17879],"text":"border-rp-highlight-low flex flex-col gap-2 border-t pt-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":352,"column":48,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":352,"endColumn":90,"fix":{"range":[18028,18058],"text":"text-rp-text text-sm font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":353,"column":47,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":353,"endColumn":94,"fix":{"range":[18140,18175],"text":"text-rp-muted font-mono text-[10px]"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":360,"column":41,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":360,"endColumn":216,"fix":{"range":[18707,18870],"text":"border-rp-highlight-med bg-rp-base ring-rp-iris/30 focus:border-rp-iris w-full rounded-lg border px-4 py-2.5 text-sm transition-all focus:outline-none focus:ring-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":364,"column":34,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":364,"endColumn":156,"fix":{"range":[19029,19139],"text":"bg-rp-iris/5 border-rp-iris/20 text-rp-subtle mt-8 flex items-start gap-3 rounded-lg border p-4 text-xs italic"}},{"ruleId":"tailwindcss/migration-from-tailwind-2","severity":1,"message":"Classname 'flex-shrink-0' should be updated to 'shrink-0' in Tailwind CSS v3!","line":365,"column":60,"nodeType":"JSXAttribute","messageId":"classnameChanged","endLine":365,"endColumn":98,"fix":{"range":[19212,19238],"text":"text-rp-iris shrink-0"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":48,"fixableErrorCount":0,"fixableWarningCount":47,"source":"/**\n * Chat Engine Configuration - Admin Page\n * \n * Manage LLM providers, search providers, tier configuration, and API keys\n */\n\n\"use client\"\n\nimport React, { useEffect, useState } from 'react'\nimport Link from 'next/link'\nimport {\n    IconArrowLeft,\n    IconRobot,\n    IconSearch,\n    IconDiamond,\n    IconKey,\n    IconCheck,\n    IconX,\n    IconAlertCircle\n} from '@tabler/icons-react'\nimport { AdminPasswordGate } from '@/components/admin/AdminPasswordGate'\nimport { PROVIDER_CONFIGS, TIER_CONFIGS, ProviderId, UserTier } from '@/lib/chat-engine/types'\nimport { cn } from '@/lib/utils'\n\ninterface ProviderStatus {\n    id: ProviderId\n    name: string\n    enabled: boolean\n    hasApiKey: boolean\n}\n\ninterface ConfigData {\n    providers: Record<ProviderId, boolean>\n    searchProviders: {\n        tavily: boolean\n        duckduckgo: boolean\n    }\n    tierProviders: Record<UserTier, ProviderId[]>\n    apiKeys: Record<string, boolean>\n}\n\nexport default function ChatConfigPage() {\n    const [config, setConfig] = useState<ConfigData | null>(null)\n    const [newKeys, setNewKeys] = useState<Record<string, string>>({})\n    const [loading, setLoading] = useState(true)\n    const [saving, setSaving] = useState(false)\n    const [error, setError] = useState<string | null>(null)\n\n    useEffect(() => {\n        loadConfig()\n    }, [])\n\n    async function loadConfig() {\n        setLoading(true)\n        setError(null)\n        try {\n            const response = await fetch('/api/admin/chat-engine-config')\n            if (!response.ok) {\n                throw new Error('Failed to load configuration')\n            }\n            const data = await response.json()\n            setConfig(data)\n        } catch (err: any) {\n            setError(err.message)\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    async function saveConfig() {\n        if (!config) return\n\n        setSaving(true)\n        setError(null)\n        try {\n            const response = await fetch('/api/admin/chat-engine-config', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({\n                    providers: config.providers,\n                    searchProviders: config.searchProviders,\n                    tierProviders: config.tierProviders,\n                    newKeys: newKeys\n                })\n            })\n\n            if (!response.ok) {\n                const result = await response.json()\n                throw new Error(result.error || 'Failed to save configuration')\n            }\n\n            setNewKeys({})\n            alert('Configuration saved successfully!')\n            loadConfig() // Refresh status\n        } catch (err: any) {\n            setError(err.message)\n        } finally {\n            setSaving(false)\n        }\n    }\n\n    function toggleProvider(providerId: string) {\n        if (!config) return\n        setConfig({\n            ...config,\n            providers: {\n                ...config.providers,\n                [providerId]: !config.providers[providerId as ProviderId]\n            }\n        })\n    }\n\n    function toggleSearchProvider(provider: 'tavily' | 'duckduckgo') {\n        if (!config) return\n        setConfig({\n            ...config,\n            searchProviders: {\n                ...config.searchProviders,\n                [provider]: !config.searchProviders[provider]\n            }\n        })\n    }\n\n    function handleKeyChange(envVar: string, value: string) {\n        setNewKeys({\n            ...newKeys,\n            [envVar]: value\n        })\n    }\n\n    if (loading) {\n        return (\n            <AdminPasswordGate>\n                <div className=\"flex min-h-screen items-center justify-center bg-rp-base\">\n                    <div className=\"flex flex-col items-center gap-4\">\n                        <div className=\"h-12 w-12 animate-spin rounded-full border-4 border-rp-highlight-med border-t-rp-gold\" />\n                        <p className=\"text-rp-muted\">Loading configuration...</p>\n                    </div>\n                </div>\n            </AdminPasswordGate>\n        )\n    }\n\n    return (\n        <AdminPasswordGate>\n            <div className=\"min-h-screen bg-rp-base text-rp-text pb-20\">\n                {/* Header */}\n                <header className=\"sticky top-0 z-10 border-b border-rp-highlight-med bg-rp-base/80 px-6 py-4 backdrop-blur-md\">\n                    <div className=\"flex items-center justify-between mx-auto max-w-6xl\">\n                        <div className=\"flex items-center gap-4\">\n                            <Link\n                                href=\"/admin\"\n                                className=\"flex items-center gap-2 text-rp-subtle transition-colors hover:text-rp-text\"\n                            >\n                                <IconArrowLeft size={20} />\n                                Back\n                            </Link>\n                            <div className=\"h-6 w-px bg-rp-highlight-med\" />\n                            <h1 className=\"text-xl font-semibold flex items-center gap-2\">\n                                âš™ï¸ Chat Engine Config\n                            </h1>\n                        </div>\n                        <button\n                            onClick={saveConfig}\n                            disabled={saving}\n                            className=\"rounded-lg bg-rp-gold px-6 py-2 font-bold text-rp-base shadow-lg shadow-rp-gold/20 transition-all hover:scale-105 active:scale-95 disabled:opacity-50\"\n                        >\n                            {saving ? 'Saving...' : 'Save All Changes'}\n                        </button>\n                    </div>\n                </header>\n\n                {/* Content */}\n                <main className=\"mx-auto max-w-6xl p-6 space-y-12\">\n                    {error && (\n                        <div className=\"flex items-center gap-3 rounded-lg border border-rp-love bg-rp-love/10 p-4 animate-in fade-in duration-300\">\n                            <IconAlertCircle size={24} className=\"text-rp-love\" />\n                            <p className=\"text-rp-love\">{error}</p>\n                        </div>\n                    )}\n\n                    {/* LLM Providers Section */}\n                    <section>\n                        <div className=\"mb-6 flex items-center gap-3 border-b border-rp-highlight-med pb-2\">\n                            <IconRobot size={28} className=\"text-rp-iris\" />\n                            <h2 className=\"text-2xl font-bold\">LLM Providers</h2>\n                        </div>\n                        <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n                            {Object.values(PROVIDER_CONFIGS).map((provider) => {\n                                if (provider.id === 'custom') return null\n                                const isEnabled = config?.providers[provider.id] ?? true\n                                const hasKey = config?.apiKeys[provider.apiKeyEnv] ?? false\n\n                                return (\n                                    <div\n                                        key={provider.id}\n                                        className={cn(\n                                            \"rounded-xl border p-6 transition-all duration-300\",\n                                            isEnabled\n                                                ? \"border-rp-highlight-med bg-rp-surface shadow-md\"\n                                                : \"border-rp-overlay bg-rp-overlay/30 grayscale\"\n                                        )}\n                                    >\n                                        <div className=\"mb-4 flex items-start justify-between\">\n                                            <div>\n                                                <h3 className=\"text-lg font-bold flex items-center gap-2\">\n                                                    {provider.name}\n                                                    {isEnabled && <span className=\"h-2 w-2 rounded-full bg-rp-foam animate-pulse\" />}\n                                                </h3>\n                                                <p className=\"text-xs text-rp-muted font-mono mt-1\">{provider.defaultModel}</p>\n                                            </div>\n                                            <button\n                                                onClick={() => toggleProvider(provider.id)}\n                                                className={cn(\n                                                    \"relative inline-flex h-6 w-11 items-center rounded-full transition-colors\",\n                                                    isEnabled ? \"bg-rp-foam\" : \"bg-rp-highlight-med\"\n                                                )}\n                                            >\n                                                <span\n                                                    className={cn(\n                                                        \"inline-block h-4 w-4 transform rounded-full bg-white transition-transform\",\n                                                        isEnabled ? \"translate-x-6\" : \"translate-x-1\"\n                                                    )}\n                                                />\n                                            </button>\n                                        </div>\n                                        <div className=\"flex items-center gap-2 mt-4 pt-4 border-t border-rp-highlight-low\">\n                                            {hasKey ? (\n                                                <div className=\"flex items-center gap-1.5 text-rp-foam text-xs font-semibold\">\n                                                    <IconCheck size={14} />\n                                                    API Key Configured\n                                                </div>\n                                            ) : (\n                                                <div className=\"flex items-center gap-1.5 text-rp-love text-xs font-semibold\">\n                                                    <IconX size={14} />\n                                                    Missing Key\n                                                </div>\n                                            )}\n                                        </div>\n                                    </div>\n                                )\n                            })}\n                        </div>\n                    </section>\n\n                    {/* Search & Capabilities */}\n                    <section>\n                        <div className=\"mb-6 flex items-center gap-3 border-b border-rp-highlight-med pb-2\">\n                            <IconSearch size={28} className=\"text-rp-foam\" />\n                            <h2 className=\"text-2xl font-bold\">Search & Capabilities</h2>\n                        </div>\n                        <div className=\"grid gap-6 md:grid-cols-2\">\n                            <div className=\"rounded-xl border border-rp-highlight-med bg-rp-surface p-6\">\n                                <div className=\"flex items-center justify-between mb-2\">\n                                    <h3 className=\"text-lg font-bold\">Tavily Search</h3>\n                                    <span className={cn(\n                                        \"px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider\",\n                                        config?.searchProviders.tavily ? \"bg-rp-foam/20 text-rp-foam\" : \"bg-rp-muted/20 text-rp-muted\"\n                                    )}>\n                                        {config?.searchProviders.tavily ? \"Active\" : \"Disabled\"}\n                                    </span>\n                                </div>\n                                <p className=\"text-sm text-rp-subtle mb-4\">Advanced AI-powered web search for real-time information.</p>\n                                <div className=\"flex items-center gap-2 text-xs font-mono text-rp-muted\">\n                                    <IconKey size={14} />\n                                    TAVILY_API_KEY: {config?.apiKeys['TAVILY_API_KEY'] ? 'â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢' : 'Not Set'}\n                                </div>\n                            </div>\n                            <div className=\"rounded-xl border border-rp-highlight-med bg-rp-surface p-6\">\n                                <div className=\"flex items-center justify-between mb-2\">\n                                    <h3 className=\"text-lg font-bold\">DuckDuckGo</h3>\n                                    <span className=\"px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider bg-rp-foam/20 text-rp-foam\">\n                                        Active\n                                    </span>\n                                </div>\n                                <p className=\"text-sm text-rp-subtle mb-4\">Privacy-focused free search integration (no API key required).</p>\n                                <div className=\"flex items-center gap-2 text-xs font-mono text-rp-muted\">\n                                    <IconKey size={14} />\n                                    No Key Needed\n                                </div>\n                            </div>\n                        </div>\n                    </section>\n\n                    {/* Tier Configuration Section */}\n                    <section className=\"mb-8\">\n                        <div className=\"mb-4 flex items-center gap-3\">\n                            <IconDiamond size={28} className=\"text-rp-gold\" />\n                            <h2 className=\"text-2xl font-bold\">Tier Configuration</h2>\n                        </div>\n                        <div className=\"space-y-4\">\n                            {Object.entries(TIER_CONFIGS).map(([tier, tierConfig]) => (\n                                <div\n                                    key={tier}\n                                    className=\"rounded-xl border border-rp-highlight-med bg-rp-surface p-6\"\n                                >\n                                    <h3 className=\"mb-3 text-lg font-semibold capitalize\">{tier} Tier</h3>\n                                    <div className=\"flex flex-wrap gap-2\">\n                                        {tierConfig.allowedProviders.map((providerId) => (\n                                            <span\n                                                key={providerId}\n                                                className=\"rounded-full bg-rp-overlay px-3 py-1 text-sm text-rp-text\"\n                                            >\n                                                {PROVIDER_CONFIGS[providerId].name}\n                                            </span>\n                                        ))}\n                                    </div>\n                                    <div className=\"mt-3 text-sm text-rp-muted\">\n                                        Rate Limit: {tierConfig.rateLimitPerHour === -1 ? 'Unlimited' : `${tierConfig.rateLimitPerHour}/hour`}\n                                        {' â€¢ '}\n                                        Max Context: {tierConfig.maxContextLength.toLocaleString()} tokens\n                                    </div>\n                                </div>\n                            ))}\n                        </div>\n                    </section>\n\n                    {/* API Key Management */}\n                    <section>\n                        <div className=\"mb-6 flex items-center gap-3 border-b border-rp-highlight-med pb-2\">\n                            <IconKey size={28} className=\"text-rp-rose\" />\n                            <h2 className=\"text-2xl font-bold\">API Key Management</h2>\n                        </div>\n                        <div className=\"rounded-xl border border-rp-highlight-med bg-rp-surface p-8 shadow-inner bg-opacity-50\">\n                            <div className=\"space-y-6\">\n                                {Object.values(PROVIDER_CONFIGS).map(p => {\n                                    if (!p.apiKeyEnv) return null\n                                    const isSet = config?.apiKeys[p.apiKeyEnv]\n\n                                    return (\n                                        <div key={p.apiKeyEnv} className=\"flex flex-col gap-2\">\n                                            <div className=\"flex items-center justify-between\">\n                                                <label className=\"text-sm font-bold text-rp-text flex items-center gap-2\">\n                                                    {p.name} Key\n                                                    {isSet && <IconCheck size={14} className=\"text-rp-foam\" />}\n                                                </label>\n                                                <span className=\"text-[10px] font-mono text-rp-muted\">{p.apiKeyEnv}</span>\n                                            </div>\n                                            <input\n                                                type=\"password\"\n                                                placeholder={isSet ? \"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢\" : \"Enter API Key\"}\n                                                value={newKeys[p.apiKeyEnv] || ''}\n                                                onChange={(e) => handleKeyChange(p.apiKeyEnv, e.target.value)}\n                                                className=\"w-full rounded-lg border border-rp-highlight-med bg-rp-base px-4 py-2.5 text-sm ring-rp-iris/30 transition-all focus:border-rp-iris focus:outline-none focus:ring-2\"\n                                            />\n                                        </div>\n                                    )\n                                })}\n\n                                <div className=\"flex flex-col gap-2 pt-4 border-t border-rp-highlight-low\">\n                                    <div className=\"flex items-center justify-between\">\n                                        <label className=\"text-sm font-bold text-rp-text\">Tavily API Key</label>\n                                        <span className=\"text-[10px] font-mono text-rp-muted\">TAVILY_API_KEY</span>\n                                    </div>\n                                    <input\n                                        type=\"password\"\n                                        placeholder={config?.apiKeys['TAVILY_API_KEY'] ? \"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢\" : \"Enter API Key\"}\n                                        value={newKeys['TAVILY_API_KEY'] || ''}\n                                        onChange={(e) => handleKeyChange('TAVILY_API_KEY', e.target.value)}\n                                        className=\"w-full rounded-lg border border-rp-highlight-med bg-rp-base px-4 py-2.5 text-sm ring-rp-iris/30 transition-all focus:border-rp-iris focus:outline-none focus:ring-2\"\n                                    />\n                                </div>\n                            </div>\n                            <div className=\"mt-8 flex items-start gap-3 rounded-lg bg-rp-iris/5 p-4 border border-rp-iris/20 text-xs text-rp-subtle italic\">\n                                <IconAlertCircle size={20} className=\"text-rp-iris flex-shrink-0\" />\n                                <p>\n                                    Keys entered here are stored securely in the database and bypass environment variable requirements.\n                                    Visible keys are masked for security. If a key is set in both .env and database, the database key takes precedence.\n                                </p>\n                            </div>\n                        </div>\n                    </section>\n                </main>\n            </div>\n        </AdminPasswordGate>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/app/[locale]/admin/featured/page.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":11,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":11,"endColumn":66,"fix":{"range":[353,389],"text":"bg-rp-base text-rp-text min-h-screen"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":13,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":13,"endColumn":79,"fix":{"range":[458,500],"text":"border-rp-highlight-med border-b px-6 py-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":17,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":17,"endColumn":116,"fix":{"range":[676,751],"text":"text-rp-subtle hover:text-rp-text flex items-center gap-2 transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":22,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":22,"endColumn":70,"fix":{"range":[949,977],"text":"bg-rp-highlight-med h-6 w-px"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":4,"source":"\"use client\"\n\nimport Link from \"next/link\"\nimport { IconArrowLeft } from \"@tabler/icons-react\"\nimport { AdminPasswordGate } from \"@/components/admin/AdminPasswordGate\"\nimport { FeaturedManager } from \"@/components/admin/FeaturedManager\"\n\nexport default function AdminFeaturedPage() {\n    return (\n        <AdminPasswordGate>\n            <div className=\"min-h-screen bg-rp-base text-rp-text\">\n                {/* Header */}\n                <header className=\"border-b border-rp-highlight-med px-6 py-4\">\n                    <div className=\"flex items-center gap-4\">\n                        <Link\n                            href=\"/admin\"\n                            className=\"flex items-center gap-2 text-rp-subtle transition-colors hover:text-rp-text\"\n                        >\n                            <IconArrowLeft size={20} />\n                            Back to Admin\n                        </Link>\n                        <div className=\"h-6 w-px bg-rp-highlight-med\" />\n                        <h1 className=\"text-xl font-semibold\">\n                            â­ Featured Content Manager\n                        </h1>\n                    </div>\n                </header>\n\n                {/* Content */}\n                <main className=\"mx-auto max-w-7xl p-6\">\n                    <div className=\"mb-6\">\n                        <h2 className=\"mb-2 text-2xl font-bold\">Manage Featured Content</h2>\n                        <p className=\"text-rp-subtle\">\n                            Control which Souls appear in the Hero Carousel and Gallery.\n                        </p>\n                    </div>\n\n                    <FeaturedManager />\n                </main>\n            </div>\n        </AdminPasswordGate>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/app/[locale]/admin/llm-config/page.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":77,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":77,"endColumn":122,"fix":{"range":[2434,2522],"text":"w-full max-w-md rounded-2xl border border-purple-500/30 bg-black/40 p-8 backdrop-blur-xl"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":78,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":78,"endColumn":54,"fix":{"range":[2561,2577],"text":"mb-8 text-center"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":79,"column":39,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":79,"endColumn":89,"fix":{"range":[2629,2667],"text":"mx-auto mb-4 h-12 w-12 text-purple-400"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-12, h-12' could be replaced by the 'size-12' shorthand!","line":79,"column":39,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":79,"endColumn":89,"fix":{"range":[2629,2667],"text":"size-12 mx-auto text-purple-400 mb-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":81,"column":28,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":81,"endColumn":58,"fix":{"range":[2803,2821],"text":"mt-2 text-gray-400"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":89,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":89,"endColumn":181,"fix":{"range":[3220,3360],"text":"w-full rounded-lg border border-gray-700 bg-gray-800/50 px-4 py-3 text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none"}},{"ruleId":"tailwindcss/migration-from-tailwind-2","severity":1,"message":"Classname 'placeholder-gray-500' should be updated to 'placeholder:text-gray-500' in Tailwind CSS v3!","line":89,"column":29,"nodeType":"JSXAttribute","messageId":"classnameChanged","endLine":89,"endColumn":181,"fix":{"range":[3220,3360],"text":"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder:text-gray-500 focus:outline-none focus:border-purple-500"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":93,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":93,"endColumn":148,"fix":{"range":[3502,3609],"text":"mt-4 w-full rounded-lg bg-purple-600 px-4 py-3 font-medium text-white transition-colors hover:bg-purple-700"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":107,"column":34,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":107,"endColumn":53,"fix":{"range":[4081,4088],"text":"h-8 w-8"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-8, h-8' could be replaced by the 'size-8' shorthand!","line":107,"column":34,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":107,"endColumn":53,"fix":{"range":[4081,4088],"text":"size-8"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":115,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":115,"endColumn":47,"fix":{"range":[4295,4312],"text":"mx-auto max-w-6xl"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":117,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":117,"endColumn":72,"fix":{"range":[4378,4416],"text":"mb-8 flex items-center justify-between"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":119,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":119,"endColumn":94,"fix":{"range":[4484,4537],"text":"flex items-center gap-3 text-3xl font-bold text-white"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":120,"column":40,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":120,"endColumn":75,"fix":{"range":[4590,4613],"text":"h-8 w-8 text-purple-400"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-8, h-8' could be replaced by the 'size-8' shorthand!","line":120,"column":40,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":120,"endColumn":75,"fix":{"range":[4590,4613],"text":"size-8 text-purple-400"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":123,"column":28,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":123,"endColumn":58,"fix":{"range":[4732,4750],"text":"mt-1 text-gray-400"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":127,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":127,"endColumn":119,"fix":{"range":[4942,5024],"text":"rounded-lg bg-gray-800/50 p-3 text-gray-300 transition-colors hover:bg-gray-700/50"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":129,"column":38,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":129,"endColumn":57,"fix":{"range":[5096,5103],"text":"h-5 w-5"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-5, h-5' could be replaced by the 'size-5' shorthand!","line":129,"column":38,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":129,"endColumn":57,"fix":{"range":[5096,5103],"text":"size-5"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":138,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":143,"endColumn":36,"fix":{"range":[5515,5552],"text":"border-purple-500/50 bg-purple-900/30"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":138,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":143,"endColumn":36,"fix":{"range":[5653,5711],"text":"border-gray-700/50 bg-gray-800/40 hover:border-gray-600/50"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":138,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":143,"endColumn":36,"fix":{"range":[5756,5800],"text":"border-gray-800/50 bg-gray-900/40 opacity-60"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":138,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":143,"endColumn":36,"fix":{"range":[5400,5458],"text":"`rounded-2xl border p-6 backdrop-blur-xl transition-all ${"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":148,"column":42,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":148,"endColumn":82,"fix":{"range":[6103,6131],"text":"mb-2 flex items-center gap-3"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":153,"column":51,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":153,"endColumn":140,"fix":{"range":[6461,6538],"text":"rounded-full bg-purple-500/30 px-2 py-0.5 text-xs font-medium text-purple-300"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":158,"column":51,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":158,"endColumn":164,"fix":{"range":[6823,6924],"text":"flex items-center gap-1 rounded-full bg-yellow-500/30 px-2 py-0.5 text-xs font-medium text-yellow-300"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":159,"column":60,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":159,"endColumn":79,"fix":{"range":[6997,7004],"text":"h-3 w-3"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-3, h-3' could be replaced by the 'size-3' shorthand!","line":159,"column":60,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":159,"endColumn":79,"fix":{"range":[6997,7004],"text":"size-3"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":180,"column":45,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":180,"endColumn":160,"fix":{"range":[8430,8533],"text":"rounded-lg bg-purple-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-purple-700"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":189,"column":41,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":192,"endColumn":48,"fix":{"range":[9029,9065],"text":"`rounded-lg p-2 transition-colors ${"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":195,"column":53,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":195,"endColumn":72,"fix":{"range":[9554,9561],"text":"h-5 w-5"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-5, h-5' could be replaced by the 'size-5' shorthand!","line":195,"column":53,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":195,"endColumn":72,"fix":{"range":[9554,9561],"text":"size-5"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":201,"column":41,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":204,"endColumn":48,"fix":{"range":[9918,9954],"text":"`rounded-lg p-2 transition-colors ${"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":207,"column":52,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":207,"endColumn":71,"fix":{"range":[10443,10450],"text":"h-5 w-5"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-5, h-5' could be replaced by the 'size-5' shorthand!","line":207,"column":52,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":207,"endColumn":71,"fix":{"range":[10443,10450],"text":"size-5"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":213,"column":41,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":216,"endColumn":48,"fix":{"range":[10793,10829],"text":"`rounded-lg p-2 transition-colors ${"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":219,"column":73,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":219,"endColumn":92,"fix":{"range":[11311,11318],"text":"h-5 w-5"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-5, h-5' could be replaced by the 'size-5' shorthand!","line":219,"column":73,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":219,"endColumn":92,"fix":{"range":[11311,11318],"text":"size-5"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":219,"column":105,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":219,"endColumn":124,"fix":{"range":[11343,11350],"text":"h-5 w-5"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-5, h-5' could be replaced by the 'size-5' shorthand!","line":219,"column":105,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":219,"endColumn":124,"fix":{"range":[11343,11350],"text":"size-5"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":228,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":228,"endColumn":94,"fix":{"range":[11622,11682],"text":"mt-8 rounded-xl border border-gray-700/50 bg-gray-800/30 p-6"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":229,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":229,"endColumn":74,"fix":{"range":[11720,11757],"text":"mb-4 text-lg font-semibold text-white"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":230,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":230,"endColumn":97,"fix":{"range":[11814,11873],"text":"grid grid-cols-1 gap-4 text-sm text-gray-400 md:grid-cols-3"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":232,"column":41,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":232,"endColumn":74,"fix":{"range":[11993,12014],"text":"h-4 w-4 text-blue-400"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-4, h-4' could be replaced by the 'size-4' shorthand!","line":232,"column":41,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":232,"endColumn":74,"fix":{"range":[11993,12014],"text":"size-4 text-blue-400"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":236,"column":40,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":236,"endColumn":75,"fix":{"range":[12233,12256],"text":"h-4 w-4 text-yellow-400"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-4, h-4' could be replaced by the 'size-4' shorthand!","line":236,"column":40,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":236,"endColumn":75,"fix":{"range":[12233,12256],"text":"size-4 text-yellow-400"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":240,"column":40,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":240,"endColumn":74,"fix":{"range":[12471,12493],"text":"h-4 w-4 text-green-400"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-4, h-4' could be replaced by the 'size-4' shorthand!","line":240,"column":40,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":240,"endColumn":74,"fix":{"range":[12471,12493],"text":"size-4 text-green-400"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":49,"fixableErrorCount":0,"fixableWarningCount":49,"source":"\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { IconRefresh, IconCheck, IconX, IconSearch, IconBrain, IconCrown, IconSettings } from \"@tabler/icons-react\"\nimport { toast } from \"sonner\"\n\ninterface LLMConfig {\n    id: string\n    provider: string\n    model_id: string\n    display_name: string\n    is_default: boolean\n    is_enabled: boolean\n    requires_premium: boolean\n    web_search_enabled: boolean\n    priority: number\n    api_key_configured: boolean\n}\n\nexport default function LLMConfigPage() {\n    const [configs, setConfigs] = useState<LLMConfig[]>([])\n    const [loading, setLoading] = useState(true)\n    const [password, setPassword] = useState(\"\")\n    const [authenticated, setAuthenticated] = useState(false)\n    const [testMessage, setTestMessage] = useState(\"\")\n    const [testingModel, setTestingModel] = useState<string | null>(null)\n\n    useEffect(() => {\n        if (authenticated) {\n            fetchConfigs()\n        }\n    }, [authenticated])\n\n    const fetchConfigs = async () => {\n        try {\n            const res = await fetch(\"/api/admin/llm-config\")\n            const data = await res.json()\n            setConfigs(data.configs || [])\n        } catch (error) {\n            toast.error(\"Failed to fetch configurations\")\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    const handleAction = async (action: string, modelId: string, payload: Record<string, any> = {}) => {\n        try {\n            const res = await fetch(\"/api/admin/llm-config\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"Authorization\": `Bearer ${password}`\n                },\n                body: JSON.stringify({ action, modelId, ...payload })\n            })\n\n            if (!res.ok) {\n                const error = await res.json()\n                throw new Error(error.error || \"Action failed\")\n            }\n\n            toast.success(\"Configuration updated\")\n            fetchConfigs()\n        } catch (error: any) {\n            toast.error(error.message)\n        }\n    }\n\n    const handleLogin = (e: React.FormEvent) => {\n        e.preventDefault()\n        setAuthenticated(true)\n    }\n\n    if (!authenticated) {\n        return (\n            <div className=\"flex min-h-screen items-center justify-center bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900\">\n                <div className=\"w-full max-w-md p-8 bg-black/40 backdrop-blur-xl rounded-2xl border border-purple-500/30\">\n                    <div className=\"text-center mb-8\">\n                        <IconSettings className=\"w-12 h-12 mx-auto text-purple-400 mb-4\" />\n                        <h1 className=\"text-2xl font-bold text-white\">LLM Configuration</h1>\n                        <p className=\"text-gray-400 mt-2\">Admin access required</p>\n                    </div>\n                    <form onSubmit={handleLogin}>\n                        <input\n                            type=\"password\"\n                            value={password}\n                            onChange={e => setPassword(e.target.value)}\n                            placeholder=\"Enter admin password\"\n                            className=\"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-purple-500\"\n                        />\n                        <button\n                            type=\"submit\"\n                            className=\"w-full mt-4 px-4 py-3 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-lg transition-colors\"\n                        >\n                            Access Dashboard\n                        </button>\n                    </form>\n                </div>\n            </div>\n        )\n    }\n\n    if (loading) {\n        return (\n            <div className=\"flex min-h-screen items-center justify-center bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900\">\n                <div className=\"animate-spin text-purple-400\">\n                    <IconRefresh className=\"w-8 h-8\" />\n                </div>\n            </div>\n        )\n    }\n\n    return (\n        <div className=\"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 p-8\">\n            <div className=\"max-w-6xl mx-auto\">\n                {/* Header */}\n                <div className=\"flex items-center justify-between mb-8\">\n                    <div>\n                        <h1 className=\"text-3xl font-bold text-white flex items-center gap-3\">\n                            <IconBrain className=\"w-8 h-8 text-purple-400\" />\n                            LLM Configuration\n                        </h1>\n                        <p className=\"text-gray-400 mt-1\">Manage AI models and switch providers on-the-fly</p>\n                    </div>\n                    <button\n                        onClick={fetchConfigs}\n                        className=\"p-3 bg-gray-800/50 hover:bg-gray-700/50 rounded-lg text-gray-300 transition-colors\"\n                    >\n                        <IconRefresh className=\"w-5 h-5\" />\n                    </button>\n                </div>\n\n                {/* Model Cards */}\n                <div className=\"grid gap-6\">\n                    {configs.map(config => (\n                        <div\n                            key={config.id}\n                            className={`p-6 rounded-2xl border backdrop-blur-xl transition-all ${config.is_default\n                                    ? \"bg-purple-900/30 border-purple-500/50\"\n                                    : config.is_enabled\n                                        ? \"bg-gray-800/40 border-gray-700/50 hover:border-gray-600/50\"\n                                        : \"bg-gray-900/40 border-gray-800/50 opacity-60\"\n                                }`}\n                        >\n                            <div className=\"flex items-start justify-between\">\n                                {/* Model Info */}\n                                <div className=\"flex-1\">\n                                    <div className=\"flex items-center gap-3 mb-2\">\n                                        <h3 className=\"text-xl font-semibold text-white\">\n                                            {config.display_name}\n                                        </h3>\n                                        {config.is_default && (\n                                            <span className=\"px-2 py-0.5 text-xs font-medium bg-purple-500/30 text-purple-300 rounded-full\">\n                                                DEFAULT\n                                            </span>\n                                        )}\n                                        {config.requires_premium && (\n                                            <span className=\"px-2 py-0.5 text-xs font-medium bg-yellow-500/30 text-yellow-300 rounded-full flex items-center gap-1\">\n                                                <IconCrown className=\"w-3 h-3\" /> PREMIUM\n                                            </span>\n                                        )}\n                                    </div>\n                                    <div className=\"flex items-center gap-4 text-sm text-gray-400\">\n                                        <span className=\"capitalize\">{config.provider}</span>\n                                        <span className=\"text-gray-600\">â€¢</span>\n                                        <code className=\"text-gray-500\">{config.model_id}</code>\n                                        <span className=\"text-gray-600\">â€¢</span>\n                                        <span className={config.api_key_configured ? \"text-green-400\" : \"text-red-400\"}>\n                                            {config.api_key_configured ? \"âœ“ API Key\" : \"âœ— No Key\"}\n                                        </span>\n                                    </div>\n                                </div>\n\n                                {/* Actions */}\n                                <div className=\"flex items-center gap-2\">\n                                    {/* Set as Default */}\n                                    {!config.is_default && config.is_enabled && (\n                                        <button\n                                            onClick={() => handleAction(\"set_default\", config.model_id)}\n                                            className=\"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white text-sm font-medium rounded-lg transition-colors\"\n                                        >\n                                            Set Default\n                                        </button>\n                                    )}\n\n                                    {/* Toggle Search */}\n                                    <button\n                                        onClick={() => handleAction(\"toggle_search\", config.model_id, { webSearchEnabled: !config.web_search_enabled })}\n                                        className={`p-2 rounded-lg transition-colors ${config.web_search_enabled\n                                                ? \"bg-blue-500/20 text-blue-400 hover:bg-blue-500/30\"\n                                                : \"bg-gray-700/50 text-gray-500 hover:bg-gray-700\"\n                                            }`}\n                                        title={config.web_search_enabled ? \"Search enabled\" : \"Search disabled\"}\n                                    >\n                                        <IconSearch className=\"w-5 h-5\" />\n                                    </button>\n\n                                    {/* Toggle Premium */}\n                                    <button\n                                        onClick={() => handleAction(\"toggle_premium\", config.model_id, { requiresPremium: !config.requires_premium })}\n                                        className={`p-2 rounded-lg transition-colors ${config.requires_premium\n                                                ? \"bg-yellow-500/20 text-yellow-400 hover:bg-yellow-500/30\"\n                                                : \"bg-gray-700/50 text-gray-500 hover:bg-gray-700\"\n                                            }`}\n                                        title={config.requires_premium ? \"Premium required\" : \"Free for all\"}\n                                    >\n                                        <IconCrown className=\"w-5 h-5\" />\n                                    </button>\n\n                                    {/* Toggle Enabled */}\n                                    <button\n                                        onClick={() => handleAction(\"toggle_enabled\", config.model_id, { enabled: !config.is_enabled })}\n                                        className={`p-2 rounded-lg transition-colors ${config.is_enabled\n                                                ? \"bg-green-500/20 text-green-400 hover:bg-green-500/30\"\n                                                : \"bg-red-500/20 text-red-400 hover:bg-red-500/30\"\n                                            }`}\n                                        title={config.is_enabled ? \"Enabled\" : \"Disabled\"}\n                                    >\n                                        {config.is_enabled ? <IconCheck className=\"w-5 h-5\" /> : <IconX className=\"w-5 h-5\" />}\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                    ))}\n                </div>\n\n                {/* Quick Info */}\n                <div className=\"mt-8 p-6 bg-gray-800/30 rounded-xl border border-gray-700/50\">\n                    <h3 className=\"text-lg font-semibold text-white mb-4\">Quick Actions</h3>\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-400\">\n                        <div className=\"flex items-center gap-2\">\n                            <IconSearch className=\"w-4 h-4 text-blue-400\" />\n                            <span>Blue = Web search enabled</span>\n                        </div>\n                        <div className=\"flex items-center gap-2\">\n                            <IconCrown className=\"w-4 h-4 text-yellow-400\" />\n                            <span>Yellow = Premium only</span>\n                        </div>\n                        <div className=\"flex items-center gap-2\">\n                            <IconCheck className=\"w-4 h-4 text-green-400\" />\n                            <span>Green = Model enabled</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/app/[locale]/admin/moderation/page.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":181,"column":14,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":181,"endColumn":62,"fix":{"range":[5568,5604],"text":"bg-rp-base text-rp-text min-h-screen"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":183,"column":21,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":183,"endColumn":75,"fix":{"range":[5665,5707],"text":"border-rp-highlight-med border-b px-6 py-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":188,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":188,"endColumn":116,"fix":{"range":[5946,6021],"text":"text-rp-subtle hover:text-rp-text flex items-center gap-2 transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":193,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":193,"endColumn":70,"fix":{"range":[6210,6238],"text":"bg-rp-highlight-med h-6 w-px"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":220,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":220,"endColumn":107,"fix":{"range":[7434,7507],"text":"border-rp-highlight-med h-[calc(100vh-73px)] w-1/2 overflow-auto border-r"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":226,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":226,"endColumn":104,"fix":{"range":[7824,7886],"text":"text-rp-muted flex h-full flex-col items-center justify-center"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":231,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":231,"endColumn":74,"fix":{"range":[8115,8147],"text":"divide-rp-highlight-med divide-y"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":252,"column":50,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":252,"endColumn":136,"fix":{"range":[9498,9572],"text":"bg-rp-surface flex size-16 items-center justify-center rounded-lg text-2xl"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":260,"column":59,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":260,"endColumn":130,"fix":{"range":[10143,10202],"text":"bg-rp-gold/20 text-rp-gold rounded-full px-2 py-0.5 text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":265,"column":59,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":265,"endColumn":130,"fix":{"range":[10533,10592],"text":"bg-rp-foam/20 text-rp-foam rounded-full px-2 py-0.5 text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":270,"column":48,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":270,"endColumn":96,"fix":{"range":[10880,10916],"text":"text-rp-subtle mt-1 truncate text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":273,"column":50,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":273,"endColumn":112,"fix":{"range":[11118,11168],"text":"text-rp-muted mt-2 flex items-center gap-2 text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":310,"column":42,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":310,"endColumn":128,"fix":{"range":[13246,13320],"text":"bg-rp-surface flex size-32 items-center justify-center rounded-xl text-5xl"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":316,"column":40,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":316,"endColumn":71,"fix":{"range":[13650,13669],"text":"text-rp-subtle mt-1"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":318,"column":47,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":318,"endColumn":98,"fix":{"range":[13845,13884],"text":"bg-rp-surface rounded px-2 py-1 text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":321,"column":47,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":321,"endColumn":98,"fix":{"range":[14076,14115],"text":"bg-rp-surface rounded px-2 py-1 text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":325,"column":61,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":325,"endColumn":125,"fix":{"range":[14401,14453],"text":"bg-rp-iris/20 text-rp-iris rounded px-2 py-1 text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":335,"column":37,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":335,"endColumn":88,"fix":{"range":[14872,14911],"text":"text-rp-subtle mb-2 text-sm font-medium"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":336,"column":38,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":336,"endColumn":101,"fix":{"range":[14980,15031],"text":"bg-rp-surface max-h-48 overflow-auto rounded-lg p-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":359,"column":38,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":359,"endColumn":87,"fix":{"range":[16314,16351],"text":"border-rp-highlight-med border-t pt-6"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":360,"column":41,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":360,"endColumn":92,"fix":{"range":[16405,16444],"text":"text-rp-subtle mb-4 text-sm font-medium"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":364,"column":48,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":364,"endColumn":81,"fix":{"range":[16649,16670],"text":"text-rp-muted text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":369,"column":45,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":369,"endColumn":148,"fix":{"range":[17096,17187],"text":"border-rp-highlight-med bg-rp-surface mt-2 w-full resize-none rounded-lg border p-3 text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":404,"column":38,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":404,"endColumn":87,"fix":{"range":[19332,19369],"text":"border-rp-highlight-med border-t pt-6"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":405,"column":41,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":405,"endColumn":92,"fix":{"range":[19423,19462],"text":"text-rp-subtle mb-4 text-sm font-medium"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":428,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":428,"endColumn":104,"fix":{"range":[20783,20845],"text":"text-rp-muted flex h-full flex-col items-center justify-center"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":26,"fixableErrorCount":0,"fixableWarningCount":26,"source":"\"use client\"\n\nimport { useState, useEffect, useCallback } from \"react\"\nimport { createClient } from \"@/lib/supabase/client\"\nimport { Button } from \"@/components/ui/button\"\nimport {\n    IconCheck,\n    IconX,\n    IconEye,\n    IconArrowLeft,\n    IconRefresh,\n    IconFilter,\n    IconStar,\n    IconStarOff\n} from \"@tabler/icons-react\"\nimport Link from \"next/link\"\nimport Image from \"next/image\"\n\ninterface PendingPersona {\n    id: string\n    name: string\n    description: string | null\n    image_url: string | null\n    system_prompt: string\n    category: string | null\n    tags: string[] | null\n    safety_level: string | null\n    status: string\n    submitted_at: string | null\n    owner_id: string | null\n    created_at: string\n}\n\nexport default function ModerationPage() {\n    const [personas, setPersonas] = useState<PendingPersona[]>([])\n    const [loading, setLoading] = useState(true)\n    const [filter, setFilter] = useState<'pending_review' | 'all'>('pending_review')\n    const [selectedPersona, setSelectedPersona] = useState<PendingPersona | null>(null)\n    const [rejectionReason, setRejectionReason] = useState('')\n    const [actionLoading, setActionLoading] = useState(false)\n\n    const supabase = createClient()\n\n    const loadPersonas = useCallback(async () => {\n        setLoading(true)\n        try {\n            let query = supabase\n                .from('personas')\n                .select('*')\n                .order('submitted_at', { ascending: false })\n\n            if (filter === 'pending_review') {\n                query = query.eq('status', 'pending_review')\n            }\n\n            const { data, error } = await query.limit(50)\n\n            if (error) throw error\n            setPersonas(data || [])\n        } catch (e) {\n            console.error('Failed to load personas:', e)\n        } finally {\n            setLoading(false)\n        }\n    }, [supabase, filter])\n\n    useEffect(() => {\n        loadPersonas()\n    }, [loadPersonas])\n\n    const handleApprove = async (persona: PendingPersona) => {\n        setActionLoading(true)\n        try {\n            const { data: userData } = await supabase.auth.getUser()\n            const moderatorId = userData.user?.id\n\n            // Update persona status\n            const { error: updateError } = await supabase\n                .from('personas')\n                .update({\n                    status: 'approved',\n                    visibility: 'PUBLIC',\n                    reviewed_at: new Date().toISOString(),\n                    reviewed_by: moderatorId\n                })\n                .eq('id', persona.id)\n\n            if (updateError) throw updateError\n\n            // Log moderation action\n            await supabase.from('content_moderation').insert([{\n                persona_id: persona.id,\n                moderator_id: moderatorId,\n                action: 'approve',\n                reason: 'Approved by moderator'\n            }])\n\n            // Refresh list\n            await loadPersonas()\n            setSelectedPersona(null)\n        } catch (e) {\n            console.error('Failed to approve:', e)\n        } finally {\n            setActionLoading(false)\n        }\n    }\n\n    const handleReject = async (persona: PendingPersona) => {\n        if (!rejectionReason.trim()) {\n            alert('Please provide a rejection reason')\n            return\n        }\n\n        setActionLoading(true)\n        try {\n            const { data: userData } = await supabase.auth.getUser()\n            const moderatorId = userData.user?.id\n\n            // Update persona status\n            const { error: updateError } = await supabase\n                .from('personas')\n                .update({\n                    status: 'rejected',\n                    rejection_reason: rejectionReason,\n                    reviewed_at: new Date().toISOString(),\n                    reviewed_by: moderatorId\n                })\n                .eq('id', persona.id)\n\n            if (updateError) throw updateError\n\n            // Log moderation action\n            await supabase.from('content_moderation').insert([{\n                persona_id: persona.id,\n                moderator_id: moderatorId,\n                action: 'reject',\n                reason: rejectionReason\n            }])\n\n            // Refresh list\n            await loadPersonas()\n            setSelectedPersona(null)\n            setRejectionReason('')\n        } catch (e) {\n            console.error('Failed to reject:', e)\n        } finally {\n            setActionLoading(false)\n        }\n    }\n\n    const handleFeature = async (persona: PendingPersona, featured: boolean) => {\n        setActionLoading(true)\n        try {\n            const { data: userData } = await supabase.auth.getUser()\n            const moderatorId = userData.user?.id\n\n            const { error: updateError } = await supabase\n                .from('personas')\n                .update({ is_featured: featured })\n                .eq('id', persona.id)\n\n            if (updateError) throw updateError\n\n            // Log moderation action\n            await supabase.from('content_moderation').insert([{\n                persona_id: persona.id,\n                moderator_id: moderatorId,\n                action: featured ? 'feature' : 'unfeature',\n                reason: featured ? 'Featured by moderator' : 'Unfeatured by moderator'\n            }])\n\n            await loadPersonas()\n        } catch (e) {\n            console.error('Failed to feature:', e)\n        } finally {\n            setActionLoading(false)\n        }\n    }\n\n    return (\n        <div className=\"min-h-screen bg-rp-base text-rp-text\">\n            {/* Header */}\n            <header className=\"border-b border-rp-highlight-med px-6 py-4\">\n                <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-4\">\n                        <Link\n                            href=\"/\"\n                            className=\"flex items-center gap-2 text-rp-subtle transition-colors hover:text-rp-text\"\n                        >\n                            <IconArrowLeft size={20} />\n                            Back\n                        </Link>\n                        <div className=\"h-6 w-px bg-rp-highlight-med\" />\n                        <h1 className=\"text-xl font-semibold\">\n                            ðŸ›¡ï¸ Content Moderation\n                        </h1>\n                    </div>\n                    <div className=\"flex items-center gap-3\">\n                        <Button\n                            variant=\"outline\"\n                            onClick={() => setFilter(filter === 'pending_review' ? 'all' : 'pending_review')}\n                            className=\"border-rp-highlight-med\"\n                        >\n                            <IconFilter size={18} className=\"mr-2\" />\n                            {filter === 'pending_review' ? 'Showing Pending' : 'Showing All'}\n                        </Button>\n                        <Button\n                            variant=\"outline\"\n                            onClick={loadPersonas}\n                            className=\"border-rp-highlight-med\"\n                        >\n                            <IconRefresh size={18} />\n                        </Button>\n                    </div>\n                </div>\n            </header>\n\n            <div className=\"flex\">\n                {/* List Panel */}\n                <div className=\"h-[calc(100vh-73px)] w-1/2 overflow-auto border-r border-rp-highlight-med\">\n                    {loading ? (\n                        <div className=\"flex h-full items-center justify-center\">\n                            <span className=\"text-rp-muted\">Loading...</span>\n                        </div>\n                    ) : personas.length === 0 ? (\n                        <div className=\"flex h-full flex-col items-center justify-center text-rp-muted\">\n                            <span className=\"mb-4 text-4xl\">âœ…</span>\n                            <span>No pending reviews</span>\n                        </div>\n                    ) : (\n                        <div className=\"divide-y divide-rp-highlight-med\">\n                            {personas.map((persona) => (\n                                <div\n                                    key={persona.id}\n                                    onClick={() => setSelectedPersona(persona)}\n                                    className={`cursor-pointer p-4 transition-colors ${selectedPersona?.id === persona.id\n                                        ? 'bg-rp-overlay'\n                                        : 'hover:bg-rp-surface'\n                                        }`}\n                                >\n                                    <div className=\"flex items-start gap-4\">\n                                        {persona.image_url ? (\n                                            <div className=\"relative size-16 shrink-0 overflow-hidden rounded-lg\">\n                                                <Image\n                                                    src={persona.image_url}\n                                                    alt={persona.name}\n                                                    fill\n                                                    className=\"object-cover\"\n                                                />\n                                            </div>\n                                        ) : (\n                                            <div className=\"flex size-16 items-center justify-center rounded-lg bg-rp-surface text-2xl\">\n                                                ðŸ¤–\n                                            </div>\n                                        )}\n                                        <div className=\"min-w-0 flex-1\">\n                                            <div className=\"flex items-center gap-2\">\n                                                <h3 className=\"truncate font-medium\">{persona.name}</h3>\n                                                {persona.status === 'pending_review' && (\n                                                    <span className=\"rounded-full bg-rp-gold/20 px-2 py-0.5 text-xs text-rp-gold\">\n                                                        Pending\n                                                    </span>\n                                                )}\n                                                {persona.status === 'approved' && (\n                                                    <span className=\"rounded-full bg-rp-foam/20 px-2 py-0.5 text-xs text-rp-foam\">\n                                                        Approved\n                                                    </span>\n                                                )}\n                                            </div>\n                                            <p className=\"mt-1 truncate text-sm text-rp-subtle\">\n                                                {persona.description || 'No description'}\n                                            </p>\n                                            <div className=\"mt-2 flex items-center gap-2 text-xs text-rp-muted\">\n                                                <span>{persona.category || 'general'}</span>\n                                                <span>â€¢</span>\n                                                <span>{persona.safety_level || 'ADULT'}</span>\n                                                {persona.submitted_at && (\n                                                    <>\n                                                        <span>â€¢</span>\n                                                        <span>\n                                                            {new Date(persona.submitted_at).toLocaleDateString()}\n                                                        </span>\n                                                    </>\n                                                )}\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            ))}\n                        </div>\n                    )}\n                </div>\n\n                {/* Detail Panel */}\n                <div className=\"h-[calc(100vh-73px)] w-1/2 overflow-auto\">\n                    {selectedPersona ? (\n                        <div className=\"p-6\">\n                            {/* Header with image */}\n                            <div className=\"mb-6 flex items-start gap-6\">\n                                {selectedPersona.image_url ? (\n                                    <div className=\"relative size-32 shrink-0 overflow-hidden rounded-xl\">\n                                        <Image\n                                            src={selectedPersona.image_url}\n                                            alt={selectedPersona.name}\n                                            fill\n                                            className=\"object-cover\"\n                                        />\n                                    </div>\n                                ) : (\n                                    <div className=\"flex size-32 items-center justify-center rounded-xl bg-rp-surface text-5xl\">\n                                        ðŸ¤–\n                                    </div>\n                                )}\n                                <div className=\"flex-1\">\n                                    <h2 className=\"text-2xl font-bold\">{selectedPersona.name}</h2>\n                                    <p className=\"mt-1 text-rp-subtle\">{selectedPersona.description}</p>\n                                    <div className=\"mt-3 flex items-center gap-3\">\n                                        <span className=\"rounded bg-rp-surface px-2 py-1 text-xs\">\n                                            {selectedPersona.category || 'general'}\n                                        </span>\n                                        <span className=\"rounded bg-rp-surface px-2 py-1 text-xs\">\n                                            {selectedPersona.safety_level || 'ADULT'}\n                                        </span>\n                                        {selectedPersona.tags?.map((tag) => (\n                                            <span key={tag} className=\"rounded bg-rp-iris/20 px-2 py-1 text-xs text-rp-iris\">\n                                                {tag}\n                                            </span>\n                                        ))}\n                                    </div>\n                                </div>\n                            </div>\n\n                            {/* System Prompt */}\n                            <div className=\"mb-6\">\n                                <h3 className=\"mb-2 text-sm font-medium text-rp-subtle\">System Prompt</h3>\n                                <div className=\"max-h-48 overflow-auto rounded-lg bg-rp-surface p-4\">\n                                    <pre className=\"whitespace-pre-wrap text-sm\">{selectedPersona.system_prompt}</pre>\n                                </div>\n                            </div>\n\n                            {/* Metadata */}\n                            <div className=\"mb-6 grid grid-cols-2 gap-4 text-sm\">\n                                <div>\n                                    <span className=\"text-rp-muted\">ID:</span>\n                                    <span className=\"ml-2 font-mono text-xs\">{selectedPersona.id}</span>\n                                </div>\n                                <div>\n                                    <span className=\"text-rp-muted\">Submitted:</span>\n                                    <span className=\"ml-2\">\n                                        {selectedPersona.submitted_at\n                                            ? new Date(selectedPersona.submitted_at).toLocaleString()\n                                            : 'N/A'}\n                                    </span>\n                                </div>\n                            </div>\n\n                            {/* Actions */}\n                            {selectedPersona.status === 'pending_review' && (\n                                <div className=\"border-t border-rp-highlight-med pt-6\">\n                                    <h3 className=\"mb-4 text-sm font-medium text-rp-subtle\">Moderation Actions</h3>\n\n                                    {/* Rejection Reason */}\n                                    <div className=\"mb-4\">\n                                        <label className=\"text-sm text-rp-muted\">Rejection Reason (required for reject)</label>\n                                        <textarea\n                                            value={rejectionReason}\n                                            onChange={(e) => setRejectionReason(e.target.value)}\n                                            placeholder=\"Explain why this submission is being rejected...\"\n                                            className=\"mt-2 w-full resize-none rounded-lg border border-rp-highlight-med bg-rp-surface p-3 text-sm\"\n                                            rows={3}\n                                        />\n                                    </div>\n\n                                    <div className=\"flex items-center gap-3\">\n                                        <Button\n                                            onClick={() => handleApprove(selectedPersona)}\n                                            disabled={actionLoading}\n                                            className=\"bg-rp-foam text-rp-base hover:bg-rp-foam/80\"\n                                        >\n                                            <IconCheck size={18} className=\"mr-2\" />\n                                            Approve & Publish\n                                        </Button>\n                                        <Button\n                                            onClick={() => handleReject(selectedPersona)}\n                                            disabled={actionLoading || !rejectionReason.trim()}\n                                            variant=\"outline\"\n                                            className=\"border-rp-love text-rp-love hover:bg-rp-love/20\"\n                                        >\n                                            <IconX size={18} className=\"mr-2\" />\n                                            Reject\n                                        </Button>\n                                        <Link href={`/studio?persona_id=${selectedPersona.id}`}>\n                                            <Button variant=\"outline\" className=\"border-rp-highlight-med\">\n                                                <IconEye size={18} className=\"mr-2\" />\n                                                View in Studio\n                                            </Button>\n                                        </Link>\n                                    </div>\n                                </div>\n                            )}\n\n                            {/* Feature toggle for approved */}\n                            {selectedPersona.status === 'approved' && (\n                                <div className=\"border-t border-rp-highlight-med pt-6\">\n                                    <h3 className=\"mb-4 text-sm font-medium text-rp-subtle\">Curation Actions</h3>\n                                    <Button\n                                        onClick={() => handleFeature(selectedPersona, !(selectedPersona as any).is_featured)}\n                                        disabled={actionLoading}\n                                        variant=\"outline\"\n                                        className=\"border-rp-gold text-rp-gold\"\n                                    >\n                                        {(selectedPersona as any).is_featured ? (\n                                            <>\n                                                <IconStarOff size={18} className=\"mr-2\" />\n                                                Remove from Featured\n                                            </>\n                                        ) : (\n                                            <>\n                                                <IconStar size={18} className=\"mr-2\" />\n                                                Add to Featured\n                                            </>\n                                        )}\n                                    </Button>\n                                </div>\n                            )}\n                        </div>\n                    ) : (\n                        <div className=\"flex h-full flex-col items-center justify-center text-rp-muted\">\n                            <span className=\"mb-4 text-4xl\">ðŸ‘ˆ</span>\n                            <span>Select a persona to review</span>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/app/[locale]/admin/page.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":77,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":77,"endColumn":66,"fix":{"range":[2370,2406],"text":"bg-rp-base text-rp-text min-h-screen"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":79,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":79,"endColumn":79,"fix":{"range":[2475,2517],"text":"border-rp-highlight-med border-b px-6 py-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":83,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":83,"endColumn":116,"fix":{"range":[2688,2763],"text":"text-rp-subtle hover:text-rp-text flex items-center gap-2 transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":88,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":88,"endColumn":70,"fix":{"range":[2959,2987],"text":"bg-rp-highlight-med h-6 w-px"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":109,"column":33,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":110,"endColumn":40,"fix":{"range":[3909,4059],"text":"`border-rp-highlight-med bg-rp-surface hover:border-rp-highlight-high hover:bg-rp-overlay group relative block rounded-xl border p-6 transition-all ${"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":116,"column":36,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":116,"endColumn":70,"fix":{"range":[4583,4605],"text":"text-rp-subtle text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":119,"column":43,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":119,"endColumn":137,"fix":{"range":[4737,4819],"text":"bg-rp-highlight-med text-rp-muted absolute right-4 top-4 rounded px-2 py-1 text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":128,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":128,"endColumn":102,"fix":{"range":[5124,5188],"text":"border-rp-highlight-med bg-rp-surface mt-8 rounded-xl border p-6"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":132,"column":38,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":132,"endColumn":81,"fix":{"range":[5461,5492],"text":"text-rp-gold text-3xl font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":133,"column":38,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":133,"endColumn":71,"fix":{"range":[5550,5571],"text":"text-rp-muted text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":136,"column":38,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":136,"endColumn":81,"fix":{"range":[5736,5767],"text":"text-rp-foam text-3xl font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":137,"column":38,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":137,"endColumn":71,"fix":{"range":[5825,5846],"text":"text-rp-muted text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":140,"column":38,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":140,"endColumn":81,"fix":{"range":[6010,6041],"text":"text-rp-iris text-3xl font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":141,"column":38,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":141,"endColumn":71,"fix":{"range":[6099,6120],"text":"text-rp-muted text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":144,"column":38,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":144,"endColumn":81,"fix":{"range":[6281,6312],"text":"text-rp-pine text-3xl font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":145,"column":38,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":145,"endColumn":71,"fix":{"range":[6370,6391],"text":"text-rp-muted text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":148,"column":28,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":148,"endColumn":78,"fix":{"range":[6516,6554],"text":"text-rp-muted mt-4 text-center text-xs"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":17,"fixableErrorCount":0,"fixableWarningCount":17,"source":"\"use client\"\n\nimport Link from \"next/link\"\nimport {\n    IconShield,\n    IconUsers,\n    IconChartBar,\n    IconSettings,\n    IconArrowLeft,\n    IconStar,\n    IconDiamond\n} from \"@tabler/icons-react\"\nimport { AdminPasswordGate } from \"@/components/admin/AdminPasswordGate\"\n\nexport default function AdminPage() {\n    const adminModules = [\n        {\n            title: \"Featured Content\",\n            description: \"Manage Hero Carousel and Gallery visibility\",\n            icon: IconStar,\n            href: \"/admin/featured\",\n            color: \"from-amber-600 to-orange-500\",\n            badge: null\n        },\n        {\n            title: \"Tier Management\",\n            description: \"Configure features, limits, and LLM providers per tier\",\n            icon: IconDiamond,\n            href: \"/admin/tiers\",\n            color: \"from-violet-600 to-purple-500\",\n            badge: null\n        },\n        {\n            title: \"Chat Engine Config\",\n            description: \"Configure LLM providers, search, and API keys\",\n            icon: IconSettings,\n            href: \"/admin/chat-config\",\n            color: \"from-cyan-600 to-blue-500\",\n            badge: null\n        },\n        {\n            title: \"Content Moderation\",\n            description: \"Review and approve pending Soul submissions\",\n            icon: IconShield,\n            href: \"/admin/moderation\",\n            color: \"from-purple-600 to-pink-500\",\n            badge: null // Could show pending count here\n        },\n        {\n            title: \"User Management\",\n            description: \"Manage users, creators, and permissions\",\n            icon: IconUsers,\n            href: \"/admin/users\",\n            color: \"from-blue-600 to-cyan-500\",\n            badge: \"Coming Soon\"\n        },\n        {\n            title: \"Analytics\",\n            description: \"View engagement metrics and trends\",\n            icon: IconChartBar,\n            href: \"/admin/analytics\",\n            color: \"from-green-600 to-emerald-500\",\n            badge: null\n        },\n        {\n            title: \"Settings\",\n            description: \"LLM configuration, API keys, and platform settings\",\n            icon: IconSettings,\n            href: \"/admin/settings\",\n            color: \"from-rp-muted to-rp-highlight-high\",\n            badge: null\n        }\n    ]\n\n    return (\n        <AdminPasswordGate>\n            <div className=\"min-h-screen bg-rp-base text-rp-text\">\n                {/* Header */}\n                <header className=\"border-b border-rp-highlight-med px-6 py-4\">\n                    <div className=\"flex items-center gap-4\">\n                        <Link\n                            href=\"/\"\n                            className=\"flex items-center gap-2 text-rp-subtle transition-colors hover:text-rp-text\"\n                        >\n                            <IconArrowLeft size={20} />\n                            Back to App\n                        </Link>\n                        <div className=\"h-6 w-px bg-rp-highlight-med\" />\n                        <h1 className=\"text-xl font-semibold\">\n                            ðŸ”§ Admin Dashboard\n                        </h1>\n                    </div>\n                </header>\n\n                {/* Content */}\n                <main className=\"mx-auto max-w-4xl p-6\">\n                    <div className=\"mb-8\">\n                        <h2 className=\"mb-2 text-2xl font-bold\">Welcome, Admin</h2>\n                        <p className=\"text-rp-subtle\">\n                            Manage content, users, and platform settings from here.\n                        </p>\n                    </div>\n\n                    <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2\">\n                        {adminModules.map((module) => (\n                            <Link\n                                key={module.title}\n                                href={module.href}\n                                className={`group relative block rounded-xl border border-rp-highlight-med bg-rp-surface p-6 transition-all hover:border-rp-highlight-high hover:bg-rp-overlay ${module.badge === 'Coming Soon' ? 'pointer-events-none opacity-50' : ''\n                                    }`}\n                            >\n                                <div className={`inline-flex rounded-lg bg-gradient-to-br p-3 ${module.color} mb-4`}>\n                                    <module.icon size={24} className=\"text-white\" />\n                                </div>\n                                <h3 className=\"mb-1 text-lg font-semibold\">{module.title}</h3>\n                                <p className=\"text-sm text-rp-subtle\">{module.description}</p>\n\n                                {module.badge && (\n                                    <span className=\"absolute right-4 top-4 rounded bg-rp-highlight-med px-2 py-1 text-xs text-rp-muted\">\n                                        {module.badge}\n                                    </span>\n                                )}\n                            </Link>\n                        ))}\n                    </div>\n\n                    {/* Quick Stats */}\n                    <div className=\"mt-8 rounded-xl border border-rp-highlight-med bg-rp-surface p-6\">\n                        <h3 className=\"mb-4 text-lg font-semibold\">Quick Stats</h3>\n                        <div className=\"grid grid-cols-2 gap-4 md:grid-cols-4\">\n                            <div className=\"text-center\">\n                                <div className=\"text-3xl font-bold text-rp-gold\">â€”</div>\n                                <div className=\"text-sm text-rp-muted\">Pending Reviews</div>\n                            </div>\n                            <div className=\"text-center\">\n                                <div className=\"text-3xl font-bold text-rp-foam\">â€”</div>\n                                <div className=\"text-sm text-rp-muted\">Approved Today</div>\n                            </div>\n                            <div className=\"text-center\">\n                                <div className=\"text-3xl font-bold text-rp-iris\">â€”</div>\n                                <div className=\"text-sm text-rp-muted\">Total Souls</div>\n                            </div>\n                            <div className=\"text-center\">\n                                <div className=\"text-3xl font-bold text-rp-pine\">â€”</div>\n                                <div className=\"text-sm text-rp-muted\">Active Users</div>\n                            </div>\n                        </div>\n                        <p className=\"mt-4 text-center text-xs text-rp-muted\">\n                            Stats will be populated once analytics module is complete\n                        </p>\n                    </div>\n                </main>\n            </div>\n        </AdminPasswordGate>\n    )\n}\n\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/app/[locale]/admin/settings/page.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":146,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":146,"endColumn":66,"fix":{"range":[5116,5152],"text":"bg-rp-base text-rp-text min-h-screen"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":148,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":148,"endColumn":79,"fix":{"range":[5221,5263],"text":"border-rp-highlight-med border-b px-6 py-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":152,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":152,"endColumn":116,"fix":{"range":[5439,5514],"text":"text-rp-subtle hover:text-rp-text flex items-center gap-2 transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":157,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":157,"endColumn":70,"fix":{"range":[5712,5740],"text":"bg-rp-highlight-med h-6 w-px"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":158,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":158,"endColumn":86,"fix":{"range":[5784,5829],"text":"flex items-center gap-2 text-xl font-semibold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":166,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":166,"endColumn":66,"fix":{"range":[6069,6101],"text":"border-rp-highlight-med border-b"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":167,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":167,"endColumn":71,"fix":{"range":[6140,6173],"text":"mx-auto flex max-w-4xl gap-1 px-6"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":170,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":173,"endColumn":36,"fix":{"range":[6523,6575],"text":"text-rp-subtle hover:text-rp-text border-transparent"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":170,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":173,"endColumn":36,"fix":{"range":[6311,6404],"text":"`-mb-px flex items-center gap-2 border-b-2 px-4 py-3 text-sm font-medium transition-colors ${"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":180,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":183,"endColumn":36,"fix":{"range":[7128,7180],"text":"text-rp-subtle hover:text-rp-text border-transparent"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":180,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":183,"endColumn":36,"fix":{"range":[6911,7004],"text":"`-mb-px flex items-center gap-2 border-b-2 px-4 py-3 text-sm font-medium transition-colors ${"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":195,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":198,"endColumn":32,"fix":{"range":[7727,7784],"text":"border border-green-500/20 bg-green-500/10 text-green-400"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":195,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":198,"endColumn":32,"fix":{"range":[7817,7868],"text":"border border-red-500/20 bg-red-500/10 text-red-400"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":195,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":198,"endColumn":32,"fix":{"range":[7622,7669],"text":"`mb-4 flex items-center gap-2 rounded-lg p-3 ${"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":211,"column":37,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":211,"endColumn":132,"fix":{"range":[8552,8635],"text":"text-rp-subtle hover:text-rp-text flex items-center gap-2 text-sm transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":219,"column":38,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":219,"endColumn":81,"fix":{"range":[8944,8975],"text":"text-rp-subtle py-8 text-center"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":232,"column":58,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":233,"endColumn":60,"fix":{"range":[9887,9911],"text":"`h-2 w-2 rounded-full ${"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-2, h-2' could be replaced by the 'size-2' shorthand!","line":232,"column":58,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":233,"endColumn":60,"fix":{"range":[9887,9911],"text":"`size-2 rounded-full${"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":235,"column":62,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":235,"endColumn":109,"fix":{"range":[10162,10197],"text":"flex items-center gap-2 font-medium"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":238,"column":71,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":238,"endColumn":137,"fix":{"range":[10447,10501],"text":"bg-rp-iris/20 text-rp-iris rounded px-2 py-0.5 text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":243,"column":71,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":243,"endColumn":137,"fix":{"range":[10886,10940],"text":"bg-rp-gold/20 text-rp-gold rounded px-2 py-0.5 text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":248,"column":62,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":248,"endColumn":96,"fix":{"range":[11289,11311],"text":"text-rp-subtle text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":259,"column":57,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":262,"endColumn":64,"fix":{"range":[12116,12168],"text":"`rounded-lg px-3 py-1.5 text-xs transition-colors ${"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":271,"column":57,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":274,"endColumn":64,"fix":{"range":[13142,13194],"text":"`rounded-lg px-3 py-1.5 text-xs transition-colors ${"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":284,"column":61,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":284,"endColumn":176,"fix":{"range":[14202,14305],"text":"bg-rp-overlay text-rp-subtle hover:bg-rp-highlight-med rounded-lg px-3 py-1.5 text-xs transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":303,"column":36,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":303,"endColumn":75,"fix":{"range":[15184,15211],"text":"text-rp-subtle mt-1 text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":308,"column":34,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":308,"endColumn":98,"fix":{"range":[15449,15501],"text":"border-rp-gold/30 bg-rp-gold/5 rounded-xl border p-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":309,"column":36,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":309,"endColumn":68,"fix":{"range":[15550,15570],"text":"text-rp-gold text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":323,"column":45,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":323,"endColumn":116,"fix":{"range":[16402,16461],"text":"border-rp-highlight-med bg-rp-surface rounded-xl border p-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":325,"column":50,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":325,"endColumn":100,"fix":{"range":[16565,16603],"text":"mb-3 flex items-center justify-between"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":327,"column":58,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":328,"endColumn":60,"fix":{"range":[16764,16788],"text":"`h-2 w-2 rounded-full ${"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-2, h-2' could be replaced by the 'size-2' shorthand!","line":327,"column":58,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":328,"endColumn":60,"fix":{"range":[16764,16788],"text":"`size-2 rounded-full${"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":330,"column":59,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":330,"endColumn":92,"fix":{"range":[17072,17093],"text":"text-rp-muted text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":347,"column":57,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":347,"endColumn":189,"fix":{"range":[18410,18530],"text":"border-rp-highlight-med bg-rp-overlay text-rp-text placeholder-rp-muted w-full rounded-lg border px-3 py-2 pr-10 text-sm"}},{"ruleId":"tailwindcss/migration-from-tailwind-2","severity":1,"message":"Classname 'placeholder-rp-muted' should be updated to 'placeholder:text-rp-muted' in Tailwind CSS v3!","line":347,"column":57,"nodeType":"JSXAttribute","messageId":"classnameChanged","endLine":347,"endColumn":189,"fix":{"range":[18410,18530],"text":"w-full px-3 py-2 rounded-lg border border-rp-highlight-med bg-rp-overlay text-rp-text placeholder:text-rp-muted text-sm pr-10"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":355,"column":57,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":355,"endColumn":143,"fix":{"range":[19114,19188],"text":"text-rp-muted hover:text-rp-text absolute right-2 top-1/2 -translate-y-1/2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":367,"column":53,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":367,"endColumn":213,"fix":{"range":[20103,20251],"text":"bg-rp-iris hover:bg-rp-iris/80 rounded-lg px-4 py-2 text-sm font-medium text-white transition-colors disabled:cursor-not-allowed disabled:opacity-50"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":37,"fixableErrorCount":0,"fixableWarningCount":37,"source":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport Link from \"next/link\"\nimport {\n    IconArrowLeft,\n    IconSettings,\n    IconBrain,\n    IconKey,\n    IconRefresh,\n    IconCheck,\n    IconX,\n    IconEye,\n    IconEyeOff\n} from \"@tabler/icons-react\"\nimport { AdminPasswordGate } from \"@/components/admin/AdminPasswordGate\"\n\ninterface LLMConfig {\n    id: string\n    provider: string\n    model_id: string\n    display_name: string\n    is_default: boolean\n    is_enabled: boolean\n    requires_premium: boolean\n    web_search_enabled: boolean\n    priority: number\n    api_key_configured: boolean\n}\n\ninterface APIKeyConfig {\n    provider: string\n    envVar: string\n    label: string\n    placeholder: string\n}\n\nconst API_KEY_CONFIGS: APIKeyConfig[] = [\n    { provider: 'openrouter', envVar: 'OPENROUTER_API_KEY', label: 'OpenRouter (FREE)', placeholder: 'sk-or-v1-...' },\n    { provider: 'deepseek', envVar: 'DEEPSEEK_API_KEY', label: 'DeepSeek', placeholder: 'sk-...' },\n    { provider: 'openai', envVar: 'OPENAI_API_KEY', label: 'OpenAI', placeholder: 'sk-...' },\n    { provider: 'anthropic', envVar: 'ANTHROPIC_API_KEY', label: 'Anthropic', placeholder: 'sk-ant-...' },\n    { provider: 'google', envVar: 'GOOGLE_GEMINI_API_KEY', label: 'Google Gemini', placeholder: 'AI...' },\n    { provider: 'groq', envVar: 'GROQ_API_KEY', label: 'Groq', placeholder: 'gsk_...' },\n    { provider: 'mistral', envVar: 'MISTRAL_API_KEY', label: 'Mistral', placeholder: '...' },\n    { provider: 'perplexity', envVar: 'PERPLEXITY_API_KEY', label: 'Perplexity', placeholder: 'pplx-...' },\n]\n\nexport default function AdminSettingsPage() {\n    const [activeTab, setActiveTab] = useState<'llm' | 'api-keys'>('llm')\n    const [configs, setConfigs] = useState<LLMConfig[]>([])\n    const [loading, setLoading] = useState(true)\n    const [saving, setSaving] = useState<string | null>(null)\n    const [message, setMessage] = useState<{ type: 'success' | 'error', text: string } | null>(null)\n\n    // API Keys state\n    const [apiKeys, setApiKeys] = useState<Record<string, string>>({})\n    const [showKeys, setShowKeys] = useState<Record<string, boolean>>({})\n    const [savingKey, setSavingKey] = useState<string | null>(null)\n\n    useEffect(() => {\n        fetchConfigs()\n    }, [])\n\n    const fetchConfigs = async () => {\n        try {\n            const res = await fetch('/api/admin/llm-config')\n            const data = await res.json()\n            if (data.configs) {\n                setConfigs(data.configs)\n            }\n        } catch (err) {\n            console.error('Failed to fetch configs:', err)\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    const updateConfig = async (action: string, modelId: string, value?: boolean) => {\n        setSaving(modelId)\n        setMessage(null)\n\n        try {\n            const body: Record<string, unknown> = { action, modelId }\n            if (action === 'toggle_enabled') body.enabled = value\n            if (action === 'toggle_search') body.webSearchEnabled = value\n            if (action === 'toggle_premium') body.requiresPremium = value\n\n            const res = await fetch('/api/admin/llm-config', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${sessionStorage.getItem('admin_password') || ''}`\n                },\n                body: JSON.stringify(body)\n            })\n\n            if (res.ok) {\n                setMessage({ type: 'success', text: 'Configuration updated' })\n                fetchConfigs()\n            } else {\n                const data = await res.json()\n                setMessage({ type: 'error', text: data.error || 'Failed to update' })\n            }\n        } catch (err) {\n            setMessage({ type: 'error', text: 'Network error' })\n        } finally {\n            setSaving(null)\n        }\n    }\n\n    const saveApiKey = async (provider: string, envVar: string) => {\n        const key = apiKeys[provider]\n        if (!key) return\n\n        setSavingKey(provider)\n        setMessage(null)\n\n        try {\n            const res = await fetch('/api/admin/api-keys', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${sessionStorage.getItem('admin_password') || ''}`\n                },\n                body: JSON.stringify({ provider, envVar, apiKey: key })\n            })\n\n            if (res.ok) {\n                setMessage({ type: 'success', text: `${provider} API key saved` })\n                setApiKeys({ ...apiKeys, [provider]: '' })\n                fetchConfigs() // Refresh to show new key status\n            } else {\n                const data = await res.json()\n                setMessage({ type: 'error', text: data.error || 'Failed to save key' })\n            }\n        } catch (err) {\n            setMessage({ type: 'error', text: 'Network error' })\n        } finally {\n            setSavingKey(null)\n        }\n    }\n\n    return (\n        <AdminPasswordGate>\n            <div className=\"min-h-screen bg-rp-base text-rp-text\">\n                {/* Header */}\n                <header className=\"border-b border-rp-highlight-med px-6 py-4\">\n                    <div className=\"flex items-center gap-4\">\n                        <Link\n                            href=\"/admin\"\n                            className=\"flex items-center gap-2 text-rp-subtle transition-colors hover:text-rp-text\"\n                        >\n                            <IconArrowLeft size={20} />\n                            Back to Admin\n                        </Link>\n                        <div className=\"h-6 w-px bg-rp-highlight-med\" />\n                        <h1 className=\"text-xl font-semibold flex items-center gap-2\">\n                            <IconSettings size={24} />\n                            Settings\n                        </h1>\n                    </div>\n                </header>\n\n                {/* Tabs */}\n                <div className=\"border-b border-rp-highlight-med\">\n                    <div className=\"mx-auto max-w-4xl flex gap-1 px-6\">\n                        <button\n                            onClick={() => setActiveTab('llm')}\n                            className={`flex items-center gap-2 px-4 py-3 text-sm font-medium transition-colors border-b-2 -mb-px ${activeTab === 'llm'\n                                ? 'border-rp-iris text-rp-text'\n                                : 'border-transparent text-rp-subtle hover:text-rp-text'\n                                }`}\n                        >\n                            <IconBrain size={18} />\n                            LLM Configuration\n                        </button>\n                        <button\n                            onClick={() => setActiveTab('api-keys')}\n                            className={`flex items-center gap-2 px-4 py-3 text-sm font-medium transition-colors border-b-2 -mb-px ${activeTab === 'api-keys'\n                                ? 'border-rp-iris text-rp-text'\n                                : 'border-transparent text-rp-subtle hover:text-rp-text'\n                                }`}\n                        >\n                            <IconKey size={18} />\n                            API Keys\n                        </button>\n                    </div>\n                </div>\n\n                {/* Content */}\n                <main className=\"mx-auto max-w-4xl p-6\">\n                    {/* Status Message */}\n                    {message && (\n                        <div className={`mb-4 rounded-lg p-3 flex items-center gap-2 ${message.type === 'success'\n                            ? 'bg-green-500/10 text-green-400 border border-green-500/20'\n                            : 'bg-red-500/10 text-red-400 border border-red-500/20'\n                            }`}>\n                            {message.type === 'success' ? <IconCheck size={18} /> : <IconX size={18} />}\n                            {message.text}\n                        </div>\n                    )}\n\n                    {/* LLM Tab */}\n                    {activeTab === 'llm' && (\n                        <div className=\"space-y-4\">\n                            <div className=\"flex items-center justify-between\">\n                                <h2 className=\"text-lg font-semibold\">LLM Models</h2>\n                                <button\n                                    onClick={fetchConfigs}\n                                    className=\"flex items-center gap-2 text-sm text-rp-subtle hover:text-rp-text transition-colors\"\n                                >\n                                    <IconRefresh size={16} />\n                                    Refresh\n                                </button>\n                            </div>\n\n                            {loading ? (\n                                <div className=\"text-center py-8 text-rp-subtle\">Loading...</div>\n                            ) : (\n                                <div className=\"space-y-3\">\n                                    {configs.map((config) => (\n                                        <div\n                                            key={config.id}\n                                            className={`rounded-xl border p-4 transition-all ${config.is_default\n                                                ? 'border-rp-iris bg-rp-iris/5'\n                                                : 'border-rp-highlight-med bg-rp-surface'\n                                                }`}\n                                        >\n                                            <div className=\"flex items-center justify-between\">\n                                                <div className=\"flex items-center gap-3\">\n                                                    <div className={`w-2 h-2 rounded-full ${config.api_key_configured ? 'bg-green-400' : 'bg-red-400'\n                                                        }`} />\n                                                    <div>\n                                                        <div className=\"font-medium flex items-center gap-2\">\n                                                            {config.display_name}\n                                                            {config.is_default && (\n                                                                <span className=\"text-xs bg-rp-iris/20 text-rp-iris px-2 py-0.5 rounded\">\n                                                                    DEFAULT\n                                                                </span>\n                                                            )}\n                                                            {config.requires_premium && (\n                                                                <span className=\"text-xs bg-rp-gold/20 text-rp-gold px-2 py-0.5 rounded\">\n                                                                    PREMIUM\n                                                                </span>\n                                                            )}\n                                                        </div>\n                                                        <div className=\"text-sm text-rp-subtle\">\n                                                            {config.provider} â€¢ {config.model_id}\n                                                        </div>\n                                                    </div>\n                                                </div>\n\n                                                <div className=\"flex items-center gap-2\">\n                                                    {/* Enable/Disable */}\n                                                    <button\n                                                        onClick={() => updateConfig('toggle_enabled', config.model_id, !config.is_enabled)}\n                                                        disabled={saving === config.model_id}\n                                                        className={`px-3 py-1.5 text-xs rounded-lg transition-colors ${config.is_enabled\n                                                            ? 'bg-green-500/20 text-green-400 hover:bg-green-500/30'\n                                                            : 'bg-rp-overlay text-rp-muted hover:bg-rp-highlight-med'\n                                                            }`}\n                                                    >\n                                                        {config.is_enabled ? 'Enabled' : 'Disabled'}\n                                                    </button>\n\n                                                    {/* Web Search */}\n                                                    <button\n                                                        onClick={() => updateConfig('toggle_search', config.model_id, !config.web_search_enabled)}\n                                                        disabled={saving === config.model_id}\n                                                        className={`px-3 py-1.5 text-xs rounded-lg transition-colors ${config.web_search_enabled\n                                                            ? 'bg-blue-500/20 text-blue-400 hover:bg-blue-500/30'\n                                                            : 'bg-rp-overlay text-rp-muted hover:bg-rp-highlight-med'\n                                                            }`}\n                                                    >\n                                                        ðŸ” Search\n                                                    </button>\n\n                                                    {/* Set Default */}\n                                                    {!config.is_default && (\n                                                        <button\n                                                            onClick={() => updateConfig('set_default', config.model_id)}\n                                                            disabled={saving === config.model_id}\n                                                            className=\"px-3 py-1.5 text-xs rounded-lg bg-rp-overlay text-rp-subtle hover:bg-rp-highlight-med transition-colors\"\n                                                        >\n                                                            Set Default\n                                                        </button>\n                                                    )}\n                                                </div>\n                                            </div>\n                                        </div>\n                                    ))}\n                                </div>\n                            )}\n                        </div>\n                    )}\n\n                    {/* API Keys Tab */}\n                    {activeTab === 'api-keys' && (\n                        <div className=\"space-y-4\">\n                            <div>\n                                <h2 className=\"text-lg font-semibold\">API Keys</h2>\n                                <p className=\"text-sm text-rp-subtle mt-1\">\n                                    Configure API keys for each LLM provider. Keys are stored securely on the server.\n                                </p>\n                            </div>\n\n                            <div className=\"rounded-xl border border-rp-gold/30 bg-rp-gold/5 p-4\">\n                                <p className=\"text-sm text-rp-gold\">\n                                    âš ï¸ <strong>Important:</strong> API keys set here will update server environment variables.\n                                    Changes require a server restart to take effect.\n                                </p>\n                            </div>\n\n                            <div className=\"space-y-3\">\n                                {API_KEY_CONFIGS.map((keyConfig) => {\n                                    const llmConfig = configs.find(c => c.provider === keyConfig.provider)\n                                    const isConfigured = llmConfig?.api_key_configured || false\n\n                                    return (\n                                        <div\n                                            key={keyConfig.provider}\n                                            className=\"rounded-xl border border-rp-highlight-med bg-rp-surface p-4\"\n                                        >\n                                            <div className=\"flex items-center justify-between mb-3\">\n                                                <div className=\"flex items-center gap-3\">\n                                                    <div className={`w-2 h-2 rounded-full ${isConfigured ? 'bg-green-400' : 'bg-red-400'\n                                                        }`} />\n                                                    <span className=\"font-medium\">{keyConfig.label}</span>\n                                                    <span className=\"text-xs text-rp-muted\">{keyConfig.envVar}</span>\n                                                </div>\n                                                <span className={`text-xs ${isConfigured ? 'text-green-400' : 'text-rp-muted'}`}>\n                                                    {isConfigured ? 'âœ“ Configured' : 'Not Set'}\n                                                </span>\n                                            </div>\n\n                                            <div className=\"flex gap-2\">\n                                                <div className=\"relative flex-1\">\n                                                    <input\n                                                        type={showKeys[keyConfig.provider] ? 'text' : 'password'}\n                                                        value={apiKeys[keyConfig.provider] || ''}\n                                                        onChange={(e) => setApiKeys({\n                                                            ...apiKeys,\n                                                            [keyConfig.provider]: e.target.value\n                                                        })}\n                                                        placeholder={keyConfig.placeholder}\n                                                        className=\"w-full px-3 py-2 rounded-lg border border-rp-highlight-med bg-rp-overlay text-rp-text placeholder-rp-muted text-sm pr-10\"\n                                                    />\n                                                    <button\n                                                        type=\"button\"\n                                                        onClick={() => setShowKeys({\n                                                            ...showKeys,\n                                                            [keyConfig.provider]: !showKeys[keyConfig.provider]\n                                                        })}\n                                                        className=\"absolute right-2 top-1/2 -translate-y-1/2 text-rp-muted hover:text-rp-text\"\n                                                    >\n                                                        {showKeys[keyConfig.provider] ? (\n                                                            <IconEyeOff size={18} />\n                                                        ) : (\n                                                            <IconEye size={18} />\n                                                        )}\n                                                    </button>\n                                                </div>\n                                                <button\n                                                    onClick={() => saveApiKey(keyConfig.provider, keyConfig.envVar)}\n                                                    disabled={!apiKeys[keyConfig.provider] || savingKey === keyConfig.provider}\n                                                    className=\"px-4 py-2 rounded-lg bg-rp-iris text-white text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed hover:bg-rp-iris/80 transition-colors\"\n                                                >\n                                                    {savingKey === keyConfig.provider ? 'Saving...' : 'Save'}\n                                                </button>\n                                            </div>\n                                        </div>\n                                    )\n                                })}\n                            </div>\n                        </div>\n                    )}\n                </main>\n            </div>\n        </AdminPasswordGate>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/app/[locale]/admin/tiers/page.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":93,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":93,"endColumn":90,"fix":{"range":[3434,3490],"text":"bg-rp-base flex min-h-screen items-center justify-center"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":102,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":102,"endColumn":66,"fix":{"range":[3702,3738],"text":"bg-rp-base text-rp-text min-h-screen"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":104,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":104,"endColumn":79,"fix":{"range":[3807,3849],"text":"border-rp-highlight-med border-b px-6 py-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":109,"column":33,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":109,"endColumn":120,"fix":{"range":[4113,4188],"text":"text-rp-subtle hover:text-rp-text flex items-center gap-2 transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":114,"column":34,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":114,"endColumn":74,"fix":{"range":[4406,4434],"text":"bg-rp-highlight-med h-6 w-px"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-3, w-3' could be replaced by the 'size-3' shorthand!","line":174,"column":62,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":174,"endColumn":143,"fix":{"range":[7872,7896],"text":"`size-3 rounded-full${"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":194,"column":68,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":194,"endColumn":102,"fix":{"range":[9392,9414],"text":"text-rp-subtle text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":273,"column":42,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":273,"endColumn":86,"fix":{"range":[14681,14713],"text":"divide-rp-highlight-med divide-y"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-2, w-2' could be replaced by the 'size-2' shorthand!","line":278,"column":62,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":278,"endColumn":153,"fix":{"range":[15153,15177],"text":"`size-2 rounded-full${"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-2, w-2' could be replaced by the 'size-2' shorthand!","line":283,"column":62,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":283,"endColumn":153,"fix":{"range":[15701,15725],"text":"`size-2 rounded-full${"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":287,"column":54,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":287,"endColumn":112,"fix":{"range":[16098,16144],"text":"text-rp-subtle flex items-center gap-4 text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":307,"column":42,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":307,"endColumn":86,"fix":{"range":[17236,17268],"text":"divide-rp-highlight-med divide-y"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":321,"column":55,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":321,"endColumn":89,"fix":{"range":[18459,18481],"text":"text-rp-subtle text-sm"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-3, w-3' could be replaced by the 'size-3' shorthand!","line":343,"column":54,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":343,"endColumn":143,"fix":{"range":[19751,19775],"text":"`size-3 rounded-full${"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":346,"column":56,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":346,"endColumn":100,"fix":{"range":[20056,20088],"text":"text-rp-subtle font-mono text-xs"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":15,"source":"\"use client\"\n\nimport { useState, useEffect } from 'react'\nimport Link from 'next/link'\nimport { IconArrowLeft, IconSparkles, IconSettings2, IconHistory, IconWebhook, IconCreditCard } from '@tabler/icons-react'\nimport { AdminPasswordGate } from '@/components/admin/AdminPasswordGate'\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Switch } from '@/components/ui/switch'\nimport { Input } from '@/components/ui/input'\nimport { Badge } from '@/components/ui/badge'\nimport { Label } from '@/components/ui/label'\n\nexport default function TierManagementPage() {\n    const [features, setFeatures] = useState<any[]>([])\n    const [providers, setProviders] = useState<any[]>([])\n    const [history, setHistory] = useState<any[]>([])\n    const [webhooks, setWebhooks] = useState<any[]>([])\n    const [priceMappings, setPriceMappings] = useState<any[]>([])\n    const [loading, setLoading] = useState(true)\n\n    useEffect(() => {\n        loadData()\n    }, [])\n\n    async function loadData() {\n        setLoading(true)\n        try {\n            const [featuresRes, providersRes, historyRes, webhooksRes, mappingsRes] = await Promise.all([\n                fetch('/api/admin/features'),\n                fetch('/api/admin/llm-providers'),\n                fetch('/api/admin/tiers/history?limit=50'),\n                fetch('/api/admin/webhooks?limit=50'),\n                fetch('/api/admin/tiers/price-mapping')\n            ])\n\n            const [featuresData, providersData, historyData, webhooksData, mappingsData] = await Promise.all([\n                featuresRes.json(),\n                providersRes.json(),\n                historyRes.json(),\n                webhooksRes.json(),\n                mappingsRes.json()\n            ])\n\n            setFeatures(featuresData.features || [])\n            setProviders(providersData.providers || [])\n            setHistory(historyData.history || [])\n            setWebhooks(webhooksData.events || [])\n            setPriceMappings(mappingsData.mappings || [])\n        } catch (error) {\n            console.error('Failed to load data:', error)\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    async function updateFeature(featureKey: string, updates: any) {\n        try {\n            const feature = features.find(f => f.feature_key === featureKey)\n            await fetch('/api/admin/features', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ ...feature, ...updates })\n            })\n            loadData()\n        } catch (error) {\n            console.error('Failed to update feature:', error)\n        }\n    }\n\n    async function syncAllTiers() {\n        try {\n            const res = await fetch('/api/admin/tiers/sync')\n            const data = await res.json()\n            alert(`Synced ${data.updated_count} users`)\n            loadData()\n        } catch (error) {\n            console.error('Failed to sync tiers:', error)\n        }\n    }\n\n    const tierColors = {\n        wanderer: 'bg-gray-500',\n        soul_weaver: 'bg-blue-500',\n        architect: 'bg-purple-500',\n        titan: 'bg-amber-500'\n    }\n\n    if (loading) {\n        return (\n            <AdminPasswordGate>\n                <div className=\"flex min-h-screen items-center justify-center bg-rp-base\">\n                    <div className=\"text-rp-text\">Loading...</div>\n                </div>\n            </AdminPasswordGate>\n        )\n    }\n\n    return (\n        <AdminPasswordGate>\n            <div className=\"min-h-screen bg-rp-base text-rp-text\">\n                {/* Header */}\n                <header className=\"border-b border-rp-highlight-med px-6 py-4\">\n                    <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center gap-4\">\n                            <Link\n                                href=\"/admin\"\n                                className=\"flex items-center gap-2 text-rp-subtle transition-colors hover:text-rp-text\"\n                            >\n                                <IconArrowLeft size={20} />\n                                Back to Admin\n                            </Link>\n                            <div className=\"h-6 w-px bg-rp-highlight-med\" />\n                            <h1 className=\"text-xl font-semibold\">\n                                ðŸ’Ž Tier Management\n                            </h1>\n                        </div>\n                        <Button onClick={syncAllTiers} variant=\"outline\">\n                            Sync All Users\n                        </Button>\n                    </div>\n                </header>\n\n                {/* Content */}\n                <main className=\"mx-auto max-w-7xl p-6\">\n                    <Tabs defaultValue=\"features\" className=\"space-y-6\">\n                        <TabsList className=\"grid w-full grid-cols-5\">\n                            <TabsTrigger value=\"features\">\n                                <IconSparkles size={16} className=\"mr-2\" />\n                                Features\n                            </TabsTrigger>\n                            <TabsTrigger value=\"providers\">\n                                <IconSettings2 size={16} className=\"mr-2\" />\n                                LLM Providers\n                            </TabsTrigger>\n                            <TabsTrigger value=\"history\">\n                                <IconHistory size={16} className=\"mr-2\" />\n                                History\n                            </TabsTrigger>\n                            <TabsTrigger value=\"webhooks\">\n                                <IconWebhook size={16} className=\"mr-2\" />\n                                Webhooks\n                            </TabsTrigger>\n                            <TabsTrigger value=\"pricing\">\n                                <IconCreditCard size={16} className=\"mr-2\" />\n                                Price Mapping\n                            </TabsTrigger>\n                        </TabsList>\n\n                        {/* Features Tab */}\n                        <TabsContent value=\"features\" className=\"space-y-4\">\n                            <div className=\"mb-4\">\n                                <h2 className=\"text-2xl font-bold\">Feature Configuration</h2>\n                                <p className=\"text-rp-subtle\">Toggle features and set limits per subscription tier</p>\n                            </div>\n\n                            {features.map((feature) => (\n                                <Card key={feature.id}>\n                                    <CardHeader>\n                                        <div className=\"flex items-start justify-between\">\n                                            <div>\n                                                <CardTitle>{feature.feature_name}</CardTitle>\n                                                <CardDescription>{feature.feature_description}</CardDescription>\n                                            </div>\n                                            <Badge variant=\"outline\">{feature.category}</Badge>\n                                        </div>\n                                    </CardHeader>\n                                    <CardContent>\n                                        <div className=\"grid grid-cols-4 gap-6\">\n                                            {['wanderer', 'soul_weaver', 'architect', 'titan'].map((tier) => (\n                                                <div key={tier} className=\"space-y-3\">\n                                                    <div className=\"flex items-center gap-2\">\n                                                        <div className={`h-3 w-3 rounded-full ${tierColors[tier as keyof typeof tierColors]}`} />\n                                                        <h4 className=\"font-medium capitalize\">\n                                                            {tier.replace('_', ' ')}\n                                                        </h4>\n                                                    </div>\n\n                                                    <div className=\"flex items-center gap-2\">\n                                                        <Switch\n                                                            checked={feature[`${tier}_enabled`]}\n                                                            onCheckedChange={(checked) =>\n                                                                updateFeature(feature.feature_key, {\n                                                                    [`${tier}_enabled`]: checked\n                                                                })\n                                                            }\n                                                        />\n                                                        <Label className=\"text-sm\">Enabled</Label>\n                                                    </div>\n\n                                                    {feature.feature_type === 'limit' && (\n                                                        <div className=\"space-y-1\">\n                                                            <Label className=\"text-xs text-rp-subtle\">Limit</Label>\n                                                            <Input\n                                                                type=\"number\"\n                                                                placeholder=\"Unlimited\"\n                                                                value={feature[`${tier}_limit`] || ''}\n                                                                onChange={(e) =>\n                                                                    updateFeature(feature.feature_key, {\n                                                                        [`${tier}_limit`]: parseInt(e.target.value) || null\n                                                                    })\n                                                                }\n                                                                className=\"h-8\"\n                                                            />\n                                                        </div>\n                                                    )}\n                                                </div>\n                                            ))}\n                                        </div>\n                                    </CardContent>\n                                </Card>\n                            ))}\n                        </TabsContent>\n\n                        {/* LLM Providers Tab */}\n                        <TabsContent value=\"providers\" className=\"space-y-4\">\n                            <div className=\"mb-4\">\n                                <h2 className=\"text-2xl font-bold\">LLM Provider Management</h2>\n                                <p className=\"text-rp-subtle\">Configure available AI models per tier</p>\n                            </div>\n\n                            <div className=\"grid gap-4\">\n                                {providers.map((provider) => (\n                                    <Card key={provider.id}>\n                                        <CardHeader>\n                                            <div className=\"flex items-start justify-between\">\n                                                <div>\n                                                    <CardTitle>{provider.provider_name}</CardTitle>\n                                                    <CardDescription>{provider.provider_description}</CardDescription>\n                                                </div>\n                                                <Badge variant={provider.is_active ? 'default' : 'secondary'}>\n                                                    {provider.is_active ? 'Active' : 'Inactive'}\n                                                </Badge>\n                                            </div>\n                                        </CardHeader>\n                                        <CardContent>\n                                            <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                                                <div>\n                                                    <span className=\"text-rp-subtle\">Default Model:</span>\n                                                    <span className=\"ml-2 font-mono\">{provider.default_model}</span>\n                                                </div>\n                                                <div>\n                                                    <span className=\"text-rp-subtle\">Min Tier:</span>\n                                                    <span className=\"ml-2 capitalize\">\n                                                        {['wanderer', 'soul_weaver', 'architect', 'titan'][provider.min_tier_index]}\n                                                    </span>\n                                                </div>\n                                                <div>\n                                                    <span className=\"text-rp-subtle\">API Endpoint:</span>\n                                                    <span className=\"ml-2 font-mono text-xs\">{provider.api_endpoint}</span>\n                                                </div>\n                                                <div>\n                                                    <span className=\"text-rp-subtle\">Streaming:</span>\n                                                    <span className=\"ml-2\">{provider.supports_streaming ? 'âœ…' : 'âŒ'}</span>\n                                                </div>\n                                            </div>\n                                        </CardContent>\n                                    </Card>\n                                ))}\n                            </div>\n                        </TabsContent>\n\n                        {/* History Tab */}\n                        <TabsContent value=\"history\" className=\"space-y-4\">\n                            <div className=\"mb-4\">\n                                <h2 className=\"text-2xl font-bold\">Tier Change History</h2>\n                                <p className=\"text-rp-subtle\">Audit log of all tier changes</p>\n                            </div>\n\n                            <Card>\n                                <CardContent className=\"p-0\">\n                                    <div className=\"divide-y divide-rp-highlight-med\">\n                                        {history.map((entry) => (\n                                            <div key={entry.id} className=\"flex items-center justify-between p-4\">\n                                                <div className=\"flex items-center gap-4\">\n                                                    <div className=\"flex items-center gap-2\">\n                                                        <div className={`h-2 w-2 rounded-full ${tierColors[entry.old_tier as keyof typeof tierColors]}`} />\n                                                        <span className=\"text-sm capitalize\">{entry.old_tier?.replace('_', ' ') || 'New'}</span>\n                                                    </div>\n                                                    <span className=\"text-rp-subtle\">â†’</span>\n                                                    <div className=\"flex items-center gap-2\">\n                                                        <div className={`h-2 w-2 rounded-full ${tierColors[entry.new_tier as keyof typeof tierColors]}`} />\n                                                        <span className=\"text-sm capitalize\">{entry.new_tier.replace('_', ' ')}</span>\n                                                    </div>\n                                                </div>\n                                                <div className=\"flex items-center gap-4 text-sm text-rp-subtle\">\n                                                    <Badge variant=\"outline\">{entry.change_reason}</Badge>\n                                                    <span>{new Date(entry.created_at).toLocaleString()}</span>\n                                                </div>\n                                            </div>\n                                        ))}\n                                    </div>\n                                </CardContent>\n                            </Card>\n                        </TabsContent>\n\n                        {/* Webhooks Tab */}\n                        <TabsContent value=\"webhooks\" className=\"space-y-4\">\n                            <div className=\"mb-4\">\n                                <h2 className=\"text-2xl font-bold\">Stripe Webhook Events</h2>\n                                <p className=\"text-rp-subtle\">Monitor and debug webhook processing</p>\n                            </div>\n\n                            <Card>\n                                <CardContent className=\"p-0\">\n                                    <div className=\"divide-y divide-rp-highlight-med\">\n                                        {webhooks.map((event) => (\n                                            <div key={event.id} className=\"flex items-center justify-between p-4\">\n                                                <div className=\"flex-1\">\n                                                    <div className=\"flex items-center gap-2\">\n                                                        <Badge variant={event.processed ? 'default' : 'destructive'}>\n                                                            {event.processed ? 'Processed' : 'Failed'}\n                                                        </Badge>\n                                                        <span className=\"font-mono text-sm\">{event.event_type}</span>\n                                                    </div>\n                                                    {event.error_message && (\n                                                        <p className=\"mt-1 text-xs text-red-500\">{event.error_message}</p>\n                                                    )}\n                                                </div>\n                                                <span className=\"text-sm text-rp-subtle\">\n                                                    {new Date(event.created_at).toLocaleString()}\n                                                </span>\n                                            </div>\n                                        ))}\n                                    </div>\n                                </CardContent>\n                            </Card>\n                        </TabsContent>\n\n                        {/* Price Mapping Tab */}\n                        <TabsContent value=\"pricing\" className=\"space-y-4\">\n                            <div className=\"mb-4\">\n                                <h2 className=\"text-2xl font-bold\">Stripe Price Mapping</h2>\n                                <p className=\"text-rp-subtle\">Map Stripe price IDs to subscription tiers</p>\n                            </div>\n\n                            <div className=\"grid gap-4\">\n                                {priceMappings.map((mapping) => (\n                                    <Card key={mapping.id}>\n                                        <CardContent className=\"flex items-center justify-between p-4\">\n                                            <div className=\"flex items-center gap-4\">\n                                                <div className={`h-3 w-3 rounded-full ${tierColors[mapping.tier as keyof typeof tierColors]}`} />\n                                                <div>\n                                                    <p className=\"font-medium\">{mapping.tier_name}</p>\n                                                    <p className=\"font-mono text-xs text-rp-subtle\">{mapping.stripe_price_id}</p>\n                                                </div>\n                                            </div>\n                                            <Badge variant={mapping.is_active ? 'default' : 'secondary'}>\n                                                {mapping.is_active ? 'Active' : 'Inactive'}\n                                            </Badge>\n                                        </CardContent>\n                                    </Card>\n                                ))}\n                            </div>\n                        </TabsContent>\n                    </Tabs>\n                </main>\n            </div>\n        </AdminPasswordGate>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/app/[locale]/layout.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":105,"column":13,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":105,"endColumn":113,"fix":{"range":[2756,2844],"text":"bg-background text-foreground selection:bg-primary/20 selection:text-primary antialiased"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":119,"column":21,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":119,"endColumn":62,"fix":{"range":[3428,3457],"text":"flex-1 pb-20 md:ml-20 md:pb-0"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":2,"source":"import { Toaster } from \"@/components/ui/sonner\"\nimport { GlobalState } from \"@/components/utility/global-state\"\nimport { Providers } from \"@/components/utility/providers\"\nimport TranslationsProvider from \"@/components/utility/translations-provider\"\nimport { MinimalSidebar } from \"@/components/layout/MinimalSidebar\"\nimport { MobileNav } from \"@/components/layout/MobileNav\"\nimport initTranslations from \"@/lib/i18n\"\nimport { Database } from \"@/supabase/types\"\nimport { createServerClient } from \"@supabase/ssr\"\nimport { Metadata, Viewport } from \"next\"\n// import { Inter } from \"next/font/google\"\nimport { cookies } from \"next/headers\"\nimport { ReactNode } from \"react\"\nimport \"./globals.css\"\n\n// Force Node.js runtime to avoid Edge Runtime __dirname issues\nexport const runtime = \"nodejs\"\nexport const dynamic = \"force-dynamic\"\n\n// const inter = Inter({ subsets: [\"latin\"] })\nconst APP_NAME = \"Remrin.ai\"\nconst APP_DEFAULT_TITLE = \"Remrin.ai\"\nconst APP_TITLE_TEMPLATE = \"%s - Remrin.ai\"\nconst APP_DESCRIPTION = \"Remrin.ai - Your Advanced AI Assistant\"\n\ninterface RootLayoutProps {\n  children: ReactNode\n  params: {\n    locale: string\n  }\n}\n\nexport const metadata: Metadata = {\n  applicationName: APP_NAME,\n  title: {\n    default: APP_DEFAULT_TITLE,\n    template: APP_TITLE_TEMPLATE\n  },\n  description: APP_DESCRIPTION,\n  manifest: \"/manifest.json\",\n  appleWebApp: {\n    capable: true,\n    statusBarStyle: \"black\",\n    title: APP_DEFAULT_TITLE\n    // startUpImage: [],\n  },\n  other: {\n    \"mobile-web-app-capable\": \"yes\"\n  },\n  formatDetection: {\n    telephone: false\n  },\n  openGraph: {\n    type: \"website\",\n    siteName: APP_NAME,\n    title: {\n      default: APP_DEFAULT_TITLE,\n      template: APP_TITLE_TEMPLATE\n    },\n    description: APP_DESCRIPTION\n  },\n  twitter: {\n    card: \"summary\",\n    title: {\n      default: APP_DEFAULT_TITLE,\n      template: APP_TITLE_TEMPLATE\n    },\n    description: APP_DESCRIPTION\n  }\n}\n\nexport const viewport: Viewport = {\n  themeColor: \"#000000\",\n  width: 'device-width',\n  initialScale: 1,\n  maximumScale: 1,\n  userScalable: false,\n  viewportFit: 'cover',\n}\n\nconst i18nNamespaces = [\"translation\"]\n\nexport default async function RootLayout({\n  children,\n  params: { locale }\n}: RootLayoutProps) {\n  const cookieStore = cookies()\n  const supabase = createServerClient<Database>(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        get(name: string) {\n          return cookieStore.get(name)?.value\n        }\n      }\n    }\n  )\n  const session = (await supabase.auth.getSession()).data.session\n\n  const { t, resources } = await initTranslations(locale, i18nNamespaces)\n\n  return (\n    <html lang=\"en\" suppressHydrationWarning>\n      <body className=\"bg-background text-foreground antialiased selection:bg-primary/20 selection:text-primary\">\n        {/* Clean background - no effects */}\n        <Providers attribute=\"class\" defaultTheme=\"dark\">\n          <TranslationsProvider\n            namespaces={i18nNamespaces}\n            locale={locale}\n            resources={resources}\n          >\n            <Toaster richColors position=\"top-center\" duration={3000} />\n            <div className=\"flex min-h-screen\">\n              {/* Desktop Sidebar - Hidden on mobile */}\n              <MinimalSidebar />\n\n              {/* Main Content - Offset by sidebar on desktop, full width on mobile */}\n              <main className=\"flex-1 md:ml-20 pb-20 md:pb-0\">\n                <div className=\"flex h-dvh flex-col items-center overflow-x-auto\">\n                  {session ? <GlobalState>{children}</GlobalState> : children}\n                </div>\n              </main>\n\n              {/* Mobile Bottom Navigation - Hidden on desktop */}\n              <MobileNav />\n            </div>\n          </TranslationsProvider>\n        </Providers>\n      </body>\n    </html>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/app/[locale]/not-found.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":7,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":7,"endColumn":131,"fix":{"range":[277,378],"text":"bg-rp-iris/10 text-rp-iris mb-6 flex h-24 w-24 animate-pulse items-center justify-center rounded-full"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-24, w-24' could be replaced by the 'size-24' shorthand!","line":7,"column":18,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":7,"endColumn":131,"fix":{"range":[277,378],"text":"mb-6 flex size-24 items-center justify-center rounded-full bg-rp-iris/10 text-rp-iris animate-pulse"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":10,"column":17,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":10,"endColumn":86,"fix":{"range":[467,524],"text":"font-tiempos-headline mb-2 text-4xl font-bold md:text-5xl"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":11,"column":17,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":11,"endColumn":56,"fix":{"range":[562,589],"text":"text-rp-subtle mb-6 text-xl"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":17,"column":17,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":17,"endColumn":157,"fix":{"range":[855,983],"text":"rounded-full border border-white/10 bg-white/5 px-8 py-3 font-medium text-white transition-all hover:scale-105 hover:bg-white/10"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":5,"source":"import Link from \"next/link\"\nimport { IconGhost } from \"@tabler/icons-react\"\n\nexport default function NotFound() {\n    return (\n        <div className=\"flex min-h-screen flex-col items-center justify-center bg-[#050505] p-4 text-center text-white\">\n            <div className=\"mb-6 flex h-24 w-24 items-center justify-center rounded-full bg-rp-iris/10 text-rp-iris animate-pulse\">\n                <IconGhost size={48} />\n            </div>\n            <h1 className=\"mb-2 font-tiempos-headline text-4xl font-bold md:text-5xl\">404</h1>\n            <h2 className=\"mb-6 text-xl text-rp-subtle\">Lost in the Void</h2>\n            <p className=\"mb-8 max-w-md text-white/50\">\n                The soul you seek has not been summoned, or perhaps it has returned to the Aether.\n            </p>\n            <Link\n                href=\"/\"\n                className=\"rounded-full border border-white/10 bg-white/5 px-8 py-3 font-medium text-white transition-all hover:bg-white/10 hover:scale-105\"\n            >\n                Return to Sanctuary\n            </Link>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/app/[locale]/page.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 'featuredCharacters'. Either include it or remove the dependency array.","line":144,"column":6,"nodeType":"ArrayExpression","endLine":144,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [featuredCharacters]","fix":{"range":[5206,5208],"text":"[featuredCharacters]"}}]},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":224,"column":15,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":224,"endColumn":93,"fix":{"range":[8528,8594],"text":"font-tiempos-headline inline-flex items-center gap-2 font-semibold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":253,"column":16,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":253,"endColumn":110,"fix":{"range":[9546,9628],"text":"border-rp-highlight-med bg-rp-surface dark:bg-rp-base relative mt-8 border-t py-12"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":260,"column":17,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":260,"endColumn":127,"fix":{"range":[10040,10138],"text":"font-tiempos-headline text-rp-text mb-2 font-semibold transition-colors group-hover:text-amber-400"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":263,"column":16,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":263,"endColumn":49,"fix":{"range":[10212,10233],"text":"text-rp-muted text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":273,"column":17,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":273,"endColumn":128,"fix":{"range":[10660,10759],"text":"font-tiempos-headline text-rp-text mb-2 font-semibold transition-colors group-hover:text-purple-400"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":276,"column":16,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":276,"endColumn":49,"fix":{"range":[10832,10853],"text":"text-rp-muted text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":290,"column":17,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":290,"endColumn":126,"fix":{"range":[11524,11621],"text":"font-tiempos-headline text-rp-text mb-2 font-semibold transition-colors group-hover:text-cyan-400"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":293,"column":16,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":293,"endColumn":49,"fix":{"range":[11694,11715],"text":"text-rp-muted text-sm"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":8,"source":"\"use client\"\n\nimport { useEffect, useState, useContext, useMemo } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { useTheme } from \"next-themes\"\nimport Link from \"next/link\"\nimport { createClient } from \"@/lib/supabase/client\"\nimport { FeaturedCarousel, DraggableGallery } from \"@/components/discovery\"\nimport { PageTemplate, Footer, HeroHeader } from \"@/components/layout\"\nimport { RemrinContext } from \"@/context/context\"\nimport { IconSparkles, IconDiamond, IconArrowRight } from \"@tabler/icons-react\"\nimport { LottieLoader } from \"@/components/ui/lottie-loader\"\n\n\ninterface Persona {\n  id: string\n  name: string\n  description: string | null\n  image_url: string | null\n  rarity?: \"common\" | \"rare\" | \"epic\" | \"legendary\"\n  is_featured?: boolean\n  message_count?: number\n  follower_count?: number\n}\n\nconst SIDEBAR_WIDTH = 350\n\n// Demo content removed\n\n\nexport default function HomePage() {\n  const router = useRouter()\n  const { workspaces, profile } = useContext(RemrinContext)\n  const { resolvedTheme } = useTheme()\n  const [personas, setPersonas] = useState<Persona[]>([])\n  const [loading, setLoading] = useState(true)\n  const [isLoggedIn, setIsLoggedIn] = useState(false)\n  const [defaultWorkspaceId, setDefaultWorkspaceId] = useState<string | null>(null)\n\n  // Theme-aware heading color: #faf4ed for dark, #191724 for light\n  const headingColor = resolvedTheme === \"light\" ? \"#191724\" : \"#faf4ed\"\n\n  // Get default workspace when available\n  useEffect(() => {\n    if (workspaces && workspaces.length > 0) {\n      // Use the first workspace as default\n      setDefaultWorkspaceId(workspaces[0].id)\n    }\n  }, [workspaces])\n\n  useEffect(() => {\n    const fetchPersonas = async () => {\n      try {\n        const supabase = createClient()\n\n        // Check if user is logged in\n        const { data: { user } } = await supabase.auth.getUser()\n        setIsLoggedIn(!!user)\n\n        // If logged in, try to get their workspaces\n        if (user) {\n          const { data: workspaceData } = await supabase\n            .from(\"workspaces\")\n            .select(\"id\")\n            .eq(\"user_id\", user.id)\n            .limit(1)\n\n          if (workspaceData && workspaceData.length > 0) {\n            setDefaultWorkspaceId(workspaceData[0].id)\n          }\n        }\n\n        // Fetch all public personas\n        const { data: allPersonas } = await supabase\n          .from(\"personas\")\n          .select(`\n                        id, \n                        name, \n                        description, \n                        image_url,\n                        is_featured\n                    `)\n          .eq(\"visibility\", \"PUBLIC\")\n          .order(\"created_at\", { ascending: false })\n          .limit(50)\n\n        if (allPersonas && allPersonas.length > 0) {\n          // Assign random rarities for demo\n          const withRarity = allPersonas.map((p, i) => ({\n            ...p,\n            rarity: i === 0 ? \"legendary\" as const :\n              i < 3 ? \"epic\" as const :\n                i < 8 ? \"rare\" as const :\n                  \"common\" as const,\n            message_count: Math.floor(Math.random() * 50000),\n            follower_count: Math.floor(Math.random() * 10000)\n          }))\n\n          setPersonas(withRarity)\n        } else {\n          // No real personas, will use demo data\n          setPersonas([])\n        }\n      } catch (error) {\n        console.error(\"Error fetching personas:\", error)\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    fetchPersonas()\n  }, [])\n\n  // Featured characters - same as carousel, all legendary\n  const featuredCharacters = [\n    { id: \"kess\", name: \"Kess\", image_url: \"/images/featured/Kess.png\" },\n    { id: \"oma\", name: \"Oma\", image_url: \"/images/featured/Oma.png\" },\n    { id: \"silas\", name: \"Silas\", image_url: \"/images/featured/Silas.png\" },\n    { id: \"squee\", name: \"Squee\", image_url: \"/images/featured/Squee.png\" },\n    { id: \"sui\", name: \"Sui\", image_url: \"/images/featured/Sui.png\" },\n    { id: \"volt\", name: \"Volt\", image_url: \"/images/featured/Volt.png\" },\n    { id: \"boon\", name: \"Boon\", image_url: \"/images/featured/boon.png\" },\n    { id: \"cupcake\", name: \"Cupcake\", image_url: \"/images/featured/cupcake.png\" },\n    { id: \"fello-fello\", name: \"Fello Fello\", image_url: \"/images/featured/fello_fello.png\" },\n    { id: \"fen\", name: \"Fen\", image_url: \"/images/featured/fen.png\" },\n    { id: \"fenris\", name: \"Fenris\", image_url: \"/images/featured/fenris.png\" },\n    { id: \"kael\", name: \"Kael\", image_url: \"/images/featured/kael.png\" },\n    { id: \"kilo\", name: \"Kilo\", image_url: \"/images/featured/kilo.png\" },\n    { id: \"krill\", name: \"Krill\", image_url: \"/images/featured/krill.png\" },\n    { id: \"meek\", name: \"Meek\", image_url: \"/images/featured/meek.png\" },\n    { id: \"surge\", name: \"Surge\", image_url: \"/images/featured/surge.png\" },\n    { id: \"vorath\", name: \"Vorath\", image_url: \"/images/featured/vorath.png\" }\n  ]\n\n  // Generate gallery items - all legendary, no demo stats\n  const galleryItems = useMemo(() => {\n    return featuredCharacters.map(char => ({\n      ...char,\n      description: null,\n      rarity: \"legendary\" as const,\n      message_count: undefined,\n      follower_count: undefined\n    }))\n  }, [])\n\n  // Generate hero carousel items (mix of real + demo)\n  // Return only real featured personas\n  const carouselItems = useMemo(() => {\n    return personas.filter(p => p.is_featured).slice(0, 8)\n  }, [personas])\n\n  const handlePersonaClick = (persona: { id: string }) => {\n    // Only navigate for real personas (not demo)\n    // Only navigate for real personas\n\n\n    // Navigate to chat with proper workspace\n    if (defaultWorkspaceId) {\n      router.push(`/${defaultWorkspaceId}/chat?persona=${persona.id}`)\n    } else if (isLoggedIn) {\n      // User is logged in but we don't have workspace yet, redirect to setup\n      router.push(\"/setup\")\n    } else {\n      // Not logged in, redirect to login\n      router.push(\"/login\")\n    }\n  }\n\n\n\n  if (loading) {\n    return (\n      <div className=\"bg-rp-base flex min-h-screen items-center justify-center\">\n        <LottieLoader size={64} className=\"text-rp-rose\" />\n      </div>\n    )\n  }\n\n  return (\n    <PageTemplate\n      showHeader={false}\n      showFooter={false}\n      fullBleed\n      className=\"text-rp-text\"\n    >\n      {/* Clean background - no gradients */}\n\n      {/* Featured Souls Section with 3D Carousel */}\n      <section className=\"relative mt-8\">\n        <div className=\"mb-4 px-6 text-center\">\n          <h2 className=\"font-tiempos-headline inline-flex items-center gap-2 font-semibold\" style={{ fontSize: '40px', color: headingColor }}>\n            <IconSparkles size={24} className=\"text-amber-400\" />\n            Featured Souls\n            <IconSparkles size={24} className=\"text-amber-400\" />\n          </h2>\n        </div>\n        <FeaturedCarousel\n          characters={[\n            { id: \"kess\", name: \"Kess\", imageUrl: \"/images/featured/Kess.png\" },\n            { id: \"oma\", name: \"Oma\", imageUrl: \"/images/featured/Oma.png\" },\n            { id: \"silas\", name: \"Silas\", imageUrl: \"/images/featured/Silas.png\" },\n            { id: \"squee\", name: \"Squee\", imageUrl: \"/images/featured/Squee.png\" },\n            { id: \"sui\", name: \"Sui\", imageUrl: \"/images/featured/Sui.png\" },\n            { id: \"volt\", name: \"Volt\", imageUrl: \"/images/featured/Volt.png\" },\n            { id: \"boon\", name: \"Boon\", imageUrl: \"/images/featured/boon.png\" },\n            { id: \"cupcake\", name: \"Cupcake\", imageUrl: \"/images/featured/cupcake.png\" },\n            { id: \"fello-fello\", name: \"Fello Fello\", imageUrl: \"/images/featured/fello_fello.png\" },\n            { id: \"fen\", name: \"Fen\", imageUrl: \"/images/featured/fen.png\" },\n            { id: \"fenris\", name: \"Fenris\", imageUrl: \"/images/featured/fenris.png\" },\n            { id: \"kael\", name: \"Kael\", imageUrl: \"/images/featured/kael.png\" },\n            { id: \"kilo\", name: \"Kilo\", imageUrl: \"/images/featured/kilo.png\" },\n            { id: \"krill\", name: \"Krill\", imageUrl: \"/images/featured/krill.png\" },\n            { id: \"meek\", name: \"Meek\", imageUrl: \"/images/featured/meek.png\" },\n            { id: \"surge\", name: \"Surge\", imageUrl: \"/images/featured/surge.png\" },\n            { id: \"vorath\", name: \"Vorath\", imageUrl: \"/images/featured/vorath.png\" }\n          ]}\n          onCharacterClick={handlePersonaClick}\n        />\n      </section>\n\n      {/* Main Gallery */}\n      <section className=\"relative mt-8\">\n        <div className=\"mb-4 flex flex-col items-center gap-2 px-6\">\n          <h2 className=\"font-tiempos-headline font-semibold inline-flex items-center gap-2\" style={{ fontSize: '40px', color: headingColor }}>\n            <IconSparkles size={24} className=\"text-purple-400\" />\n            Explore Souls\n            <IconSparkles size={24} className=\"text-purple-400\" />\n          </h2>\n          <Link\n            href=\"/discover\"\n            className=\"flex items-center gap-1 text-sm text-purple-400 transition-colors hover:text-purple-300\"\n          >\n            View all\n            <IconArrowRight size={16} />\n          </Link>\n        </div>\n\n        <DraggableGallery\n          items={galleryItems.map(p => ({\n            id: p.id,\n            name: p.name,\n            description: p.description,\n            imageUrl: p.image_url,\n            rarity: p.rarity,\n            messageCount: p.message_count,\n            followersCount: p.follower_count\n          }))}\n          onItemClick={handlePersonaClick}\n        />\n      </section>\n\n      {/* Quick Actions Section */}\n      <section className=\"relative mt-8 border-t border-rp-highlight-med bg-rp-surface dark:bg-rp-base py-12\">\n        <div className=\"mx-auto grid max-w-4xl grid-cols-1 gap-6 px-6 md:grid-cols-3\">\n          <Link\n            href=\"/summon\"\n            className=\"group rounded-2xl border border-amber-500/20 bg-gradient-to-br from-amber-500/10 to-orange-500/10 p-6 transition-colors hover:border-amber-500/40\"\n          >\n            <IconDiamond size={32} className=\"mb-4 text-amber-400\" />\n            <h3 className=\"font-tiempos-headline mb-2 font-semibold text-rp-text transition-colors group-hover:text-amber-400\">\n              Soul Summons\n            </h3>\n            <p className=\"text-sm text-rp-muted\">\n              Try your luck to summon rare and legendary Souls\n            </p>\n          </Link>\n\n          <Link\n            href=\"/studio\"\n            className=\"group rounded-2xl border border-purple-500/20 bg-gradient-to-br from-purple-500/10 to-pink-500/10 p-6 transition-colors hover:border-purple-500/40\"\n          >\n            <IconSparkles size={32} className=\"mb-4 text-purple-400\" />\n            <h3 className=\"font-tiempos-headline mb-2 font-semibold text-rp-text transition-colors group-hover:text-purple-400\">\n              Soul Studio\n            </h3>\n            <p className=\"text-sm text-rp-muted\">\n              Create and customize your own unique Souls\n            </p>\n          </Link>\n\n          <Link\n            href=\"/marketplace\"\n            className=\"group rounded-2xl border border-cyan-500/20 bg-gradient-to-br from-cyan-500/10 to-blue-500/10 p-6 transition-colors hover:border-cyan-500/40\"\n          >\n            <svg className=\"mb-4 size-8 text-cyan-400\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <path d=\"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z\" />\n              <line x1=\"3\" y1=\"6\" x2=\"21\" y2=\"6\" />\n              <path d=\"M16 10a4 4 0 0 1-8 0\" />\n            </svg>\n            <h3 className=\"font-tiempos-headline mb-2 font-semibold text-rp-text transition-colors group-hover:text-cyan-400\">\n              Soul Bazaar\n            </h3>\n            <p className=\"text-sm text-rp-muted\">\n              Buy and sell Souls from the community\n            </p>\n          </Link>\n        </div>\n      </section>\n\n\n      {/* Footer */}\n      <Footer />\n    </PageTemplate>\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/app/[locale]/settings/llm/page.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":64,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":64,"endColumn":86,"fix":{"range":[2218,2274],"text":"bg-rp-base flex min-h-screen items-center justify-center"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":73,"column":14,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":73,"endColumn":53,"fix":{"range":[2468,2495],"text":"bg-rp-base min-h-screen p-6"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":78,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":78,"endColumn":72,"fix":{"range":[2720,2751],"text":"text-rp-text text-3xl font-bold"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-3, w-3' could be replaced by the 'size-3' shorthand!","line":82,"column":30,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":82,"endColumn":115,"fix":{"range":[3011,3035],"text":"`size-3 rounded-full${"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":97,"column":37,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":98,"endColumn":121,"fix":{"range":[3870,3907],"text":"border-rp-iris ring-rp-iris/20 ring-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":97,"column":37,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":98,"endColumn":121,"fix":{"range":[3985,4030],"text":"hover:border-rp-highlight-high cursor-pointer"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":111,"column":53,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":111,"endColumn":125,"fix":{"range":[4863,4923],"text":"flex cursor-pointer items-center gap-2 text-lg font-semibold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":133,"column":46,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":133,"endColumn":101,"fix":{"range":[6563,6606],"text":"text-rp-subtle flex flex-wrap gap-4 text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":163,"column":37,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":163,"endColumn":75,"fix":{"range":[8359,8385],"text":"text-rp-text font-semibold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":164,"column":36,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":164,"endColumn":70,"fix":{"range":[8460,8482],"text":"text-rp-subtle text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":177,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":177,"endColumn":72,"fix":{"range":[9012,9046],"text":"text-rp-subtle text-center text-sm"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":11,"source":"\"use client\"\n\nimport { useState, useEffect } from 'react'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group'\nimport { Label } from '@/components/ui/label'\nimport { Badge } from '@/components/ui/badge'\nimport { Button } from '@/components/ui/button'\nimport { IconSparkles, IconLock, IconCheck } from '@tabler/icons-react'\n\nexport default function LLMSettingsPage() {\n    const [providers, setProviders] = useState<any[]>([])\n    const [selectedProvider, setSelectedProvider] = useState('deepseek')\n    const [userTier, setUserTier] = useState('wanderer')\n    const [tierName, setTierName] = useState('Wanderer')\n    const [loading, setLoading] = useState(true)\n    const [saving, setSaving] = useState(false)\n\n    useEffect(() => {\n        loadProviders()\n    }, [])\n\n    async function loadProviders() {\n        try {\n            const res = await fetch('/api/user/llm-providers')\n            const data = await res.json()\n            setProviders(data.providers || [])\n            setSelectedProvider(data.current_provider || 'deepseek')\n            setUserTier(data.tier || 'wanderer')\n            setTierName(data.tier_name || 'Wanderer')\n        } catch (error) {\n            console.error('Failed to load providers:', error)\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    async function updateProvider(providerKey: string) {\n        setSaving(true)\n        try {\n            await fetch('/api/user/llm-providers', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ provider: providerKey })\n            })\n            setSelectedProvider(providerKey)\n        } catch (error) {\n            console.error('Failed to update provider:', error)\n            alert('Failed to update provider')\n        } finally {\n            setSaving(false)\n        }\n    }\n\n    const tierColors = {\n        wanderer: 'bg-gray-500',\n        soul_weaver: 'bg-blue-500',\n        architect: 'bg-purple-500',\n        titan: 'bg-amber-500'\n    }\n\n    if (loading) {\n        return (\n            <div className=\"flex min-h-screen items-center justify-center bg-rp-base\">\n                <div className=\"text-rp-text\">Loading...</div>\n            </div>\n        )\n    }\n\n    const canSelectProvider = userTier !== 'wanderer'\n\n    return (\n        <div className=\"min-h-screen bg-rp-base p-6\">\n            <div className=\"mx-auto max-w-4xl space-y-6\">\n                {/* Header */}\n                <div className=\"flex items-center justify-between\">\n                    <div>\n                        <h1 className=\"text-3xl font-bold text-rp-text\">AI Model Settings</h1>\n                        <p className=\"text-rp-subtle\">Choose which AI model powers your conversations</p>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                        <div className={`h-3 w-3 rounded-full ${tierColors[userTier as keyof typeof tierColors]}`} />\n                        <Badge variant=\"outline\">{tierName}</Badge>\n                    </div>\n                </div>\n\n                {/* Provider Selection */}\n                <RadioGroup value={selectedProvider} onValueChange={updateProvider} disabled={saving}>\n                    <div className=\"grid gap-4\">\n                        {providers.map((provider) => {\n                            const isSelected = selectedProvider === provider.provider_key\n                            const isLocked = !canSelectProvider && provider.provider_key !== 'deepseek'\n\n                            return (\n                                <Card\n                                    key={provider.id}\n                                    className={`relative transition-all ${isSelected ? 'border-rp-iris ring-2 ring-rp-iris/20' : ''\n                                        } ${isLocked ? 'opacity-60' : 'cursor-pointer hover:border-rp-highlight-high'}`}\n                                >\n                                    <CardHeader>\n                                        <div className=\"flex items-start gap-4\">\n                                            <RadioGroupItem\n                                                value={provider.provider_key}\n                                                id={provider.provider_key}\n                                                disabled={isLocked}\n                                                className=\"mt-1\"\n                                            />\n                                            <div className=\"flex-1\">\n                                                <Label\n                                                    htmlFor={provider.provider_key}\n                                                    className=\"flex items-center gap-2 text-lg font-semibold cursor-pointer\"\n                                                >\n                                                    {provider.provider_name}\n                                                    {isSelected && <IconCheck size={20} className=\"text-rp-iris\" />}\n                                                    {isLocked && <IconLock size={16} className=\"text-rp-muted\" />}\n                                                    {provider.provider_key === 'deepseek' && (\n                                                        <Badge variant=\"secondary\">Free</Badge>\n                                                    )}\n                                                    {provider.provider_key !== 'deepseek' && (\n                                                        <Badge variant=\"default\" className=\"bg-rp-iris\">\n                                                            <IconSparkles size={12} className=\"mr-1\" />\n                                                            Pro\n                                                        </Badge>\n                                                    )}\n                                                </Label>\n                                                <CardDescription className=\"mt-1\">\n                                                    {provider.provider_description}\n                                                </CardDescription>\n                                            </div>\n                                        </div>\n                                    </CardHeader>\n                                    <CardContent>\n                                        <div className=\"flex flex-wrap gap-4 text-sm text-rp-subtle\">\n                                            <div>\n                                                <span className=\"font-medium\">Model:</span>\n                                                <span className=\"ml-2 font-mono\">{provider.default_model}</span>\n                                            </div>\n                                            {provider.cost_per_1k_tokens && (\n                                                <div>\n                                                    <span className=\"font-medium\">Cost:</span>\n                                                    <span className=\"ml-2\">${provider.cost_per_1k_tokens}/1K tokens</span>\n                                                </div>\n                                            )}\n                                            {provider.supports_streaming && (\n                                                <div>\n                                                    <span className=\"font-medium\">Streaming:</span>\n                                                    <span className=\"ml-2\">âœ… Yes</span>\n                                                </div>\n                                            )}\n                                        </div>\n                                    </CardContent>\n                                </Card>\n                            )\n                        })}\n                    </div>\n                </RadioGroup>\n\n                {/* Upgrade Prompt */}\n                {!canSelectProvider && (\n                    <Card className=\"border-rp-iris bg-rp-iris/5\">\n                        <CardContent className=\"flex items-center justify-between p-6\">\n                            <div>\n                                <h3 className=\"font-semibold text-rp-text\">Unlock More AI Models</h3>\n                                <p className=\"text-sm text-rp-subtle\">\n                                    Upgrade to Soul Weaver or higher to access GPT-4, Claude, and Gemini\n                                </p>\n                            </div>\n                            <Button className=\"bg-rp-iris hover:bg-rp-iris/90\">\n                                Upgrade Now\n                            </Button>\n                        </CardContent>\n                    </Card>\n                )}\n\n                {/* Save Status */}\n                {saving && (\n                    <div className=\"text-center text-sm text-rp-subtle\">\n                        Saving...\n                    </div>\n                )}\n            </div>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/app/[locale]/studio/analytics/page.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":21,"column":27,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":21,"endColumn":100,"fix":{"range":[579,640],"text":"bg-rp-highlight-low h-[300px] w-full animate-pulse rounded-lg"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":25,"column":27,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":25,"endColumn":100,"fix":{"range":[806,867],"text":"bg-rp-highlight-low h-[300px] w-full animate-pulse rounded-lg"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":79,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":79,"endColumn":86,"fix":{"range":[2239,2295],"text":"bg-rp-base flex min-h-screen items-center justify-center"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":81,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":81,"endColumn":123,"fix":{"range":[2401,2486],"text":"border-rp-highlight-med border-t-rp-pine h-12 w-12 animate-spin rounded-full border-4"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-12, w-12' could be replaced by the 'size-12' shorthand!","line":81,"column":26,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":81,"endColumn":123,"fix":{"range":[2401,2486],"text":"size-12 animate-spin rounded-full border-4 border-rp-highlight-med border-t-rp-pine"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":89,"column":14,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":89,"endColumn":68,"fix":{"range":[2711,2753],"text":"bg-rp-base text-rp-text min-h-screen pb-20"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":91,"column":21,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":91,"endColumn":124,"fix":{"range":[2814,2905],"text":"border-rp-highlight-med bg-rp-base/80 sticky top-0 z-10 border-b px-6 py-4 backdrop-blur-md"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":92,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":92,"endColumn":85,"fix":{"range":[2940,2991],"text":"mx-auto flex max-w-7xl items-center justify-between"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":96,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":96,"endColumn":116,"fix":{"range":[3168,3243],"text":"text-rp-subtle hover:text-rp-text flex items-center gap-2 transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":101,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":101,"endColumn":70,"fix":{"range":[3434,3462],"text":"bg-rp-highlight-med h-6 w-px"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":102,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":102,"endColumn":95,"fix":{"range":[3506,3560],"text":"text-rp-pine flex items-center gap-2 text-xl font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":109,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":109,"endColumn":197,"fix":{"range":[3832,3992],"text":"bg-rp-surface border-rp-highlight-med hover:bg-rp-overlay flex items-center gap-2 rounded-lg border px-4 py-2 text-sm font-medium transition-all active:scale-95"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":117,"column":19,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":117,"endColumn":117,"fix":{"range":[4245,4331],"text":"animate-in fade-in slide-in-from-bottom-4 mx-auto max-w-7xl space-y-8 p-6 duration-500"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":119,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":119,"endColumn":101,"fix":{"range":[4398,4461],"text":"border-rp-love bg-rp-love/10 text-rp-love rounded-lg border p-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":125,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":125,"endColumn":126,"fix":{"range":[4616,4708],"text":"from-rp-pine/20 to-rp-foam/20 border-rp-pine/20 mb-8 rounded-2xl border bg-gradient-to-r p-8"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":126,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":126,"endColumn":85,"fix":{"range":[4746,4794],"text":"mb-2 flex items-center gap-3 text-2xl font-black"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":128,"column":31,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":128,"endColumn":127,"fix":{"range":[4889,4973],"text":"bg-rp-pine/30 text-rp-pine rounded-full px-2 py-1 text-xs uppercase tracking-tighter"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":163,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":163,"endColumn":87,"fix":{"range":[6621,6667],"text":"flex items-center gap-2 px-1 text-lg font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":172,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":172,"endColumn":87,"fix":{"range":[7074,7120],"text":"flex items-center gap-2 px-1 text-lg font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":182,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":182,"endColumn":61,"fix":{"range":[7560,7583],"text":"space-y-4 lg:col-span-1"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":183,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":183,"endColumn":87,"fix":{"range":[7625,7671],"text":"flex items-center gap-2 px-1 text-lg font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":187,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":187,"endColumn":123,"fix":{"range":[7865,7946],"text":"border-rp-highlight-med bg-rp-surface overflow-hidden rounded-xl border shadow-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":188,"column":34,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":188,"endColumn":78,"fix":{"range":[7993,8025],"text":"divide-rp-highlight-low divide-y"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":190,"column":56,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":190,"endColumn":136,"fix":{"range":[8161,8229],"text":"hover:bg-rp-overlay/50 flex items-center gap-4 p-4 transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":191,"column":46,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":191,"endColumn":112,"fix":{"range":[8288,8342],"text":"text-rp-subtle w-8 flex-shrink-0 text-center font-bold"}},{"ruleId":"tailwindcss/migration-from-tailwind-2","severity":1,"message":"Classname 'flex-shrink-0' should be updated to 'shrink-0' in Tailwind CSS v3!","line":191,"column":46,"nodeType":"JSXAttribute","messageId":"classnameChanged","endLine":191,"endColumn":112,"fix":{"range":[8288,8342],"text":"shrink-0 w-8 text-center font-bold text-rp-subtle"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":194,"column":46,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":194,"endColumn":147,"fix":{"range":[8501,8590],"text":"border-rp-highlight-med bg-rp-base relative h-10 w-10 overflow-hidden rounded-full border"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-10, w-10' could be replaced by the 'size-10' shorthand!","line":194,"column":46,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":194,"endColumn":147,"fix":{"range":[8501,8590],"text":"relative size-10 overflow-hidden rounded-full border border-rp-highlight-med bg-rp-base"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":204,"column":54,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":204,"endColumn":146,"fix":{"range":[9209,9289],"text":"bg-rp-highlight-low text-rp-muted flex h-full w-full items-center justify-center"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-full, w-full' could be replaced by the 'size-full' shorthand!","line":204,"column":54,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":204,"endColumn":146,"fix":{"range":[9209,9289],"text":"flex size-full items-center justify-center bg-rp-highlight-low text-rp-muted"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":209,"column":46,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":209,"endColumn":72,"fix":{"range":[9564,9578],"text":"min-w-0 flex-1"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":210,"column":50,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":210,"endColumn":93,"fix":{"range":[9641,9672],"text":"text-rp-text truncate font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":211,"column":50,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":211,"endColumn":83,"fix":{"range":[9752,9773],"text":"text-rp-muted text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":216,"column":42,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":216,"endColumn":98,"fix":{"range":[10081,10125],"text":"text-rp-muted p-8 text-center text-sm italic"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":223,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":223,"endColumn":61,"fix":{"range":[10368,10391],"text":"space-y-4 lg:col-span-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":224,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":224,"endColumn":87,"fix":{"range":[10433,10479],"text":"flex items-center gap-2 px-1 text-lg font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":228,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":228,"endColumn":123,"fix":{"range":[10680,10761],"text":"border-rp-highlight-med bg-rp-surface overflow-hidden rounded-xl border shadow-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":229,"column":34,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":229,"endColumn":125,"fix":{"range":[10808,10887],"text":"divide-rp-highlight-low custom-scrollbar max-h-[500px] divide-y overflow-y-auto"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":231,"column":50,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":231,"endColumn":106,"fix":{"range":[11027,11071],"text":"hover:bg-rp-overlay/30 p-4 transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":232,"column":46,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":232,"endColumn":95,"fix":{"range":[11130,11167],"text":"mb-1 flex items-start justify-between"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":234,"column":55,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":234,"endColumn":97,"fix":{"range":[11321,11351],"text":"text-rp-iris text-sm font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":236,"column":55,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":236,"endColumn":97,"fix":{"range":[11573,11603],"text":"text-rp-pine text-sm font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":238,"column":51,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":238,"endColumn":88,"fix":{"range":[11744,11769],"text":"text-rp-muted text-[10px]"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":242,"column":44,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":242,"endColumn":98,"fix":{"range":[12067,12109],"text":"text-rp-subtle line-clamp-2 text-sm italic"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":248,"column":42,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":248,"endColumn":91,"fix":{"range":[12461,12498],"text":"text-rp-muted p-12 text-center italic"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":261,"column":14,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":261,"endColumn":146,"fix":{"range":[12926,13046],"text":"border-rp-highlight-med bg-rp-surface rounded-2xl border p-6 shadow-sm transition-all hover:scale-[1.02] hover:shadow-md"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":264,"column":24,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":264,"endColumn":99,"fix":{"range":[13169,13232],"text":"text-rp-muted mb-1 text-sm font-medium uppercase tracking-wider"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":265,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":265,"endColumn":84,"fix":{"range":[13281,13328],"text":"text-rp-text text-3xl font-black tracking-tight"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":48,"fixableErrorCount":0,"fixableWarningCount":48,"source":"\"use client\"\n\nimport React, { useEffect, useState } from 'react'\nimport Link from 'next/link'\nimport {\n    IconArrowLeft,\n    IconChartLine,\n    IconUsers,\n    IconMessage,\n    IconTrophy,\n    IconActivity,\n    IconRefresh,\n    IconSparkles\n} from '@tabler/icons-react'\nimport Image from \"next/image\"\nimport dynamic from 'next/dynamic'\n// import { MessagesChart, CategoryChart } from '@/components/admin/AnalyticsCharts'\n\nconst MessagesChart = dynamic(\n    () => import('@/components/admin/AnalyticsCharts').then((mod) => mod.MessagesChart),\n    { loading: () => <div className=\"h-[300px] w-full animate-pulse rounded-lg bg-rp-highlight-low\" /> }\n)\nconst CategoryChart = dynamic(\n    () => import('@/components/admin/AnalyticsCharts').then((mod) => mod.CategoryChart),\n    { loading: () => <div className=\"h-[300px] w-full animate-pulse rounded-lg bg-rp-highlight-low\" /> }\n)\nimport { cn } from '@/lib/utils'\n\ninterface AnalyticsData {\n    metrics: {\n        totalChats: number\n        totalMessages: number\n        activeUsers: number\n    }\n    topSouls: {\n        id: string\n        name: string\n        image: string\n        chats: number\n    }[]\n    recentActivity: {\n        content: string\n        timestamp: string\n        username: string\n        soulName: string\n    }[]\n    charts: {\n        messagesPerDay: { date: string, count: number }[]\n        categoryDistribution: { name: string, value: number }[]\n    }\n}\n\nexport default function CreatorAnalyticsPage() {\n    const [data, setData] = useState<AnalyticsData | null>(null)\n    const [loading, setLoading] = useState(true)\n    const [error, setError] = useState<string | null>(null)\n\n    useEffect(() => {\n        fetchAnalytics()\n    }, [])\n\n    async function fetchAnalytics() {\n        setLoading(true)\n        setError(null)\n        try {\n            const response = await fetch('/api/studio/analytics')\n            if (!response.ok) throw new Error('Failed to fetch your analytics data')\n            const result = await response.json()\n            setData(result)\n        } catch (err: any) {\n            setError(err.message)\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    if (loading && !data) {\n        return (\n            <div className=\"flex min-h-screen items-center justify-center bg-rp-base\">\n                <div className=\"flex flex-col items-center gap-4\">\n                    <div className=\"h-12 w-12 animate-spin rounded-full border-4 border-rp-highlight-med border-t-rp-pine\" />\n                    <p className=\"text-rp-muted animate-pulse font-medium\">Loading your Soul&apos;s performance data...</p>\n                </div>\n            </div>\n        )\n    }\n\n    return (\n        <div className=\"min-h-screen bg-rp-base text-rp-text pb-20\">\n            {/* Header */}\n            <header className=\"sticky top-0 z-10 border-b border-rp-highlight-med bg-rp-base/80 px-6 py-4 backdrop-blur-md\">\n                <div className=\"flex items-center justify-between mx-auto max-w-7xl\">\n                    <div className=\"flex items-center gap-4\">\n                        <Link\n                            href=\"/studio\"\n                            className=\"flex items-center gap-2 text-rp-subtle transition-colors hover:text-rp-text\"\n                        >\n                            <IconArrowLeft size={20} />\n                            Studio\n                        </Link>\n                        <div className=\"h-6 w-px bg-rp-highlight-med\" />\n                        <h1 className=\"text-xl font-bold flex items-center gap-2 text-rp-pine\">\n                            <IconSparkles size={24} />\n                            Creator Insights\n                        </h1>\n                    </div>\n                    <button\n                        onClick={fetchAnalytics}\n                        className=\"flex items-center gap-2 rounded-lg bg-rp-surface px-4 py-2 text-sm font-medium border border-rp-highlight-med transition-all hover:bg-rp-overlay active:scale-95\"\n                    >\n                        <IconRefresh size={16} className={loading ? \"animate-spin\" : \"\"} />\n                        Refresh\n                    </button>\n                </div>\n            </header>\n\n            <main className=\"mx-auto max-w-7xl p-6 space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500\">\n                {error && (\n                    <div className=\"rounded-lg border border-rp-love bg-rp-love/10 p-4 text-rp-love\">\n                        Error: {error}\n                    </div>\n                )}\n\n                {/* Info Card */}\n                <div className=\"bg-gradient-to-r from-rp-pine/20 to-rp-foam/20 border border-rp-pine/20 rounded-2xl p-8 mb-8\">\n                    <h2 className=\"text-2xl font-black mb-2 flex items-center gap-3\">\n                        Soul Performance Dashboard\n                        <span className=\"text-xs bg-rp-pine/30 text-rp-pine px-2 py-1 rounded-full uppercase tracking-tighter\">Live Stats</span>\n                    </h2>\n                    <p className=\"text-rp-subtle max-w-2xl\">\n                        Monitor how users are interacting with your Souls. Tracks engagement, popularity, and recent interactions across all your creations.\n                    </p>\n                </div>\n\n                {/* Stats Overview */}\n                <div className=\"grid gap-6 md:grid-cols-3\">\n                    <StatCard\n                        title=\"Your Total Chats\"\n                        value={data?.metrics.totalChats.toLocaleString() || '0'}\n                        icon={<IconMessage size={32} />}\n                        color=\"text-rp-pine\"\n                        bgColor=\"bg-rp-pine/10\"\n                    />\n                    <StatCard\n                        title=\"Your Total Messages\"\n                        value={data?.metrics.totalMessages.toLocaleString() || '0'}\n                        icon={<IconActivity size={32} />}\n                        color=\"text-rp-foam\"\n                        bgColor=\"bg-rp-foam/10\"\n                    />\n                    <StatCard\n                        title=\"Active Participants (30d)\"\n                        value={data?.metrics.activeUsers.toLocaleString() || '0'}\n                        icon={<IconUsers size={32} />}\n                        color=\"text-rp-gold\"\n                        bgColor=\"bg-rp-gold/10\"\n                    />\n                </div>\n\n                <div className=\"grid gap-8 lg:grid-cols-2\">\n                    {/* Messages History Chart */}\n                    <div className=\"space-y-4\">\n                        <h2 className=\"text-lg font-bold flex items-center gap-2 px-1\">\n                            <IconChartLine className=\"text-rp-pine\" size={20} />\n                            Interaction Volume\n                        </h2>\n                        <MessagesChart data={data?.charts.messagesPerDay || []} />\n                    </div>\n\n                    {/* Category Popularity */}\n                    <div className=\"space-y-4\">\n                        <h2 className=\"text-lg font-bold flex items-center gap-2 px-1\">\n                            <IconTrophy className=\"text-rp-gold\" size={20} />\n                            Category Focus\n                        </h2>\n                        <CategoryChart data={data?.charts.categoryDistribution || []} />\n                    </div>\n                </div>\n\n                <div className=\"grid gap-8 lg:grid-cols-3\">\n                    {/* Top Souls Leaderboard */}\n                    <div className=\"lg:col-span-1 space-y-4\">\n                        <h2 className=\"text-lg font-bold flex items-center gap-2 px-1\">\n                            <IconTrophy className=\"text-rp-gold\" size={20} />\n                            Your Top Souls\n                        </h2>\n                        <div className=\"rounded-xl border border-rp-highlight-med bg-rp-surface overflow-hidden shadow-sm\">\n                            <div className=\"divide-y divide-rp-highlight-low\">\n                                {data?.topSouls.map((soul, i) => (\n                                    <div key={soul.id} className=\"flex items-center gap-4 p-4 hover:bg-rp-overlay/50 transition-colors\">\n                                        <div className=\"flex-shrink-0 w-8 text-center font-bold text-rp-subtle\">\n                                            #{i + 1}\n                                        </div>\n                                        <div className=\"relative h-10 w-10 overflow-hidden rounded-full border border-rp-highlight-med bg-rp-base\">\n                                            {soul.image ? (\n                                                <Image\n                                                    src={soul.image}\n                                                    alt={soul.name}\n                                                    className=\"object-cover\"\n                                                    fill\n                                                    sizes=\"40px\"\n                                                />\n                                            ) : (\n                                                <div className=\"flex h-full w-full items-center justify-center bg-rp-highlight-low text-rp-muted\">\n                                                    {soul.name[0]}\n                                                </div>\n                                            )}\n                                        </div>\n                                        <div className=\"flex-1 min-w-0\">\n                                            <div className=\"font-bold text-rp-text truncate\">{soul.name}</div>\n                                            <div className=\"text-xs text-rp-muted\">{soul.chats.toLocaleString()} chats</div>\n                                        </div>\n                                    </div>\n                                ))}\n                                {(!data?.topSouls || data.topSouls.length === 0) && (\n                                    <div className=\"p-8 text-center text-rp-muted italic text-sm\">No soul data found</div>\n                                )}\n                            </div>\n                        </div>\n                    </div>\n\n                    {/* Recent Activity Stream */}\n                    <div className=\"lg:col-span-2 space-y-4\">\n                        <h2 className=\"text-lg font-bold flex items-center gap-2 px-1\">\n                            <IconActivity className=\"text-rp-rose\" size={20} />\n                            Recent Interactions\n                        </h2>\n                        <div className=\"rounded-xl border border-rp-highlight-med bg-rp-surface overflow-hidden shadow-sm\">\n                            <div className=\"divide-y divide-rp-highlight-low max-h-[500px] overflow-y-auto custom-scrollbar\">\n                                {data?.recentActivity.map((activity, i) => (\n                                    <div key={i} className=\"p-4 hover:bg-rp-overlay/30 transition-colors\">\n                                        <div className=\"flex justify-between items-start mb-1\">\n                                            <div className=\"flex items-center gap-2\">\n                                                <span className=\"font-bold text-rp-iris text-sm\">{activity.username}</span>\n                                                <span className=\"text-rp-muted text-[10px] uppercase\">messaged your soul</span>\n                                                <span className=\"font-bold text-rp-pine text-sm\">{activity.soulName}</span>\n                                            </div>\n                                            <span className=\"text-[10px] text-rp-muted\">\n                                                {new Date(activity.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                                            </span>\n                                        </div>\n                                        <p className=\"text-sm text-rp-subtle line-clamp-2 italic\">\n                                            &quot;{activity.content}&quot;\n                                        </p>\n                                    </div>\n                                ))}\n                                {(!data?.recentActivity || data.recentActivity.length === 0) && (\n                                    <div className=\"p-12 text-center text-rp-muted italic\">No recent interactions with your souls</div>\n                                )}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </main>\n        </div>\n    )\n}\n\nfunction StatCard({ title, value, icon, color, bgColor }: { title: string, value: string, icon: React.ReactNode, color: string, bgColor: string }) {\n    return (\n        <div className=\"rounded-2xl border border-rp-highlight-med bg-rp-surface p-6 shadow-sm transition-all hover:shadow-md hover:scale-[1.02]\">\n            <div className=\"flex items-center justify-between\">\n                <div>\n                    <p className=\"text-sm font-medium text-rp-muted uppercase tracking-wider mb-1\">{title}</p>\n                    <h3 className=\"text-3xl font-black text-rp-text tracking-tight\">{value}</h3>\n                </div>\n                <div className={cn(\"rounded-xl p-3\", bgColor, color)}>\n                    {icon}\n                </div>\n            </div>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/app/[locale]/studio/components/behavior-tab.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":39,"column":24,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":39,"endColumn":58,"fix":{"range":[1458,1480],"text":"text-rp-subtle text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":56,"column":20,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":56,"endColumn":53,"fix":{"range":[2167,2188],"text":"text-rp-muted text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":64,"column":21,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":64,"endColumn":102,"fix":{"range":[2643,2712],"text":"border-rp-highlight-med bg-rp-surface min-h-[200px] font-mono text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":71,"column":20,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":71,"endColumn":53,"fix":{"range":[2939,2960],"text":"text-rp-muted text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":91,"column":21,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":91,"endColumn":114,"fix":{"range":[3608,3689],"text":"border-rp-highlight-med bg-rp-base min-h-[300px] font-mono text-xs text-green-400"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":5,"source":"\"use client\"\n\nimport { Label } from \"@/components/ui/label\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { Button } from \"@/components/ui/button\"\nimport { StudioPersona } from \"../types\"\nimport { IconWand, IconBrain } from \"@tabler/icons-react\"\n\ninterface BehaviorTabProps {\n    persona: StudioPersona\n    updateField: <K extends keyof StudioPersona>(field: K, value: StudioPersona[K]) => void\n    autoCompile: () => Promise<void>\n    loading: boolean\n}\n\nexport function BehaviorTab({ persona, updateField, autoCompile, loading }: BehaviorTabProps) {\n    const blueprintJson = persona.behavioral_blueprint\n        ? JSON.stringify(persona.behavioral_blueprint, null, 2)\n        : ''\n\n    const handleBlueprintChange = (value: string) => {\n        try {\n            const parsed = JSON.parse(value)\n            updateField('behavioral_blueprint', parsed)\n        } catch {\n            // Allow invalid JSON while typing - only parse on valid JSON\n        }\n    }\n\n    return (\n        <div className=\"space-y-6\">\n            {/* Auto-Compile Button */}\n            <div className=\"flex items-center gap-4 rounded-lg border border-purple-500/30 bg-purple-500/10 p-4\">\n                <div className=\"flex-1\">\n                    <h3 className=\"flex items-center gap-2 font-medium text-purple-300\">\n                        <IconBrain size={20} />\n                        Neural Upscaler\n                    </h3>\n                    <p className=\"text-sm text-rp-subtle\">\n                        Auto-generate behavioral blueprint from name and description\n                    </p>\n                </div>\n                <Button\n                    onClick={autoCompile}\n                    disabled={loading || !persona.name}\n                    className=\"bg-purple-600 hover:bg-purple-500\"\n                >\n                    <IconWand size={18} className=\"mr-2\" />\n                    {loading ? 'Compiling...' : 'Auto-Compile'}\n                </Button>\n            </div>\n\n            {/* System Prompt */}\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"system_prompt\">System Prompt *</Label>\n                <p className=\"text-xs text-rp-muted\">\n                    The core identity and behavior instructions for this Soul.\n                </p>\n                <Textarea\n                    id=\"system_prompt\"\n                    value={persona.system_prompt}\n                    onChange={(e) => updateField('system_prompt', e.target.value)}\n                    placeholder=\"You are [Name], a [personality traits]. You speak with [tone]. Your purpose is [goal]...\"\n                    className=\"min-h-[200px] border-rp-highlight-med bg-rp-surface font-mono text-sm\"\n                />\n            </div>\n\n            {/* NBB JSON Editor */}\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"nbb\">Neural Behavioral Blueprint (JSON)</Label>\n                <p className=\"text-xs text-rp-muted\">\n                    Strict lexical rules, constraints, and anchors. Auto-generated or manually edited.\n                </p>\n                <Textarea\n                    id=\"nbb\"\n                    value={blueprintJson}\n                    onChange={(e) => handleBlueprintChange(e.target.value)}\n                    placeholder={`{\n  \"lexical_rules\": {\n    \"sentence_structure\": \"Short, punchy sentences\",\n    \"vocabulary_tier\": \"casual\"\n  },\n  \"negative_constraints\": [\n    \"NEVER break character\",\n    \"NEVER use formal language\"\n  ],\n  \"anchors\": [\n    { \"trigger\": \"Who are you?\", \"response\": \"...\" }\n  ]\n}`}\n                    className=\"min-h-[300px] border-rp-highlight-med bg-rp-base font-mono text-xs text-green-400\"\n                />\n            </div>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/app/[locale]/studio/components/brain-parameters-panel.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":57,"column":14,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":57,"endColumn":88,"fix":{"range":[1563,1625],"text":"border-rp-iris/20 bg-rp-iris/5 space-y-6 rounded-lg border p-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":59,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":59,"endColumn":85,"fix":{"range":[1683,1738],"text":"border-rp-iris/20 flex items-center gap-3 border-b pb-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":60,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":60,"endColumn":103,"fix":{"range":[1773,1842],"text":"bg-rp-iris/20 flex h-10 w-10 items-center justify-center rounded-full"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-10, w-10' could be replaced by the 'size-10' shorthand!","line":60,"column":22,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":60,"endColumn":103,"fix":{"range":[1773,1842],"text":"flex size-10 items-center justify-center rounded-full bg-rp-iris/20"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":64,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":64,"endColumn":63,"fix":{"range":[1994,2020],"text":"text-rp-text font-semibold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":65,"column":24,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":65,"endColumn":58,"fix":{"range":[2087,2109],"text":"text-rp-subtle text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":78,"column":27,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":78,"endColumn":103,"fix":{"range":[2653,2717],"text":"bg-rp-overlay text-rp-gold rounded px-2 py-0.5 font-mono text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":90,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":90,"endColumn":76,"fix":{"range":[3183,3225],"text":"text-rp-muted flex justify-between text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":92,"column":27,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":92,"endColumn":63,"fix":{"range":[3318,3342],"text":"text-rp-gold font-medium"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":104,"column":27,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":104,"endColumn":103,"fix":{"range":[3892,3956],"text":"bg-rp-overlay text-rp-foam rounded px-2 py-0.5 font-mono text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":116,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":116,"endColumn":76,"fix":{"range":[4406,4448],"text":"text-rp-muted flex justify-between text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":118,"column":27,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":118,"endColumn":63,"fix":{"range":[4534,4558],"text":"text-rp-foam font-medium"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":130,"column":27,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":130,"endColumn":103,"fix":{"range":[5090,5154],"text":"bg-rp-overlay text-rp-rose rounded px-2 py-0.5 font-mono text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":142,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":142,"endColumn":76,"fix":{"range":[5637,5679],"text":"text-rp-muted flex justify-between text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":144,"column":27,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":144,"endColumn":63,"fix":{"range":[5763,5787],"text":"text-rp-rose font-medium"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":150,"column":16,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":150,"endColumn":49,"fix":{"range":[5989,6010],"text":"text-rp-muted text-xs"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":16,"fixableErrorCount":0,"fixableWarningCount":16,"source":"\"use client\"\n\nimport { Label } from \"@/components/ui/label\"\nimport { Slider } from \"@/components/ui/slider\"\nimport { IconBrain, IconTemperature, IconCircleLetterP, IconRepeat } from \"@tabler/icons-react\"\n\ninterface BrainParams {\n    temperature: number\n    top_p: number\n    frequency_penalty: number\n}\n\ninterface BrainParametersPanelProps {\n    config: {\n        brain_params?: BrainParams\n        [key: string]: unknown\n    }\n    updateConfig: (key: string, value: unknown) => void\n}\n\nconst DEFAULT_PARAMS: BrainParams = {\n    temperature: 0.8,\n    top_p: 0.9,\n    frequency_penalty: 0.0\n}\n\nexport function BrainParametersPanel({ config, updateConfig }: BrainParametersPanelProps) {\n    const params = config.brain_params || DEFAULT_PARAMS\n\n    const handleParamChange = (key: keyof BrainParams, value: number) => {\n        updateConfig(\"brain_params\", {\n            ...params,\n            [key]: value\n        })\n    }\n\n    const getTemperatureLabel = (t: number) => {\n        if (t <= 0.3) return \"ðŸ§Š Stoic / Logical\"\n        if (t <= 0.6) return \"âš–ï¸ Balanced\"\n        if (t <= 1.0) return \"ðŸŽ² Creative\"\n        return \"ðŸŒ‹ Chaotic / Wild\"\n    }\n\n    const getTopPLabel = (p: number) => {\n        if (p <= 0.3) return \"Focused vocabulary\"\n        if (p <= 0.7) return \"Balanced variety\"\n        return \"Maximum diversity\"\n    }\n\n    const getFrequencyPenaltyLabel = (f: number) => {\n        if (f <= 0.3) return \"Natural repetition\"\n        if (f <= 1.0) return \"Reduced repetition\"\n        return \"Strongly varied\"\n    }\n\n    return (\n        <div className=\"space-y-6 rounded-lg border border-rp-iris/20 bg-rp-iris/5 p-4\">\n            {/* Header */}\n            <div className=\"flex items-center gap-3 border-b border-rp-iris/20 pb-4\">\n                <div className=\"flex h-10 w-10 items-center justify-center rounded-full bg-rp-iris/20\">\n                    <IconBrain size={20} className=\"text-rp-iris\" />\n                </div>\n                <div>\n                    <h3 className=\"font-semibold text-rp-text\">Advanced Brain Parameters</h3>\n                    <p className=\"text-sm text-rp-subtle\">\n                        Fine-tune the LLM&apos;s stochastic behavior\n                    </p>\n                </div>\n            </div>\n\n            {/* Temperature Slider */}\n            <div className=\"space-y-3\">\n                <div className=\"flex items-center justify-between\">\n                    <Label className=\"flex items-center gap-2 text-sm\">\n                        <IconTemperature size={16} className=\"text-rp-gold\" />\n                        Temperature (T)\n                    </Label>\n                    <span className=\"rounded bg-rp-overlay px-2 py-0.5 font-mono text-sm text-rp-gold\">\n                        {params.temperature.toFixed(2)}\n                    </span>\n                </div>\n                <Slider\n                    value={[params.temperature]}\n                    onValueChange={([v]) => handleParamChange(\"temperature\", v)}\n                    min={0}\n                    max={1.5}\n                    step={0.05}\n                    className=\"[&_[role=slider]]:bg-rp-gold\"\n                />\n                <div className=\"flex justify-between text-xs text-rp-muted\">\n                    <span>0.0 (Deterministic)</span>\n                    <span className=\"font-medium text-rp-gold\">{getTemperatureLabel(params.temperature)}</span>\n                    <span>1.5 (Maximum)</span>\n                </div>\n            </div>\n\n            {/* Top-P Slider */}\n            <div className=\"space-y-3\">\n                <div className=\"flex items-center justify-between\">\n                    <Label className=\"flex items-center gap-2 text-sm\">\n                        <IconCircleLetterP size={16} className=\"text-rp-foam\" />\n                        Top-P (Nucleus Sampling)\n                    </Label>\n                    <span className=\"rounded bg-rp-overlay px-2 py-0.5 font-mono text-sm text-rp-foam\">\n                        {params.top_p.toFixed(2)}\n                    </span>\n                </div>\n                <Slider\n                    value={[params.top_p]}\n                    onValueChange={([v]) => handleParamChange(\"top_p\", v)}\n                    min={0.1}\n                    max={1.0}\n                    step={0.05}\n                    className=\"[&_[role=slider]]:bg-rp-foam\"\n                />\n                <div className=\"flex justify-between text-xs text-rp-muted\">\n                    <span>0.1 (Narrow)</span>\n                    <span className=\"font-medium text-rp-foam\">{getTopPLabel(params.top_p)}</span>\n                    <span>1.0 (Full)</span>\n                </div>\n            </div>\n\n            {/* Frequency Penalty Slider */}\n            <div className=\"space-y-3\">\n                <div className=\"flex items-center justify-between\">\n                    <Label className=\"flex items-center gap-2 text-sm\">\n                        <IconRepeat size={16} className=\"text-rp-rose\" />\n                        Frequency Penalty\n                    </Label>\n                    <span className=\"rounded bg-rp-overlay px-2 py-0.5 font-mono text-sm text-rp-rose\">\n                        {params.frequency_penalty.toFixed(2)}\n                    </span>\n                </div>\n                <Slider\n                    value={[params.frequency_penalty]}\n                    onValueChange={([v]) => handleParamChange(\"frequency_penalty\", v)}\n                    min={0}\n                    max={2.0}\n                    step={0.1}\n                    className=\"[&_[role=slider]]:bg-rp-rose\"\n                />\n                <div className=\"flex justify-between text-xs text-rp-muted\">\n                    <span>0.0 (None)</span>\n                    <span className=\"font-medium text-rp-rose\">{getFrequencyPenaltyLabel(params.frequency_penalty)}</span>\n                    <span>2.0 (Strong)</span>\n                </div>\n            </div>\n\n            {/* Info */}\n            <p className=\"text-xs text-rp-muted\">\n                These parameters control how your soul generates responses. Higher temperature = more creative but less predictable.\n                Top-P controls vocabulary diversity. Frequency penalty prevents repetitive phrases.\n            </p>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/app/[locale]/studio/components/identity-tab.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":54,"column":21,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":54,"endColumn":227,"fix":{"range":[1800,1994],"text":"border-rp-highlight-med bg-rp-surface/50 hover:border-rp-iris relative flex size-48 cursor-pointer items-center justify-center overflow-hidden rounded-xl border-2 border-dashed transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":67,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":67,"endColumn":88,"fix":{"range":[2525,2571],"text":"text-rp-muted flex flex-col items-center gap-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":114,"column":21,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":114,"endColumn":84,"fix":{"range":[4464,4515],"text":"border-rp-highlight-med bg-rp-surface min-h-[120px]"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":3,"source":"\"use client\"\n\nimport { useCallback, useRef } from \"react\"\nimport { Label } from \"@/components/ui/label\"\nimport { Input } from \"@/components/ui/input\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport {\n    Select,\n    SelectContent,\n    SelectItem,\n    SelectTrigger,\n    SelectValue\n} from \"@/components/ui/select\"\nimport { StudioPersona, BASE_MODELS, SAFETY_LEVELS } from \"../types\"\nimport { IconUpload, IconPhoto } from \"@tabler/icons-react\"\nimport Image from \"next/image\"\n\ninterface IdentityTabProps {\n    persona: StudioPersona\n    updateField: <K extends keyof StudioPersona>(field: K, value: StudioPersona[K]) => void\n    uploadFile: (file: File, bucket: string, folder: string) => Promise<string | null>\n}\n\nexport function IdentityTab({ persona, updateField, uploadFile }: IdentityTabProps) {\n    const fileInputRef = useRef<HTMLInputElement>(null)\n\n    const handleAvatarUpload = useCallback(async (e: React.ChangeEvent<HTMLInputElement>) => {\n        const file = e.target.files?.[0]\n        if (!file) return\n\n        const url = await uploadFile(file, 'soul_forge', 'avatars')\n        if (url) {\n            updateField('image_url', url)\n        }\n    }, [uploadFile, updateField])\n\n    const handleDrop = useCallback(async (e: React.DragEvent) => {\n        e.preventDefault()\n        const file = e.dataTransfer.files?.[0]\n        if (!file || !file.type.startsWith('image/')) return\n\n        const url = await uploadFile(file, 'soul_forge', 'avatars')\n        if (url) {\n            updateField('image_url', url)\n        }\n    }, [uploadFile, updateField])\n\n    return (\n        <div className=\"space-y-6\">\n            {/* Avatar Upload */}\n            <div className=\"space-y-2\">\n                <Label>Avatar Image</Label>\n                <div\n                    className=\"relative flex size-48 cursor-pointer items-center justify-center overflow-hidden rounded-xl border-2 border-dashed border-rp-highlight-med bg-rp-surface/50 transition-colors hover:border-rp-iris\"\n                    onClick={() => fileInputRef.current?.click()}\n                    onDrop={handleDrop}\n                    onDragOver={(e) => e.preventDefault()}\n                >\n                    {persona.image_url ? (\n                        <Image\n                            src={persona.image_url}\n                            alt=\"Avatar\"\n                            fill\n                            className=\"object-cover\"\n                        />\n                    ) : (\n                        <div className=\"flex flex-col items-center gap-2 text-rp-muted\">\n                            <IconPhoto size={40} />\n                            <span className=\"text-sm\">Drop image or click</span>\n                        </div>\n                    )}\n                    <input\n                        ref={fileInputRef}\n                        type=\"file\"\n                        accept=\"image/*\"\n                        className=\"hidden\"\n                        onChange={handleAvatarUpload}\n                    />\n                </div>\n            </div>\n\n            {/* Name */}\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"name\">Name *</Label>\n                <Input\n                    id=\"name\"\n                    value={persona.name}\n                    onChange={(e) => updateField('name', e.target.value)}\n                    placeholder=\"Soul Name\"\n                    className=\"border-rp-highlight-med bg-rp-surface\"\n                />\n            </div>\n\n            {/* Tagline */}\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"tagline\">Tagline</Label>\n                <Input\n                    id=\"tagline\"\n                    value={persona.tagline || ''}\n                    onChange={(e) => updateField('tagline', e.target.value)}\n                    placeholder=\"A short memorable phrase...\"\n                    className=\"border-rp-highlight-med bg-rp-surface\"\n                />\n            </div>\n\n            {/* Description */}\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"description\">Description</Label>\n                <Textarea\n                    id=\"description\"\n                    value={persona.description || ''}\n                    onChange={(e) => updateField('description', e.target.value)}\n                    placeholder=\"Detailed description of this Soul's personality, backstory, and purpose...\"\n                    className=\"min-h-[120px] border-rp-highlight-med bg-rp-surface\"\n                />\n            </div>\n\n            {/* Base Model */}\n            <div className=\"space-y-2\">\n                <Label>Base AI Model</Label>\n                <Select\n                    value={persona.base_model || 'deepseek-chat'}\n                    onValueChange={(value) => updateField('base_model', value)}\n                >\n                    <SelectTrigger className=\"border-rp-highlight-med bg-rp-surface\">\n                        <SelectValue placeholder=\"Select model...\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                        {BASE_MODELS.map((model) => (\n                            <SelectItem key={model.value} value={model.value}>\n                                {model.label}\n                            </SelectItem>\n                        ))}\n                    </SelectContent>\n                </Select>\n            </div>\n\n            {/* Safety Level */}\n            <div className=\"space-y-2\">\n                <Label>Safety Level</Label>\n                <Select\n                    value={persona.safety_level || 'ADULT'}\n                    onValueChange={(value) => updateField('safety_level', value as StudioPersona['safety_level'])}\n                >\n                    <SelectTrigger className=\"border-rp-highlight-med bg-rp-surface\">\n                        <SelectValue placeholder=\"Select safety level...\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                        {SAFETY_LEVELS.map((level) => (\n                            <SelectItem key={level.value} value={level.value}>\n                                {level.label}\n                            </SelectItem>\n                        ))}\n                    </SelectContent>\n                </Select>\n            </div>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/app/[locale]/studio/components/safety-lock-toggle.tsx","messages":[{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-10, w-10' could be replaced by the 'size-10' shorthand!","line":29,"column":26,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":32,"endColumn":28,"fix":{"range":[966,1040],"text":"`flex size-10 items-center justify-center rounded-full transition-all${"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":41,"column":28,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":41,"endColumn":62,"fix":{"range":[1607,1629],"text":"text-rp-subtle text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":57,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":57,"endColumn":91,"fix":{"range":[2170,2227],"text":"border-rp-gold/30 bg-rp-gold/5 mt-4 rounded-md border p-3"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":58,"column":24,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":58,"endColumn":80,"fix":{"range":[2264,2308],"text":"text-rp-gold flex items-center gap-2 text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":62,"column":24,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":62,"endColumn":63,"fix":{"range":[2535,2562],"text":"text-rp-subtle mt-1 text-xs"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":5,"source":"\"use client\"\n\nimport { Label } from \"@/components/ui/label\"\nimport { Switch } from \"@/components/ui/switch\"\nimport { IconLock, IconLockOpen, IconShieldLock } from \"@tabler/icons-react\"\n\ninterface SafetyLockToggleProps {\n    config: {\n        safety_lock?: boolean\n        [key: string]: unknown\n    }\n    updateConfig: (key: string, value: unknown) => void\n}\n\nexport function SafetyLockToggle({ config, updateConfig }: SafetyLockToggleProps) {\n    const isLocked = config.safety_lock || false\n\n    const handleToggle = (checked: boolean) => {\n        updateConfig(\"safety_lock\", checked)\n    }\n\n    return (\n        <div className={`rounded-lg border p-4 transition-all ${isLocked\n                ? 'border-rp-gold/40 bg-rp-gold/10'\n                : 'border-rp-highlight-med bg-rp-overlay'\n            }`}>\n            <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-3\">\n                    <div className={`flex h-10 w-10 items-center justify-center rounded-full transition-all ${isLocked\n                            ? 'bg-rp-gold/20'\n                            : 'bg-rp-overlay'\n                        }`}>\n                        {isLocked ? (\n                            <IconShieldLock size={20} className=\"text-rp-gold\" />\n                        ) : (\n                            <IconLockOpen size={20} className=\"text-rp-muted\" />\n                        )}\n                    </div>\n                    <div>\n                        <Label className=\"text-base font-medium\">IP Safety Lock</Label>\n                        <p className=\"text-sm text-rp-subtle\">\n                            {isLocked\n                                ? 'System prompt is hidden from buyers'\n                                : 'Buyers can view your system prompt'}\n                        </p>\n                    </div>\n                </div>\n\n                <Switch\n                    checked={isLocked}\n                    onCheckedChange={handleToggle}\n                    className=\"data-[state=checked]:bg-rp-gold\"\n                />\n            </div>\n\n            {isLocked && (\n                <div className=\"mt-4 rounded-md border border-rp-gold/30 bg-rp-gold/5 p-3\">\n                    <p className=\"flex items-center gap-2 text-sm text-rp-gold\">\n                        <IconLock size={16} />\n                        <span><strong>Protected</strong> â€” Your Soul&apos;s &quot;cartridge&quot; is encrypted</span>\n                    </p>\n                    <p className=\"mt-1 text-xs text-rp-subtle\">\n                        When listed on the marketplace, buyers can chat with your Soul but cannot see or copy the system prompt.\n                        Only the Edge Function can access it during inference.\n                    </p>\n                </div>\n            )}\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/app/[locale]/studio/components/soul-splicer.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":92,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":92,"endColumn":91,"fix":{"range":[2809,2870],"text":"border-rp-highlight-med flex items-center gap-3 border-b pb-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":93,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":93,"endColumn":131,"fix":{"range":[2905,3002],"text":"from-rp-iris to-rp-rose flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-10, w-10' could be replaced by the 'size-10' shorthand!","line":93,"column":22,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":93,"endColumn":131,"fix":{"range":[2905,3002],"text":"flex size-10 items-center justify-center rounded-full bg-gradient-to-br from-rp-iris to-rp-rose"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":97,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":97,"endColumn":63,"fix":{"range":[3150,3176],"text":"text-rp-text font-semibold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":98,"column":24,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":98,"endColumn":58,"fix":{"range":[3230,3252],"text":"text-rp-subtle text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":108,"column":27,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":108,"endColumn":98,"fix":{"range":[3633,3692],"text":"bg-rp-overlay text-rp-iris rounded-full px-2 py-0.5 text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":112,"column":20,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":112,"endColumn":53,"fix":{"range":[3834,3855],"text":"text-rp-muted text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":124,"column":33,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":124,"endColumn":124,"fix":{"range":[4533,4612],"text":"border-rp-highlight-med bg-rp-surface focus:border-rp-iris pr-10 transition-all"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":129,"column":37,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":129,"endColumn":188,"fix":{"range":[4847,4986],"text":"text-rp-muted hover:text-rp-text absolute right-2 top-1/2 -translate-y-1/2 rounded p-1 opacity-0 transition-opacity group-hover:opacity-100"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":134,"column":35,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":134,"endColumn":110,"fix":{"range":[5196,5259],"text":"text-rp-muted absolute -left-6 top-1/2 -translate-y-1/2 text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":144,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":144,"endColumn":114,"fix":{"range":[5531,5611],"text":"border-rp-love/30 bg-rp-love/10 text-rp-love rounded-lg border px-4 py-2 text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":153,"column":17,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":153,"endColumn":129,"fix":{"range":[5862,5962],"text":"from-rp-iris to-rp-rose hover:from-rp-iris/90 hover:to-rp-rose/90 w-full bg-gradient-to-r text-white"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":170,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":170,"endColumn":96,"fix":{"range":[6487,6549],"text":"border-rp-foam/30 bg-rp-foam/5 space-y-4 rounded-lg border p-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":171,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":171,"endColumn":85,"fix":{"range":[6587,6635],"text":"text-rp-foam flex items-center gap-2 font-medium"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":178,"column":31,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":178,"endColumn":101,"fix":{"range":[6895,6953],"text":"text-rp-subtle text-xs font-medium uppercase tracking-wide"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":185,"column":37,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":185,"endColumn":109,"fix":{"range":[7313,7373],"text":"bg-rp-overlay flex items-center gap-1 rounded-full px-3 py-1"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":187,"column":43,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":187,"endColumn":75,"fix":{"range":[7462,7482],"text":"text-rp-text text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":188,"column":43,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":188,"endColumn":75,"fix":{"range":[7552,7572],"text":"text-rp-iris text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":198,"column":31,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":198,"endColumn":101,"fix":{"range":[7965,8023],"text":"text-rp-subtle text-xs font-medium uppercase tracking-wide"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":201,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":201,"endColumn":123,"fix":{"range":[8147,8228],"text":"bg-rp-base text-rp-text max-h-48 overflow-y-auto rounded-md p-3 font-mono text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":231,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":231,"endColumn":90,"fix":{"range":[9425,9485],"text":"border-rp-gold/20 bg-rp-gold/5 rounded-lg border p-4 text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":235,"column":21,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":235,"endColumn":84,"fix":{"range":[9649,9700],"text":"text-rp-subtle mt-2 list-inside list-disc space-y-1"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":22,"fixableErrorCount":0,"fixableWarningCount":22,"source":"\"use client\"\n\nimport { useState } from \"react\"\nimport { Label } from \"@/components/ui/label\"\nimport { Input } from \"@/components/ui/input\"\nimport { Button } from \"@/components/ui/button\"\nimport { IconDna, IconSparkles, IconX, IconLoader2 } from \"@tabler/icons-react\"\n\ninterface DNASplicing {\n    donors: string[]\n    synthesis_logic: string\n    weights: Record<string, number>\n}\n\ninterface SoulSplicerProps {\n    config: {\n        dna_splicing?: DNASplicing\n        [key: string]: unknown\n    }\n    updateConfig: (key: string, value: unknown) => void\n    onDistill: (donors: string[]) => Promise<{\n        system_prompt: string\n        nbb: Record<string, unknown>\n        weights: Record<string, number>\n    } | null>\n}\n\nconst ARCHETYPE_SLOTS = 5\nconst PLACEHOLDER_EXAMPLES = [\n    \"Einstein (curious, rebellious thinker)\",\n    \"Cleopatra (diplomatic, charismatic)\",\n    \"Sherlock Holmes (analytical, observant)\",\n    \"Bob Ross (gentle, encouraging)\",\n    \"Nikola Tesla (visionary, eccentric)\"\n]\n\nexport function SoulSplicer({ config, updateConfig, onDistill }: SoulSplicerProps) {\n    const [donors, setDonors] = useState<string[]>(\n        config.dna_splicing?.donors || Array(ARCHETYPE_SLOTS).fill(\"\")\n    )\n    const [isDistilling, setIsDistilling] = useState(false)\n    const [preview, setPreview] = useState<{\n        system_prompt: string\n        nbb: Record<string, unknown>\n        weights: Record<string, number>\n    } | null>(null)\n    const [error, setError] = useState<string | null>(null)\n\n    const handleDonorChange = (index: number, value: string) => {\n        const updated = [...donors]\n        updated[index] = value\n        setDonors(updated)\n    }\n\n    const handleClearSlot = (index: number) => {\n        handleDonorChange(index, \"\")\n    }\n\n    const handleDistill = async () => {\n        const validDonors = donors.filter(d => d.trim() !== \"\")\n        if (validDonors.length < 1) {\n            setError(\"Please add at least one archetype to synthesize\")\n            return\n        }\n\n        setIsDistilling(true)\n        setError(null)\n\n        try {\n            const result = await onDistill(validDonors)\n            if (result) {\n                setPreview(result)\n                // Auto-save the DNA config\n                updateConfig(\"dna_splicing\", {\n                    donors: validDonors,\n                    synthesis_logic: \"cross_pollination\",\n                    weights: result.weights\n                })\n            }\n        } catch (e: any) {\n            setError(e.message || \"DNA synthesis failed. Please try again.\")\n        } finally {\n            setIsDistilling(false)\n        }\n    }\n\n    const filledCount = donors.filter(d => d.trim() !== \"\").length\n\n    return (\n        <div className=\"space-y-6\">\n            {/* Header */}\n            <div className=\"flex items-center gap-3 border-b border-rp-highlight-med pb-4\">\n                <div className=\"flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-rp-iris to-rp-rose\">\n                    <IconDna size={20} className=\"text-white\" />\n                </div>\n                <div>\n                    <h3 className=\"font-semibold text-rp-text\">Soul Splicer</h3>\n                    <p className=\"text-sm text-rp-subtle\">\n                        Blend archetypes to create a unique polymath persona\n                    </p>\n                </div>\n            </div>\n\n            {/* Archetype Input Slots */}\n            <div className=\"space-y-3\">\n                <Label className=\"flex items-center gap-2\">\n                    <span>Archetype DNA Donors</span>\n                    <span className=\"rounded-full bg-rp-overlay px-2 py-0.5 text-xs text-rp-iris\">\n                        {filledCount}/{ARCHETYPE_SLOTS}\n                    </span>\n                </Label>\n                <p className=\"text-xs text-rp-muted\">\n                    Enter names of real or fictional personas. The synthesis engine extracts their <b>essence</b>\n                    (thinking style, traits, voice) without cloning their identity.\n                </p>\n\n                <div className=\"grid gap-3\">\n                    {donors.map((donor, index) => (\n                        <div key={index} className=\"group relative\">\n                            <Input\n                                value={donor}\n                                onChange={(e) => handleDonorChange(index, e.target.value)}\n                                placeholder={PLACEHOLDER_EXAMPLES[index]}\n                                className=\"border-rp-highlight-med bg-rp-surface pr-10 transition-all focus:border-rp-iris\"\n                            />\n                            {donor && (\n                                <button\n                                    onClick={() => handleClearSlot(index)}\n                                    className=\"absolute right-2 top-1/2 -translate-y-1/2 rounded p-1 text-rp-muted opacity-0 transition-opacity hover:text-rp-text group-hover:opacity-100\"\n                                >\n                                    <IconX size={16} />\n                                </button>\n                            )}\n                            <span className=\"absolute -left-6 top-1/2 -translate-y-1/2 text-xs text-rp-muted\">\n                                #{index + 1}\n                            </span>\n                        </div>\n                    ))}\n                </div>\n            </div>\n\n            {/* Error Display */}\n            {error && (\n                <div className=\"rounded-lg border border-rp-love/30 bg-rp-love/10 px-4 py-2 text-sm text-rp-love\">\n                    {error}\n                </div>\n            )}\n\n            {/* Distill Button */}\n            <Button\n                onClick={handleDistill}\n                disabled={isDistilling || filledCount < 1}\n                className=\"w-full bg-gradient-to-r from-rp-iris to-rp-rose text-white hover:from-rp-iris/90 hover:to-rp-rose/90\"\n            >\n                {isDistilling ? (\n                    <>\n                        <IconLoader2 size={18} className=\"mr-2 animate-spin\" />\n                        Distilling DNA...\n                    </>\n                ) : (\n                    <>\n                        <IconSparkles size={18} className=\"mr-2\" />\n                        Distill DNA\n                    </>\n                )}\n            </Button>\n\n            {/* Live Preview */}\n            {preview && (\n                <div className=\"space-y-4 rounded-lg border border-rp-foam/30 bg-rp-foam/5 p-4\">\n                    <h4 className=\"flex items-center gap-2 font-medium text-rp-foam\">\n                        <IconSparkles size={16} />\n                        Synthesized DNA Preview\n                    </h4>\n\n                    {/* Trait Weights */}\n                    <div className=\"space-y-2\">\n                        <span className=\"text-xs font-medium uppercase tracking-wide text-rp-subtle\">\n                            Trait Weights\n                        </span>\n                        <div className=\"flex flex-wrap gap-2\">\n                            {Object.entries(preview.weights).map(([trait, weight]) => (\n                                <div\n                                    key={trait}\n                                    className=\"flex items-center gap-1 rounded-full bg-rp-overlay px-3 py-1\"\n                                >\n                                    <span className=\"text-sm text-rp-text\">{trait}</span>\n                                    <span className=\"text-xs text-rp-iris\">\n                                        {(Number(weight) * 100).toFixed(0)}%\n                                    </span>\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n\n                    {/* System Prompt Preview */}\n                    <div className=\"space-y-2\">\n                        <span className=\"text-xs font-medium uppercase tracking-wide text-rp-subtle\">\n                            Generated Directives\n                        </span>\n                        <div className=\"max-h-48 overflow-y-auto rounded-md bg-rp-base p-3 font-mono text-xs text-rp-text\">\n                            <pre className=\"whitespace-pre-wrap\">{preview.system_prompt}</pre>\n                        </div>\n                    </div>\n\n                    {/* Action Buttons */}\n                    <div className=\"flex gap-2\">\n                        <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => setPreview(null)}\n                            className=\"border-rp-highlight-med\"\n                        >\n                            Discard\n                        </Button>\n                        <Button\n                            size=\"sm\"\n                            onClick={() => {\n                                // Apply the synthesized prompt to the persona\n                                // This would be handled by parent component\n                            }}\n                            className=\"bg-rp-foam text-rp-base hover:bg-rp-foam/90\"\n                        >\n                            Apply to Soul\n                        </Button>\n                    </div>\n                </div>\n            )}\n\n            {/* Info Box */}\n            <div className=\"rounded-lg border border-rp-gold/20 bg-rp-gold/5 p-4 text-sm\">\n                <p className=\"text-rp-gold\">\n                    <strong>ðŸ§¬ How DNA Splicing Works:</strong>\n                </p>\n                <ul className=\"mt-2 list-inside list-disc space-y-1 text-rp-subtle\">\n                    <li>The synthesis engine analyzes each archetype&apos;s signature traits</li>\n                    <li>It identifies harmonies and conflicts between their ideologies</li>\n                    <li>Outputs a unique &quot;Polymath Persona&quot; that blends their essences</li>\n                    <li>Your soul gets their <em>thinking style</em>, not their identity</li>\n                </ul>\n            </div>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/app/[locale]/studio/components/store-tab.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":68,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":68,"endColumn":126,"fix":{"range":[2071,2167],"text":"border-rp-highlight-med bg-rp-surface/50 flex items-center justify-between rounded-lg border p-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":71,"column":24,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":71,"endColumn":57,"fix":{"range":[2305,2326],"text":"text-rp-muted text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":85,"column":27,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":85,"endColumn":93,"fix":{"range":[2876,2930],"text":"text-rp-muted absolute left-3 top-1/2 -translate-y-1/2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":97,"column":20,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":97,"endColumn":53,"fix":{"range":[3459,3480],"text":"text-rp-muted text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":115,"column":33,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":115,"endColumn":131,"fix":{"range":[4196,4282],"text":"border-rp-highlight-med bg-rp-surface/50 flex items-center gap-3 rounded-lg border p-3"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":129,"column":42,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":129,"endColumn":75,"fix":{"range":[5074,5095],"text":"text-rp-muted text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":154,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":154,"endColumn":103,"fix":{"range":[6210,6279],"text":"border-rp-highlight-med space-y-3 rounded-lg border border-dashed p-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":155,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":155,"endColumn":72,"fix":{"range":[6318,6352],"text":"text-rp-subtle text-sm font-medium"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":8,"source":"\"use client\"\n\nimport { useState } from \"react\"\nimport { Label } from \"@/components/ui/label\"\nimport { Input } from \"@/components/ui/input\"\nimport { Switch } from \"@/components/ui/switch\"\nimport { Button } from \"@/components/ui/button\"\nimport {\n    Select,\n    SelectContent,\n    SelectItem,\n    SelectTrigger,\n    SelectValue\n} from \"@/components/ui/select\"\nimport { PersonaMetadata, SwagItem, PersonaConfig } from \"../types\"\nimport { IconPlus, IconTrash, IconShoppingBag } from \"@tabler/icons-react\"\nimport { SafetyLockToggle } from \"./safety-lock-toggle\"\nimport Image from \"next/image\"\n\ninterface StoreTabProps {\n    metadata: PersonaMetadata\n    updateMetadata: <K extends keyof PersonaMetadata>(field: K, value: PersonaMetadata[K]) => void\n    config?: PersonaConfig\n    updateConfig?: (key: string, value: unknown) => void\n}\n\nexport function StoreTab({ metadata, updateMetadata, config, updateConfig }: StoreTabProps) {\n    const [newItem, setNewItem] = useState<Partial<SwagItem>>({\n        name: '',\n        url: '',\n        image_url: '',\n        type: 'Physical'\n    })\n\n    const swagItems = metadata.swag_items || []\n\n    const addSwagItem = () => {\n        if (!newItem.name || !newItem.url) return\n\n        updateMetadata('swag_items', [\n            ...swagItems,\n            {\n                name: newItem.name,\n                url: newItem.url,\n                image_url: newItem.image_url,\n                type: newItem.type || 'Physical'\n            } as SwagItem\n        ])\n\n        setNewItem({ name: '', url: '', image_url: '', type: 'Physical' })\n    }\n\n    const removeSwagItem = (index: number) => {\n        updateMetadata('swag_items', swagItems.filter((_, i) => i !== index))\n    }\n\n    return (\n        <div className=\"space-y-6\">\n            {/* IP Safety Lock */}\n            {config !== undefined && updateConfig && (\n                <SafetyLockToggle\n                    config={config || {}}\n                    updateConfig={updateConfig}\n                />\n            )}\n\n            {/* Official Toggle */}\n            <div className=\"flex items-center justify-between rounded-lg border border-rp-highlight-med bg-rp-surface/50 p-4\">\n                <div>\n                    <Label className=\"text-base\">Mark as Official Soul</Label>\n                    <p className=\"text-sm text-rp-muted\">\n                        Official Souls are featured in the store and marketplace\n                    </p>\n                </div>\n                <Switch\n                    checked={metadata.is_official || false}\n                    onCheckedChange={(checked) => updateMetadata('is_official', checked)}\n                />\n            </div>\n\n            {/* Price */}\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"price\">Price (USD)</Label>\n                <div className=\"relative\">\n                    <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-rp-muted\">$</span>\n                    <Input\n                        id=\"price\"\n                        type=\"number\"\n                        min=\"0\"\n                        step=\"0.01\"\n                        value={metadata.price || ''}\n                        onChange={(e) => updateMetadata('price', parseFloat(e.target.value) || 0)}\n                        placeholder=\"0.00\"\n                        className=\"border-rp-highlight-med bg-rp-surface pl-7\"\n                    />\n                </div>\n                <p className=\"text-xs text-rp-muted\">\n                    Set to 0 for free Souls. Premium Souls can be sold in the marketplace.\n                </p>\n            </div>\n\n            {/* Merch Links */}\n            <div className=\"space-y-4\">\n                <Label className=\"flex items-center gap-2\">\n                    <IconShoppingBag size={16} className=\"text-pink-400\" />\n                    Swag & Merchandise\n                </Label>\n\n                {/* Existing Items */}\n                {swagItems.length > 0 && (\n                    <div className=\"space-y-2\">\n                        {swagItems.map((item, index) => (\n                            <div\n                                key={index}\n                                className=\"flex items-center gap-3 rounded-lg border border-rp-highlight-med bg-rp-surface/50 p-3\"\n                            >\n                                {item.image_url && (\n                                    <div className=\"relative size-12 shrink-0 overflow-hidden rounded\">\n                                        <Image\n                                            src={item.image_url}\n                                            alt={item.name}\n                                            fill\n                                            className=\"object-cover\"\n                                        />\n                                    </div>\n                                )}\n                                <div className=\"flex-1\">\n                                    <div className=\"font-medium\">{item.name}</div>\n                                    <div className=\"text-xs text-rp-muted\">{item.type}</div>\n                                </div>\n                                <a\n                                    href={item.url}\n                                    target=\"_blank\"\n                                    rel=\"noopener noreferrer\"\n                                    className=\"text-sm text-cyan-400 hover:underline\"\n                                >\n                                    View\n                                </a>\n                                <Button\n                                    type=\"button\"\n                                    variant=\"ghost\"\n                                    size=\"sm\"\n                                    onClick={() => removeSwagItem(index)}\n                                    className=\"text-red-400 hover:text-red-300\"\n                                >\n                                    <IconTrash size={16} />\n                                </Button>\n                            </div>\n                        ))}\n                    </div>\n                )}\n\n                {/* Add New Item */}\n                <div className=\"space-y-3 rounded-lg border border-dashed border-rp-highlight-med p-4\">\n                    <div className=\"text-sm font-medium text-rp-subtle\">Add New Item</div>\n\n                    <div className=\"grid grid-cols-2 gap-3\">\n                        <Input\n                            value={newItem.name || ''}\n                            onChange={(e) => setNewItem({ ...newItem, name: e.target.value })}\n                            placeholder=\"Item name\"\n                            className=\"border-rp-highlight-med bg-rp-surface\"\n                        />\n                        <Select\n                            value={newItem.type || 'Physical'}\n                            onValueChange={(value) => setNewItem({ ...newItem, type: value as SwagItem['type'] })}\n                        >\n                            <SelectTrigger className=\"border-rp-highlight-med bg-rp-surface\">\n                                <SelectValue />\n                            </SelectTrigger>\n                            <SelectContent>\n                                <SelectItem value=\"Physical\">Physical</SelectItem>\n                                <SelectItem value=\"Digital\">Digital</SelectItem>\n                            </SelectContent>\n                        </Select>\n                    </div>\n\n                    <Input\n                        value={newItem.url || ''}\n                        onChange={(e) => setNewItem({ ...newItem, url: e.target.value })}\n                        placeholder=\"Purchase URL (https://...)\"\n                        className=\"border-rp-highlight-med bg-rp-surface\"\n                    />\n\n                    <Input\n                        value={newItem.image_url || ''}\n                        onChange={(e) => setNewItem({ ...newItem, image_url: e.target.value })}\n                        placeholder=\"Image URL (optional)\"\n                        className=\"border-rp-highlight-med bg-rp-surface\"\n                    />\n\n                    <Button\n                        type=\"button\"\n                        onClick={addSwagItem}\n                        disabled={!newItem.name || !newItem.url}\n                        className=\"w-full\"\n                    >\n                        <IconPlus size={16} className=\"mr-2\" />\n                        Add Item\n                    </Button>\n                </div>\n            </div>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/app/[locale]/studio/components/visuals-tab.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":36,"column":21,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":36,"endColumn":231,"fix":{"range":[1309,1507],"text":"border-rp-highlight-med bg-rp-surface/50 hover:border-rp-foam relative flex h-40 w-full cursor-pointer items-center justify-center overflow-hidden rounded-xl border-2 border-dashed transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":47,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":47,"endColumn":88,"fix":{"range":[1949,1995],"text":"text-rp-muted flex flex-col items-center gap-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":73,"column":21,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":73,"endColumn":84,"fix":{"range":[3189,3240],"text":"border-rp-highlight-med bg-rp-surface min-h-[100px]"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":75,"column":20,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":75,"endColumn":53,"fix":{"range":[3291,3312],"text":"text-rp-muted text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":88,"column":21,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":88,"endColumn":83,"fix":{"range":[3936,3986],"text":"border-rp-highlight-med bg-rp-surface min-h-[80px]"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":90,"column":20,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":90,"endColumn":53,"fix":{"range":[4037,4058],"text":"text-rp-muted text-xs"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":6,"source":"\"use client\"\n\nimport { useCallback, useRef } from \"react\"\nimport { Label } from \"@/components/ui/label\"\nimport { Input } from \"@/components/ui/input\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { PersonaMetadata } from \"../types\"\nimport { IconPhoto, IconSparkles } from \"@tabler/icons-react\"\nimport Image from \"next/image\"\n\ninterface VisualsTabProps {\n    metadata: PersonaMetadata\n    updateMetadata: <K extends keyof PersonaMetadata>(field: K, value: PersonaMetadata[K]) => void\n    uploadFile: (file: File, bucket: string, folder: string) => Promise<string | null>\n}\n\nexport function VisualsTab({ metadata, updateMetadata, uploadFile }: VisualsTabProps) {\n    const heroInputRef = useRef<HTMLInputElement>(null)\n\n    const handleHeroUpload = useCallback(async (e: React.ChangeEvent<HTMLInputElement>) => {\n        const file = e.target.files?.[0]\n        if (!file) return\n\n        const url = await uploadFile(file, 'soul_forge', 'heroes')\n        if (url) {\n            updateMetadata('hero_image_url', url)\n        }\n    }, [uploadFile, updateMetadata])\n\n    return (\n        <div className=\"space-y-6\">\n            {/* Hero Image */}\n            <div className=\"space-y-2\">\n                <Label>Hero Image (Store Background)</Label>\n                <div\n                    className=\"relative flex h-40 w-full cursor-pointer items-center justify-center overflow-hidden rounded-xl border-2 border-dashed border-rp-highlight-med bg-rp-surface/50 transition-colors hover:border-rp-foam\"\n                    onClick={() => heroInputRef.current?.click()}\n                >\n                    {metadata.hero_image_url ? (\n                        <Image\n                            src={metadata.hero_image_url}\n                            alt=\"Hero\"\n                            fill\n                            className=\"object-cover\"\n                        />\n                    ) : (\n                        <div className=\"flex flex-col items-center gap-2 text-rp-muted\">\n                            <IconPhoto size={40} />\n                            <span className=\"text-sm\">Upload hero background</span>\n                        </div>\n                    )}\n                    <input\n                        ref={heroInputRef}\n                        type=\"file\"\n                        accept=\"image/*\"\n                        className=\"hidden\"\n                        onChange={handleHeroUpload}\n                    />\n                </div>\n            </div>\n\n            {/* Appearance Prompt */}\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"appearance_prompt\" className=\"flex items-center gap-2\">\n                    <IconSparkles size={16} className=\"text-cyan-400\" />\n                    Appearance Prompt (for AI Image Generation)\n                </Label>\n                <Textarea\n                    id=\"appearance_prompt\"\n                    value={metadata.appearance_prompt || ''}\n                    onChange={(e) => updateMetadata('appearance_prompt', e.target.value)}\n                    placeholder=\"Blue spiky hair, red sneakers, confident stance, anime style, vibrant colors...\"\n                    className=\"min-h-[100px] border-rp-highlight-med bg-rp-surface\"\n                />\n                <p className=\"text-xs text-rp-muted\">\n                    Describe how image generators should render this character.\n                </p>\n            </div>\n\n            {/* Negative Prompt */}\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"negative_prompt\">Negative Prompt (What to Avoid)</Label>\n                <Textarea\n                    id=\"negative_prompt\"\n                    value={metadata.negative_prompt || ''}\n                    onChange={(e) => updateMetadata('negative_prompt', e.target.value)}\n                    placeholder=\"low quality, blurry, watermark, text, deformed, ugly...\"\n                    className=\"min-h-[80px] border-rp-highlight-med bg-rp-surface\"\n                />\n                <p className=\"text-xs text-rp-muted\">\n                    Elements to exclude from generated images.\n                </p>\n            </div>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/app/[locale]/studio/components/voice-tab.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":36,"column":21,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":36,"endColumn":215,"fix":{"range":[1390,1572],"text":"border-rp-highlight-med bg-rp-surface/50 hover:border-rp-love relative flex h-24 w-full cursor-pointer items-center justify-center rounded-xl border-2 border-dashed transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":47,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":47,"endColumn":88,"fix":{"range":[2137,2183],"text":"text-rp-muted flex flex-col items-center gap-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":72,"column":20,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":72,"endColumn":53,"fix":{"range":[3247,3268],"text":"text-rp-muted text-xs"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":3,"source":"\"use client\"\n\nimport { useCallback, useRef } from \"react\"\nimport { Label } from \"@/components/ui/label\"\nimport { Input } from \"@/components/ui/input\"\nimport { StudioPersona, PersonaMetadata } from \"../types\"\nimport { IconMicrophone, IconUpload } from \"@tabler/icons-react\"\n\ninterface VoiceTabProps {\n    persona: StudioPersona\n    metadata: PersonaMetadata\n    updateField: <K extends keyof StudioPersona>(field: K, value: StudioPersona[K]) => void\n    updateMetadata: <K extends keyof PersonaMetadata>(field: K, value: PersonaMetadata[K]) => void\n    uploadFile: (file: File, bucket: string, folder: string) => Promise<string | null>\n}\n\nexport function VoiceTab({ persona, metadata, updateField, updateMetadata, uploadFile }: VoiceTabProps) {\n    const audioInputRef = useRef<HTMLInputElement>(null)\n\n    const handleAudioUpload = useCallback(async (e: React.ChangeEvent<HTMLInputElement>) => {\n        const file = e.target.files?.[0]\n        if (!file) return\n\n        const url = await uploadFile(file, 'soul_audio', 'samples')\n        if (url) {\n            updateMetadata('voice_sample_url', url)\n        }\n    }, [uploadFile, updateMetadata])\n\n    return (\n        <div className=\"space-y-6\">\n            {/* Voice Sample Upload */}\n            <div className=\"space-y-2\">\n                <Label>Voice Sample (for preview)</Label>\n                <div\n                    className=\"relative flex h-24 w-full cursor-pointer items-center justify-center rounded-xl border-2 border-dashed border-rp-highlight-med bg-rp-surface/50 transition-colors hover:border-rp-love\"\n                    onClick={() => audioInputRef.current?.click()}\n                >\n                    {metadata.voice_sample_url ? (\n                        <div className=\"flex items-center gap-4 px-4\">\n                            <IconMicrophone size={24} className=\"text-orange-400\" />\n                            <audio controls className=\"h-10\">\n                                <source src={metadata.voice_sample_url} />\n                            </audio>\n                        </div>\n                    ) : (\n                        <div className=\"flex flex-col items-center gap-2 text-rp-muted\">\n                            <IconUpload size={24} />\n                            <span className=\"text-sm\">Upload audio sample (mp3/wav)</span>\n                        </div>\n                    )}\n                    <input\n                        ref={audioInputRef}\n                        type=\"file\"\n                        accept=\"audio/mp3,audio/wav,audio/mpeg\"\n                        className=\"hidden\"\n                        onChange={handleAudioUpload}\n                    />\n                </div>\n            </div>\n\n            {/* Voice ID */}\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"voice_id\">Voice ID (ElevenLabs / OpenAI)</Label>\n                <Input\n                    id=\"voice_id\"\n                    value={persona.voice_id || ''}\n                    onChange={(e) => updateField('voice_id', e.target.value)}\n                    placeholder=\"e.g., ThT5KcBeYtu3NO4 or alloy\"\n                    className=\"border-rp-highlight-med bg-rp-surface font-mono\"\n                />\n                <p className=\"text-xs text-rp-muted\">\n                    The voice synthesis ID for text-to-speech. Leave blank to use default.\n                </p>\n            </div>\n\n            {/* Voice Presets */}\n            <div className=\"space-y-2\">\n                <Label>Quick Presets</Label>\n                <div className=\"flex flex-wrap gap-2\">\n                    {[\n                        { id: 'alloy', name: 'Alloy (Neutral)' },\n                        { id: 'echo', name: 'Echo (Male)' },\n                        { id: 'fable', name: 'Fable (Expressive)' },\n                        { id: 'nova', name: 'Nova (Female)' },\n                        { id: 'shimmer', name: 'Shimmer (Soft)' }\n                    ].map((preset) => (\n                        <button\n                            key={preset.id}\n                            type=\"button\"\n                            onClick={() => updateField('voice_id', preset.id)}\n                            className={`rounded-lg border px-3 py-1.5 text-sm transition-colors ${persona.voice_id === preset.id\n                                ? 'border-orange-500 bg-orange-500/20 text-orange-300'\n                                : 'border-rp-highlight-med bg-rp-surface text-rp-subtle hover:border-rp-muted'\n                                }`}\n                        >\n                            {preset.name}\n                        </button>\n                    ))}\n                </div>\n            </div>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/app/[locale]/studio/edit/[id]/page.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":13,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":13,"endColumn":143,"fix":{"range":[468,581],"text":"border-rp-highlight-med bg-rp-base flex min-h-[400px] items-center justify-center rounded-lg border border-dashed"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":15,"column":44,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":15,"endColumn":94,"fix":{"range":[684,722],"text":"text-rp-iris mx-auto mb-2 animate-spin"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":16,"column":24,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":16,"endColumn":58,"fix":{"range":[761,783],"text":"text-rp-subtle text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":165,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":165,"endColumn":86,"fix":{"range":[5579,5635],"text":"bg-rp-base flex min-h-screen items-center justify-center"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":167,"column":44,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":167,"endColumn":94,"fix":{"range":[5738,5776],"text":"text-rp-iris mx-auto mb-4 animate-spin"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":176,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":176,"endColumn":86,"fix":{"range":[5983,6039],"text":"bg-rp-base flex min-h-screen items-center justify-center"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":191,"column":14,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":191,"endColumn":49,"fix":{"range":[6479,6502],"text":"bg-rp-base min-h-screen"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":193,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":193,"endColumn":76,"fix":{"range":[6560,6606],"text":"border-rp-highlight-med bg-rp-surface border-b"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":205,"column":33,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":205,"endColumn":75,"fix":{"range":[7213,7243],"text":"text-rp-text text-xl font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":208,"column":32,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":208,"endColumn":66,"fix":{"range":[7388,7410],"text":"text-rp-subtle text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":219,"column":60,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":219,"endColumn":97,"fix":{"range":[7886,7911],"text":"text-rp-iris animate-spin"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":254,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":254,"endColumn":136,"fix":{"range":[9352,9458],"text":"border-rp-highlight-med bg-rp-surface/95 fixed bottom-0 left-0 right-0 border-t px-6 py-2 backdrop-blur-sm"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'left-0, right-0' could be replaced by the 'inset-x-0' shorthand!","line":254,"column":18,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":254,"endColumn":136,"fix":{"range":[9352,9458],"text":"fixed bottom-0 inset-x-0 border-t border-rp-highlight-med bg-rp-surface/95 px-6 py-2 backdrop-blur-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":255,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":255,"endColumn":103,"fix":{"range":[9493,9562],"text":"container mx-auto flex items-center justify-between font-mono text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":256,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":256,"endColumn":75,"fix":{"range":[9601,9638],"text":"text-rp-muted flex items-center gap-4"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":15,"source":"\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { useParams, useRouter } from \"next/navigation\"\nimport { supabase } from \"@/lib/supabase/browser-client\"\nimport dynamic from \"next/dynamic\"\n// import { SoulSplicer } from \"@/components/studio/SoulSplicer\" -- Replaced with dynamic\n\nconst SoulSplicer = dynamic(\n    () => import(\"@/components/studio/SoulSplicer\").then((mod) => mod.SoulSplicer),\n    {\n        loading: () => (\n            <div className=\"flex min-h-[400px] items-center justify-center rounded-lg border border-dashed border-rp-highlight-med bg-rp-base\">\n                <div className=\"text-center\">\n                    <IconLoader2 size={32} className=\"mx-auto mb-2 animate-spin text-rp-iris\" />\n                    <p className=\"text-sm text-rp-subtle\">Loading editor...</p>\n                </div>\n            </div>\n        ),\n        ssr: false\n    }\n)\nimport { StudioPersona, DEFAULT_PERSONA } from \"../../types\"\nimport { Button } from \"@/components/ui/button\"\nimport { IconArrowLeft, IconDeviceFloppy, IconLoader2 } from \"@tabler/icons-react\"\nimport { toast } from \"sonner\"\n\nexport default function SoulSplicerPage() {\n    const params = useParams()\n    const router = useRouter()\n    const personaId = params.id as string\n\n    const [persona, setPersona] = useState<StudioPersona | null>(null)\n    const [knowledgeItems, setKnowledgeItems] = useState<Array<{ id: string; file_name: string; file_type: string }>>([])\n    const [loading, setLoading] = useState(true)\n    const [saving, setSaving] = useState(false)\n    const [hasUnsavedChanges, setHasUnsavedChanges] = useState(false)\n\n    // Auto-save timer\n    const [autoSaveTimer, setAutoSaveTimer] = useState<NodeJS.Timeout | null>(null)\n\n    // Load persona data\n    useEffect(() => {\n        const loadPersona = async () => {\n            try {\n                const { data, error } = await supabase\n                    .from(\"personas\")\n                    .select(\"*\")\n                    .eq(\"id\", personaId)\n                    .single()\n\n                if (error) throw error\n\n                setPersona(data as StudioPersona)\n            } catch (error: any) {\n                console.error(\"Error loading persona:\", error)\n                toast.error(\"Failed to load persona\")\n                router.push(\"/studio\")\n            } finally {\n                setLoading(false)\n            }\n        }\n\n        const loadKnowledge = async () => {\n            try {\n                const { data: { user } } = await supabase.auth.getUser()\n                if (!user) return\n\n                // Query user_knowledge table directly\n                // Note: This table may not be in generated types yet\n                const response = await fetch(`/api/v2/knowledge?user_id=${user.id}`)\n                if (response.ok) {\n                    const data = await response.json()\n                    setKnowledgeItems(data.items || [])\n                } else {\n                    setKnowledgeItems([])\n                }\n            } catch (error: any) {\n                console.error(\"Error loading knowledge:\", error)\n                setKnowledgeItems([])\n            }\n        }\n\n        loadPersona()\n        loadKnowledge()\n    }, [personaId, router])\n\n    // Auto-save function\n    const savePersona = async (personaData: StudioPersona) => {\n        setSaving(true)\n        try {\n            const { error } = await supabase\n                .from(\"personas\")\n                .update({\n                    name: personaData.name,\n                    tagline: personaData.tagline,\n                    description: personaData.description,\n                    system_prompt: personaData.system_prompt,\n                    behavioral_blueprint: personaData.behavioral_blueprint as any,\n                    image_url: personaData.image_url,\n                    category: personaData.category,\n                    metadata: personaData.metadata as any,\n                    config: personaData.config as any,\n                    updated_at: new Date().toISOString()\n                })\n                .eq(\"id\", personaId)\n\n            if (error) throw error\n\n            setHasUnsavedChanges(false)\n            toast.success(\"Changes saved\", {\n                duration: 2000,\n                icon: \"ðŸ’¾\"\n            })\n        } catch (error: any) {\n            console.error(\"Error saving persona:\", error)\n            toast.error(\"Failed to save changes\")\n        } finally {\n            setSaving(false)\n        }\n    }\n\n    // Handle persona updates with auto-save\n    const handleUpdate = (updates: Partial<StudioPersona>) => {\n        if (!persona) return\n\n        const updated = { ...persona, ...updates }\n        setPersona(updated)\n        setHasUnsavedChanges(true)\n\n        // Clear existing timer\n        if (autoSaveTimer) {\n            clearTimeout(autoSaveTimer)\n        }\n\n        // Set new auto-save timer (2 seconds after last edit)\n        const timer = setTimeout(() => {\n            savePersona(updated)\n        }, 2000)\n\n        setAutoSaveTimer(timer)\n    }\n\n    // Manual save\n    const handleManualSave = () => {\n        if (persona && hasUnsavedChanges) {\n            if (autoSaveTimer) {\n                clearTimeout(autoSaveTimer)\n            }\n            savePersona(persona)\n        }\n    }\n\n    // Cleanup timer on unmount\n    useEffect(() => {\n        return () => {\n            if (autoSaveTimer) {\n                clearTimeout(autoSaveTimer)\n            }\n        }\n    }, [autoSaveTimer])\n\n    if (loading) {\n        return (\n            <div className=\"flex min-h-screen items-center justify-center bg-rp-base\">\n                <div className=\"text-center\">\n                    <IconLoader2 size={48} className=\"mx-auto mb-4 animate-spin text-rp-iris\" />\n                    <p className=\"text-rp-subtle\">Loading Soul Splicer...</p>\n                </div>\n            </div>\n        )\n    }\n\n    if (!persona) {\n        return (\n            <div className=\"flex min-h-screen items-center justify-center bg-rp-base\">\n                <div className=\"text-center\">\n                    <p className=\"text-rp-love\">Persona not found</p>\n                    <Button\n                        onClick={() => router.push(\"/studio\")}\n                        className=\"mt-4\"\n                    >\n                        Return to Studio\n                    </Button>\n                </div>\n            </div>\n        )\n    }\n\n    return (\n        <div className=\"min-h-screen bg-rp-base\">\n            {/* Header */}\n            <div className=\"border-b border-rp-highlight-med bg-rp-surface\">\n                <div className=\"container mx-auto flex items-center justify-between px-6 py-4\">\n                    <div className=\"flex items-center gap-4\">\n                        <Button\n                            variant=\"ghost\"\n                            size=\"icon\"\n                            onClick={() => router.push(\"/studio\")}\n                            className=\"text-rp-subtle hover:text-rp-text\"\n                        >\n                            <IconArrowLeft size={20} />\n                        </Button>\n                        <div>\n                            <h1 className=\"text-xl font-bold text-rp-text\">\n                                {persona.name || \"Untitled Soul\"}\n                            </h1>\n                            <p className=\"text-sm text-rp-subtle\">\n                                Advanced Editor\n                            </p>\n                        </div>\n                    </div>\n\n                    <div className=\"flex items-center gap-3\">\n                        {/* Auto-save indicator */}\n                        <div className=\"flex items-center gap-2 text-sm\">\n                            {saving ? (\n                                <>\n                                    <IconLoader2 size={16} className=\"animate-spin text-rp-iris\" />\n                                    <span className=\"text-rp-iris\">Saving...</span>\n                                </>\n                            ) : hasUnsavedChanges ? (\n                                <span className=\"text-rp-gold\">Unsaved changes</span>\n                            ) : (\n                                <span className=\"text-rp-foam\">All changes saved</span>\n                            )}\n                        </div>\n\n                        {/* Manual save button */}\n                        <Button\n                            onClick={handleManualSave}\n                            disabled={!hasUnsavedChanges || saving}\n                            className=\"bg-rp-iris hover:bg-rp-iris/90\"\n                        >\n                            <IconDeviceFloppy size={18} className=\"mr-2\" />\n                            Save Now\n                        </Button>\n                    </div>\n                </div>\n            </div>\n\n            {/* Main Content */}\n            <div className=\"container mx-auto px-6 py-8\">\n                <div className=\"mx-auto max-w-5xl\">\n                    <SoulSplicer\n                        persona={persona}\n                        onUpdate={handleUpdate}\n                        knowledgeItems={knowledgeItems}\n                    />\n                </div>\n            </div>\n\n            {/* Developer Console Aesthetic Footer */}\n            <div className=\"fixed bottom-0 left-0 right-0 border-t border-rp-highlight-med bg-rp-surface/95 px-6 py-2 backdrop-blur-sm\">\n                <div className=\"container mx-auto flex items-center justify-between text-xs font-mono\">\n                    <div className=\"flex items-center gap-4 text-rp-muted\">\n                        <span>ID: {personaId.slice(0, 8)}...</span>\n                        <span>â€¢</span>\n                        <span>Version: 2.0</span>\n                        <span>â€¢</span>\n                        <span>Engine: Soul Splicer</span>\n                    </div>\n                    <div className=\"text-rp-subtle\">\n                        Last modified: {new Date(persona.updated_at || \"\").toLocaleString()}\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/app/[locale]/studio/page.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":100,"column":14,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":100,"endColumn":72,"fix":{"range":[2947,2993],"text":"bg-rp-base text-rp-text flex h-screen flex-col"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":102,"column":21,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":102,"endColumn":109,"fix":{"range":[3054,3130],"text":"border-rp-highlight-med flex items-center justify-between border-b px-6 py-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":106,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":106,"endColumn":112,"fix":{"range":[3285,3360],"text":"text-rp-subtle hover:text-rp-text flex items-center gap-2 transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":111,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":111,"endColumn":66,"fix":{"range":[3529,3557],"text":"bg-rp-highlight-med h-6 w-px"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":115,"column":35,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":115,"endColumn":85,"fix":{"range":[3743,3781],"text":"text-rp-muted ml-2 text-sm font-normal"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":123,"column":31,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":123,"endColumn":145,"fix":{"range":[4074,4158],"text":"`bg-rp-overlay ml-2 inline-flex items-center gap-1 rounded-full px-3 py-1 text-sm ${"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":195,"column":32,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":195,"endColumn":70,"fix":{"range":[7682,7708],"text":"text-rp-muted mt-1 text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":214,"column":36,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":214,"endColumn":74,"fix":{"range":[8682,8708],"text":"text-rp-muted mt-1 text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":239,"column":43,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":239,"endColumn":92,"fix":{"range":[9678,9715],"text":"bg-rp-surface grid w-full grid-cols-7"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":270,"column":38,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":270,"endColumn":112,"fix":{"range":[11973,12035],"text":"border-rp-highlight-med bg-rp-surface/50 rounded-xl border p-6"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":351,"column":50,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":351,"endColumn":123,"fix":{"range":[17200,17261],"text":"border-rp-highlight-med flex items-center gap-3 border-b pb-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":352,"column":54,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":352,"endColumn":163,"fix":{"range":[17328,17425],"text":"from-rp-foam to-rp-iris flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-10, w-10' could be replaced by the 'size-10' shorthand!","line":352,"column":54,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":352,"endColumn":163,"fix":{"range":[17328,17425],"text":"flex size-10 items-center justify-center rounded-full bg-gradient-to-br from-rp-foam to-rp-iris"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":356,"column":57,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":356,"endColumn":95,"fix":{"range":[17706,17732],"text":"text-rp-text font-semibold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":357,"column":56,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":357,"endColumn":90,"fix":{"range":[17827,17849],"text":"text-rp-subtle text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":365,"column":54,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":365,"endColumn":125,"fix":{"range":[18343,18402],"text":"border-rp-highlight-med bg-rp-overlay rounded-lg border p-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":366,"column":58,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":366,"endColumn":92,"fix":{"range":[18473,18495],"text":"text-rp-subtle text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":367,"column":58,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":367,"endColumn":106,"fix":{"range":[18591,18627],"text":"text-rp-gold mt-1 text-2xl font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":369,"column":54,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":369,"endColumn":125,"fix":{"range":[18758,18817],"text":"border-rp-highlight-med bg-rp-overlay rounded-lg border p-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":370,"column":58,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":370,"endColumn":92,"fix":{"range":[18888,18910],"text":"text-rp-subtle text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":371,"column":58,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":371,"endColumn":106,"fix":{"range":[19006,19042],"text":"text-rp-foam mt-1 text-2xl font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":373,"column":54,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":373,"endColumn":125,"fix":{"range":[19176,19235],"text":"border-rp-highlight-med bg-rp-overlay rounded-lg border p-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":374,"column":58,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":374,"endColumn":92,"fix":{"range":[19306,19328],"text":"text-rp-subtle text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":375,"column":58,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":375,"endColumn":106,"fix":{"range":[19419,19455],"text":"text-rp-rose mt-1 text-2xl font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":379,"column":48,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":379,"endColumn":93,"fix":{"range":[19630,19663],"text":"text-rp-muted text-center text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":388,"column":34,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":388,"endColumn":161,"fix":{"range":[20086,20201],"text":"border-rp-highlight-med bg-rp-surface/30 mt-6 flex items-center justify-between rounded-lg border px-4 py-3 text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":407,"column":49,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":407,"endColumn":119,"fix":{"range":[21369,21427],"text":"text-rp-muted hover:text-rp-subtle flex items-center gap-1"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":27,"fixableErrorCount":0,"fixableWarningCount":27,"source":"\"use client\"\n\nimport { useEffect } from \"react\"\nimport { useSearchParams } from \"next/navigation\"\nimport { ErrorBoundary } from \"@/components/ErrorBoundary\"\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\nimport { Button } from \"@/components/ui/button\"\nimport { useStudioPersona } from \"./hooks/use-studio-persona\"\nimport { IdentityTab } from \"./components/identity-tab\"\nimport { BehaviorTab } from \"./components/behavior-tab\"\nimport { VisualsTab } from \"./components/visuals-tab\"\nimport { VoiceTab } from \"./components/voice-tab\"\nimport { StoreTab } from \"./components/store-tab\"\nimport { SoulSplicer } from \"./components/soul-splicer\"\nimport { BrainParametersPanel } from \"./components/brain-parameters-panel\"\nimport { ImportExportPanel } from \"@/components/studio/ImportExportPanel\"\nimport { MODERATION_STATUS_LABELS, PersonaConfig } from \"./types\"\nimport {\n    IconUser,\n    IconBrain,\n    IconPalette,\n    IconMicrophone,\n    IconShoppingBag,\n    IconDeviceFloppy,\n    IconRocket,\n    IconArrowLeft,\n    IconSend,\n    IconArrowBack,\n    IconHistory,\n    IconDna,\n    IconChartBar\n} from \"@tabler/icons-react\"\nimport Link from \"next/link\"\n\nexport default function StudioPage() {\n    const searchParams = useSearchParams()\n    const personaId = searchParams.get('persona_id')\n\n    const {\n        persona,\n        moderationHistory,\n        loading,\n        saving,\n        error,\n        loadPersona,\n        loadCategories,\n        updateField,\n        updateMetadata,\n        uploadFile,\n        autoCompile,\n        saveDraft,\n        submitForReview,\n        withdrawFromReview,\n        publish\n    } = useStudioPersona()\n\n    // Load existing persona if ID provided\n    useEffect(() => {\n        if (personaId) {\n            loadPersona(personaId)\n        }\n        loadCategories()\n    }, [personaId, loadPersona, loadCategories])\n\n    const handleSaveDraft = async () => {\n        const success = await saveDraft()\n        if (success) {\n            console.log('Draft saved!')\n        }\n    }\n\n    const handleSubmitForReview = async () => {\n        const success = await submitForReview()\n        if (success) {\n            console.log('Submitted for review!')\n        }\n    }\n\n    const handleWithdraw = async () => {\n        const success = await withdrawFromReview()\n        if (success) {\n            console.log('Withdrawn from review')\n        }\n    }\n\n    const handlePublish = async () => {\n        const success = await publish()\n        if (success) {\n            console.log('Published!')\n        }\n    }\n\n    const statusInfo = MODERATION_STATUS_LABELS[persona.status]\n    const canEdit = persona.status === 'draft' || persona.status === 'rejected'\n    const canSubmit = persona.status === 'draft' && persona.name && persona.system_prompt\n    const canWithdraw = persona.status === 'pending_review'\n    const isApproved = persona.status === 'approved'\n\n    return (\n        <div className=\"flex h-screen flex-col bg-rp-base text-rp-text\">\n            {/* Header */}\n            <header className=\"flex items-center justify-between border-b border-rp-highlight-med px-6 py-4\">\n                <div className=\"flex items-center gap-4\">\n                    <Link\n                        href=\"/\"\n                        className=\"flex items-center gap-2 text-rp-subtle transition-colors hover:text-rp-text\"\n                    >\n                        <IconArrowLeft size={20} />\n                        Back\n                    </Link>\n                    <div className=\"h-6 w-px bg-rp-highlight-med\" />\n                    <h1 className=\"text-xl font-semibold\">\n                        Soul Studio\n                        {persona.id && (\n                            <span className=\"ml-2 text-sm font-normal text-rp-muted\">\n                                Editing: {persona.name || 'Untitled'}\n                            </span>\n                        )}\n                    </h1>\n\n                    {/* Moderation Status Badge */}\n                    {persona.id && (\n                        <span className={`ml-2 inline-flex items-center gap-1 rounded-full bg-rp-overlay px-3 py-1 text-sm ${statusInfo.color}`}>\n                            <span>{statusInfo.icon}</span>\n                            <span>{statusInfo.label}</span>\n                        </span>\n                    )}\n                </div>\n\n                <div className=\"flex items-center gap-3\">\n                    {error && (\n                        <span className=\"text-sm text-red-400\">{error}</span>\n                    )}\n\n                    {/* Save Draft - always available for editable states */}\n                    {canEdit && (\n                        <Button\n                            variant=\"outline\"\n                            onClick={handleSaveDraft}\n                            disabled={saving || !persona.name}\n                            className=\"border-rp-highlight-med\"\n                        >\n                            <IconDeviceFloppy size={18} className=\"mr-2\" />\n                            {saving ? 'Saving...' : 'Save Draft'}\n                        </Button>\n                    )}\n\n                    {/* Submit for Review - only for drafts */}\n                    {canSubmit && (\n                        <Button\n                            onClick={handleSubmitForReview}\n                            disabled={saving}\n                            className=\"bg-gradient-to-r from-amber-600 to-orange-500 hover:from-amber-500 hover:to-orange-400\"\n                        >\n                            <IconSend size={18} className=\"mr-2\" />\n                            {saving ? 'Submitting...' : 'Submit for Review'}\n                        </Button>\n                    )}\n\n                    {/* Withdraw from Review - only for pending */}\n                    {canWithdraw && (\n                        <Button\n                            variant=\"outline\"\n                            onClick={handleWithdraw}\n                            disabled={saving}\n                            className=\"border-yellow-600 text-yellow-400 hover:bg-yellow-600/20\"\n                        >\n                            <IconArrowBack size={18} className=\"mr-2\" />\n                            Withdraw\n                        </Button>\n                    )}\n\n                    {/* Direct Publish - only for admins or approved personas */}\n                    {(isApproved || persona.status === 'draft') && (\n                        <Button\n                            onClick={handlePublish}\n                            disabled={saving || !persona.name || !persona.system_prompt}\n                            className=\"bg-gradient-to-r from-purple-600 to-cyan-500 hover:from-purple-500 hover:to-cyan-400\"\n                        >\n                            <IconRocket size={18} className=\"mr-2\" />\n                            {persona.visibility === 'PUBLIC' ? 'Published âœ“' : 'Publish to Store'}\n                        </Button>\n                    )}\n                </div>\n            </header>\n\n            {/* Rejection Reason Banner */}\n            {persona.status === 'rejected' && persona.rejection_reason && (\n                <div className=\"border-b border-red-900/50 bg-red-950/30 px-6 py-3\">\n                    <div className=\"flex items-start gap-3\">\n                        <span className=\"text-red-400\">âŒ</span>\n                        <div>\n                            <p className=\"font-medium text-red-400\">Your submission was rejected</p>\n                            <p className=\"text-sm text-red-300/80\">{persona.rejection_reason}</p>\n                            <p className=\"mt-1 text-xs text-rp-muted\">\n                                Please make the necessary changes and submit again.\n                            </p>\n                        </div>\n                    </div>\n                </div>\n            )}\n\n            {/* Pending Review Banner */}\n            {persona.status === 'pending_review' && (\n                <div className=\"border-b border-yellow-900/50 bg-yellow-950/30 px-6 py-3\">\n                    <div className=\"flex items-start gap-3\">\n                        <span className=\"text-yellow-400\">â³</span>\n                        <div>\n                            <p className=\"font-medium text-yellow-400\">Awaiting Review</p>\n                            <p className=\"text-sm text-yellow-300/80\">\n                                Your Soul is being reviewed by our moderation team. This usually takes 24-48 hours.\n                            </p>\n                            {persona.submitted_at && (\n                                <p className=\"mt-1 text-xs text-rp-muted\">\n                                    Submitted: {new Date(persona.submitted_at).toLocaleString()}\n                                </p>\n                            )}\n                        </div>\n                    </div>\n                </div>\n            )}\n\n            {/* Loading State */}\n            {loading && (\n                <div className=\"flex flex-1 items-center justify-center\">\n                    <div className=\"text-rp-muted\">Loading...</div>\n                </div>\n            )}\n\n            {/* Main Content */}\n            {!loading && (\n                <main className=\"flex-1 overflow-auto p-6\">\n                    <ErrorBoundary>\n                        <div className=\"mx-auto max-w-4xl space-y-8\">\n                            {/* Batch Operations */}\n                            <ImportExportPanel />\n\n                            <Tabs defaultValue=\"identity\" className=\"space-y-6\">\n                                <TabsList className=\"grid w-full grid-cols-7 bg-rp-surface\">\n                                    <TabsTrigger value=\"identity\" className=\"flex items-center gap-2\">\n                                        <IconUser size={16} />\n                                        <span className=\"hidden sm:inline\">Identity</span>\n                                    </TabsTrigger>\n                                    <TabsTrigger value=\"dna-splicer\" className=\"flex items-center gap-2\">\n                                        <IconDna size={16} />\n                                        <span className=\"hidden sm:inline\">DNA</span>\n                                    </TabsTrigger>\n                                    <TabsTrigger value=\"behavior\" className=\"flex items-center gap-2\">\n                                        <IconBrain size={16} />\n                                        <span className=\"hidden sm:inline\">Behavior</span>\n                                    </TabsTrigger>\n                                    <TabsTrigger value=\"visuals\" className=\"flex items-center gap-2\">\n                                        <IconPalette size={16} />\n                                        <span className=\"hidden sm:inline\">Visuals</span>\n                                    </TabsTrigger>\n                                    <TabsTrigger value=\"voice\" className=\"flex items-center gap-2\">\n                                        <IconMicrophone size={16} />\n                                        <span className=\"hidden sm:inline\">Voice</span>\n                                    </TabsTrigger>\n                                    <TabsTrigger value=\"store\" className=\"flex items-center gap-2\">\n                                        <IconShoppingBag size={16} />\n                                        <span className=\"hidden sm:inline\">Store</span>\n                                    </TabsTrigger>\n                                    <TabsTrigger value=\"analytics\" className=\"flex items-center gap-2\">\n                                        <IconChartBar size={16} />\n                                        <span className=\"hidden sm:inline\">Analytics</span>\n                                    </TabsTrigger>\n                                </TabsList>\n\n                                <div className=\"rounded-xl border border-rp-highlight-med bg-rp-surface/50 p-6\">\n                                    <TabsContent value=\"identity\" className=\"mt-0\">\n                                        <IdentityTab\n                                            persona={persona}\n                                            updateField={updateField}\n                                            uploadFile={uploadFile}\n                                        />\n                                    </TabsContent>\n\n                                    <TabsContent value=\"dna-splicer\" className=\"mt-0\">\n                                        <SoulSplicer\n                                            config={(persona as any).config || {}}\n                                            updateConfig={(key, value) => {\n                                                const currentConfig = (persona as any).config || {}\n                                                updateField('config' as any, { ...currentConfig, [key]: value })\n                                            }}\n                                            onDistill={async (donors) => {\n                                                const response = await fetch('/api/forge/distill', {\n                                                    method: 'POST',\n                                                    headers: { 'Content-Type': 'application/json' },\n                                                    body: JSON.stringify({ donors })\n                                                })\n                                                if (!response.ok) {\n                                                    const data = await response.json()\n                                                    throw new Error(data.error || 'DNA synthesis failed')\n                                                }\n                                                return response.json()\n                                            }}\n                                        />\n                                        <div className=\"mt-6\">\n                                            <BrainParametersPanel\n                                                config={(persona as any).config || {}}\n                                                updateConfig={(key, value) => {\n                                                    const currentConfig = (persona as any).config || {}\n                                                    updateField('config' as any, { ...currentConfig, [key]: value })\n                                                }}\n                                            />\n                                        </div>\n                                    </TabsContent>\n\n                                    <TabsContent value=\"behavior\" className=\"mt-0\">\n                                        <BehaviorTab\n                                            persona={persona}\n                                            updateField={updateField}\n                                            autoCompile={autoCompile}\n                                            loading={loading}\n                                        />\n                                    </TabsContent>\n\n                                    <TabsContent value=\"visuals\" className=\"mt-0\">\n                                        <VisualsTab\n                                            metadata={persona.metadata}\n                                            updateMetadata={updateMetadata}\n                                            uploadFile={uploadFile}\n                                        />\n                                    </TabsContent>\n\n                                    <TabsContent value=\"voice\" className=\"mt-0\">\n                                        <VoiceTab\n                                            persona={persona}\n                                            metadata={persona.metadata}\n                                            updateField={updateField}\n                                            updateMetadata={updateMetadata}\n                                            uploadFile={uploadFile}\n                                        />\n                                    </TabsContent>\n\n                                    <TabsContent value=\"store\" className=\"mt-0\">\n                                        <StoreTab\n                                            metadata={persona.metadata}\n                                            updateMetadata={updateMetadata}\n                                            config={persona.config || {}}\n                                            updateConfig={(key, value) => {\n                                                const currentConfig = persona.config || {}\n                                                updateField('config' as any, { ...currentConfig, [key]: value })\n                                            }}\n                                        />\n                                    </TabsContent>\n\n                                    <TabsContent value=\"analytics\" className=\"mt-0\">\n                                        <div className=\"space-y-6\">\n                                            <div className=\"flex items-center gap-3 border-b border-rp-highlight-med pb-4\">\n                                                <div className=\"flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-rp-foam to-rp-iris\">\n                                                    <IconChartBar size={20} className=\"text-white\" />\n                                                </div>\n                                                <div>\n                                                    <h3 className=\"font-semibold text-rp-text\">Soul Health Analytics</h3>\n                                                    <p className=\"text-sm text-rp-subtle\">\n                                                        Track engagement and retention metrics\n                                                    </p>\n                                                </div>\n                                            </div>\n\n                                            {/* Placeholder Analytics Cards */}\n                                            <div className=\"grid gap-4 md:grid-cols-3\">\n                                                <div className=\"rounded-lg border border-rp-highlight-med bg-rp-overlay p-4\">\n                                                    <div className=\"text-sm text-rp-subtle\">Total Aether Earned</div>\n                                                    <div className=\"mt-1 text-2xl font-bold text-rp-gold\">0 âœ§</div>\n                                                </div>\n                                                <div className=\"rounded-lg border border-rp-highlight-med bg-rp-overlay p-4\">\n                                                    <div className=\"text-sm text-rp-subtle\">Avg. Session Length</div>\n                                                    <div className=\"mt-1 text-2xl font-bold text-rp-foam\">-- min</div>\n                                                </div>\n                                                <div className=\"rounded-lg border border-rp-highlight-med bg-rp-overlay p-4\">\n                                                    <div className=\"text-sm text-rp-subtle\">Soulmate Bonds</div>\n                                                    <div className=\"mt-1 text-2xl font-bold text-rp-rose\">0</div>\n                                                </div>\n                                            </div>\n\n                                            <p className=\"text-center text-sm text-rp-muted\">\n                                                Analytics will populate as users interact with your Soul.\n                                            </p>\n                                        </div>\n                                    </TabsContent>\n                                </div>\n                            </Tabs>\n\n                            {/* Status Bar */}\n                            <div className=\"mt-6 flex items-center justify-between rounded-lg border border-rp-highlight-med bg-rp-surface/30 px-4 py-3 text-sm\">\n                                <div className=\"flex items-center gap-4\">\n                                    <span className=\"text-rp-muted\">\n                                        Status:{' '}\n                                        <span className={statusInfo.color}>\n                                            {statusInfo.icon} {statusInfo.label}\n                                        </span>\n                                    </span>\n                                    {persona.visibility === 'PUBLIC' && (\n                                        <span className=\"text-green-400\">â€¢ Live</span>\n                                    )}\n                                    {persona.id && (\n                                        <span className=\"text-rp-muted/80\">\n                                            ID: {persona.id}\n                                        </span>\n                                    )}\n                                </div>\n                                <div className=\"flex items-center gap-4\">\n                                    {moderationHistory.length > 0 && (\n                                        <button className=\"flex items-center gap-1 text-rp-muted hover:text-rp-subtle\">\n                                            <IconHistory size={14} />\n                                            <span>{moderationHistory.length} moderation events</span>\n                                        </button>\n                                    )}\n                                    <span className=\"text-rp-muted/80\">\n                                        {persona.created_at && `Created: ${new Date(persona.created_at).toLocaleDateString()}`}\n                                    </span>\n                                </div>\n                            </div>\n                        </div>\n                    </ErrorBoundary>\n                </main>\n            )}\n        </div>\n    )\n}\n\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/ErrorBoundary.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":47,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":47,"endColumn":145,"fix":{"range":[1189,1300],"text":"animate-in fade-in zoom-in flex min-h-[400px] flex-col items-center justify-center p-6 text-center duration-300"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":48,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":48,"endColumn":89,"fix":{"range":[1339,1390],"text":"mb-6 rounded-full bg-red-100 p-4 dark:bg-red-900/20"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":49,"column":38,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":49,"endColumn":90,"fix":{"range":[1441,1481],"text":"h-12 w-12 text-red-600 dark:text-red-400"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-12, h-12' could be replaced by the 'size-12' shorthand!","line":49,"column":38,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":49,"endColumn":90,"fix":{"range":[1441,1481],"text":"size-12 text-red-600 dark:text-red-400"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":51,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":51,"endColumn":60,"fix":{"range":[1548,1571],"text":"mb-2 text-2xl font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":56,"column":36,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":56,"endColumn":55,"fix":{"range":[1939,1946],"text":"h-4 w-4"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-4, h-4' could be replaced by the 'size-4' shorthand!","line":56,"column":36,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":56,"endColumn":55,"fix":{"range":[1939,1946],"text":"size-4"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":7,"source":"\"use client\"\n\nimport React from \"react\"\nimport { Button } from \"./ui/button\"\nimport { AlertCircle, RefreshCw } from \"lucide-react\"\n\ninterface ErrorBoundaryProps {\n    children: React.ReactNode\n    fallback?: React.ReactNode\n}\n\ninterface ErrorBoundaryState {\n    hasError: boolean\n    error: Error | null\n}\n\nexport class ErrorBoundary extends React.Component<\n    ErrorBoundaryProps,\n    ErrorBoundaryState\n> {\n    constructor(props: ErrorBoundaryProps) {\n        super(props)\n        this.state = { hasError: false, error: null }\n    }\n\n    static getDerivedStateFromError(error: Error): ErrorBoundaryState {\n        return { hasError: true, error }\n    }\n\n    componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n        console.error(\"ErrorBoundary caught an error:\", error, errorInfo)\n        // Here you would log to your error monitoring service\n    }\n\n    handleRetry = () => {\n        this.setState({ hasError: false, error: null })\n        window.location.reload()\n    }\n\n    render() {\n        if (this.state.hasError) {\n            if (this.props.fallback) {\n                return this.props.fallback\n            }\n\n            return (\n                <div className=\"flex flex-col items-center justify-center min-h-[400px] p-6 text-center animate-in fade-in zoom-in duration-300\">\n                    <div className=\"bg-red-100 dark:bg-red-900/20 p-4 rounded-full mb-6\">\n                        <AlertCircle className=\"w-12 h-12 text-red-600 dark:text-red-400\" />\n                    </div>\n                    <h2 className=\"text-2xl font-bold mb-2\">Something went wrong</h2>\n                    <p className=\"text-muted-foreground mb-6 max-w-md\">\n                        {this.state.error?.message || \"An unexpected error occurred. Please try again.\"}\n                    </p>\n                    <Button onClick={this.handleRetry} variant=\"default\" className=\"gap-2\">\n                        <RefreshCw className=\"w-4 h-4\" />\n                        Reload Page\n                    </Button>\n                </div>\n            )\n        }\n\n        return this.props.children\n    }\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/_deprecated_chat/chat-background-toggle.tsx","messages":[{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-[36px], w-[36px]' could be replaced by the 'size-[36px]' shorthand!","line":27,"column":24,"nodeType":"CallExpression","messageId":"shorthandCandidateDetected","endLine":33,"endColumn":14,"fix":{"range":[740,831],"text":"group relative flex size-[36px] items-center justify-center rounded-lg transition-all"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":46,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":46,"endColumn":108,"fix":{"range":[1503,1577],"text":"bg-rp-iris absolute -right-0.5 -top-0.5 h-2 w-2 animate-pulse rounded-full"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-2, w-2' could be replaced by the 'size-2' shorthand!","line":46,"column":22,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":46,"endColumn":108,"fix":{"range":[1503,1577],"text":"absolute -right-0.5 -top-0.5 size-2 rounded-full bg-rp-iris animate-pulse"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":3,"source":"\"use client\"\n\nimport { RemrinContext } from \"@/context/context\"\nimport { IconPhoto } from \"@tabler/icons-react\"\nimport { FC, useContext } from \"react\"\nimport { cn } from \"@/lib/utils\"\n\ninterface ChatBackgroundToggleProps {\n    className?: string\n}\n\nexport const ChatBackgroundToggle: FC<ChatBackgroundToggleProps> = ({\n    className\n}) => {\n    const { chatBackgroundEnabled, setChatBackgroundEnabled, selectedPersona } = useContext(RemrinContext)\n\n    // Only show if there's a selected persona\n    if (!selectedPersona) return null\n\n    const handleToggle = () => {\n        setChatBackgroundEnabled(!chatBackgroundEnabled)\n    }\n\n    return (\n        <button\n            onClick={handleToggle}\n            className={cn(\n                \"group relative flex h-[36px] w-[36px] items-center justify-center rounded-lg transition-all\",\n                chatBackgroundEnabled\n                    ? \"bg-rp-iris/20 text-rp-iris hover:bg-rp-iris/30\"\n                    : \"bg-rp-overlay/50 text-rp-subtle hover:bg-rp-highlight-med hover:text-rp-text\",\n                className\n            )}\n            title={chatBackgroundEnabled ? \"Hide Background\" : \"Show Background\"}\n        >\n            <IconPhoto\n                size={20}\n                className={cn(\n                    \"transition-transform\",\n                    chatBackgroundEnabled && \"scale-110\"\n                )}\n            />\n\n            {/* Active indicator */}\n            {chatBackgroundEnabled && (\n                <div className=\"absolute -right-0.5 -top-0.5 h-2 w-2 rounded-full bg-rp-iris animate-pulse\" />\n            )}\n        </button>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/_deprecated_chat/chat-hooks/use-chat-handler.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'selectedTools', 'setChatFileItems', and 'setChatImages'. Either include them or remove the dependency array.","line":382,"column":6,"nodeType":"ArrayExpression","endLine":382,"endColumn":477,"suggestions":[{"desc":"Update the dependencies array to be: [setUserInput, setIsGenerating, setIsPromptPickerOpen, setIsFilePickerOpen, setNewMessageImages, setAbortController, models, availableLocalModels, availableOpenRouterModels, chatSettings, profile, selectedWorkspace, selectedChat, newMessageImages, newMessageFiles, chatFiles, useRetrieval, setChatMessages, selectedAssistant, chatFileItems, selectedTools, setChatFileItems, setChatImages, setFirstTokenReceived, setToolInUse, userInput, sourceCount, chatImages, selectedPersona, setSelectedChat, setChats, setChatFiles]","fix":{"range":[11167,11638],"text":"[setUserInput, setIsGenerating, setIsPromptPickerOpen, setIsFilePickerOpen, setNewMessageImages, setAbortController, models, availableLocalModels, availableOpenRouterModels, chatSettings, profile, selectedWorkspace, selectedChat, newMessageImages, newMessageFiles, chatFiles, useRetrieval, setChatMessages, selectedAssistant, chatFileItems, selectedTools, setChatFileItems, setChatImages, setFirstTokenReceived, setToolInUse, userInput, sourceCount, chatImages, selectedPersona, setSelectedChat, setChats, setChatFiles]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { RemrinContext } from \"@/context/context\"\nimport { getAssistantCollectionsByAssistantId } from \"@/db/assistant-collections\"\nimport { getAssistantFilesByAssistantId } from \"@/db/assistant-files\"\nimport { getAssistantToolsByAssistantId } from \"@/db/assistant-tools\"\nimport { updateChat } from \"@/db/chats\"\nimport { getCollectionFilesByCollectionId } from \"@/db/collection-files\"\nimport { deleteMessagesIncludingAndAfter } from \"@/db/messages\"\nimport { buildFinalMessages } from \"@/lib/build-prompt\"\nimport { Tables } from \"@/supabase/types\"\nimport { ChatMessage, ChatPayload, LLMID, ModelProvider } from \"@/types\"\nimport { useRouter } from \"next/navigation\"\nimport { useCallback, useContext, useEffect, useRef } from \"react\"\nimport { LLM_LIST } from \"../../../lib/models/llm/llm-list\"\nimport {\n  createTempMessages,\n  handleCreateChat,\n  handleCreateMessages,\n  handleHostedChat,\n  handleLocalChat,\n  handleRetrieval,\n  processResponse,\n  validateChatSettings\n} from \"../chat-helpers\"\n\nexport const useChatHandler = () => {\n  const router = useRouter()\n\n  const {\n    userInput,\n    chatFiles,\n    setUserInput,\n    setNewMessageImages,\n    profile,\n    setIsGenerating,\n    setChatMessages,\n    setFirstTokenReceived,\n    selectedChat,\n    selectedWorkspace,\n    setSelectedChat,\n    setChats,\n    setSelectedTools,\n    availableLocalModels,\n    availableOpenRouterModels,\n    abortController,\n    setAbortController,\n    chatSettings,\n    newMessageImages,\n    selectedAssistant,\n    selectedPersona, // For Mother of Souls detection\n    chatMessages,\n    chatImages,\n    setChatImages,\n    setChatFiles,\n    setNewMessageFiles,\n    setShowFilesDisplay,\n    newMessageFiles,\n    chatFileItems,\n    setChatFileItems,\n    setToolInUse,\n    useRetrieval,\n    sourceCount,\n    setIsPromptPickerOpen,\n    setIsFilePickerOpen,\n    selectedTools,\n    selectedPreset,\n    setChatSettings,\n    models,\n    isPromptPickerOpen,\n    isFilePickerOpen,\n    isToolPickerOpen\n  } = useContext(RemrinContext)\n\n  const chatInputRef = useRef<HTMLTextAreaElement>(null)\n\n  useEffect(() => {\n    if (!isPromptPickerOpen || !isFilePickerOpen || !isToolPickerOpen) {\n      chatInputRef.current?.focus()\n    }\n  }, [isPromptPickerOpen, isFilePickerOpen, isToolPickerOpen])\n\n  const handleNewChat = useCallback(async () => {\n    if (!selectedWorkspace) return\n\n    setUserInput(\"\")\n    setChatMessages([])\n    setSelectedChat(null)\n    setChatFileItems([])\n\n    setIsGenerating(false)\n    setFirstTokenReceived(false)\n\n    setChatFiles([])\n    setChatImages([])\n    setNewMessageFiles([])\n    setNewMessageImages([])\n    setShowFilesDisplay(false)\n    setIsPromptPickerOpen(false)\n    setIsFilePickerOpen(false)\n\n    setSelectedTools([])\n    setToolInUse(\"none\")\n\n    if (selectedAssistant) {\n      setChatSettings({\n        model: selectedAssistant.model as LLMID,\n        prompt: selectedAssistant.prompt,\n        temperature: selectedAssistant.temperature,\n        contextLength: selectedAssistant.context_length,\n        includeProfileContext: selectedAssistant.include_profile_context,\n        includeWorkspaceInstructions:\n          selectedAssistant.include_workspace_instructions,\n        embeddingsProvider: selectedAssistant.embeddings_provider as\n          | \"openai\"\n          | \"local\"\n      })\n\n      let allFiles = []\n\n      const assistantFiles = (\n        await getAssistantFilesByAssistantId(selectedAssistant.id)\n      ).files\n      allFiles = [...assistantFiles]\n      const assistantCollections = (\n        await getAssistantCollectionsByAssistantId(selectedAssistant.id)\n      ).collections\n      for (const collection of assistantCollections) {\n        const collectionFiles = (\n          await getCollectionFilesByCollectionId(collection.id)\n        ).files\n        allFiles = [...allFiles, ...collectionFiles]\n      }\n      const assistantTools = (\n        await getAssistantToolsByAssistantId(selectedAssistant.id)\n      ).tools\n\n      setSelectedTools(assistantTools)\n      setChatFiles(\n        allFiles.map(file => ({\n          id: file.id,\n          name: file.name,\n          type: file.type,\n          file: null\n        }))\n      )\n\n      if (allFiles.length > 0) setShowFilesDisplay(true)\n    } else if (selectedPreset) {\n      setChatSettings({\n        model: selectedPreset.model as LLMID,\n        prompt: selectedPreset.prompt,\n        temperature: selectedPreset.temperature,\n        contextLength: selectedPreset.context_length,\n        includeProfileContext: selectedPreset.include_profile_context,\n        includeWorkspaceInstructions:\n          selectedPreset.include_workspace_instructions,\n        embeddingsProvider: selectedPreset.embeddings_provider as\n          | \"openai\"\n          | \"local\"\n      })\n    } else if (selectedWorkspace) {\n      // setChatSettings({ ... })\n    }\n\n    return router.push(`/${selectedWorkspace.id}/chat`)\n  }, [router, selectedWorkspace, setUserInput, setChatMessages, setSelectedChat, setChatFileItems, setIsGenerating, setFirstTokenReceived, setChatFiles, setChatImages, setNewMessageFiles, setNewMessageImages, setShowFilesDisplay, setIsPromptPickerOpen, setIsFilePickerOpen, setSelectedTools, setToolInUse, selectedAssistant, setChatSettings, selectedPreset])\n\n  const handleFocusChatInput = useCallback(() => {\n    chatInputRef.current?.focus()\n  }, [])\n\n  const handleStopMessage = useCallback(() => {\n    if (abortController) {\n      abortController.abort()\n    }\n  }, [abortController])\n\n  const handleSendMessage = useCallback(async (\n    messageContent: string,\n    chatMessages: ChatMessage[],\n    isRegeneration: boolean\n  ) => {\n    const startingInput = messageContent\n\n    try {\n      setUserInput(\"\")\n      setIsGenerating(true)\n      setIsPromptPickerOpen(false)\n      setIsFilePickerOpen(false)\n      setNewMessageImages([])\n\n      const newAbortController = new AbortController()\n      setAbortController(newAbortController)\n\n      const modelData = [\n        ...models.map(model => ({\n          modelId: model.model_id as LLMID,\n          modelName: model.name,\n          provider: \"custom\" as ModelProvider,\n          hostedId: model.id,\n          platformLink: \"\",\n          imageInput: false\n        })),\n        ...LLM_LIST,\n        ...availableLocalModels,\n        ...availableOpenRouterModels\n      ].find(llm => llm.modelId === chatSettings?.model)\n\n      // Debug: Log what model is being looked up\n      console.log(\"ðŸ” [Chat] Looking for model:\", chatSettings?.model)\n      console.log(\"ðŸ” [Chat] Found modelData:\", modelData ? `${modelData.modelId} (${modelData.provider})` : \"NOT FOUND\")\n      console.log(\"ðŸ” [Chat] LLM_LIST has\", LLM_LIST.length, \"models, first 3:\", LLM_LIST.slice(0, 3).map(m => m.modelId))\n\n      validateChatSettings(\n        chatSettings,\n        modelData,\n        profile,\n        selectedWorkspace,\n        messageContent\n      )\n\n      let currentChat = selectedChat ? { ...selectedChat } : null\n\n      const b64Images = newMessageImages.map(image => image.base64)\n\n      let retrievedFileItems: Tables<\"file_items\">[] = []\n\n      if (\n        (newMessageFiles.length > 0 || chatFiles.length > 0) &&\n        useRetrieval\n      ) {\n        setToolInUse(\"retrieval\")\n\n        retrievedFileItems = await handleRetrieval(\n          userInput,\n          newMessageFiles,\n          chatFiles,\n          chatSettings!.embeddingsProvider,\n          sourceCount\n        )\n      }\n\n      const { tempUserChatMessage, tempAssistantChatMessage } =\n        createTempMessages(\n          messageContent,\n          chatMessages,\n          chatSettings!,\n          b64Images,\n          isRegeneration,\n          setChatMessages,\n          selectedAssistant\n        )\n\n      let payload: ChatPayload = {\n        chatSettings: chatSettings!,\n        workspaceInstructions: selectedWorkspace!.instructions || \"\",\n        chatMessages: isRegeneration\n          ? [...chatMessages]\n          : [...chatMessages, tempUserChatMessage],\n        assistant: selectedChat?.assistant_id ? selectedAssistant : null,\n        messageFileItems: retrievedFileItems,\n        chatFileItems: chatFileItems\n      }\n\n      let generatedText = \"\"\n\n      if (selectedTools.length > 0) {\n        setToolInUse(\"Tools\")\n\n        const formattedMessages = await buildFinalMessages(\n          payload,\n          profile!,\n          chatImages\n        )\n\n        const response = await fetch(\"/api/chat/tools\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            chatSettings: payload.chatSettings,\n            messages: formattedMessages,\n            selectedTools\n          })\n        })\n\n        setToolInUse(\"none\")\n\n        generatedText = await processResponse(\n          response,\n          isRegeneration\n            ? payload.chatMessages[payload.chatMessages.length - 1]\n            : tempAssistantChatMessage,\n          true,\n          newAbortController,\n          setFirstTokenReceived,\n          setChatMessages,\n          setToolInUse\n        )\n      } else {\n        if (modelData!.provider === \"ollama\") {\n          generatedText = await handleLocalChat(\n            payload,\n            profile!,\n            chatSettings!,\n            tempAssistantChatMessage,\n            isRegeneration,\n            newAbortController,\n            setIsGenerating,\n            setFirstTokenReceived,\n            setChatMessages,\n            setToolInUse\n          )\n        } else {\n          generatedText = await handleHostedChat(\n            payload,\n            profile!,\n            modelData!,\n            tempAssistantChatMessage,\n            isRegeneration,\n            newAbortController,\n            newMessageImages,\n            chatImages,\n            setIsGenerating,\n            setFirstTokenReceived,\n            setChatMessages,\n            setToolInUse,\n            selectedPersona // Pass persona for Mother of Souls detection\n          )\n        }\n      }\n\n      if (!currentChat) {\n        currentChat = await handleCreateChat(\n          chatSettings!,\n          profile!,\n          selectedWorkspace!,\n          messageContent,\n          selectedAssistant!,\n          newMessageFiles,\n          setSelectedChat,\n          setChats,\n          setChatFiles\n        )\n      } else {\n        const updatedChat = await updateChat(currentChat.id, {\n          updated_at: new Date().toISOString()\n        })\n\n        setChats(prevChats => {\n          const updatedChats = prevChats.map(prevChat =>\n            prevChat.id === updatedChat.id ? updatedChat : prevChat\n          )\n\n          return updatedChats\n        })\n      }\n\n      await handleCreateMessages(\n        chatMessages,\n        currentChat,\n        profile!,\n        modelData!,\n        messageContent,\n        generatedText,\n        newMessageImages,\n        isRegeneration,\n        retrievedFileItems,\n        setChatMessages,\n        setChatFileItems,\n        setChatImages,\n        selectedAssistant\n      )\n\n      setIsGenerating(false)\n      setFirstTokenReceived(false)\n    } catch (error) {\n      setIsGenerating(false)\n      setFirstTokenReceived(false)\n      setUserInput(startingInput)\n    }\n  }, [setUserInput, setIsGenerating, setIsPromptPickerOpen, setIsFilePickerOpen, setNewMessageImages, setAbortController, models, availableLocalModels, availableOpenRouterModels, chatSettings, profile, selectedWorkspace, selectedChat, newMessageImages, newMessageFiles, chatFiles, useRetrieval, userInput, sourceCount, setChatMessages, selectedAssistant, chatFileItems, chatImages, setFirstTokenReceived, selectedPersona, setSelectedChat, setChats, setChatFiles, setToolInUse])\n\n  const handleSendEdit = useCallback(async (\n    editedContent: string,\n    sequenceNumber: number\n  ) => {\n    if (!selectedChat) return\n\n    await deleteMessagesIncludingAndAfter(\n      selectedChat.user_id,\n      selectedChat.id,\n      sequenceNumber\n    )\n\n    const filteredMessages = chatMessages.filter(\n      chatMessage => chatMessage.message.sequence_number < sequenceNumber\n    )\n\n    setChatMessages(filteredMessages)\n\n    handleSendMessage(editedContent, filteredMessages, false)\n  }, [selectedChat, chatMessages, setChatMessages, handleSendMessage])\n\n  return {\n    chatInputRef,\n    prompt,\n    handleNewChat,\n    handleSendMessage,\n    handleFocusChatInput,\n    handleStopMessage,\n    handleSendEdit\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/admin/AnalyticsCharts.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":20,"column":21,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":20,"endColumn":91,"fix":{"range":[344,402],"text":"text-rp-muted flex h-48 items-center justify-center italic"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":38,"column":14,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":38,"endColumn":121,"fix":{"range":[923,1018],"text":"bg-rp-surface border-rp-highlight-med w-full overflow-hidden rounded-xl border p-4 shadow-inner"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":39,"column":53,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":39,"endColumn":93,"fix":{"range":[1084,1112],"text":"h-auto w-full drop-shadow-lg"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":91,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":91,"endColumn":80,"fix":{"range":[3204,3243],"text":"hover:r-6 cursor-pointer transition-all"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":112,"column":21,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":112,"endColumn":91,"fix":{"range":[4038,4096],"text":"text-rp-muted flex h-48 items-center justify-center italic"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":119,"column":14,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":119,"endColumn":115,"fix":{"range":[4312,4401],"text":"bg-rp-surface border-rp-highlight-med w-full space-y-4 rounded-xl border p-6 shadow-inner"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":120,"column":17,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":120,"endColumn":91,"fix":{"range":[4431,4493],"text":"text-rp-subtle mb-2 text-sm font-bold uppercase tracking-wider"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":133,"column":34,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":133,"endColumn":105,"fix":{"range":[5297,5356],"text":"bg-rp-highlight-low h-2 w-full overflow-hidden rounded-full"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":8,"source":"\"use client\"\n\nimport React from 'react'\n\ninterface DataPoint {\n    date: string\n    count: number\n}\n\ninterface CategoryPoint {\n    name: string\n    value: number\n}\n\n/**\n * Messages Per Day Line Chart (SVG)\n */\nexport function MessagesChart({ data }: { data: DataPoint[] }) {\n    if (!data || data.length === 0) {\n        return <div className=\"h-48 flex items-center justify-center text-rp-muted italic\">No data available</div>\n    }\n\n    const padding = 40\n    const width = 800\n    const height = 300\n\n    const maxCount = Math.max(...data.map(d => d.count), 10)\n    const chartWidth = width - padding * 2\n    const chartHeight = height - padding * 2\n\n    const points = data.map((d, i) => {\n        const x = padding + (i / (data.length - 1 || 1)) * chartWidth\n        const y = padding + chartHeight - (d.count / maxCount) * chartHeight\n        return `${x},${y}`\n    }).join(' ')\n\n    return (\n        <div className=\"w-full overflow-hidden rounded-xl bg-rp-surface p-4 border border-rp-highlight-med shadow-inner\">\n            <svg viewBox={`0 0 ${width} ${height}`} className=\"w-full h-auto drop-shadow-lg\">\n                {/* Grid Lines */}\n                {[0, 0.25, 0.5, 0.75, 1].map(p => (\n                    <line\n                        key={p}\n                        x1={padding}\n                        y1={padding + p * chartHeight}\n                        x2={width - padding}\n                        y2={padding + p * chartHeight}\n                        stroke=\"var(--rp-highlight-low)\"\n                        strokeWidth=\"1\"\n                        strokeDasharray=\"4 4\"\n                    />\n                ))}\n\n                {/* Path Gradient */}\n                <defs>\n                    <linearGradient id=\"chartGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                        <stop offset=\"0%\" stopColor=\"var(--rp-iris)\" stopOpacity=\"0.3\" />\n                        <stop offset=\"100%\" stopColor=\"var(--rp-iris)\" stopOpacity=\"0\" />\n                    </linearGradient>\n                </defs>\n\n                {/* The Area */}\n                <path\n                    d={`M ${padding},${height - padding} ${points} L ${width - padding},${height - padding} Z`}\n                    fill=\"url(#chartGradient)\"\n                />\n\n                {/* The Line */}\n                <polyline\n                    points={points}\n                    fill=\"none\"\n                    stroke=\"var(--rp-iris)\"\n                    strokeWidth=\"3\"\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                />\n\n                {/* Data Points */}\n                {data.map((d, i) => {\n                    const x = padding + (i / (data.length - 1 || 1)) * chartWidth\n                    const y = padding + chartHeight - (d.count / maxCount) * chartHeight\n                    return (\n                        <circle\n                            key={i}\n                            cx={x}\n                            cy={y}\n                            r=\"4\"\n                            fill=\"var(--rp-base)\"\n                            stroke=\"var(--rp-iris)\"\n                            strokeWidth=\"2\"\n                            className=\"hover:r-6 transition-all cursor-pointer\"\n                        >\n                            <title>{`${d.date}: ${d.count} messages`}</title>\n                        </circle>\n                    )\n                })}\n\n                {/* Labels */}\n                <text x={padding} y={height - 10} fill=\"var(--rp-muted)\" fontSize=\"10\">{data[0].date}</text>\n                <text x={width - padding} y={height - 10} fill=\"var(--rp-muted)\" fontSize=\"10\" textAnchor=\"end\">{data[data.length - 1].date}</text>\n                <text x={10} y={padding} fill=\"var(--rp-muted)\" fontSize=\"10\">{maxCount}</text>\n            </svg>\n        </div>\n    )\n}\n\n/**\n * Category Popularity Bar Chart (SVG)\n */\nexport function CategoryChart({ data }: { data: CategoryPoint[] }) {\n    if (!data || data.length === 0) {\n        return <div className=\"h-48 flex items-center justify-center text-rp-muted italic\">No data available</div>\n    }\n\n    const sortedData = [...data].sort((a, b) => b.value - a.value).slice(0, 8)\n    const maxValue = Math.max(...sortedData.map(d => d.value), 1)\n\n    return (\n        <div className=\"w-full space-y-4 rounded-xl bg-rp-surface p-6 border border-rp-highlight-med shadow-inner\">\n            <h3 className=\"text-sm font-bold text-rp-subtle uppercase tracking-wider mb-2\">Popularity by Category</h3>\n            <div className=\"space-y-3\">\n                {sortedData.map((d, i) => {\n                    const percentage = (d.value / maxValue) * 100\n                    const colors = [\"bg-rp-iris\", \"bg-rp-rose\", \"bg-rp-gold\", \"bg-rp-foam\", \"bg-rp-pine\", \"bg-rp-love\"]\n                    const color = colors[i % colors.length]\n\n                    return (\n                        <div key={d.name} className=\"space-y-1\">\n                            <div className=\"flex justify-between text-xs font-medium\">\n                                <span className=\"text-rp-text\">{d.name}</span>\n                                <span className=\"text-rp-muted\">{d.value.toLocaleString()} chats</span>\n                            </div>\n                            <div className=\"h-2 w-full bg-rp-highlight-low rounded-full overflow-hidden\">\n                                <div\n                                    className={`h-full ${color} transition-all duration-1000 ease-out`}\n                                    style={{ width: `${percentage}%` }}\n                                />\n                            </div>\n                        </div>\n                    )\n                })}\n            </div>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/cards/UnifiedCard.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":249,"column":40,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":249,"endColumn":235,"fix":{"range":[8604,8787],"text":"bg-rp-base/60 text-rp-rose focus-visible:ring-rp-iris flex items-center gap-1 rounded-full border-0 px-2 py-1 text-xs backdrop-blur-sm focus-visible:ring-2 focus-visible:ring-offset-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":263,"column":40,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":263,"endColumn":223,"fix":{"range":[9521,9692],"text":"bg-rp-base/70 text-rp-text focus-visible:ring-rp-iris rounded-full border-0 px-2 py-0.5 text-xs font-bold backdrop-blur-sm focus-visible:ring-2 focus-visible:ring-offset-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":276,"column":40,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":276,"endColumn":249,"fix":{"range":[10240,10437],"text":"bg-rp-love/90 text-rp-base focus-visible:ring-rp-iris flex items-center gap-1 rounded-full border-0 px-2 py-1 text-xs font-semibold backdrop-blur-sm focus-visible:ring-2 focus-visible:ring-offset-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":290,"column":36,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":290,"endColumn":231,"fix":{"range":[11258,11441],"text":"bg-rp-base/60 text-rp-text focus-visible:ring-rp-iris flex items-center gap-1 rounded-full border-0 px-2 py-1 text-xs backdrop-blur-sm focus-visible:ring-2 focus-visible:ring-offset-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":303,"column":40,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":307,"endColumn":30,"fix":{"range":[12200,12303],"text":"focus-visible:ring-rp-iris transition-all duration-300 focus-visible:ring-2 focus-visible:ring-offset-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":392,"column":48,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":398,"endColumn":38,"fix":{"range":[17047,17145],"text":"from-rp-gold to-rp-rose text-rp-base min-h-[44px] rounded-full bg-gradient-to-r px-4 font-semibold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":392,"column":48,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":398,"endColumn":38,"fix":{"range":[17377,17452],"text":"focus-visible:ring-rp-iris focus-visible:ring-2 focus-visible:ring-offset-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":415,"column":17,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":415,"endColumn":122,"fix":{"range":[18063,18156],"text":"focus-visible:ring-rp-iris block rounded-2xl focus-visible:ring-2 focus-visible:ring-offset-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":427,"column":17,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":427,"endColumn":122,"fix":{"range":[18502,18595],"text":"focus-visible:ring-rp-iris block rounded-2xl focus-visible:ring-2 focus-visible:ring-offset-2"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":9,"source":"\"use client\"\n\nimport { cn } from \"@/lib/utils\"\nimport { CARD } from \"@/lib/design-system\"\nimport Image from \"next/image\"\nimport Link from \"next/link\"\nimport { useState, useRef } from \"react\"\nimport { calculateTilt, staggerDelay } from \"@/lib/animations\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Button } from \"@/components/ui/button\"\nimport {\n    IconMessageCircle,\n    IconDiamond,\n    IconFlame,\n    IconSparkles,\n    IconLock,\n    IconStar,\n    IconStarFilled\n} from \"@tabler/icons-react\"\n\n// Variant-specific configurations\nconst VARIANT_CONFIG = {\n    character: {\n        aspectRatio: \"aspect-[3/4]\",\n        glowColor: \"rgba(196, 167, 231, 0.6)\", // rp-iris\n        gradientFrom: \"from-rp-iris/50\",\n        gradientTo: \"to-rp-rose/50\"\n    },\n    collection: {\n        aspectRatio: \"aspect-[3/4]\",\n        glowColor: \"rgba(196, 167, 231, 0.5)\",\n        gradientFrom: \"from-rp-iris/50\",\n        gradientTo: \"to-rp-iris/30\"\n    },\n    marketplace: {\n        aspectRatio: \"aspect-[3/4]\",\n        glowColor: \"rgba(246, 193, 119, 0.6)\", // rp-gold\n        gradientFrom: \"from-rp-gold/50\",\n        gradientTo: \"to-rp-rose/50\"\n    }\n} as const\n\n// Rarity configurations for collection variant\nconst RARITY_CONFIG = {\n    common: {\n        border: \"border-rp-muted/50\",\n        glow: \"rgba(110, 106, 134, 0.4)\",\n        gradient: \"from-rp-muted/50 to-rp-muted/30\",\n        text: \"text-rp-subtle\",\n        stars: 1\n    },\n    rare: {\n        border: \"border-rp-pine/50\",\n        glow: \"rgba(49, 116, 143, 0.5)\",\n        gradient: \"from-rp-pine/50 to-rp-pine/30\",\n        text: \"text-rp-foam\",\n        stars: 2\n    },\n    epic: {\n        border: \"border-rp-iris/50\",\n        glow: \"rgba(196, 167, 231, 0.5)\",\n        gradient: \"from-rp-iris/50 to-rp-iris/30\",\n        text: \"text-rp-iris\",\n        stars: 3\n    },\n    legendary: {\n        border: \"border-rp-gold/50\",\n        glow: \"rgba(246, 193, 119, 0.6)\",\n        gradient: \"from-rp-gold/50 to-rp-rose/50\",\n        text: \"text-rp-gold\",\n        stars: 4\n    }\n} as const\n\ntype Rarity = keyof typeof RARITY_CONFIG\n\ninterface BaseCardData {\n    id: string\n    name: string\n    imageUrl?: string | null\n}\n\ninterface CharacterCardData extends BaseCardData {\n    category?: string | null\n    categoryColor?: string | null\n    totalChats?: number\n}\n\ninterface CollectionCardData extends BaseCardData {\n    rarity: Rarity\n    isOwned: boolean\n    pullCount?: number\n    personaId?: string\n}\n\ninterface MarketplaceCardData extends BaseCardData {\n    personaId: string\n    creatorName?: string\n    priceAether: number\n    totalSales: number\n    isLimitedEdition: boolean\n    quantityRemaining?: number | null\n}\n\ntype CardData = CharacterCardData | CollectionCardData | MarketplaceCardData\n\ninterface UnifiedCardProps {\n    variant: \"character\" | \"collection\" | \"marketplace\"\n    data: CardData\n    size?: \"sm\" | \"md\" | \"lg\"\n    className?: string\n    animationIndex?: number\n    onBuyClick?: (id: string) => void\n}\n\n// Format large numbers: 12500 -> \"12.5K\"\nfunction formatCount(count: number): string {\n    if (count >= 1000000) {\n        return `${(count / 1000000).toFixed(1)}M`\n    }\n    if (count >= 1000) {\n        return `${(count / 1000).toFixed(1)}K`\n    }\n    return count.toString()\n}\n\nexport function UnifiedCard({\n    variant,\n    data,\n    size = \"md\",\n    className,\n    animationIndex = 0,\n    onBuyClick\n}: UnifiedCardProps) {\n    const cardRef = useRef<HTMLDivElement>(null)\n    const [tiltStyle, setTiltStyle] = useState<React.CSSProperties>({})\n    const [isHovering, setIsHovering] = useState(false)\n\n    const config = VARIANT_CONFIG[variant]\n\n    // Get rarity config for collection variant\n    const rarityConfig = variant === \"collection\"\n        ? RARITY_CONFIG[(data as CollectionCardData).rarity]\n        : null\n\n    const handleMouseMove = (e: React.MouseEvent<HTMLDivElement>) => {\n        // No tilt for locked collection cards\n        if (variant === \"collection\" && !(data as CollectionCardData).isOwned) return\n\n        const tiltAmount = size === \"sm\" ? 6 : 8\n        const { rotateX, rotateY } = calculateTilt(e, tiltAmount)\n        setTiltStyle({\n            transform: `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateZ(10px)`\n        })\n    }\n\n    const handleMouseEnter = () => setIsHovering(true)\n\n    const handleMouseLeave = () => {\n        setIsHovering(false)\n        setTiltStyle({\n            transform: 'perspective(1000px) rotateX(0deg) rotateY(0deg) translateZ(0px)'\n        })\n    }\n\n    // Determine glow color\n    let glowColor: string = config.glowColor\n    if (variant === \"character\" && (data as CharacterCardData).categoryColor) {\n        glowColor = (data as CharacterCardData).categoryColor || config.glowColor\n    } else if (variant === \"collection\" && rarityConfig) {\n        glowColor = rarityConfig.glow\n    } else if (variant === \"marketplace\" && (data as MarketplaceCardData).isLimitedEdition) {\n        glowColor = 'rgba(235, 111, 146, 0.6)' // rp-love for limited\n    }\n\n    // Determine if card is interactive\n    const isInteractive = variant === \"marketplace\" ||\n        (variant === \"collection\" && (data as CollectionCardData).isOwned) ||\n        variant === \"character\"\n\n    const aspectRatio = size === \"sm\" ? \"aspect-square\" : config.aspectRatio\n\n    const cardContent = (\n        <div\n            ref={cardRef}\n            className={cn(\n                CARD.base,\n                \"group relative overflow-hidden\",\n                \"animate-card-enter transition-all duration-300 ease-out\",\n                isInteractive && CARD.hover,\n                isInteractive && CARD.interactive,\n                variant === \"collection\" && rarityConfig && (data as CollectionCardData).isOwned && rarityConfig.border,\n                className\n            )}\n            style={{\n                ...tiltStyle,\n                animationDelay: `${staggerDelay(animationIndex)}ms`,\n                animationFillMode: 'both',\n                boxShadow: isHovering && isInteractive\n                    ? `0 20px 40px rgba(0,0,0,0.4), 0 0 40px ${glowColor}`\n                    : '0 4px 20px rgba(0,0,0,0.2)',\n                borderColor: isHovering && isInteractive ? glowColor : undefined,\n                ['--glow-color' as string]: glowColor\n            }}\n            onMouseMove={handleMouseMove}\n            onMouseEnter={handleMouseEnter}\n            onMouseLeave={handleMouseLeave}\n        >\n            {/* Image Container */}\n            <div className={cn(\"relative w-full overflow-hidden\", aspectRatio)}>\n                {/* Image or Placeholder */}\n                {data.imageUrl && (variant !== \"collection\" || (data as CollectionCardData).isOwned) ? (\n                    <Image\n                        src={data.imageUrl}\n                        alt={data.name}\n                        fill\n                        className={cn(\n                            \"object-cover transition-transform duration-500 ease-out\",\n                            isHovering && isInteractive ? \"scale-105\" : \"scale-100\"\n                        )}\n                        sizes=\"(max-width: 640px) 100vw, (max-width: 768px) 50vw, 33vw\"\n                    />\n                ) : (\n                    <div className={cn(\n                        \"flex size-full items-center justify-center bg-gradient-to-br\",\n                        variant === \"collection\" && !(data as CollectionCardData).isOwned\n                            ? \"from-rp-base/80 to-rp-surface/80\"\n                            : `${config.gradientFrom} ${config.gradientTo}`\n                    )}>\n                        {variant === \"collection\" && !(data as CollectionCardData).isOwned ? (\n                            <IconLock className=\"text-rp-text/20 size-10\" />\n                        ) : (\n                            <span className=\"text-rp-text/50 text-4xl font-bold\">\n                                {data.name.slice(0, 2).toUpperCase()}\n                            </span>\n                        )}\n                    </div>\n                )}\n\n                {/* Gradient Overlay */}\n                <div className=\"from-rp-base/90 via-rp-base/20 absolute inset-0 bg-gradient-to-t to-transparent\" />\n\n                {/* Variant-specific badges and content */}\n                {variant === \"character\" && (\n                    <>\n                        {/* Chat Count Badge */}\n                        {(data as CharacterCardData).totalChats !== undefined && (\n                            <div className=\"absolute right-3 top-3\">\n                                <Badge className=\"bg-rp-base/60 flex items-center gap-1 rounded-full border-0 px-2 py-1 text-xs text-rp-rose backdrop-blur-sm focus-visible:ring-2 focus-visible:ring-rp-iris focus-visible:ring-offset-2\">\n                                    <IconMessageCircle className=\"size-3\" />\n                                    <span>{formatCount((data as CharacterCardData).totalChats || 0)}</span>\n                                </Badge>\n                            </div>\n                        )}\n                    </>\n                )}\n\n                {variant === \"collection\" && (\n                    <>\n                        {/* Duplicate Count Badge */}\n                        {(data as CollectionCardData).isOwned && (data as CollectionCardData).pullCount && (data as CollectionCardData).pullCount! > 1 && (\n                            <div className=\"absolute right-2 top-2\">\n                                <Badge className=\"bg-rp-base/70 text-rp-text rounded-full border-0 px-2 py-0.5 text-xs font-bold backdrop-blur-sm focus-visible:ring-2 focus-visible:ring-rp-iris focus-visible:ring-offset-2\">\n                                    Ã—{(data as CollectionCardData).pullCount}\n                                </Badge>\n                            </div>\n                        )}\n                    </>\n                )}\n\n                {variant === \"marketplace\" && (\n                    <>\n                        {/* Limited Edition Badge */}\n                        {(data as MarketplaceCardData).isLimitedEdition && (\n                            <div className=\"absolute left-3 top-3\">\n                                <Badge className=\"bg-rp-love/90 text-rp-base flex items-center gap-1 rounded-full border-0 px-2 py-1 text-xs font-semibold backdrop-blur-sm focus-visible:ring-2 focus-visible:ring-rp-iris focus-visible:ring-offset-2\">\n                                    <IconSparkles className=\"size-3\" />\n                                    <span>Limited</span>\n                                    {(data as MarketplaceCardData).quantityRemaining !== null && (data as MarketplaceCardData).quantityRemaining !== undefined && (\n                                        <span className=\"text-rp-base/80 ml-1\">\n                                            {(data as MarketplaceCardData).quantityRemaining} left\n                                        </span>\n                                    )}\n                                </Badge>\n                            </div>\n                        )}\n\n                        {/* Sales Badge */}\n                        <div className=\"absolute right-3 top-3\">\n                            <Badge className=\"bg-rp-base/60 text-rp-text flex items-center gap-1 rounded-full border-0 px-2 py-1 text-xs backdrop-blur-sm focus-visible:ring-2 focus-visible:ring-rp-iris focus-visible:ring-offset-2\">\n                                <IconFlame className=\"text-rp-gold size-3\" />\n                                <span>{formatCount((data as MarketplaceCardData).totalSales)} sold</span>\n                            </Badge>\n                        </div>\n                    </>\n                )}\n\n                {/* Bottom Content */}\n                <div className=\"absolute inset-x-0 bottom-0 p-4\">\n                    {/* Character variant: Category badge */}\n                    {variant === \"character\" && (data as CharacterCardData).category && (\n                        <Badge\n                            className={cn(\n                                \"mb-2 rounded-full border-0 px-2.5 py-0.5 text-xs font-medium\",\n                                \"transition-all duration-300 focus-visible:ring-2 focus-visible:ring-rp-iris focus-visible:ring-offset-2\",\n                                isHovering && \"scale-105\"\n                            )}\n                            style={{\n                                backgroundColor: (data as CharacterCardData).categoryColor\n                                    ? `${(data as CharacterCardData).categoryColor}30`\n                                    : \"rgba(196, 167, 231, 0.3)\",\n                                color: (data as CharacterCardData).categoryColor || \"#c4a7e7\"\n                            }}\n                        >\n                            {(data as CharacterCardData).category}\n                        </Badge>\n                    )}\n\n                    {/* Collection variant: Rarity stars */}\n                    {variant === \"collection\" && rarityConfig && (\n                        <div className=\"mb-1 flex gap-0.5\">\n                            {Array.from({ length: rarityConfig.stars }).map((_, i) => (\n                                <IconStarFilled\n                                    key={i}\n                                    className={cn(\n                                        \"size-3\",\n                                        (data as CollectionCardData).isOwned ? rarityConfig.text : \"text-rp-muted\"\n                                    )}\n                                />\n                            ))}\n                            {Array.from({ length: 4 - rarityConfig.stars }).map((_, i) => (\n                                <IconStar\n                                    key={i}\n                                    className=\"text-rp-muted size-3\"\n                                />\n                            ))}\n                        </div>\n                    )}\n\n                    {/* Name */}\n                    <h3 className={cn(\n                        \"font-tiempos-headline line-clamp-2 font-bold leading-tight drop-shadow-lg\",\n                        \"transition-transform duration-300\",\n                        size === \"sm\" ? \"text-sm\" : \"text-lg\",\n                        isHovering && isInteractive && \"translate-x-1\",\n                        variant === \"character\" && \"text-rp-text\",\n                        variant === \"collection\" && ((data as CollectionCardData).isOwned ? \"text-rp-text\" : \"text-rp-text/40\"),\n                        variant === \"marketplace\" && \"text-rp-text\"\n                    )}\n                        style={variant === \"character\" ? { color: '#EB6F92' } : undefined}>\n                        {variant === \"collection\" && !(data as CollectionCardData).isOwned ? \"???\" : data.name}\n                    </h3>\n\n                    {/* Collection variant: Rarity label */}\n                    {variant === \"collection\" && rarityConfig && (\n                        <p className={cn(\n                            \"mt-0.5 text-xs capitalize\",\n                            (data as CollectionCardData).isOwned ? rarityConfig.text : \"text-rp-muted\"\n                        )}>\n                            {(data as CollectionCardData).rarity}\n                        </p>\n                    )}\n\n                    {/* Marketplace variant: Creator and price/buy */}\n                    {variant === \"marketplace\" && (\n                        <>\n                            {(data as MarketplaceCardData).creatorName && (\n                                <p className=\"text-rp-subtle mt-0.5 text-xs\">\n                                    by {(data as MarketplaceCardData).creatorName}\n                                </p>\n                            )}\n\n                            {/* Price and Buy Button Row */}\n                            <div className=\"mt-3 flex items-center justify-between\">\n                                {/* Price */}\n                                <div className=\"flex items-center gap-1.5\">\n                                    <IconDiamond className=\"text-rp-gold size-5\" />\n                                    <span className=\"text-rp-gold text-lg font-bold\">\n                                        {(data as MarketplaceCardData).priceAether.toLocaleString()}\n                                    </span>\n                                    <span className=\"text-rp-subtle text-xs\">Aether</span>\n                                </div>\n\n                                {/* Buy Button */}\n                                <Button\n                                    size=\"sm\"\n                                    onClick={(e) => {\n                                        e.preventDefault()\n                                        e.stopPropagation()\n                                        onBuyClick?.(data.id)\n                                    }}\n                                    className={cn(\n                                        \"from-rp-gold to-rp-rose text-rp-base rounded-full bg-gradient-to-r px-4 font-semibold min-h-[44px]\",\n                                        \"hover:from-rp-gold/80 hover:to-rp-rose/80\",\n                                        \"transition-all duration-200 hover:scale-105 active:scale-95\",\n                                        \"focus-visible:ring-2 focus-visible:ring-rp-iris focus-visible:ring-offset-2\",\n                                        isHovering && \"shadow-rp-gold/30 scale-105 shadow-lg\"\n                                    )}\n                                >\n                                    Buy Now\n                                </Button>\n                            </div>\n                        </>\n                    )}\n                </div>\n            </div>\n        </div>\n    )\n\n    // Wrap in Link for character and owned collection cards\n    if (variant === \"character\") {\n        return (\n            <Link\n                href={`/character/${data.id}`}\n                className=\"block focus-visible:ring-2 focus-visible:ring-rp-iris focus-visible:ring-offset-2 rounded-2xl\"\n            >\n                {cardContent}\n            </Link>\n        )\n    }\n\n    if (variant === \"collection\" && (data as CollectionCardData).isOwned) {\n        const personaId = (data as CollectionCardData).personaId || data.id\n        return (\n            <Link\n                href={`/character/${personaId}`}\n                className=\"block focus-visible:ring-2 focus-visible:ring-rp-iris focus-visible:ring-offset-2 rounded-2xl\"\n            >\n                {cardContent}\n            </Link>\n        )\n    }\n\n    return cardContent\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/character/CharacterPanel.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":97,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":97,"endColumn":92,"fix":{"range":[3232,3294],"text":"relative max-h-[55%] min-h-[45%] w-full flex-1 overflow-hidden"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-full, w-full' could be replaced by the 'size-full' shorthand!","line":105,"column":25,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":105,"endColumn":63,"fix":{"range":[3608,3634],"text":"size-full object-cover"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":118,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":118,"endColumn":114,"fix":{"range":[4100,4180],"text":"from-rp-surface absolute inset-0 bg-gradient-to-t via-transparent to-transparent"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":125,"column":21,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":125,"endColumn":197,"fix":{"range":[4463,4627],"text":"bg-rp-base/60 hover:bg-rp-overlay absolute bottom-3 left-1/2 z-20 flex -translate-x-1/2 items-center justify-center rounded-full p-2 backdrop-blur-sm transition-all"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":133,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":133,"endColumn":53,"fix":{"range":[4902,4925],"text":"bg-rp-surface px-4 py-3"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":142,"column":33,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":142,"endColumn":99,"fix":{"range":[5426,5480],"text":"ring-rp-highlight-med rounded-full object-cover ring-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":152,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":152,"endColumn":66,"fix":{"range":[5832,5861],"text":"group flex items-center gap-1"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":154,"column":31,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":154,"endColumn":142,"fix":{"range":[5926,6025],"text":"font-tiempos-headline text-rp-text group-hover:text-rp-iris text-lg font-semibold transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":162,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":162,"endColumn":85,"fix":{"range":[6387,6438],"text":"text-rp-subtle mt-2 flex items-center gap-2 text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":170,"column":27,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":170,"endColumn":62,"fix":{"range":[6745,6768],"text":"bg-rp-muted/40 h-3 w-px"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":179,"column":27,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":179,"endColumn":62,"fix":{"range":[7074,7097],"text":"bg-rp-muted/40 h-3 w-px"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":184,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":184,"endColumn":97,"fix":{"range":[7278,7338],"text":"hover:text-rp-text flex items-center gap-1 transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":187,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":187,"endColumn":108,"fix":{"range":[7461,7527],"text":"bg-rp-iris/30 flex size-4 items-center justify-center rounded-full"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":195,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":195,"endColumn":90,"fix":{"range":[7809,7869],"text":"border-rp-highlight-low bg-rp-surface relative flex border-b"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":200,"column":36,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":203,"endColumn":26,"fix":{"range":[8103,8178],"text":"flex min-h-[44px] flex-1 items-center justify-center py-3 transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":214,"column":21,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":214,"endColumn":104,"fix":{"range":[8682,8753],"text":"bg-rp-iris absolute bottom-0 h-0.5 transition-all duration-300 ease-out"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":223,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":223,"endColumn":62,"fix":{"range":[9034,9066],"text":"border-rp-highlight-low border-t"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":231,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":231,"endColumn":70,"fix":{"range":[9382,9410],"text":"mb-4 flex items-center gap-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":232,"column":35,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":232,"endColumn":71,"fix":{"range":[9458,9482],"text":"text-rp-text font-medium"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":237,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":237,"endColumn":97,"fix":{"range":[9716,9771],"text":"bg-rp-base/50 border-rp-highlight-low rounded-xl border"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":251,"column":42,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":251,"endColumn":129,"fix":{"range":[10567,10642],"text":"bg-rp-iris/20 flex size-8 shrink-0 items-center justify-center rounded-full"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":261,"column":37,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":261,"endColumn":161,"fix":{"range":[11182,11294],"text":"text-rp-text placeholder:text-rp-muted min-h-[22px] flex-1 resize-none bg-transparent text-sm focus:outline-none"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":270,"column":45,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":270,"endColumn":109,"fix":{"range":[11732,11784],"text":"hover:bg-rp-overlay rounded-lg p-2 transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":273,"column":45,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":273,"endColumn":109,"fix":{"range":[11983,12035],"text":"hover:bg-rp-overlay rounded-lg p-2 transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":300,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":300,"endColumn":59,"fix":{"range":[13333,13350],"text":"py-12 text-center"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":301,"column":34,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":301,"endColumn":125,"fix":{"range":[13397,13476],"text":"bg-rp-overlay mb-3 inline-flex size-16 items-center justify-center rounded-full"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":312,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":312,"endColumn":59,"fix":{"range":[13937,13954],"text":"py-12 text-center"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":313,"column":34,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":313,"endColumn":125,"fix":{"range":[14001,14080],"text":"bg-rp-overlay mb-3 inline-flex size-16 items-center justify-center rounded-full"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":323,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":323,"endColumn":51,"fix":{"range":[14504,14517],"text":"space-y-4 p-4"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":29,"fixableErrorCount":0,"fixableWarningCount":29,"source":"\"use client\"\n\nimport { RemrinContext } from \"@/context/context\"\n\nimport { Button } from \"@/components/ui/button\"\nimport { cn } from \"@/lib/utils\"\nimport {\n    IconChevronUp,\n    IconChevronRight,\n    IconDots,\n    IconHeart,\n    IconHeartFilled,\n    IconMessage,\n    IconSettings,\n    IconUser,\n    IconUsers,\n    IconPaperclip,\n    IconPhoto,\n    IconArrowNarrowRight\n} from \"@tabler/icons-react\"\nimport { FC, useContext, useState, useMemo } from \"react\"\nimport Image from \"next/image\"\nimport Link from \"next/link\"\nimport { TYPOGRAPHY } from \"@/lib/design-system\"\nimport { MOTHER_OF_SOULS_ID } from \"@/lib/forge/is-mother-chat\"\n\ninterface CharacterPanelProps {\n    width?: number\n    onClose?: () => void\n}\n\ntype TabId = \"comments\" | \"similar\" | \"settings\"\n\nconst TABS: { id: TabId; icon: typeof IconMessage; label: string }[] = [\n    { id: \"comments\", icon: IconMessage, label: \"Comments\" },\n    { id: \"similar\", icon: IconUser, label: \"Similar\" },\n    { id: \"settings\", icon: IconSettings, label: \"Settings\" }\n]\n\nexport const CharacterPanel: FC<CharacterPanelProps> = ({\n    width = 350,\n    onClose\n}) => {\n    const { selectedPersona, setIsCharacterPanelOpen, isCharacterPanelOpen, profile } = useContext(RemrinContext)\n    const [activeTab, setActiveTab] = useState<TabId>(\"comments\")\n    const [isFollowing, setIsFollowing] = useState(false)\n    const [commentText, setCommentText] = useState(\"\")\n\n    const handleClose = () => {\n        if (onClose) {\n            onClose()\n        } else {\n            setIsCharacterPanelOpen(false)\n        }\n    }\n\n    const handleOpen = () => {\n        setIsCharacterPanelOpen(true)\n    }\n\n    // Get active tab index for sliding indicator\n    const activeTabIndex = useMemo(() => {\n        return TABS.findIndex(tab => tab.id === activeTab)\n    }, [activeTab])\n\n    // Always show the toggle chevron, even when panel is closed\n    if (!selectedPersona) {\n        return null\n    }\n\n    // Show only the toggle button when panel is closed\n    if (!isCharacterPanelOpen) {\n        return (\n            <button\n                onClick={handleOpen}\n                className=\"bg-rp-overlay border-border/50 text-rp-subtle hover:bg-rp-highlight-med hover:text-rp-text absolute right-0 top-1/2 z-20 hidden min-h-[44px] min-w-[44px] -translate-y-1/2 items-center justify-center rounded-l-full border border-r-0 transition-colors md:flex\"\n                aria-label=\"Open character panel\"\n                title=\"Open character panel\"\n            >\n                <IconChevronRight size={18} className=\"rotate-180\" />\n            </button>\n        )\n    }\n\n    // Get persona stats\n    const totalChats = ((selectedPersona as any).total_chats || 0).toLocaleString()\n    const followers = ((selectedPersona as any).followers_count || 0).toLocaleString()\n    const creatorUsername = (selectedPersona as any).creator_username || \"remrin\"\n    const creatorId = (selectedPersona as any).creator_id || null\n\n    return (\n        <div\n            className=\"border-rp-highlight-low bg-rp-surface fixed right-0 top-0 z-30 flex h-screen flex-col border-l\"\n            style={{ width: `${width}px` }}\n        >\n            {/* Full-Bleed Hero Image Section - Talkie Style */}\n            <div className=\"relative flex-1 min-h-[45%] max-h-[55%] w-full overflow-hidden\">\n                {selectedPersona.id === MOTHER_OF_SOULS_ID ? (\n                    <video\n                        src=\"/images/mother/mos_hero.mp4\"\n                        autoPlay\n                        loop\n                        muted\n                        playsInline\n                        className=\"h-full w-full object-cover\"\n                    />\n                ) : (\n                    <Image\n                        src={selectedPersona.image_url || \"/images/rem_hero.webp\"}\n                        alt={selectedPersona.name}\n                        fill\n                        className=\"object-cover\"\n                        priority\n                    />\n                )}\n\n                {/* Gradient overlay at bottom for text readability */}\n                <div className=\"absolute inset-0 bg-gradient-to-t from-rp-surface via-transparent to-transparent\" />\n                <div className=\"absolute right-3 top-3 flex items-center gap-2\">\n\n                </div>\n                {/* Collapse handle - Talkie style (centered at bottom) */}\n                <button\n                    onClick={handleClose}\n                    className=\"absolute bottom-3 left-1/2 -translate-x-1/2 z-20 flex items-center justify-center p-2 rounded-full bg-rp-base/60 backdrop-blur-sm hover:bg-rp-overlay transition-all\"\n                    aria-label=\"Collapse panel\"\n                >\n                    <IconChevronUp size={18} className=\"text-rp-subtle\" />\n                </button>\n            </div>\n\n            {/* Character Info Section - Talkie Style */}\n            <div className=\"px-4 py-3 bg-rp-surface\">\n                {/* Avatar + Name Row */}\n                <div className=\"flex items-center gap-3\">\n                    {/* Character Avatar */}\n                    <div className=\"relative shrink-0\">\n                        <div className=\"relative size-12 shadow-sm\">\n                            <Image\n                                src={selectedPersona.image_url || \"/images/rem_hero.webp\"}\n                                alt={selectedPersona.name}\n                                className=\"rounded-full object-cover ring-2 ring-rp-highlight-med\"\n                                fill\n                                sizes=\"48px\"\n                            />\n                        </div>\n                    </div>\n\n                    {/* Name with profile link */}\n                    <Link\n                        href={`/character/${selectedPersona.id}`}\n                        className=\"flex items-center gap-1 group\"\n                    >\n                        <span className=\"font-tiempos-headline text-lg font-semibold text-rp-text group-hover:text-rp-iris transition-colors\">\n                            {selectedPersona.name}\n                        </span>\n                        <IconArrowNarrowRight size={18} className=\"text-rp-subtle group-hover:text-rp-iris transition-colors\" />\n                    </Link>\n                </div>\n\n                {/* Stats Row with Dividers - Talkie Style */}\n                <div className=\"flex items-center gap-2 mt-2 text-sm text-rp-subtle\">\n                    {/* Chat count */}\n                    <span className=\"flex items-center gap-1\">\n                        <IconMessage size={14} />\n                        <span>{totalChats}</span>\n                    </span>\n\n                    {/* Divider */}\n                    <span className=\"h-3 w-px bg-rp-muted/40\" />\n\n                    {/* Followers */}\n                    <span className=\"flex items-center gap-1\">\n                        <IconUsers size={14} />\n                        <span>{followers}</span>\n                    </span>\n\n                    {/* Divider */}\n                    <span className=\"h-3 w-px bg-rp-muted/40\" />\n\n                    {/* Creator link */}\n                    <Link\n                        href={creatorId ? `/profile/${creatorId}` : \"#\"}\n                        className=\"flex items-center gap-1 hover:text-rp-text transition-colors\"\n                    >\n                        <span>By @{creatorUsername}</span>\n                        <div className=\"size-4 rounded-full bg-rp-iris/30 flex items-center justify-center\">\n                            <IconUser size={10} className=\"text-rp-iris\" />\n                        </div>\n                    </Link>\n                </div>\n            </div>\n\n            {/* Icon-Only Tabs with Sliding Indicator - Talkie Style */}\n            <div className=\"relative flex border-b border-rp-highlight-low bg-rp-surface\">\n                {TABS.map((tab) => (\n                    <button\n                        key={tab.id}\n                        onClick={() => setActiveTab(tab.id)}\n                        className={cn(\n                            \"flex-1 py-3 flex items-center justify-center min-h-[44px] transition-colors\",\n                            activeTab === tab.id ? \"text-rp-text\" : \"text-rp-subtle hover:text-rp-text\"\n                        )}\n                        role=\"tab\"\n                        aria-selected={activeTab === tab.id}\n                        aria-label={tab.label}\n                    >\n                        <tab.icon size={22} />\n                    </button>\n                ))}\n\n                {/* Animated active line indicator */}\n                <div\n                    className=\"absolute bottom-0 h-0.5 bg-rp-iris transition-all duration-300 ease-out\"\n                    style={{\n                        left: `${activeTabIndex * (100 / TABS.length)}%`,\n                        width: `${100 / TABS.length}%`\n                    }}\n                />\n            </div>\n\n            {/* Split Line */}\n            <div className=\"border-t border-rp-highlight-low\" />\n\n            {/* Tab Content - Scrollable */}\n            <div className=\"flex-1 overflow-auto\">\n                {/* Comments Tab */}\n                {activeTab === \"comments\" && (\n                    <div className=\"p-4\">\n                        {/* Comments Header */}\n                        <div className=\"flex items-center gap-2 mb-4\">\n                            <span className=\"font-medium text-rp-text\">Comments</span>\n                            <span className=\"text-rp-subtle text-sm\">0</span>\n                        </div>\n\n                        {/* Comment Input Area - Talkie Style */}\n                        <div className=\"bg-rp-base/50 rounded-xl border border-rp-highlight-low\">\n                            <div className=\"flex items-start gap-3 p-3\">\n                                {/* User Avatar */}\n                                {profile?.image_url ? (\n                                    <div className=\"relative size-8 shrink-0\">\n                                        <Image\n                                            src={profile.image_url}\n                                            alt=\"You\"\n                                            className=\"rounded-full object-cover\"\n                                            fill\n                                            sizes=\"32px\"\n                                        />\n                                    </div>\n                                ) : (\n                                    <div className=\"size-8 rounded-full bg-rp-iris/20 flex items-center justify-center shrink-0\">\n                                        <IconUser size={16} className=\"text-rp-iris\" />\n                                    </div>\n                                )}\n\n                                {/* Text Input */}\n                                <textarea\n                                    value={commentText}\n                                    onChange={(e) => setCommentText(e.target.value)}\n                                    placeholder=\"Type your comment about this Talkie...\"\n                                    className=\"flex-1 bg-transparent resize-none text-sm text-rp-text placeholder:text-rp-muted focus:outline-none min-h-[22px]\"\n                                    rows={1}\n                                />\n                            </div>\n\n                            {/* Input Actions Row */}\n                            <div className=\"flex items-center justify-between px-3 pb-3\">\n                                {/* Left: Media buttons */}\n                                <div className=\"flex gap-1\">\n                                    <button className=\"p-2 hover:bg-rp-overlay rounded-lg transition-colors\">\n                                        <IconPaperclip size={18} className=\"text-rp-subtle\" />\n                                    </button>\n                                    <button className=\"p-2 hover:bg-rp-overlay rounded-lg transition-colors\">\n                                        <IconPhoto size={18} className=\"text-rp-subtle\" />\n                                    </button>\n                                </div>\n\n                                {/* Right: Cancel/Post buttons */}\n                                <div className=\"flex gap-2\">\n                                    <Button\n                                        variant=\"ghost\"\n                                        size=\"sm\"\n                                        onClick={() => setCommentText(\"\")}\n                                        className=\"text-rp-subtle\"\n                                    >\n                                        Cancel\n                                    </Button>\n                                    <Button\n                                        size=\"sm\"\n                                        disabled={!commentText.trim()}\n                                        className=\"bg-rp-iris hover:bg-rp-iris/80\"\n                                    >\n                                        Post\n                                    </Button>\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Empty State */}\n                        <div className=\"text-center py-12\">\n                            <div className=\"inline-flex items-center justify-center size-16 rounded-full bg-rp-overlay mb-3\">\n                                <IconMessage size={28} className=\"text-rp-muted\" />\n                            </div>\n                            <p className=\"text-rp-muted text-sm\">No comments yet.</p>\n                        </div>\n                    </div>\n                )}\n\n                {/* Similar Characters Tab */}\n                {activeTab === \"similar\" && (\n                    <div className=\"p-4\">\n                        <div className=\"text-center py-12\">\n                            <div className=\"inline-flex items-center justify-center size-16 rounded-full bg-rp-overlay mb-3\">\n                                <IconUsers size={28} className=\"text-rp-muted\" />\n                            </div>\n                            <p className=\"text-rp-muted text-sm\">Similar characters will appear here.</p>\n                        </div>\n                    </div>\n                )}\n\n                {/* Settings Tab */}\n                {activeTab === \"settings\" && (\n                    <div className=\"p-4 space-y-4\">\n                        <h3 className={`${TYPOGRAPHY.heading.h4} text-rp-text`}>Chat Settings</h3>\n                        <p className=\"text-rp-subtle text-sm\">\n                            Settings for this chat session will appear here.\n                        </p>\n                    </div>\n                )}\n            </div>\n        </div>\n    )\n}\n\nexport default CharacterPanel\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/character/CharacterPanelMobile.tsx","messages":[{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'left-0, right-0' could be replaced by the 'inset-x-0' shorthand!","line":38,"column":33,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":38,"endColumn":134,"fix":{"range":[1486,1575],"text":"bg-rp-surface fixed bottom-0 inset-x-0 z-50 flex max-h-[90vh] flex-col rounded-t-2xl"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":40,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":40,"endColumn":103,"fix":{"range":[1656,1721],"text":"bg-rp-muted/30 mx-auto mt-4 h-1.5 w-12 flex-shrink-0 rounded-full"}},{"ruleId":"tailwindcss/migration-from-tailwind-2","severity":1,"message":"Classname 'flex-shrink-0' should be updated to 'shrink-0' in Tailwind CSS v3!","line":40,"column":26,"nodeType":"JSXAttribute","messageId":"classnameChanged","endLine":40,"endColumn":103,"fix":{"range":[1656,1721],"text":"mx-auto mt-4 h-1.5 w-12 shrink-0 rounded-full bg-rp-muted/30"}},{"ruleId":"tailwindcss/migration-from-tailwind-2","severity":1,"message":"Classname 'flex-shrink-0' should be updated to 'shrink-0' in Tailwind CSS v3!","line":43,"column":26,"nodeType":"JSXAttribute","messageId":"classnameChanged","endLine":43,"endColumn":88,"fix":{"range":[1810,1860],"text":"relative h-64 w-full shrink-0 overflow-hidden"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":4,"source":"\"use client\"\n\nimport { RemrinContext } from \"@/context/context\"\nimport { cn } from \"@/lib/utils\"\nimport {\n    IconChevronRight,\n    IconHeart,\n    IconHeartFilled,\n    IconMessage,\n    IconSettings,\n    IconUser,\n} from \"@tabler/icons-react\"\nimport { FC, useContext, useState } from \"react\"\nimport Image from \"next/image\"\nimport { Drawer } from \"vaul\"\n\nexport const CharacterPanelMobile: FC = () => {\n    const { selectedPersona, isCharacterPanelOpen, setIsCharacterPanelOpen } = useContext(RemrinContext)\n    const [activeTab, setActiveTab] = useState<\"chat\" | \"persona\" | \"settings\">(\"chat\")\n    const [isFollowing, setIsFollowing] = useState(false)\n\n    if (!selectedPersona) {\n        return null\n    }\n\n    return (\n        <Drawer.Root open={isCharacterPanelOpen} onOpenChange={setIsCharacterPanelOpen}>\n            <Drawer.Trigger asChild>\n                <button\n                    className=\"bg-rp-overlay border-border/50 text-rp-subtle hover:bg-rp-highlight-med hover:text-rp-text fixed bottom-20 right-4 z-20 flex min-h-[48px] min-w-[48px] items-center justify-center rounded-full border shadow-lg transition-colors md:hidden\"\n                    title=\"Open character panel\"\n                >\n                    <IconChevronRight size={20} className=\"rotate-180\" />\n                </button>\n            </Drawer.Trigger>\n            <Drawer.Portal>\n                <Drawer.Overlay className=\"fixed inset-0 z-40 bg-black/40\" />\n                <Drawer.Content className=\"bg-rp-surface fixed bottom-0 left-0 right-0 z-50 flex max-h-[90vh] flex-col rounded-t-2xl\">\n                    {/* Drawer Handle */}\n                    <div className=\"mx-auto mt-4 h-1.5 w-12 flex-shrink-0 rounded-full bg-rp-muted/30\" />\n\n                    {/* Hero Image Section */}\n                    <div className=\"relative h-64 w-full flex-shrink-0 overflow-hidden\">\n                        {selectedPersona.image_url ? (\n                            <Image\n                                src={selectedPersona.image_url}\n                                alt={selectedPersona.name}\n                                fill\n                                className=\"object-cover\"\n                            />\n                        ) : (\n                            <div className=\"from-rp-iris/20 to-rp-rose/20 flex size-full items-center justify-center bg-gradient-to-br\">\n                                <IconUser size={64} className=\"text-rp-muted\" />\n                            </div>\n                        )}\n                        {/* Gradient overlay */}\n                        <div className=\"from-rp-base absolute inset-0 bg-gradient-to-t via-transparent to-transparent\" />\n\n                        {/* Live indicator */}\n                        <div className=\"bg-rp-foam/90 text-rp-base absolute right-4 top-4 flex items-center gap-1.5 rounded-full px-3 py-1.5 text-xs font-medium\">\n                            <span className=\"bg-rp-base size-1.5 animate-pulse rounded-full\" />\n                            Live\n                        </div>\n\n                        {/* Follow Button - Top Left */}\n                        <button\n                            onClick={() => setIsFollowing(!isFollowing)}\n                            className={cn(\n                                \"absolute left-4 top-4 flex min-h-[44px] min-w-[44px] items-center justify-center rounded-full backdrop-blur-sm transition-all\",\n                                isFollowing\n                                    ? \"bg-rp-rose/30 text-rp-rose\"\n                                    : \"bg-rp-base/60 text-rp-text hover:bg-rp-rose/20 hover:text-rp-rose\"\n                            )}\n                            title={isFollowing ? \"Following\" : \"Follow\"}\n                        >\n                            {isFollowing ? (\n                                <IconHeartFilled size={20} />\n                            ) : (\n                                <IconHeart size={20} />\n                            )}\n                        </button>\n                    </div>\n\n                    {/* Character Info */}\n                    <div className=\"relative -mt-8 px-4\">\n                        <div className=\"flex items-end justify-between\">\n                            <div>\n                                <h2 className=\"font-tiempos-headline text-rp-text text-xl font-bold\">\n                                    {selectedPersona.name}\n                                </h2>\n                                <p className=\"text-rp-subtle mt-0.5 text-sm\">\n                                    by @{(selectedPersona as any).creator_username || \"remrin\"}\n                                </p>\n                            </div>\n                        </div>\n\n                        {/* Stats Row */}\n                        <div className=\"text-rp-subtle mt-3 flex items-center gap-4 text-sm\">\n                            <span className=\"flex items-center gap-1\">\n                                <IconMessage size={16} />\n                                {((selectedPersona as any).total_chats || 0).toLocaleString()} chats\n                            </span>\n                            <span className=\"flex items-center gap-1\">\n                                <IconHeartFilled size={16} className=\"text-rp-rose\" />\n                                {((selectedPersona as any).followers_count || 0).toLocaleString()} followers\n                            </span>\n                        </div>\n\n                        {/* Category Tags */}\n                        {selectedPersona.category && (\n                            <div className=\"mt-3 flex flex-wrap gap-2\">\n                                <span className=\"bg-rp-iris/20 text-rp-iris rounded-full px-3 py-1 text-xs font-medium\">\n                                    {selectedPersona.category}\n                                </span>\n                                {selectedPersona.tags?.slice(0, 3).map((tag: string) => (\n                                    <span\n                                        key={tag}\n                                        className=\"bg-rp-base text-rp-subtle rounded-full px-3 py-1 text-xs\"\n                                    >\n                                        {tag}\n                                    </span>\n                                ))}\n                            </div>\n                        )}\n                    </div>\n\n                    {/* Tabs */}\n                    <div className=\"border-border/50 mt-4 flex border-b\">\n                        {[\n                            { id: \"chat\", icon: IconMessage, label: \"Chat\" },\n                            { id: \"persona\", icon: IconUser, label: \"Persona\" },\n                            { id: \"settings\", icon: IconSettings, label: \"Settings\" }\n                        ].map(tab => (\n                            <button\n                                key={tab.id}\n                                onClick={() => setActiveTab(tab.id as typeof activeTab)}\n                                className={cn(\n                                    \"flex min-h-[44px] flex-1 items-center justify-center gap-2 py-3 text-sm font-medium transition-colors\",\n                                    activeTab === tab.id\n                                        ? \"border-rp-iris text-rp-text border-b-2\"\n                                        : \"text-rp-subtle hover:text-rp-text\"\n                                )}\n                            >\n                                <tab.icon size={18} />\n                                {tab.label}\n                            </button>\n                        ))}\n                    </div>\n\n                    {/* Tab Content - Scrollable */}\n                    <div className=\"flex-1 overflow-auto p-4\">\n                        {activeTab === \"chat\" && (\n                            <div className=\"space-y-4\">\n                                <h3 className=\"font-tiempos-headline text-rp-text font-medium\">Comments</h3>\n                                <div className=\"bg-rp-base/50 rounded-lg p-4\">\n                                    <input\n                                        type=\"text\"\n                                        placeholder=\"Type your comment about this Talkie...\"\n                                        className=\"text-rp-text placeholder:text-rp-muted min-h-[44px] w-full bg-transparent text-sm focus:outline-none\"\n                                    />\n                                </div>\n                                <p className=\"text-rp-muted text-center text-sm\">\n                                    No comments yet\n                                </p>\n                            </div>\n                        )}\n\n                        {activeTab === \"persona\" && (\n                            <div className=\"space-y-4\">\n                                <div>\n                                    <h3 className=\"font-tiempos-headline text-rp-text mb-2 font-medium\">About</h3>\n                                    <p className=\"text-rp-subtle text-sm leading-relaxed\">\n                                        {selectedPersona.description || \"No description available.\"}\n                                    </p>\n                                </div>\n                                {selectedPersona.intro_message && (\n                                    <div>\n                                        <h3 className=\"font-tiempos-headline text-rp-text mb-2 font-medium\">Intro Message</h3>\n                                        <p className=\"text-rp-subtle text-sm leading-relaxed\">\n                                            &ldquo;{selectedPersona.intro_message}&rdquo;\n                                        </p>\n                                    </div>\n                                )}\n                            </div>\n                        )}\n\n                        {activeTab === \"settings\" && (\n                            <div className=\"space-y-4\">\n                                <h3 className=\"font-tiempos-headline text-rp-text font-medium\">Chat Settings</h3>\n                                <p className=\"text-rp-subtle text-sm\">\n                                    Settings for this chat session will appear here.\n                                </p>\n                            </div>\n                        )}\n                    </div>\n                </Drawer.Content>\n            </Drawer.Portal>\n        </Drawer.Root>\n    )\n}\n\nexport default CharacterPanelMobile\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/chat-v2/ChatEngine.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'moodState.battery'. Either include it or remove the dependency array.","line":327,"column":8,"nodeType":"ArrayExpression","endLine":327,"endColumn":57,"suggestions":[{"desc":"Update the dependencies array to be: [isGenerating, messages, personaId, systemPrompt, moodState.battery]","fix":{"range":[12817,12866],"text":"[isGenerating, messages, personaId, systemPrompt, moodState.battery]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a duplicate dependency: 'setSystemPrompt'. Either omit it or remove the dependency array.","line":397,"column":9,"nodeType":"ArrayExpression","endLine":414,"endColumn":6,"suggestions":[{"desc":"Update the dependencies array to be: [messages, isGenerating, currentProvider, userTier, error, personaId, moodState, toolState, isFollowingUp, sendMessage, stopGeneration, clearMessages, setSystemPrompt, addSystemMessage, rewind]","fix":{"range":[14982,15326],"text":"[messages, isGenerating, currentProvider, userTier, error, personaId, moodState, toolState, isFollowingUp, sendMessage, stopGeneration, clearMessages, setSystemPrompt, addSystemMessage, rewind]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Chat Engine - Main Controller\n * \n * Central state management for the v2 chat system\n */\n\n\"use client\"\n\nimport React, {\n    createContext,\n    useContext,\n    useState,\n    useCallback,\n    useEffect,\n    useRef,\n    useMemo,\n    ReactNode\n} from 'react'\nimport { ChatMessageContent, ProviderId, UserTier } from '@/lib/chat-engine/types'\nimport {\n    MoodState,\n    calculateMood,\n    getInitialMoodState,\n    detectSentiment\n} from '@/lib/chat-engine/mood'\nimport { routeForgeToolCall } from '@/lib/forge/tool-handlers'\n\ninterface ChatEngineState {\n    messages: ChatMessageContent[]\n    isGenerating: boolean\n    currentProvider: ProviderId | null\n    userTier: UserTier\n    error: string | null\n    personaId?: string\n    isFollowingUp: boolean\n    moodState: MoodState\n    toolState: { name: string; status: 'idle' | 'running' | 'complete' | 'error' } | null\n}\n\ninterface ChatEngineActions {\n    sendMessage: (content: string) => Promise<void>\n    stopGeneration: () => void\n    clearMessages: () => void\n    setSystemPrompt: (prompt: string) => void\n    addSystemMessage: (content: string) => void\n    rewind: (index: number) => void\n}\n\ninterface ChatEngineContextValue extends ChatEngineState, ChatEngineActions { }\n\nconst ChatEngineContext = createContext<ChatEngineContextValue | null>(null)\n\n// Separate context for mood to allow independent hook\nconst MoodContext = createContext<MoodState | null>(null)\n\ninterface ChatEngineProviderProps {\n    children: ReactNode\n    personaId?: string\n    initialSystemPrompt?: string\n    personaIntroMessage?: string\n    userTier?: UserTier\n    showMoodHUD?: boolean\n}\n\nexport function ChatEngineProvider({\n    children,\n    personaId,\n    initialSystemPrompt = '',\n    personaIntroMessage,\n    userTier = 'free',\n    showMoodHUD = true\n}: ChatEngineProviderProps) {\n    const [messages, setMessages] = useState<ChatMessageContent[]>([])\n    const [isGenerating, setIsGenerating] = useState(false)\n    const [currentProvider, setCurrentProvider] = useState<ProviderId | null>(null)\n    const [error, setError] = useState<string | null>(null)\n    const [systemPrompt, setSystemPrompt] = useState(initialSystemPrompt)\n    const [isFollowingUp, setIsFollowingUp] = useState(false)\n    const [moodState, setMoodState] = useState<MoodState>(getInitialMoodState())\n    const [toolState, setToolState] = useState<{ name: string; status: 'idle' | 'running' | 'complete' | 'error' } | null>(null)\n\n    const abortControllerRef = useRef<AbortController | null>(null)\n\n    /**\n     * Handle intro message for new chats\n     */\n    useEffect(() => {\n        if (messages.length === 0 && personaIntroMessage) {\n            console.log(\"ðŸ•¯ï¸ [ChatEngine] Seeding intro message from persona...\")\n            setMessages([{\n                role: 'assistant',\n                content: personaIntroMessage,\n                timestamp: new Date()\n            }])\n        }\n    }, [personaIntroMessage, messages.length])\n\n    /**\n     * Send a message and stream the response\n     */\n    const sendMessage = useCallback(async (content: string, skipUserMessage: boolean = false) => {\n        if (!content.trim() && !skipUserMessage) return\n        if (isGenerating) return\n\n        setError(null)\n        setIsGenerating(true)\n\n        let currentMessages = [...messages]\n\n        if (!skipUserMessage) {\n            // Add user message\n            const userMessage: ChatMessageContent = {\n                role: 'user',\n                content: content.trim(),\n                timestamp: new Date()\n            }\n            currentMessages.push(userMessage)\n            setMessages(currentMessages)\n        }\n\n        // Add placeholder assistant message\n        const assistantMessage: ChatMessageContent = {\n            role: 'assistant',\n            content: '',\n            timestamp: new Date()\n        }\n\n        setMessages(prev => [...prev, assistantMessage])\n\n        // Create abort controller\n        abortControllerRef.current = new AbortController()\n\n        try {\n            const response = await fetch('/api/v2/chat', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({\n                    messages: currentMessages.map(m => ({\n                        role: m.role,\n                        content: m.content,\n                        metadata: m.metadata\n                    })),\n                    personaId,\n                    systemPrompt\n                }),\n                signal: abortControllerRef.current.signal\n            })\n\n            if (!response.ok) {\n                throw new Error(`HTTP ${response.status}: ${response.statusText}`)\n            }\n\n            // Get provider from header\n            const providerId = response.headers.get('X-Provider') as ProviderId\n            if (providerId) setCurrentProvider(providerId)\n\n            // Read SSE stream\n            const reader = response.body?.getReader()\n            if (!reader) throw new Error('No response body')\n\n            const decoder = new TextDecoder()\n            let buffer = ''\n            let fullContent = ''\n            let accumulatedToolCalls: any[] = []\n\n            while (true) {\n                const { done, value } = await reader.read()\n                if (done) break\n\n                buffer += decoder.decode(value, { stream: true })\n                const lines = buffer.split('\\n')\n                buffer = lines.pop() || ''\n\n                for (const line of lines) {\n                    if (line.startsWith('data: ')) {\n                        const data = line.slice(6).trim()\n                        if (data === '[DONE]') continue\n\n                        try {\n                            const json = JSON.parse(data)\n\n                            if (json.error) {\n                                throw new Error(json.error)\n                            }\n\n                            if (json.toolCalls) {\n                                // Collect tool calls\n                                for (const tc of json.toolCalls) {\n                                    if (!accumulatedToolCalls[tc.index]) {\n                                        accumulatedToolCalls[tc.index] = tc\n                                    } else {\n                                        // Merge delta\n                                        if (tc.function?.arguments) {\n                                            accumulatedToolCalls[tc.index].function.arguments += tc.function.arguments\n                                        }\n                                    }\n                                }\n\n                                // Update the assistant message metadata with tool calls\n                                setMessages(prev => {\n                                    const updated = [...prev]\n                                    const lastIdx = updated.length - 1\n                                    if (updated[lastIdx]?.role === 'assistant') {\n                                        updated[lastIdx] = {\n                                            ...updated[lastIdx],\n                                            metadata: {\n                                                ...updated[lastIdx].metadata,\n                                                toolCalls: accumulatedToolCalls.filter(Boolean)\n                                            }\n                                        }\n                                    }\n                                    return updated\n                                })\n                            }\n\n                            if (json.content) {\n                                fullContent += json.content\n\n                                // Update the assistant message content\n                                setMessages(prev => {\n                                    const updated = [...prev]\n                                    const lastIdx = updated.length - 1\n                                    if (updated[lastIdx]?.role === 'assistant') {\n                                        updated[lastIdx] = {\n                                            ...updated[lastIdx],\n                                            content: fullContent,\n                                            metadata: {\n                                                ...updated[lastIdx].metadata,\n                                                provider: json.provider\n                                            }\n                                        }\n                                    }\n                                    return updated\n                                })\n                            }\n\n                            if (json.type === 'followup' && json.content) {\n                                // Handle following up\n                                setIsFollowingUp(true)\n                                setTimeout(() => {\n                                    setIsFollowingUp(false)\n                                    setMessages(prev => {\n                                        const updated = [...prev]\n                                        const lastIdx = updated.length - 1\n                                        if (updated[lastIdx]?.role === 'assistant') {\n                                            const prefix = updated[lastIdx].content.endsWith('\\n\\n') ? '' :\n                                                updated[lastIdx].content.endsWith('\\n') ? '\\n' : '\\n\\n'\n                                            updated[lastIdx] = {\n                                                ...updated[lastIdx],\n                                                content: updated[lastIdx].content + (json.content.startsWith('\\n') ? '' : prefix) + json.content\n                                            }\n                                        }\n                                        return updated\n                                    })\n                                }, 500)\n                            }\n                        } catch (e) {\n                            // Skip parse errors\n                        }\n                    }\n                }\n            }\n\n            // --- Tool Call Execution ---\n            const finalToolCalls = accumulatedToolCalls.filter(Boolean)\n            if (finalToolCalls.length > 0) {\n                console.log(`ðŸ”§ [ChatEngine] Executing ${finalToolCalls.length} tool calls`)\n\n                for (const toolCall of finalToolCalls) {\n                    const toolName = toolCall.function.name\n                    const args = JSON.parse(toolCall.function.arguments || '{}')\n\n                    setToolState({ name: toolName, status: 'running' })\n\n                    // Route tool call to specialized handlers\n                    const result = await routeForgeToolCall(\n                        toolName,\n                        args,\n                        () => setToolState({ name: toolName, status: 'running' }),\n                        (imageUrl) => {\n                            setToolState({ name: toolName, status: 'complete' })\n                        }\n                    )\n\n                    // Add tool response to history\n                    const toolMessage: ChatMessageContent = {\n                        role: 'tool',\n                        content: JSON.stringify(result.result),\n                        timestamp: new Date(),\n                        metadata: { toolResult: result.result }\n                    }\n\n                    // We need to re-fetch the latest messages since tool calls can happen in sequence\n                    setMessages(prev => {\n                        const nextMessages = [...prev, toolMessage]\n                        // Trigger next pass\n                        setTimeout(() => sendMessage('', true), 100)\n                        return nextMessages\n                    })\n                }\n            }\n\n            // Update mood state after message exchange\n            const sentiment = detectSentiment(fullContent)\n            const newMoodState = calculateMood(\n                messages.length + 2,\n                fullContent.length,\n                sentiment,\n                moodState.battery\n            )\n            setMoodState(newMoodState)\n\n        } catch (err) {\n            if (err instanceof Error && err.name === 'AbortError') {\n                console.log('Generation aborted by user')\n            } else {\n                const errorMessage = err instanceof Error ? err.message : 'Unknown error'\n                setError(errorMessage)\n                console.error('Chat error:', err)\n            }\n        } finally {\n            setIsGenerating(false)\n            setIsFollowingUp(false)\n            setToolState(null)\n            abortControllerRef.current = null\n        }\n    }, [messages, isGenerating, personaId, systemPrompt])\n\n    /**\n     * Stop the current generation\n     */\n    const stopGeneration = useCallback(() => {\n        if (abortControllerRef.current) {\n            abortControllerRef.current.abort()\n        }\n    }, [])\n\n    /**\n     * Clear all messages\n     */\n    const clearMessages = useCallback(() => {\n        setMessages([])\n        setError(null)\n        setMoodState(getInitialMoodState()) // Reset mood on clear\n    }, [])\n\n    /**\n     * Add a system message to history\n     */\n    const addSystemMessage = useCallback((content: string) => {\n        const systemMsg: ChatMessageContent = {\n            role: 'system',\n            content,\n            timestamp: new Date()\n        }\n        setMessages(prev => [...prev, systemMsg])\n    }, [])\n\n    /**\n     * Rewind conversation to a specific index\n     * Removes all messages AFTER this index.\n     * If the target message is Assistant, it removes it too to trigger regen?\n     * Strategy: \"Rewind to here\" = User wants to retry from this point.\n     * So we keep messages[0...index].\n     */\n    const rewind = useCallback((index: number) => {\n        setMessages(prev => {\n            // Keep the message at index, remove everything after\n            // If the user clicked \"Rewind\" on an Assistant message, they usually want to regenerate IT.\n            // If they clicked on a User message, they might want to edit it.\n            // For now, simple slice: keep everything UP TO index.\n            const newHistory = prev.slice(0, index + 1)\n\n            // If the last message is now Assistant, remove it too so we can regen? \n            // Or just leave it as the 'latest' state.\n            // Let's just slice for now.\n            return newHistory\n        })\n    }, [])\n\n    const value: ChatEngineContextValue = useMemo(() => ({\n        messages,\n        isGenerating,\n        currentProvider,\n        userTier,\n        error,\n        personaId,\n        moodState,\n        toolState,\n        isFollowingUp,\n        sendMessage,\n        stopGeneration,\n        clearMessages,\n        setSystemPrompt,\n        addSystemMessage,\n        rewind\n    }), [\n        messages,\n        isGenerating,\n        currentProvider,\n        userTier,\n        error,\n        personaId,\n        moodState,\n        toolState,\n        isFollowingUp,\n        sendMessage,\n        stopGeneration,\n        clearMessages,\n        setSystemPrompt,\n        setSystemPrompt,\n        addSystemMessage,\n        rewind\n    ])\n\n    return (\n        <MoodContext.Provider value={moodState}>\n            <ChatEngineContext.Provider value={value}>\n                {children}\n            </ChatEngineContext.Provider>\n        </MoodContext.Provider>\n    )\n}\n\n/**\n * Hook to use the chat engine\n */\nexport function useChatEngine() {\n    const context = useContext(ChatEngineContext)\n    if (!context) {\n        throw new Error('useChatEngine must be used within ChatEngineProvider')\n    }\n    return context\n}\n\n/**\n * Hook to use mood state independently\n */\nexport function useMood() {\n    const context = useContext(MoodContext)\n    if (!context) {\n        throw new Error('useMood must be used within ChatEngineProvider')\n    }\n    return context\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/chat-v2/ChatHeader.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":24,"column":14,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":24,"endColumn":170,"fix":{"range":[743,887],"text":"border-rp-overlay/50 bg-rp-base/80 sticky top-0 z-10 flex h-16 w-full items-center justify-between border-b px-4 backdrop-blur-md transition-all"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":30,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":30,"endColumn":167,"fix":{"range":[1123,1253],"text":"text-rp-subtle hover:bg-rp-overlay hover:text-rp-text mr-1 flex h-8 w-8 items-center justify-center rounded-full transition-colors"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-8, w-8' could be replaced by the 'size-8' shorthand!","line":30,"column":25,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":30,"endColumn":167,"fix":{"range":[1123,1253],"text":"mr-1 flex size-8 items-center justify-center rounded-full text-rp-subtle hover:bg-rp-overlay hover:text-rp-text transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":38,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":38,"endColumn":67,"fix":{"range":[1497,1526],"text":"group relative cursor-pointer"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":39,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":39,"endColumn":156,"fix":{"range":[1615,1729],"text":"ring-rp-highlight-med group-hover:ring-rp-iris relative size-10 overflow-hidden rounded-full ring-2 transition-all"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":48,"column":31,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":48,"endColumn":105,"fix":{"range":[2132,2194],"text":"bg-rp-base absolute bottom-0 right-0 size-3 rounded-full p-0.5"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":49,"column":34,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":49,"endColumn":111,"fix":{"range":[2241,2306],"text":"bg-rp-love border-rp-base size-full rounded-full border shadow-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":53,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":53,"endColumn":134,"fix":{"range":[2428,2524],"text":"bg-rp-overlay ring-rp-highlight-med flex size-10 items-center justify-center rounded-full ring-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":59,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":59,"endColumn":62,"fix":{"range":[2718,2746],"text":"flex cursor-pointer flex-col"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":61,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":61,"endColumn":151,"fix":{"range":[2873,2982],"text":"font-tiempos-headline text-rp-text group-hover:text-rp-iris text-lg font-bold leading-tight transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":66,"column":31,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":66,"endColumn":99,"fix":{"range":[3186,3242],"text":"text-rp-love flex items-center gap-1 text-xs font-medium"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-2, w-2' could be replaced by the 'size-2' shorthand!","line":67,"column":35,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":67,"endColumn":68,"fix":{"range":[3290,3311],"text":"relative flex size-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":68,"column":39,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":68,"endColumn":133,"fix":{"range":[3363,3445],"text":"bg-rp-love absolute inline-flex h-full w-full animate-ping rounded-full opacity-75"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-full, w-full' could be replaced by the 'size-full' shorthand!","line":68,"column":39,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":68,"endColumn":133,"fix":{"range":[3363,3445],"text":"animate-ping absolute inline-flex size-full rounded-full bg-rp-love opacity-75"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":69,"column":39,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":69,"endColumn":103,"fix":{"range":[3504,3556],"text":"bg-rp-love relative inline-flex h-2 w-2 rounded-full"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-2, w-2' could be replaced by the 'size-2' shorthand!","line":69,"column":39,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":69,"endColumn":103,"fix":{"range":[3504,3556],"text":"relative inline-flex rounded-full size-2 bg-rp-love"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":82,"column":32,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":87,"endColumn":22,"fix":{"range":[4183,4232],"text":"bg-rp-iris/20 text-rp-iris ring-rp-iris/50 ring-1"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-9, w-9' could be replaced by the 'size-9' shorthand!","line":82,"column":32,"nodeType":"CallExpression","messageId":"shorthandCandidateDetected","endLine":87,"endColumn":22,"fix":{"range":[4037,4103],"text":"flex size-9 items-center justify-center rounded-xl transition-all"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":96,"column":33,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":96,"endColumn":168,"fix":{"range":[4686,4809],"text":"text-rp-subtle hover:bg-rp-overlay hover:text-rp-text flex h-9 w-9 items-center justify-center rounded-xl transition-colors"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-9, w-9' could be replaced by the 'size-9' shorthand!","line":96,"column":33,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":96,"endColumn":168,"fix":{"range":[4686,4809],"text":"flex size-9 items-center justify-center rounded-xl text-rp-subtle hover:bg-rp-overlay hover:text-rp-text transition-colors"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":20,"fixableErrorCount":0,"fixableWarningCount":20,"source":"\"use client\"\n\nimport { FC, useContext } from \"react\"\nimport { IconPhoto, IconDotsVertical, IconArrowLeft, IconUser } from \"@tabler/icons-react\"\nimport { RemrinContext } from \"@/context/context\"\nimport { cn } from \"@/lib/utils\"\nimport Image from \"next/image\"\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\"\n\ninterface ChatHeaderProps {\n    personaName?: string\n    personaImage?: string\n    onBack?: () => void\n}\n\nexport const ChatHeader: FC<ChatHeaderProps> = ({\n    personaName,\n    personaImage,\n    onBack\n}) => {\n    const { chatBackgroundEnabled, setChatBackgroundEnabled, setIsCharacterPanelOpen } = useContext(RemrinContext)\n\n    return (\n        <div className=\"sticky top-0 z-10 flex h-16 w-full items-center justify-between border-b border-rp-overlay/50 bg-rp-base/80 px-4 backdrop-blur-md transition-all\">\n            {/* Left: Persona Info & Back */}\n            <div className=\"flex items-center gap-3\">\n                {onBack && (\n                    <button\n                        onClick={onBack}\n                        className=\"mr-1 flex h-8 w-8 items-center justify-center rounded-full text-rp-subtle hover:bg-rp-overlay hover:text-rp-text transition-colors\"\n                    >\n                        <IconArrowLeft size={20} />\n                    </button>\n                )}\n\n                {/* Avatar with Status Ring */}\n                {personaImage ? (\n                    <div className=\"relative group cursor-pointer\" onClick={() => setIsCharacterPanelOpen(true)}>\n                        <div className=\"relative size-10 overflow-hidden rounded-full ring-2 ring-rp-highlight-med transition-all group-hover:ring-rp-iris\">\n                            <Image\n                                src={personaImage}\n                                alt={personaName || \"Persona\"}\n                                fill\n                                className=\"object-cover\"\n                            />\n                        </div>\n                        {/* Live/Online Indicator */}\n                        <span className=\"absolute bottom-0 right-0 size-3 rounded-full bg-rp-base p-0.5\">\n                            <div className=\"size-full rounded-full bg-rp-love border border-rp-base shadow-sm\" />\n                        </span>\n                    </div>\n                ) : (\n                    <div className=\"flex size-10 items-center justify-center rounded-full bg-rp-overlay ring-2 ring-rp-highlight-med\">\n                        <IconUser size={20} className=\"text-rp-subtle\" />\n                    </div>\n                )}\n\n                {/* Name & Status */}\n                <div className=\"flex flex-col cursor-pointer\" onClick={() => setIsCharacterPanelOpen(true)}>\n                    {personaName && (\n                        <div className=\"font-tiempos-headline text-lg font-bold text-rp-text leading-tight group-hover:text-rp-iris transition-colors\">\n                            {personaName}\n                        </div>\n                    )}\n                    <div className=\"flex items-center gap-1.5\">\n                        <span className=\"text-xs font-medium text-rp-love flex items-center gap-1\">\n                            <span className=\"relative flex h-2 w-2\">\n                                <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-rp-love opacity-75\"></span>\n                                <span className=\"relative inline-flex rounded-full h-2 w-2 bg-rp-love\"></span>\n                            </span>\n                            Live\n                        </span>\n                    </div>\n                </div>\n            </div>\n\n            {/* Right: Actions */}\n            <div className=\"flex items-center gap-1\">\n                {/* Background Toggle */}\n                <button\n                    onClick={() => setChatBackgroundEnabled(!chatBackgroundEnabled)}\n                    className={cn(\n                        \"flex h-9 w-9 items-center justify-center rounded-xl transition-all\",\n                        chatBackgroundEnabled\n                            ? \"bg-rp-iris/20 text-rp-iris ring-1 ring-rp-iris/50\"\n                            : \"text-rp-subtle hover:bg-rp-overlay hover:text-rp-text\"\n                    )}\n                    title={chatBackgroundEnabled ? \"Hide Background\" : \"Show Background\"}\n                >\n                    <IconPhoto size={20} />\n                </button>\n\n                {/* Settings / More */}\n                <DropdownMenu>\n                    <DropdownMenuTrigger asChild>\n                        <button className=\"flex h-9 w-9 items-center justify-center rounded-xl text-rp-subtle hover:bg-rp-overlay hover:text-rp-text transition-colors\">\n                            <IconDotsVertical size={20} />\n                        </button>\n                    </DropdownMenuTrigger>\n                    <DropdownMenuContent align=\"end\" className=\"bg-rp-surface border-rp-highlight-low\">\n                        <DropdownMenuItem\n                            className=\"text-rp-text focus:bg-rp-overlay focus:text-rp-text cursor-pointer\"\n                            onClick={() => setIsCharacterPanelOpen(true)}\n                        >\n                            View Profile\n                        </DropdownMenuItem>\n                        <DropdownMenuItem className=\"text-rp-text focus:bg-rp-overlay focus:text-rp-text cursor-pointer\">\n                            Chat Settings\n                        </DropdownMenuItem>\n                    </DropdownMenuContent>\n                </DropdownMenu>\n            </div>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/chat-v2/ChatInput.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":148,"column":21,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":148,"endColumn":178,"fix":{"range":[4676,4821],"text":"text-rp-subtle hover:bg-rp-overlay hover:text-rp-text flex h-10 w-10 items-center justify-center rounded-xl transition-colors disabled:opacity-50"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-10, w-10' could be replaced by the 'size-10' shorthand!","line":148,"column":21,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":148,"endColumn":178,"fix":{"range":[4676,4821],"text":"flex size-10 items-center justify-center rounded-xl text-rp-subtle hover:bg-rp-overlay hover:text-rp-text disabled:opacity-50 transition-colors"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-10, w-10' could be replaced by the 'size-10' shorthand!","line":156,"column":21,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":159,"endColumn":28,"fix":{"range":[5113,5208],"text":"`flex size-10 items-center justify-center rounded-xl transition-colors disabled:opacity-50${"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":167,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":167,"endColumn":150,"fix":{"range":[5616,5736],"text":"focus-within:ring-rp-iris/20 relative flex-1 overflow-hidden rounded-2xl transition-all duration-200 focus-within:ring-1"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":176,"column":21,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":176,"endColumn":257,"fix":{"range":[6094,6318],"text":"text-rp-text placeholder-rp-subtle/70 scrollbar-thin scrollbar-track-transparent scrollbar-thumb-rp-muted/20 max-h-[200px] min-h-[52px] w-full resize-none bg-transparent px-5 py-3.5 text-base outline-none disabled:opacity-50"}},{"ruleId":"tailwindcss/migration-from-tailwind-2","severity":1,"message":"Classname 'placeholder-rp-subtle/70' should be updated to 'placeholder:text-rp-subtle/70' in Tailwind CSS v3!","line":176,"column":21,"nodeType":"JSXAttribute","messageId":"classnameChanged","endLine":176,"endColumn":257,"fix":{"range":[6094,6318],"text":"max-h-[200px] min-h-[52px] w-full resize-none bg-transparent px-5 py-3.5 text-base text-rp-text placeholder:text-rp-subtle/70 outline-none scrollbar-thin scrollbar-track-transparent scrollbar-thumb-rp-muted/20 disabled:opacity-50"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-[52px], w-[52px]' could be replaced by the 'size-[52px]' shorthand!","line":184,"column":17,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":195,"endColumn":11,"fix":{"range":[6586,6720],"text":"`\n          flex size-[52px] shrink-0 items-center justify-center rounded-2xl transition-all\n          duration-200\n          ${"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":7,"source":"/**\n * Chat Input Component\n * \n * Clean, minimal input with Remrin design language\n */\n\n\"use client\"\n\nimport React, { useState, useRef, KeyboardEvent } from 'react'\nimport { useChatEngine, useMood } from './ChatEngine'\nimport { IconSend, IconPlayerStop, IconPaperclip, IconMicrophone } from '@tabler/icons-react'\nimport { useFileHandler } from './hooks/use-file-handler'\nimport { toast } from 'sonner' // Assuming sonner is used for toasts based on other files\n\ninterface ChatInputProps {\n    placeholder?: string\n    disabled?: boolean\n    onMemorySearch?: (query: string) => void\n    minimal?: boolean\n}\n\nexport function ChatInput({\n    placeholder = \"Message Remrin...\",\n    disabled = false,\n    onMemorySearch\n}: ChatInputProps) {\n    const [input, setInput] = useState('')\n    const textareaRef = useRef<HTMLTextAreaElement>(null)\n    const fileInputRef = useRef<HTMLInputElement>(null)\n    const { sendMessage, stopGeneration, isGenerating } = useChatEngine()\n    const moodState = useMood()\n    const { handleSelectDeviceFile, filesToAccept } = useFileHandler()\n    const [isListening, setIsListening] = useState(false)\n\n    // Check if we should show excited pulse\n    const isExcited = moodState.mood === 'excited'\n\n    const handleSubmit = async () => {\n        if (!input.trim() || isGenerating || disabled) return\n\n        const message = input.trim()\n\n        // Check for commands\n        if (message.startsWith('/memory')) {\n            const query = message.slice(7).trim()\n            if (onMemorySearch) {\n                onMemorySearch(query)\n                setInput('')\n                return\n            }\n        }\n\n        setInput('')\n\n        // Reset textarea height\n        if (textareaRef.current) {\n            textareaRef.current.style.height = 'auto'\n        }\n\n        await sendMessage(message)\n    }\n\n    const handleKeyDown = (e: KeyboardEvent<HTMLTextAreaElement>) => {\n        if (e.key === 'Enter' && !e.shiftKey) {\n            e.preventDefault()\n            handleSubmit()\n        }\n    }\n\n    const handleInputChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n        setInput(e.target.value)\n\n        // Auto-resize textarea\n        const textarea = e.target\n        textarea.style.height = 'auto'\n        textarea.style.height = Math.min(textarea.scrollHeight, 200) + 'px'\n    }\n\n    const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n        if (e.target.files && e.target.files[0]) {\n            handleSelectDeviceFile(e.target.files[0])\n        }\n        // Reset input so same file can be selected again\n        e.target.value = ''\n    }\n\n    const toggleVoiceInput = () => {\n        if (isListening) {\n            // Stop listening logic would go here if we had a sustained listener\n            // For simple web speech API, it usually stops on end\n            setIsListening(false)\n            return\n        }\n\n        if (!('webkitSpeechRecognition' in window)) {\n            toast.error(\"Voice input is not supported in this browser.\")\n            return\n        }\n\n        const recognition = new (window as any).webkitSpeechRecognition()\n        recognition.continuous = false\n        recognition.interimResults = false\n        recognition.lang = 'en-US'\n\n        recognition.onstart = () => {\n            setIsListening(true)\n        }\n\n        recognition.onresult = (event: any) => {\n            const transcript = event.results[0][0].transcript\n            setInput(prev => prev + (prev ? ' ' : '') + transcript)\n            // Resize textarea after voice input\n            setTimeout(() => {\n                if (textareaRef.current) {\n                    textareaRef.current.style.height = 'auto'\n                    textareaRef.current.style.height = Math.min(textareaRef.current.scrollHeight, 200) + 'px'\n                }\n            }, 0)\n        }\n\n        recognition.onerror = (event: any) => {\n            console.error('Voice error:', event.error)\n            setIsListening(false)\n        }\n\n        recognition.onend = () => {\n            setIsListening(false)\n        }\n\n        recognition.start()\n    }\n\n    return (\n        <div className=\"relative flex w-full items-end gap-2\">\n            <input\n                type=\"file\"\n                ref={fileInputRef}\n                className=\"hidden\"\n                accept={filesToAccept}\n                onChange={handleFileSelect}\n            />\n\n            {/* Left Actions: File Upload & Voice */}\n            <div className=\"flex gap-1 pb-1\">\n                <button\n                    onClick={() => fileInputRef.current?.click()}\n                    disabled={disabled || isGenerating}\n                    className=\"flex h-10 w-10 items-center justify-center rounded-xl text-rp-subtle hover:bg-rp-overlay hover:text-rp-text disabled:opacity-50 transition-colors\"\n                    title=\"Upload file\"\n                >\n                    <IconPaperclip size={20} />\n                </button>\n                <button\n                    onClick={toggleVoiceInput}\n                    disabled={disabled || isGenerating}\n                    className={`flex h-10 w-10 items-center justify-center rounded-xl transition-colors disabled:opacity-50 ${isListening\n                        ? 'bg-rp-love/20 text-rp-love animate-pulse'\n                        : 'text-rp-subtle hover:bg-rp-overlay hover:text-rp-text'\n                        }`}\n                    title=\"Voice input\"\n                >\n                    <IconMicrophone size={20} />\n                </button>\n            </div>\n\n            {/* Input Container */}\n            <div className=\"relative flex-1 overflow-hidden transition-all duration-200 focus-within:ring-1 focus-within:ring-rp-iris/20 rounded-2xl\">\n                <textarea\n                    ref={textareaRef}\n                    value={input}\n                    onChange={handleInputChange}\n                    onKeyDown={handleKeyDown}\n                    placeholder={placeholder}\n                    disabled={disabled || isGenerating}\n                    rows={1}\n                    className=\"max-h-[200px] min-h-[52px] w-full resize-none bg-transparent px-5 py-3.5 text-base text-rp-text placeholder-rp-subtle/70 outline-none scrollbar-thin scrollbar-track-transparent scrollbar-thumb-rp-muted/20 disabled:opacity-50\"\n                />\n            </div>\n\n            {/* Send/Stop Button */}\n            <button\n                onClick={isGenerating ? stopGeneration : handleSubmit}\n                disabled={disabled || (!isGenerating && !input.trim())}\n                className={`\n          flex h-[52px] w-[52px] shrink-0 items-center justify-center rounded-2xl\n          transition-all duration-200\n          ${isExcited && !isGenerating && input.trim() ? 'mood-pulse-excited' : ''}\n          ${isGenerating\n                        ? 'bg-rp-love text-rp-base hover:bg-rp-love/90'\n                        : input.trim()\n                            ? 'bg-rp-iris text-rp-base hover:bg-rp-iris/90'\n                            : 'bg-rp-surface text-rp-muted cursor-not-allowed'\n                    }\n          disabled:opacity-50\n        `}\n                aria-label={isGenerating ? 'Stop generation' : 'Send message'}\n            >\n                {isGenerating ? (\n                    <IconPlayerStop size={22} />\n                ) : (\n                    <IconSend size={22} />\n                )}\n            </button>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/chat-v2/ChatMessage.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'displayedContent'. Either include it or remove the dependency array.","line":107,"column":8,"nodeType":"ArrayExpression","endLine":107,"endColumn":46,"suggestions":[{"desc":"Update the dependencies array to be: [message.content, isStreaming, isUser, displayedContent]","fix":{"range":[4241,4279],"text":"[message.content, isStreaming, isUser, displayedContent]"}}]},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":131,"column":34,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":131,"endColumn":70,"fix":{"range":[5286,5310],"text":"group/code relative my-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":132,"column":38,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":132,"endColumn":159,"fix":{"range":[5361,5470],"text":"absolute right-2 top-2 z-10 flex items-center gap-2 opacity-0 transition-opacity group-hover/code:opacity-100"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":133,"column":43,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":133,"endColumn":76,"fix":{"range":[5526,5547],"text":"text-rp-muted text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":140,"column":41,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":140,"endColumn":117,"fix":{"range":[5999,6063],"text":"text-rp-muted hover:bg-rp-overlay hover:text-rp-text rounded p-1"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":158,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":158,"endColumn":110,"fix":{"range":[6846,6915],"text":"bg-rp-overlay/50 text-rp-iris rounded px-1.5 py-0.5 font-mono text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":172,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":172,"endColumn":147,"fix":{"range":[7392,7498],"text":"text-rp-iris decoration-rp-iris/30 hover:decoration-rp-iris underline underline-offset-4 transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":180,"column":31,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":180,"endColumn":93,"fix":{"range":[7740,7790],"text":"text-rp-text mb-4 inline leading-relaxed last:mb-0"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":184,"column":32,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":184,"endColumn":98,"fix":{"range":[7928,7982],"text":"text-rp-text marker:text-rp-subtle mb-4 list-disc pl-6"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":187,"column":32,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":187,"endColumn":101,"fix":{"range":[8096,8153],"text":"text-rp-text marker:text-rp-subtle mb-4 list-decimal pl-6"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":208,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":208,"endColumn":127,"fix":{"range":[8809,8894],"text":"border-rp-iris/30 shadow-rp-iris/10 mt-4 overflow-hidden rounded-xl border shadow-2xl"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":214,"column":33,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":214,"endColumn":58,"fix":{"range":[9192,9205],"text":"h-auto w-full"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":253,"column":13,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":256,"endColumn":15,"fix":{"range":[10963,11010],"text":"opacity-50 transition-opacity hover:opacity-100"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":253,"column":13,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":256,"endColumn":15,"fix":{"range":[10760,10870],"text":"`animate-in fade-in slide-in-from-bottom-2 group flex gap-4 px-4 py-6 duration-300 md:px-8 \n                ${"}},{"ruleId":"tailwindcss/migration-from-tailwind-2","severity":1,"message":"Classname 'flex-shrink-0' should be updated to 'shrink-0' in Tailwind CSS v3!","line":259,"column":18,"nodeType":"JSXAttribute","messageId":"classnameChanged","endLine":259,"endColumn":43,"fix":{"range":[11098,11111],"text":"shrink-0"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":261,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":261,"endColumn":118,"fix":{"range":[11178,11258],"text":"bg-rp-iris/20 text-rp-iris flex h-8 w-8 items-center justify-center rounded-full"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-8, w-8' could be replaced by the 'size-8' shorthand!","line":261,"column":26,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":261,"endColumn":118,"fix":{"range":[11178,11258],"text":"flex size-8 items-center justify-center rounded-full bg-rp-iris/20 text-rp-iris"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-8, w-8' could be replaced by the 'size-8' shorthand!","line":265,"column":26,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":265,"endColumn":54,"fix":{"range":[11408,11424],"text":"relative size-8"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":275,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":275,"endColumn":118,"fix":{"range":[11811,11891],"text":"bg-rp-foam/20 text-rp-foam flex h-8 w-8 items-center justify-center rounded-full"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-8, w-8' could be replaced by the 'size-8' shorthand!","line":275,"column":26,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":275,"endColumn":118,"fix":{"range":[11811,11891],"text":"flex size-8 items-center justify-center rounded-full bg-rp-foam/20 text-rp-foam"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":285,"column":27,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":285,"endColumn":71,"fix":{"range":[12223,12255],"text":"text-rp-text text-sm font-medium"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":289,"column":31,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":289,"endColumn":64,"fix":{"range":[12460,12481],"text":"text-rp-muted text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":296,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":296,"endColumn":81,"fix":{"range":[12695,12742],"text":"prose prose-sm prose-invert relative max-w-none"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":301,"column":39,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":301,"endColumn":117,"fix":{"range":[13033,13099],"text":"bg-rp-iris/50 ml-1 inline-block h-4 w-2 animate-pulse align-middle"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":314,"column":33,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":314,"endColumn":127,"fix":{"range":[13700,13782],"text":"text-rp-muted hover:text-rp-text flex items-center gap-1 text-xs transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":333,"column":37,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":333,"endColumn":131,"fix":{"range":[14608,14690],"text":"text-rp-muted hover:text-rp-love flex items-center gap-1 text-xs transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":343,"column":34,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":343,"endColumn":69,"fix":{"range":[15069,15092],"text":"bg-rp-muted/20 h-4 w-px"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":346,"column":33,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":346,"endColumn":110,"fix":{"range":[15260,15325],"text":"text-rp-muted hover:text-rp-iris h-4 w-4 p-0 hover:bg-transparent"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-4, w-4' could be replaced by the 'size-4' shorthand!","line":346,"column":33,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":346,"endColumn":110,"fix":{"range":[15260,15325],"text":"size-4 text-rp-muted hover:text-rp-iris hover:bg-transparent p-0"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":29,"fixableErrorCount":0,"fixableWarningCount":28,"source":"/**\n * Chat Message Component\n * \n * Single message display with markdown rendering\n */\n\n\"use client\"\n\nimport React, { memo, useState, useEffect, useRef } from 'react'\nimport Image from 'next/image'\nimport { ChatMessageContent } from '@/lib/chat-engine/types'\nimport { getTypingDelay } from '@/lib/chat-engine/typing'\nimport ReactMarkdown from 'react-markdown'\nimport remarkGfm from 'remark-gfm'\nimport { Prism as SyntaxHighlighter } from 'react-syntax-highlighter'\nimport { oneDark } from 'react-syntax-highlighter/dist/cjs/styles/prism'\nimport { IconUser, IconRobot, IconCopy, IconCheck, IconRotate2 } from '@tabler/icons-react'\n\nimport { ThinkingIndicator } from './ThinkingIndicator'\nimport { StartSpeakingButton } from \"@/components/voice/StartSpeakingButton\"\nimport { MotherMessage, VisionLoading, SoulRevealCard, VoiceSelector } from '@/components/soul-forge'\nimport { isMotherOfSouls, isVoiceSelectionPrompt } from '@/lib/forge/is-mother-chat'\nimport { SoulRevealData } from '@/lib/forge/tool-handlers'\nimport { useChatEngine } from './ChatEngine'\nimport { AVAILABLE_VOICES } from '@/lib/voice/config'\n\ninterface ChatMessageProps {\n    message: ChatMessageContent\n    personaImage?: string\n    personaName?: string\n    isStreaming?: boolean\n    onRewind?: () => void\n    isVisualNovel?: boolean\n}\n\nexport const ChatMessage = memo(function ChatMessage({\n    message,\n    personaImage,\n    personaName,\n    isStreaming = false,\n    onRewind,\n    isVisualNovel = false\n}: ChatMessageProps) {\n    const [copied, setCopied] = useState(false)\n    const [displayedContent, setDisplayedContent] = useState('')\n    const { sendMessage } = useChatEngine()\n    const [selectedVoiceId, setSelectedVoiceId] = useState<string | undefined>(message.metadata?.selectedVoiceId)\n    const isUser = message.role === 'user'\n\n    // Typing animation state\n    const fullContentRef = useRef(message.content)\n    const currentIndexRef = useRef(0)\n    const rafIdRef = useRef<number | null>(null)\n    const lastUpdateTimeRef = useRef(0)\n\n    useEffect(() => {\n        // If it's a user message or we are not streaming and content is already fully shown, just show it\n        if (isUser || (!isStreaming && message.content === displayedContent)) {\n            setDisplayedContent(message.content)\n            return\n        }\n\n        // Reset if content changes completely or is shorter than what we've shown (e.g. rewrite)\n        if (message.content.length < displayedContent.length || !message.content.startsWith(displayedContent.substring(0, Math.min(displayedContent.length, 10)))) {\n            setDisplayedContent('')\n            currentIndexRef.current = 0\n        }\n\n        fullContentRef.current = message.content\n\n        const animate = (time: number) => {\n            if (currentIndexRef.current >= fullContentRef.current.length) {\n                rafIdRef.current = null\n                return\n            }\n\n            const elapsed = time - lastUpdateTimeRef.current\n\n            // Detect if we are in a code block for the next character\n            const isNextCharInCode = fullContentRef.current.substring(0, currentIndexRef.current + 1).split('```').length % 2 === 0\n            const delay = getTypingDelay(isNextCharInCode ? 'code' : 'prose')\n\n            if (elapsed >= delay) {\n                // Reveal more characters if we are lagging behind\n                const charsToReveal = Math.floor(elapsed / delay)\n                currentIndexRef.current = Math.min(currentIndexRef.current + charsToReveal, fullContentRef.current.length)\n                setDisplayedContent(fullContentRef.current.substring(0, currentIndexRef.current))\n                lastUpdateTimeRef.current = time\n            }\n\n            rafIdRef.current = requestAnimationFrame(animate)\n        }\n\n        if (currentIndexRef.current < fullContentRef.current.length) {\n            if (rafIdRef.current === null) {\n                lastUpdateTimeRef.current = performance.now()\n                rafIdRef.current = requestAnimationFrame(animate)\n            }\n        }\n\n        return () => {\n            if (rafIdRef.current !== null) {\n                cancelAnimationFrame(rafIdRef.current)\n                rafIdRef.current = null\n            }\n        }\n    }, [message.content, isStreaming, isUser])\n\n    const handleCopy = async () => {\n        await navigator.clipboard.writeText(message.content)\n        setCopied(true)\n        setTimeout(() => setCopied(false), 2000)\n    }\n\n    const isMother = !isUser && (personaName === 'The Mother of Souls' || message.metadata?.personaId === 'a0000000-0000-0000-0000-000000000001')\n    const isVoicePrompt = isMother && isVoiceSelectionPrompt(message.content)\n\n    // Render Source (Content area)\n    const renderMarkdown = (content: string) => (\n        <ReactMarkdown\n            remarkPlugins={[remarkGfm]}\n            components={{\n                // Code blocks with syntax highlighting\n                code({ className, children, ...props }: any) {\n                    const match = /language-(\\w+)/.exec(className || '')\n                    const language = match ? match[1] : ''\n                    const isInline = !className\n\n                    if (!isInline && language) {\n                        return (\n                            <div className=\"relative my-4 group/code\">\n                                <div className=\"absolute right-2 top-2 flex items-center gap-2 z-10 opacity-0 group-hover/code:opacity-100 transition-opacity\">\n                                    <span className=\"text-xs text-rp-muted\">{language}</span>\n                                    <button\n                                        onClick={() => {\n                                            navigator.clipboard.writeText(String(children))\n                                            setCopied(true)\n                                            setTimeout(() => setCopied(false), 2000)\n                                        }}\n                                        className=\"rounded p-1 text-rp-muted hover:bg-rp-overlay hover:text-rp-text\"\n                                    >\n                                        {copied ? <IconCheck size={14} /> : <IconCopy size={14} />}\n                                    </button>\n                                </div>\n                                <SyntaxHighlighter\n                                    style={oneDark as any}\n                                    language={language}\n                                    PreTag=\"div\"\n                                >\n                                    {String(children).replace(/\\n$/, '')}\n                                </SyntaxHighlighter>\n                            </div>\n                        )\n                    }\n\n                    return (\n                        <code\n                            className=\"rounded bg-rp-overlay/50 px-1.5 py-0.5 font-mono text-sm text-rp-iris\"\n                            {...props}\n                        >\n                            {children}\n                        </code>\n                    )\n                },\n                // Links\n                a({ href, children }) {\n                    return (\n                        <a\n                            href={href}\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            className=\"text-rp-iris underline decoration-rp-iris/30 underline-offset-4 transition-colors hover:decoration-rp-iris\"\n                        >\n                            {children}\n                        </a>\n                    )\n                },\n                // Paragraphs\n                p({ children }) {\n                    return <p className=\"mb-4 leading-relaxed text-rp-text last:mb-0 inline\">{children}</p>\n                },\n                // Lists\n                ul({ children }) {\n                    return <ul className=\"mb-4 list-disc pl-6 text-rp-text marker:text-rp-subtle\">{children}</ul>\n                },\n                ol({ children }) {\n                    return <ol className=\"mb-4 list-decimal pl-6 text-rp-text marker:text-rp-subtle\">{children}</ol>\n                }\n            }}\n        >\n            {content}\n        </ReactMarkdown>\n    )\n\n    // Render Mother specialized message\n    if (isMother) {\n        return (\n            <MotherMessage\n                message={message.content}\n                isStreaming={isStreaming}\n                autoPlay={!isStreaming && displayedContent === message.content}\n            >\n                <div className=\"space-y-4\">\n                    {renderMarkdown(displayedContent)}\n\n                    {/* Tool specific rendering */}\n                    {message.metadata?.toolResult?.image_url && (\n                        <div className=\"mt-4 rounded-xl overflow-hidden border border-rp-iris/30 shadow-2xl shadow-rp-iris/10\">\n                            <Image\n                                src={message.metadata.toolResult.image_url}\n                                alt=\"Soul Portrait\"\n                                width={512}\n                                height={512}\n                                className=\"w-full h-auto\"\n                            />\n                        </div>\n                    )}\n\n                    {message.metadata?.toolResult?.revealData && (\n                        <SoulRevealCard data={message.metadata.toolResult.revealData as SoulRevealData} />\n                    )}\n\n                    {isVoicePrompt && (\n                        <VoiceSelector\n                            selectedId={selectedVoiceId}\n                            onSelect={(vid) => {\n                                // Progress the ritual by sending the selection back\n                                setSelectedVoiceId(vid)\n                                const voice = AVAILABLE_VOICES.find(v => v.id === vid)\n                                const voiceName = voice?.name || vid\n                                sendMessage(`I have chosen the frequency of ${voiceName} (${vid}).`, false)\n                            }}\n                        />\n                    )}\n                </div>\n            </MotherMessage>\n        )\n    }\n\n    // Role == tool shouldn't really be rendered in the chat flow directly usually, \n    // it's handled by the engine to provide context. \n    // But if we want to show generation status:\n    if (message.role === 'tool') {\n        const result = message.metadata?.toolResult\n        if (message.content.includes('generate_soul_portrait')) {\n            return <div className=\"px-8 py-4\"><VisionLoading /></div>\n        }\n        return null // Don't show raw tool results\n    }\n\n    return (\n        <div\n            className={`group flex animate-in fade-in slide-in-from-bottom-2 duration-300 gap-4 px-4 py-6 md:px-8 \n                ${isUser ? 'bg-transparent' : 'bg-rp-surface/20'}\n                ${isVisualNovel && isUser ? 'opacity-50 hover:opacity-100 transition-opacity' : ''}\n            `}\n        >\n            {/* Avatar */}\n            <div className=\"flex-shrink-0\">\n                {isUser ? (\n                    <div className=\"flex h-8 w-8 items-center justify-center rounded-full bg-rp-iris/20 text-rp-iris\">\n                        <IconUser size={18} />\n                    </div>\n                ) : personaImage ? (\n                    <div className=\"relative h-8 w-8\">\n                        <Image\n                            src={personaImage}\n                            alt={personaName || 'AI'}\n                            className=\"rounded-full object-cover\"\n                            fill\n                            sizes=\"32px\"\n                        />\n                    </div>\n                ) : (\n                    <div className=\"flex h-8 w-8 items-center justify-center rounded-full bg-rp-foam/20 text-rp-foam\">\n                        <IconRobot size={18} />\n                    </div>\n                )}\n            </div>\n\n            {/* Content */}\n            <div className=\"flex-1 space-y-2 overflow-hidden\">\n                {/* Name */}\n                <div className=\"flex items-center gap-2\">\n                    <span className=\"text-sm font-medium text-rp-text\">\n                        {isUser ? 'You' : (personaName || 'Remrin')}\n                    </span>\n                    {message.metadata?.provider && !isUser && (\n                        <span className=\"text-xs text-rp-muted\">\n                            via {message.metadata.provider}\n                        </span>\n                    )}\n                </div>\n\n                {/* Message Content */}\n                <div className=\"prose prose-sm prose-invert max-w-none relative\">\n                    {displayedContent ? (\n                        <>\n                            {renderMarkdown(displayedContent)}\n                            {(isStreaming || currentIndexRef.current < fullContentRef.current.length) && (\n                                <span className=\"inline-block w-2 h-4 ml-1 bg-rp-iris/50 animate-pulse align-middle\" />\n                            )}\n                        </>\n                    ) : isStreaming ? (\n                        <ThinkingIndicator />\n                    ) : null}\n\n                    {/* Copy button for assistant messages */}\n                    {!isUser && message.content && (\n                        <div className=\"mt-2 flex items-center gap-3 opacity-0 transition-opacity group-hover:opacity-100\">\n                            {/* Copy Button */}\n                            <button\n                                onClick={handleCopy}\n                                className=\"flex items-center gap-1 text-xs text-rp-muted hover:text-rp-text transition-colors\"\n                            >\n                                {copied ? (\n                                    <>\n                                        <IconCheck size={14} />\n                                        <span>Copied</span>\n                                    </>\n                                ) : (\n                                    <>\n                                        <IconCopy size={14} />\n                                        <span>Copy</span>\n                                    </>\n                                )}\n                            </button>\n\n                            {/* Rewind Button */}\n                            {onRewind && (\n                                <button\n                                    onClick={onRewind}\n                                    className=\"flex items-center gap-1 text-xs text-rp-muted hover:text-rp-love transition-colors\"\n                                    title=\"Rewind to here\"\n                                >\n                                    <IconRotate2 size={14} />\n                                    <span>Rewind</span>\n                                </button>\n                            )}\n\n\n                            {/* TTS Button */}\n                            <div className=\"h-4 w-px bg-rp-muted/20\" /> {/* Divider */}\n                            <StartSpeakingButton\n                                text={message.content}\n                                className=\"h-4 w-4 text-rp-muted hover:text-rp-iris hover:bg-transparent p-0\"\n                            />\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    )\n})\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/chat-v2/ChatMessages.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":66,"column":17,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":66,"endColumn":122,"fix":{"range":[2123,2216],"text":"scrollbar-thin scrollbar-track-transparent scrollbar-thumb-rp-muted/20 h-full overflow-y-auto"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":86,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":86,"endColumn":147,"fix":{"range":[3220,3325],"text":"animate-in fade-in slide-in-from-bottom-2 border-rp-love/30 bg-rp-love/10 mx-4 my-4 rounded-lg border p-4"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'mx-4, my-4' could be replaced by the 'm-4' shorthand!","line":86,"column":30,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":86,"endColumn":147,"fix":{"range":[3220,3325],"text":"m-4 animate-in fade-in slide-in-from-bottom-2 rounded-lg border border-rp-love/30 bg-rp-love/10 p-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":87,"column":32,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":87,"endColumn":76,"fix":{"range":[3370,3402],"text":"text-rp-love text-sm font-medium"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":90,"column":32,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":90,"endColumn":70,"fix":{"range":[3544,3570],"text":"text-rp-muted mt-1 text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":105,"column":21,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":105,"endColumn":275,"fix":{"range":[4076,4318],"text":"animate-in fade-in zoom-in border-rp-iris/20 bg-rp-surface text-rp-subtle hover:bg-rp-overlay hover:text-rp-text absolute bottom-6 right-6 flex h-10 w-10 items-center justify-center rounded-full border shadow-lg transition-colors duration-200"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-10, w-10' could be replaced by the 'size-10' shorthand!","line":105,"column":21,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":105,"endColumn":275,"fix":{"range":[4076,4318],"text":"absolute bottom-6 right-6 flex size-10 animate-in fade-in zoom-in duration-200 items-center justify-center rounded-full border border-rp-iris/20 bg-rp-surface text-rp-subtle shadow-lg transition-colors hover:bg-rp-overlay hover:text-rp-text"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":7,"source":"/**\n * Chat Messages Container\n * \n * Displays the list of messages with auto-scroll\n */\n\n\"use client\"\n\nimport React, { useEffect, useRef } from 'react'\nimport { useChatEngine } from './ChatEngine'\nimport { ChatMessage } from './ChatMessage'\n\ninterface ChatMessagesProps {\n    personaImage?: string\n    personaName?: string\n    isVisualNovel?: boolean\n}\n\nexport function ChatMessages({\n    personaImage,\n    personaName,\n    isVisualNovel = false\n}: ChatMessagesProps) {\n    const { messages, isGenerating, error, rewind } = useChatEngine()\n    const containerRef = useRef<HTMLDivElement>(null)\n    const bottomRef = useRef<HTMLDivElement>(null)\n\n    const [showScrollButton, setShowScrollButton] = React.useState(false)\n\n    // Handle scroll to check if we should show the button\n    const handleScroll = () => {\n        if (!containerRef.current) return\n        const { scrollTop, scrollHeight, clientHeight } = containerRef.current\n        const isNearBottom = scrollHeight - scrollTop - clientHeight < 100\n        setShowScrollButton(!isNearBottom)\n    }\n\n    const scrollToBottom = () => {\n        bottomRef.current?.scrollIntoView({ behavior: 'smooth' })\n    }\n\n    // Auto-scroll to bottom on new messages if already near bottom\n    useEffect(() => {\n        if (bottomRef.current) {\n            // Only auto-scroll if we are already near the bottom or it's a new message generation start\n            const container = containerRef.current\n            if (container) {\n                const { scrollTop, scrollHeight, clientHeight } = container\n                const isNearBottom = scrollHeight - scrollTop - clientHeight < 150\n                if (isNearBottom || isGenerating) {\n                    bottomRef.current.scrollIntoView({ behavior: 'smooth' })\n                }\n            }\n        }\n    }, [messages, isGenerating])\n\n    if (messages.length === 0) {\n        return null // Empty state handled by parent\n    }\n\n    return (\n        <div className=\"relative flex-1 overflow-hidden\">\n            <div\n                ref={containerRef}\n                onScroll={handleScroll}\n                className=\"h-full overflow-y-auto scrollbar-thin scrollbar-track-transparent scrollbar-thumb-rp-muted/20\"\n            >\n                {/* Messages */}\n                <div className=\"mx-auto flex w-full max-w-3xl flex-col pb-8\">\n                    {messages\n                        .filter(m => m.role !== 'system')\n                        .map((message, index) => (\n                            <ChatMessage\n                                key={`${message.role}-${index}-${message.timestamp?.getTime() || index}`}\n                                message={message}\n                                personaImage={personaImage}\n                                personaName={personaName}\n                                isStreaming={isGenerating && index === messages.length - 1 && message.role === 'assistant'}\n                                onRewind={() => rewind(index)}\n                                isVisualNovel={isVisualNovel}\n                            />\n                        ))}\n\n                    {/* Error display */}\n                    {error && (\n                        <div className=\"mx-4 my-4 animate-in fade-in slide-in-from-bottom-2 rounded-lg border border-rp-love/30 bg-rp-love/10 p-4\">\n                            <p className=\"text-sm font-medium text-rp-love\">\n                                <strong>Error:</strong> {error}\n                            </p>\n                            <p className=\"mt-1 text-xs text-rp-muted\">\n                                Please try again or contact support if the issue persists.\n                            </p>\n                        </div>\n                    )}\n\n                    {/* Scroll anchor */}\n                    <div ref={bottomRef} className=\"h-4\" />\n                </div>\n            </div>\n\n            {/* Scroll to bottom button */}\n            {showScrollButton && (\n                <button\n                    onClick={scrollToBottom}\n                    className=\"absolute bottom-6 right-6 flex h-10 w-10 animate-in fade-in zoom-in duration-200 items-center justify-center rounded-full border border-rp-iris/20 bg-rp-surface text-rp-subtle shadow-lg transition-colors hover:bg-rp-overlay hover:text-rp-text\"\n                    aria-label=\"Scroll to bottom\"\n                >\n                    <svg\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        width=\"20\"\n                        height=\"20\"\n                        viewBox=\"0 0 24 24\"\n                        fill=\"none\"\n                        stroke=\"currentColor\"\n                        strokeWidth=\"2\"\n                        strokeLinecap=\"round\"\n                        strokeLinejoin=\"round\"\n                    >\n                        <path d=\"M12 5v14M19 12l-7 7-7-7\" />\n                    </svg>\n                </button>\n            )}\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/chat-v2/ChatUI.tsx","messages":[{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-full, w-full' could be replaced by the 'size-full' shorthand!","line":65,"column":18,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":65,"endColumn":121,"fix":{"range":[1804,1855],"text":"`relative size-full overflow-hidden bg-black${"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":73,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":73,"endColumn":134,"fix":{"range":[2368,2460],"text":"animate-in fade-in slide-in-from-bottom-10 relative aspect-[1/2] h-[85%] w-auto duration-700"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":86,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":86,"endColumn":72,"fix":{"range":[3003,3041],"text":"absolute right-4 top-4 z-50 flex gap-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":89,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":89,"endColumn":169,"fix":{"range":[3163,3295],"text":"rounded-full border border-white/10 bg-black/40 p-2 text-white/70 backdrop-blur-md transition-all hover:bg-white/10 hover:text-white"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":97,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":97,"endColumn":115,"fix":{"range":[3548,3629],"text":"pb-Safe absolute bottom-0 left-0 right-0 z-20 mx-auto w-full max-w-5xl p-4 md:p-8"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'left-0, right-0' could be replaced by the 'inset-x-0' shorthand!","line":97,"column":22,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":97,"endColumn":115,"fix":{"range":[3548,3629],"text":"absolute bottom-0 inset-x-0 z-20 p-4 md:p-8 pb-Safe w-full max-w-5xl mx-auto"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":98,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":98,"endColumn":170,"fix":{"range":[3668,3800],"text":"animate-in slide-in-from-bottom relative rounded-2xl border border-white/10 bg-black/60 p-6 shadow-2xl backdrop-blur-xl duration-500"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":100,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":100,"endColumn":160,"fix":{"range":[3894,4012],"text":"bg-rp-iris absolute -top-4 left-6 rounded-full border border-white/20 px-4 py-1 text-sm font-bold text-black shadow-lg"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":105,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":105,"endColumn":105,"fix":{"range":[4203,4266],"text":"scrollbar-hide mb-4 max-h-[30vh] space-y-4 overflow-y-auto pr-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":107,"column":38,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":107,"endColumn":87,"fix":{"range":[4372,4409],"text":"py-4 text-center italic text-white/50"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":136,"column":13,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":136,"endColumn":98,"fix":{"range":[5406,5439],"text":"`relative flex h-full flex-col ${"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":140,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":140,"endColumn":61,"fix":{"range":[5578,5605],"text":"absolute right-4 top-4 z-50"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":143,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":143,"endColumn":192,"fix":{"range":[5727,5882],"text":"bg-rp-surface/50 border-rp-highlight-med/20 text-rp-muted hover:text-rp-text hover:bg-rp-surface/80 rounded-full border p-2 backdrop-blur-md transition-all"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":173,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":173,"endColumn":129,"fix":{"range":[7023,7110],"text":"animate-in fade-in zoom-in flex max-w-sm flex-col items-center text-center duration-500"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":187,"column":33,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":187,"endColumn":141,"fix":{"range":[7814,7910],"text":"from-rp-text to-rp-muted mb-3 bg-gradient-to-br bg-clip-text text-3xl font-bold text-transparent"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'px-4, py-4' could be replaced by the 'p-4' shorthand!","line":205,"column":18,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":205,"endColumn":44,"fix":{"range":[8599,8613],"text":"p-4 pb-8"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":16,"fixableErrorCount":0,"fixableWarningCount":16,"source":"/**\n * Chat UI v2 - Main Component\n * \n * Complete chat interface using the new modular engine\n */\n\n\"use client\"\n\nimport React, { useState } from 'react'\nimport { ChatEngineProvider, useChatEngine, useMood } from './ChatEngine'\nimport { IconBook, IconMessage } from '@tabler/icons-react'\nimport { ChatInput } from './ChatInput'\nimport { ChatMessages } from './ChatMessages'\nimport { SoulGallery } from './SoulGallery'\nimport { MoodHUD } from './MoodHUD'\nimport { MemorySearchModal } from './MemorySearchModal'\nimport { UserTier } from '@/lib/chat-engine/types'\nimport Image from 'next/image'\nimport { MOTHER_OF_SOULS_ID } from '@/lib/forge/is-mother-chat'\n\ninterface ChatUIV2Props {\n    userId?: string\n    personaId?: string\n    personaImage?: string\n    personaName?: string\n    personaSystemPrompt?: string\n    personaIntroMessage?: string\n    userTier?: UserTier\n    showSoulGallery?: boolean\n}\n\nimport { ChatHeader } from './ChatHeader'\n\n/**\n * Inner component that uses the chat engine context\n */\nfunction ChatUIInner({\n    userId,\n    personaImage,\n    personaName,\n    showSoulGallery = false,\n    onSoulSelect,\n    onMemorySearchTrigger,\n    isVisualNovelMode,\n    toggleVisualNovelMode\n}: {\n    userId?: string\n    personaImage?: string\n    personaName?: string\n    showSoulGallery?: boolean\n    onSoulSelect?: (personaId: string, personaData: any) => void\n    onMemorySearchTrigger?: (query: string) => void\n    isVisualNovelMode: boolean\n    toggleVisualNovelMode: () => void\n}) {\n    const { messages, personaId } = useChatEngine()\n    const moodState = useMood()\n\n    // Determine if we should show desaturation (low battery)\n    const isLowBattery = moodState.battery < 30\n\n    // Visual Novel Layout\n    if (isVisualNovelMode && personaId) {\n        return (\n            <div className={`relative h-full w-full overflow-hidden bg-black ${isLowBattery ? 'low-battery-mode' : ''}`}>\n                {/* Visual Novel Background/Sprite Area */}\n                <div className=\"absolute inset-0 z-0 flex items-end justify-center pb-0\">\n                    {/* Background effect */}\n                    <div className=\"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-80\" />\n\n                    {/* Character Sprite - Scaled and Centered */}\n                    {personaImage && (\n                        <div className=\"relative h-[85%] w-auto aspect-[1/2] animate-in fade-in slide-in-from-bottom-10 duration-700\">\n                            <Image\n                                src={personaImage}\n                                alt={personaName || \"Character\"}\n                                fill\n                                className=\"object-contain object-bottom drop-shadow-[0_0_50px_rgba(0,0,0,0.5)]\"\n                                priority\n                            />\n                        </div>\n                    )}\n                </div>\n\n                {/* VN Mode Header Controls (Minimal) */}\n                <div className=\"absolute top-4 right-4 z-50 flex gap-2\">\n                    <button\n                        onClick={toggleVisualNovelMode}\n                        className=\"p-2 rounded-full bg-black/40 backdrop-blur-md border border-white/10 text-white/70 hover:text-white hover:bg-white/10 transition-all\"\n                        title=\"Switch to Chat Mode\"\n                    >\n                        <IconMessage size={20} />\n                    </button>\n                </div>\n\n                {/* Text Box Overlay */}\n                <div className=\"absolute bottom-0 left-0 right-0 z-20 p-4 md:p-8 pb-Safe w-full max-w-5xl mx-auto\">\n                    <div className=\"relative rounded-2xl bg-black/60 backdrop-blur-xl border border-white/10 p-6 shadow-2xl animate-in slide-in-from-bottom duration-500\">\n                        {/* Character Name Tag */}\n                        <div className=\"absolute -top-4 left-6 px-4 py-1 bg-rp-iris text-black font-bold rounded-full text-sm shadow-lg border border-white/20\">\n                            {personaName}\n                        </div>\n\n                        {/* Messages Area (Scrollable within the box) */}\n                        <div className=\"max-h-[30vh] overflow-y-auto pr-2 mb-4 scrollbar-hide space-y-4\">\n                            {messages.length === 0 ? (\n                                <div className=\"text-white/50 italic text-center py-4\">\n                                    Start the conversation...\n                                </div>\n                            ) : (\n                                <ChatMessages\n                                    personaImage={personaImage}\n                                    personaName={personaName}\n                                    isVisualNovel\n                                />\n                            )}\n                        </div>\n\n                        {/* Input Area (Integrated) */}\n                        <div className=\"relative\">\n                            <ChatInput\n                                placeholder=\"What do you say?\"\n                                onMemorySearch={onMemorySearchTrigger}\n                                minimal\n                            />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n\n    // Classic Layout\n    return (\n        <div\n            className={`flex h-full flex-col relative ${isLowBattery ? 'low-battery-mode' : ''}`}\n        >\n            {/* Header */}\n            {personaId && (\n                <div className=\"absolute top-4 right-4 z-50\">\n                    <button\n                        onClick={toggleVisualNovelMode}\n                        className=\"p-2 rounded-full bg-rp-surface/50 backdrop-blur-md border border-rp-highlight-med/20 text-rp-muted hover:text-rp-text hover:bg-rp-surface/80 transition-all\"\n                        title=\"Switch to Visual Novel Mode\"\n                    >\n                        <IconBook size={20} />\n                    </button>\n                </div>\n            )}\n\n            {personaId && (\n                <ChatHeader\n                    personaName={personaName}\n                    personaImage={personaImage}\n                />\n            )}\n\n            {/* Mood HUD */}\n            <MoodHUD moodState={moodState} visible={messages.length > 0} />\n\n            {/* Messages or Empty State */}\n            {messages.length === 0 ? (\n                <div className=\"flex flex-1 flex-col items-center justify-center overflow-y-auto px-4 py-8\">\n                    {showSoulGallery && userId ? (\n                        // Show Soul Gallery for persona selection\n                        <SoulGallery\n                            userId={userId}\n                            onSoulSelect={onSoulSelect}\n                            selectedSoulId={personaId}\n                        />\n                    ) : (\n                        // Show default welcome screen\n                        <div className=\"flex max-w-sm flex-col items-center text-center animate-in fade-in zoom-in duration-500\">\n                            {/* Logo */}\n                            <div className=\"mb-8\">\n                                <Image\n                                    src=\"/logo.svg\"\n                                    alt=\"Remrin\"\n                                    width={120}\n                                    height={120}\n                                    className=\"drop-shadow-[0_0_25px_rgba(235,188,186,0.3)] transition-transform duration-500 hover:rotate-[-5deg] hover:scale-110\"\n                                    priority\n                                />\n                            </div>\n\n                            {/* Welcome text */}\n                            <h1 className=\"mb-3 text-3xl font-bold bg-gradient-to-br from-rp-text to-rp-muted bg-clip-text text-transparent\">\n                                {personaName ? `Chat with ${personaName}` : 'Welcome to Remrin'}\n                            </h1>\n                            <p className=\"text-rp-subtle leading-relaxed\">\n                                Experience the new Soul Engine. <br />\n                                Start a conversation to begin.\n                            </p>\n                        </div>\n                    )}\n                </div>\n            ) : (\n                <ChatMessages\n                    personaImage={personaImage}\n                    personaName={personaName}\n                />\n            )}\n\n            {/* Input area */}\n            <div className=\"px-4 py-4 pb-8\">\n                <div className=\"mx-auto max-w-3xl\">\n                    <ChatInput\n                        placeholder={personaName ? `Message ${personaName}...` : 'Message Remrin...'}\n                        onMemorySearch={onMemorySearchTrigger}\n                    />\n                </div>\n            </div>\n        </div>\n    )\n}\n\n/**\n * CSS for reactive mood effects\n */\nconst MoodStyles = () => (\n    <style jsx global>{`\n        .low-battery-mode {\n            filter: saturate(0.7) brightness(0.95);\n            transition: filter 0.5s ease;\n        }\n        \n        .low-battery-mode .chat-input-area {\n            border-color: rgba(235, 111, 146, 0.3) !important;\n        }\n\n        .mood-pulse-excited {\n            animation: excited-pulse 1.5s ease-in-out infinite;\n        }\n\n        @keyframes excited-pulse {\n            0%, 100% {\n                box-shadow: 0 0 0 0 rgba(235, 111, 146, 0.4);\n                transform: scale(1);\n            }\n            50% {\n                box-shadow: 0 0 15px 3px rgba(235, 111, 146, 0.3);\n                transform: scale(1.02);\n            }\n        }\n    `}</style>\n)\n\n/**\n * Main ChatUI v2 component with provider wrapper\n */\nexport function ChatUIV2({\n    userId,\n    personaId: initialPersonaId,\n    personaImage: initialPersonaImage,\n    personaName: initialPersonaName,\n    personaSystemPrompt: initialPersonaSystemPrompt,\n    personaIntroMessage: initialPersonaIntroMessage,\n    userTier = 'free',\n    showSoulGallery = false\n}: ChatUIV2Props) {\n    const [selectedPersona, setSelectedPersona] = useState<{\n        id: string\n        image?: string\n        name?: string\n        systemPrompt?: string\n        introMessage?: string\n    } | null>(\n        initialPersonaId\n            ? {\n                id: initialPersonaId,\n                image: initialPersonaImage,\n                name: initialPersonaName,\n                systemPrompt: initialPersonaSystemPrompt,\n                introMessage: initialPersonaIntroMessage\n            }\n            : null\n    )\n\n    const [isMemorySearchOpen, setIsMemorySearchOpen] = useState(false)\n    const [memorySearchQuery, setMemorySearchQuery] = useState('')\n    const [isVisualNovelMode, setIsVisualNovelMode] = useState(false)\n\n    // Sync state with props\n    React.useEffect(() => {\n        if (initialPersonaId) {\n            setSelectedPersona({\n                id: initialPersonaId,\n                image: initialPersonaImage,\n                name: initialPersonaName,\n                systemPrompt: initialPersonaSystemPrompt,\n                introMessage: initialPersonaIntroMessage\n            })\n        }\n    }, [initialPersonaId, initialPersonaImage, initialPersonaName, initialPersonaSystemPrompt, initialPersonaIntroMessage])\n\n    const handleSoulSelect = (personaId: string, personaData: any) => {\n        setSelectedPersona({\n            id: personaId,\n            image: personaData.image_url,\n            name: personaData.name,\n            systemPrompt: personaData.system_prompt || personaData.description,\n            introMessage: personaData.intro_message\n        })\n    }\n\n    const handleMemorySearchTrigger = (query: string) => {\n        setMemorySearchQuery(query)\n        setIsMemorySearchOpen(true)\n    }\n\n    return (\n        <>\n            <MoodStyles />\n            <ChatEngineProvider\n                key={selectedPersona?.id || 'none'}\n                personaId={selectedPersona?.id}\n                initialSystemPrompt={selectedPersona?.systemPrompt}\n                personaIntroMessage={selectedPersona?.introMessage}\n                userTier={userTier}\n            >\n                <ChatUIInner\n                    userId={userId}\n                    personaImage={selectedPersona?.image}\n                    personaName={selectedPersona?.name}\n                    showSoulGallery={showSoulGallery}\n                    onSoulSelect={handleSoulSelect}\n                    onMemorySearchTrigger={handleMemorySearchTrigger}\n                    isVisualNovelMode={isVisualNovelMode}\n                    toggleVisualNovelMode={() => setIsVisualNovelMode(!isVisualNovelMode)}\n                />\n                <MemorySearchModal\n                    isOpen={isMemorySearchOpen}\n                    onClose={() => setIsMemorySearchOpen(false)}\n                    initialQuery={memorySearchQuery}\n                />\n            </ChatEngineProvider>\n        </>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/chat-v2/MemorySearchModal.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'handleSearch'. Either include it or remove the dependency array.","line":42,"column":8,"nodeType":"ArrayExpression","endLine":42,"endColumn":30,"suggestions":[{"desc":"Update the dependencies array to be: [isOpen, initialQuery, handleSearch]","fix":{"range":[1102,1124],"text":"[isOpen, initialQuery, handleSearch]"}}]},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":84,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":84,"endColumn":84,"fix":{"range":[2615,2662],"text":"bg-rp-base/80 absolute inset-0 backdrop-blur-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":92,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":92,"endColumn":139,"fix":{"range":[2997,3099],"text":"border-rp-overlay bg-rp-surface relative w-full max-w-xl overflow-hidden rounded-3xl border shadow-2xl"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":95,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":95,"endColumn":115,"fix":{"range":[3202,3275],"text":"border-rp-overlay/50 flex items-center justify-between border-b px-6 py-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":96,"column":33,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":96,"endColumn":99,"fix":{"range":[3321,3375],"text":"text-rp-text flex items-center gap-2 text-xl font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":102,"column":33,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":102,"endColumn":130,"fix":{"range":[3671,3756],"text":"text-rp-muted hover:bg-rp-overlay hover:text-rp-text rounded-lg p-2 transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":111,"column":45,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":111,"endColumn":112,"fix":{"range":[4116,4171],"text":"text-rp-subtle absolute left-4 top-1/2 -translate-y-1/2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":124,"column":37,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":124,"endColumn":244,"fix":{"range":[4913,5108],"text":"border-rp-overlay bg-rp-base/50 text-rp-text placeholder-rp-subtle focus:border-rp-iris/50 focus:bg-rp-base w-full rounded-2xl border py-3.5 pl-12 pr-4 text-base transition-all focus:outline-none"}},{"ruleId":"tailwindcss/migration-from-tailwind-2","severity":1,"message":"Classname 'placeholder-rp-subtle' should be updated to 'placeholder:text-rp-subtle' in Tailwind CSS v3!","line":124,"column":37,"nodeType":"JSXAttribute","messageId":"classnameChanged","endLine":124,"endColumn":244,"fix":{"range":[4913,5108],"text":"w-full rounded-2xl border border-rp-overlay bg-rp-base/50 py-3.5 pl-12 pr-4 text-base text-rp-text placeholder:text-rp-subtle focus:border-rp-iris/50 focus:bg-rp-base focus:outline-none transition-all"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":128,"column":64,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":128,"endColumn":101,"fix":{"range":[5361,5386],"text":"text-rp-iris animate-spin"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":135,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":135,"endColumn":151,"fix":{"range":[5616,5725],"text":"scrollbar-thin scrollbar-track-transparent scrollbar-thumb-rp-muted/20 max-h-[400px] overflow-y-auto p-6 pt-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":142,"column":45,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":142,"endColumn":223,"fix":{"range":[6142,6308],"text":"border-rp-overlay/50 bg-rp-base/30 hover:border-rp-iris/40 hover:bg-rp-surface group flex items-center justify-between rounded-2xl border p-4 text-left transition-all"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":145,"column":54,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":145,"endColumn":212,"fix":{"range":[6502,6648],"text":"bg-rp-iris/10 text-rp-iris group-hover:bg-rp-iris group-hover:text-rp-base flex h-10 w-10 items-center justify-center rounded-xl transition-colors"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-10, w-10' could be replaced by the 'size-10' shorthand!","line":145,"column":54,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":145,"endColumn":212,"fix":{"range":[6502,6648],"text":"flex size-10 items-center justify-center rounded-xl bg-rp-iris/10 text-rp-iris group-hover:bg-rp-iris group-hover:text-rp-base transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":149,"column":56,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":149,"endColumn":92,"fix":{"range":[6905,6929],"text":"text-rp-text font-medium"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":150,"column":56,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":150,"endColumn":100,"fix":{"range":[7018,7050],"text":"text-rp-subtle text-xs uppercase"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":153,"column":50,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":153,"endColumn":119,"fix":{"range":[7290,7347],"text":"mr-2 opacity-0 transition-opacity group-hover:opacity-100"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":164,"column":38,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":164,"endColumn":123,"fix":{"range":[8042,8115],"text":"text-rp-muted flex flex-col items-center justify-center py-12 text-center"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":18,"fixableErrorCount":0,"fixableWarningCount":17,"source":"\"use client\"\n\nimport React, { useState, useEffect } from 'react'\nimport { motion, AnimatePresence } from 'framer-motion'\nimport { IconSearch, IconX, IconFileText, IconLoader2, IconCheck } from '@tabler/icons-react'\nimport { toast } from 'sonner'\nimport { useChatEngine } from './ChatEngine'\n\ninterface MemoryItem {\n    id: string\n    file_name: string\n    file_type: string\n    content: string\n    created_at: string\n}\n\ninterface MemorySearchModalProps {\n    isOpen: boolean\n    onClose: () => void\n    initialQuery?: string\n}\n\nexport function MemorySearchModal({\n    isOpen,\n    onClose,\n    initialQuery = ''\n}: MemorySearchModalProps) {\n    const [query, setQuery] = useState(initialQuery)\n    const [results, setResults] = useState<MemoryItem[]>([])\n    const [loading, setLoading] = useState(false)\n    const { addSystemMessage, personaId } = useChatEngine()\n\n    useEffect(() => {\n        if (isOpen) {\n            setQuery(initialQuery)\n            if (initialQuery) {\n                handleSearch(initialQuery)\n            } else {\n                setResults([])\n            }\n        }\n    }, [isOpen, initialQuery])\n\n    const handleSearch = async (searchQuery: string) => {\n        if (!searchQuery.trim()) return\n        setLoading(true)\n        try {\n            const res = await fetch('/api/v2/knowledge/search', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({\n                    query: searchQuery,\n                    personaId: personaId\n                })\n            })\n            if (!res.ok) throw new Error('Search failed')\n            const data = await res.json()\n            setResults(data)\n        } catch (error) {\n            console.error('Search error:', error)\n            toast.error('Failed to search memories')\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    const handleSelect = (memory: MemoryItem) => {\n        const contextMsg = `[Memory Retrieval: ${memory.file_name}]\\n\\n${memory.content}`\n        addSystemMessage(contextMsg)\n        toast.success(`Added ${memory.file_name} to context`)\n        onClose()\n    }\n\n    return (\n        <AnimatePresence>\n            {isOpen && (\n                <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\n                    {/* Backdrop */}\n                    <motion.div\n                        initial={{ opacity: 0 }}\n                        animate={{ opacity: 1 }}\n                        exit={{ opacity: 0 }}\n                        onClick={onClose}\n                        className=\"absolute inset-0 bg-rp-base/80 backdrop-blur-sm\"\n                    />\n\n                    {/* Modal Content */}\n                    <motion.div\n                        initial={{ opacity: 0, scale: 0.95, y: 20 }}\n                        animate={{ opacity: 1, scale: 1, y: 0 }}\n                        exit={{ opacity: 0, scale: 0.95, y: 20 }}\n                        className=\"relative w-full max-w-xl overflow-hidden rounded-3xl border border-rp-overlay bg-rp-surface shadow-2xl\"\n                    >\n                        {/* Header */}\n                        <div className=\"flex items-center justify-between border-b border-rp-overlay/50 px-6 py-4\">\n                            <h2 className=\"text-xl font-bold text-rp-text flex items-center gap-2\">\n                                <IconSearch size={22} className=\"text-rp-iris\" />\n                                Search Memories\n                            </h2>\n                            <button\n                                onClick={onClose}\n                                className=\"rounded-lg p-2 text-rp-muted hover:bg-rp-overlay hover:text-rp-text transition-colors\"\n                            >\n                                <IconX size={20} />\n                            </button>\n                        </div>\n\n                        {/* Search Input */}\n                        <div className=\"p-6 pb-0\">\n                            <div className=\"relative\">\n                                <IconSearch className=\"absolute left-4 top-1/2 -translate-y-1/2 text-rp-subtle\" size={18} />\n                                <input\n                                    autoFocus\n                                    type=\"text\"\n                                    placeholder=\"Search your knowledge vault...\"\n                                    value={query}\n                                    onChange={(e) => {\n                                        setQuery(e.target.value)\n                                        // Simple debounce could be added here\n                                    }}\n                                    onKeyDown={(e) => {\n                                        if (e.key === 'Enter') handleSearch(query)\n                                    }}\n                                    className=\"w-full rounded-2xl border border-rp-overlay bg-rp-base/50 py-3.5 pl-12 pr-4 text-base text-rp-text placeholder-rp-subtle focus:border-rp-iris/50 focus:bg-rp-base focus:outline-none transition-all\"\n                                />\n                                {loading && (\n                                    <div className=\"absolute right-4 top-1/2 -translate-y-1/2\">\n                                        <IconLoader2 size={18} className=\"animate-spin text-rp-iris\" />\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n\n                        {/* Results */}\n                        <div className=\"max-h-[400px] overflow-y-auto p-6 pt-4 scrollbar-thin scrollbar-track-transparent scrollbar-thumb-rp-muted/20\">\n                            {results.length > 0 ? (\n                                <div className=\"grid gap-3\">\n                                    {results.map((item) => (\n                                        <button\n                                            key={item.id}\n                                            onClick={() => handleSelect(item)}\n                                            className=\"flex items-center justify-between rounded-2xl border border-rp-overlay/50 bg-rp-base/30 p-4 text-left hover:border-rp-iris/40 hover:bg-rp-surface transition-all group\"\n                                        >\n                                            <div className=\"flex items-center gap-4\">\n                                                <div className=\"flex h-10 w-10 items-center justify-center rounded-xl bg-rp-iris/10 text-rp-iris group-hover:bg-rp-iris group-hover:text-rp-base transition-colors\">\n                                                    <IconFileText size={20} />\n                                                </div>\n                                                <div>\n                                                    <p className=\"font-medium text-rp-text\">{item.file_name}</p>\n                                                    <p className=\"text-xs text-rp-subtle uppercase\">{item.file_type} â€¢ {new Date(item.created_at).toLocaleDateString()}</p>\n                                                </div>\n                                            </div>\n                                            <div className=\"mr-2 opacity-0 group-hover:opacity-100 transition-opacity\">\n                                                <IconCheck size={18} className=\"text-rp-iris\" />\n                                            </div>\n                                        </button>\n                                    ))}\n                                </div>\n                            ) : query && !loading ? (\n                                <div className=\"flex flex-col items-center justify-center py-12 text-center\">\n                                    <p className=\"text-rp-subtle italic\">No memories found for &quot;{query}&quot;</p>\n                                </div>\n                            ) : !loading ? (\n                                <div className=\"flex flex-col items-center justify-center py-12 text-center text-rp-muted\">\n                                    <IconSearch size={40} className=\"mb-3 opacity-20\" />\n                                    <p className=\"text-sm\">Type to search through your uploaded files</p>\n                                </div>\n                            ) : null}\n                        </div>\n                    </motion.div>\n                </div>\n            )}\n        </AnimatePresence>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/chat-v2/SoulCard.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":49,"column":24,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":55,"endColumn":14,"fix":{"range":[1261,1297],"text":"hover:-translate-y-1 hover:scale-105"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":49,"column":24,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":55,"endColumn":14,"fix":{"range":[1350,1452],"text":"border-rp-gold from-rp-gold/20 to-rp-rose/20 bg-gradient-to-br shadow-[0_0_20px_rgba(235,188,186,0.3)]"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":58,"column":29,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":63,"endColumn":14,"fix":{"range":[1685,1769],"text":"relative h-24 w-24 overflow-hidden rounded-full border-2 transition-all duration-300"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":58,"column":29,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":63,"endColumn":14,"fix":{"range":[1822,1886],"text":"border-rp-gold scale-110 shadow-[0_0_25px_rgba(246,193,119,0.5)]"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-24, w-24' could be replaced by the 'size-24' shorthand!","line":58,"column":29,"nodeType":"CallExpression","messageId":"shorthandCandidateDetected","endLine":63,"endColumn":14,"fix":{"range":[1685,1769],"text":"relative size-24 rounded-full overflow-hidden border-2 transition-all duration-300"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":79,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":79,"endColumn":131,"fix":{"range":[2525,2618],"text":"bg-rp-overlay text-rp-muted flex h-full w-full items-center justify-center text-2xl font-bold"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-full, w-full' could be replaced by the 'size-full' shorthand!","line":79,"column":26,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":79,"endColumn":131,"fix":{"range":[2525,2618],"text":"flex size-full items-center justify-center bg-rp-overlay text-2xl font-bold text-rp-muted"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":94,"column":24,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":94,"endColumn":75,"fix":{"range":[3097,3136],"text":"text-rp-muted mt-1 line-clamp-2 text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":102,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":102,"endColumn":133,"fix":{"range":[3337,3436],"text":"bg-rp-gold absolute -right-2 -top-2 flex h-6 w-6 items-center justify-center rounded-full shadow-lg"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-6, w-6' could be replaced by the 'size-6' shorthand!","line":102,"column":22,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":102,"endColumn":133,"fix":{"range":[3337,3436],"text":"absolute -right-2 -top-2 flex size-6 items-center justify-center rounded-full bg-rp-gold shadow-lg"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":104,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":104,"endColumn":57,"fix":{"range":[3499,3519],"text":"text-rp-base h-4 w-4"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-4, w-4' could be replaced by the 'size-4' shorthand!","line":104,"column":25,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":104,"endColumn":57,"fix":{"range":[3499,3519],"text":"size-4 text-rp-base"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":12,"source":"/**\n * Soul Card - Individual Persona Display Card\n * \n * Shows persona avatar, name, and mood with hover animations\n */\n\n\"use client\"\n\nimport React from 'react'\nimport Image from 'next/image'\nimport { cn } from '@/lib/utils'\n\nexport interface SoulCardProps {\n    id: string\n    name: string\n    imageUrl: string | null\n    tagline?: string\n    mood?: 'happy' | 'neutral' | 'sad' | 'excited'\n    isSelected?: boolean\n    onClick?: () => void\n}\n\nconst MOOD_COLORS = {\n    happy: 'from-rp-foam/30 to-rp-pine/30',\n    neutral: 'from-rp-iris/30 to-rp-love/30',\n    sad: 'from-rp-muted/30 to-rp-subtle/30',\n    excited: 'from-rp-gold/30 to-rp-rose/30'\n}\n\nconst MOOD_GLOW = {\n    happy: 'shadow-[0_0_20px_rgba(156,207,216,0.4)]',\n    neutral: 'shadow-[0_0_20px_rgba(196,167,231,0.4)]',\n    sad: 'shadow-[0_0_20px_rgba(144,140,170,0.3)]',\n    excited: 'shadow-[0_0_20px_rgba(235,188,186,0.5)]'\n}\n\nexport function SoulCard({\n    id,\n    name,\n    imageUrl,\n    tagline,\n    mood = 'neutral',\n    isSelected = false,\n    onClick\n}: SoulCardProps) {\n    return (\n        <button\n            onClick={onClick}\n            className={cn(\n                \"group relative flex flex-col items-center gap-3 rounded-2xl border p-4 transition-all duration-300\",\n                \"hover:scale-105 hover:-translate-y-1\",\n                isSelected\n                    ? \"border-rp-gold bg-gradient-to-br from-rp-gold/20 to-rp-rose/20 shadow-[0_0_20px_rgba(235,188,186,0.3)]\"\n                    : \"border-rp-highlight-med bg-rp-surface hover:border-rp-highlight-high hover:bg-rp-overlay\"\n            )}\n        >\n            {/* Avatar with glow effect */}\n            <div className={cn(\n                \"relative h-24 w-24 rounded-full overflow-hidden border-2 transition-all duration-300\",\n                isSelected\n                    ? \"border-rp-gold shadow-[0_0_25px_rgba(246,193,119,0.5)] scale-110\"\n                    : `border-rp-highlight-med group-hover:${MOOD_GLOW[mood]}`\n            )}>\n                {/* Mood gradient background */}\n                <div className={cn(\n                    \"absolute inset-0 bg-gradient-to-br opacity-20\",\n                    MOOD_COLORS[mood]\n                )} />\n\n                {/* Avatar image */}\n                {imageUrl ? (\n                    <Image\n                        src={imageUrl}\n                        alt={name}\n                        fill\n                        className=\"object-cover\"\n                    />\n                ) : (\n                    <div className=\"flex h-full w-full items-center justify-center bg-rp-overlay text-2xl font-bold text-rp-muted\">\n                        {name.charAt(0).toUpperCase()}\n                    </div>\n                )}\n            </div>\n\n            {/* Name */}\n            <div className=\"text-center\">\n                <h3 className={cn(\n                    \"font-semibold transition-colors\",\n                    isSelected ? \"text-rp-gold\" : \"text-rp-text\"\n                )}>\n                    {name}\n                </h3>\n                {tagline && (\n                    <p className=\"mt-1 text-xs text-rp-muted line-clamp-2\">\n                        {tagline}\n                    </p>\n                )}\n            </div>\n\n            {/* Selected indicator */}\n            {isSelected && (\n                <div className=\"absolute -right-2 -top-2 flex h-6 w-6 items-center justify-center rounded-full bg-rp-gold shadow-lg\">\n                    <svg\n                        className=\"h-4 w-4 text-rp-base\"\n                        fill=\"currentColor\"\n                        viewBox=\"0 0 20 20\"\n                    >\n                        <path\n                            fillRule=\"evenodd\"\n                            d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\"\n                            clipRule=\"evenodd\"\n                        />\n                    </svg>\n                </div>\n            )}\n        </button>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/chat-v2/SoulGallery.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":49,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":49,"endColumn":119,"fix":{"range":[1309,1394],"text":"border-rp-highlight-med border-t-rp-gold h-12 w-12 animate-spin rounded-full border-4"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-12, w-12' could be replaced by the 'size-12' shorthand!","line":49,"column":22,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":49,"endColumn":119,"fix":{"range":[1309,1394],"text":"size-12 animate-spin rounded-full border-4 border-rp-highlight-med border-t-rp-gold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":58,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":58,"endColumn":64,"fix":{"range":[1672,1702],"text":"bg-rp-overlay rounded-full p-6"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":62,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":62,"endColumn":76,"fix":{"range":[1882,1921],"text":"text-rp-text mb-2 text-xl font-semibold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":77,"column":21,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":77,"endColumn":69,"fix":{"range":[2347,2383],"text":"text-rp-text mb-2 text-2xl font-bold"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":5,"source":"/**\n * Soul Gallery - Grid Layout of User's Personas\n * \n * Displays all user personas in a grid with selection capability\n */\n\n\"use client\"\n\nimport React, { useEffect, useState } from 'react'\nimport { SoulCard } from './SoulCard'\nimport { getPersonasByOwnerId } from '@/db/personas'\nimport { IconSparkles } from '@tabler/icons-react'\n\nexport interface SoulGalleryProps {\n    userId: string\n    onSoulSelect?: (personaId: string, personaData: any) => void\n    selectedSoulId?: string\n}\n\nexport function SoulGallery({\n    userId,\n    onSoulSelect,\n    selectedSoulId\n}: SoulGalleryProps) {\n    const [personas, setPersonas] = useState<any[]>([])\n    const [loading, setLoading] = useState(true)\n\n    useEffect(() => {\n        async function loadPersonas() {\n            setLoading(true)\n            try {\n                const data = await getPersonasByOwnerId(userId)\n                setPersonas(data)\n            } catch (error) {\n                console.error('Failed to load personas:', error)\n            } finally {\n                setLoading(false)\n            }\n        }\n\n        if (userId) {\n            loadPersonas()\n        }\n    }, [userId])\n\n    if (loading) {\n        return (\n            <div className=\"flex flex-col items-center justify-center gap-4 py-12\">\n                <div className=\"h-12 w-12 animate-spin rounded-full border-4 border-rp-highlight-med border-t-rp-gold\" />\n                <p className=\"text-rp-muted\">Loading your Souls...</p>\n            </div>\n        )\n    }\n\n    if (personas.length === 0) {\n        return (\n            <div className=\"flex flex-col items-center justify-center gap-4 py-12\">\n                <div className=\"rounded-full bg-rp-overlay p-6\">\n                    <IconSparkles size={48} className=\"text-rp-muted\" />\n                </div>\n                <div className=\"text-center\">\n                    <h3 className=\"mb-2 text-xl font-semibold text-rp-text\">\n                        No Souls Yet\n                    </h3>\n                    <p className=\"text-rp-muted\">\n                        Visit the Soul Studio to create your first persona\n                    </p>\n                </div>\n            </div>\n        )\n    }\n\n    return (\n        <div className=\"w-full\">\n            {/* Header */}\n            <div className=\"mb-6 text-center\">\n                <h2 className=\"mb-2 text-2xl font-bold text-rp-text\">\n                    Choose Your Soul\n                </h2>\n                <p className=\"text-rp-muted\">\n                    Select a persona to start chatting\n                </p>\n            </div>\n\n            {/* Grid of souls */}\n            <div className=\"grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5\">\n                {personas.map((persona) => (\n                    <SoulCard\n                        key={persona.id}\n                        id={persona.id}\n                        name={persona.name}\n                        imageUrl={persona.image_url}\n                        tagline={persona.tagline || persona.description}\n                        mood={persona.mood || 'neutral'}\n                        isSelected={selectedSoulId === persona.id}\n                        onClick={() => onSoulSelect?.(persona.id, persona)}\n                    />\n                ))}\n            </div>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/chat-v2/ThinkingIndicator.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":13,"column":14,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":13,"endColumn":104,"fix":{"range":[214,292],"text":"animate-in fade-in zoom-in-95 flex w-fit items-center gap-1.5 p-3 duration-300"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":14,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":14,"endColumn":100,"fix":{"range":[323,393],"text":"animate-pulse-dot bg-rp-iris h-2 w-2 rounded-full [animation-delay:0s]"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-2, w-2' could be replaced by the 'size-2' shorthand!","line":14,"column":18,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":14,"endColumn":100,"fix":{"range":[323,393],"text":"size-2 animate-pulse-dot rounded-full bg-rp-iris [animation-delay:0s]"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":15,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":15,"endColumn":102,"fix":{"range":[430,502],"text":"animate-pulse-dot bg-rp-iris h-2 w-2 rounded-full [animation-delay:0.2s]"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-2, w-2' could be replaced by the 'size-2' shorthand!","line":15,"column":18,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":15,"endColumn":102,"fix":{"range":[430,502],"text":"size-2 animate-pulse-dot rounded-full bg-rp-iris [animation-delay:0.2s]"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":16,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":16,"endColumn":102,"fix":{"range":[539,611],"text":"animate-pulse-dot bg-rp-iris h-2 w-2 rounded-full [animation-delay:0.4s]"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-2, w-2' could be replaced by the 'size-2' shorthand!","line":16,"column":18,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":16,"endColumn":102,"fix":{"range":[539,611],"text":"size-2 animate-pulse-dot rounded-full bg-rp-iris [animation-delay:0.4s]"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":7,"source":"/**\n * Thinking Indicator Component\n * \n * Animated dots to show AI is processing/generating\n */\n\n\"use client\"\n\nimport React from 'react'\n\nexport function ThinkingIndicator() {\n    return (\n        <div className=\"flex items-center gap-1.5 p-3 w-fit animate-in fade-in zoom-in-95 duration-300\">\n            <div className=\"h-2 w-2 animate-pulse-dot rounded-full bg-rp-iris [animation-delay:0s]\"></div>\n            <div className=\"h-2 w-2 animate-pulse-dot rounded-full bg-rp-iris [animation-delay:0.2s]\"></div>\n            <div className=\"h-2 w-2 animate-pulse-dot rounded-full bg-rp-iris [animation-delay:0.4s]\"></div>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/chat-v2/hooks/use-file-handler.ts","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'chatSettings'. Either include it or remove the dependency array.","line":45,"column":8,"nodeType":"ArrayExpression","endLine":45,"endColumn":29,"suggestions":[{"desc":"Update the dependencies array to be: [chatSettings]","fix":{"range":[1367,1388],"text":"[chatSettings]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { RemrinContext } from \"@/context/context\"\nimport { createDocXFile, createFile } from \"@/db/files\"\nimport { LLM_LIST } from \"@/lib/models/llm/llm-list\"\nimport mammoth from \"mammoth\"\nimport { useCallback, useContext, useEffect, useState } from \"react\"\nimport { toast } from \"sonner\"\n\nexport const ACCEPTED_FILE_TYPES = [\n    \"text/csv\",\n    \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\n    \"application/json\",\n    \"text/markdown\",\n    \"application/pdf\",\n    \"text/plain\"\n].join(\",\")\n\nexport const useFileHandler = () => {\n    const {\n        selectedWorkspace,\n        profile,\n        chatSettings,\n        setNewMessageImages,\n        setNewMessageFiles,\n        setShowFilesDisplay,\n        setFiles,\n        setUseRetrieval\n    } = useContext(RemrinContext)\n\n    const [filesToAccept, setFilesToAccept] = useState(ACCEPTED_FILE_TYPES)\n\n    const handleFilesToAccept = useCallback(() => {\n        // Default to a generous acceptance if chatSettings is null (e.g. on initial load)\n        if (!chatSettings) return\n\n        const model = chatSettings?.model\n        const FULL_MODEL = LLM_LIST.find(llm => llm.modelId === model)\n\n        if (!FULL_MODEL) return\n\n        setFilesToAccept(\n            FULL_MODEL.imageInput\n                ? `${ACCEPTED_FILE_TYPES},image/*`\n                : ACCEPTED_FILE_TYPES\n        )\n    }, [chatSettings?.model])\n\n    useEffect(() => {\n        handleFilesToAccept()\n    }, [handleFilesToAccept])\n\n    const handleSelectDeviceFile = async (file: File) => {\n        if (!profile || !selectedWorkspace || !chatSettings) {\n            toast.error(\"Please select a workspace and model to upload files.\")\n            return\n        }\n\n        setShowFilesDisplay(true)\n        setUseRetrieval(true)\n\n        if (file) {\n            let simplifiedFileType = file.type.split(\"/\")[1]\n\n            let reader = new FileReader()\n\n            if (file.type.includes(\"image\")) {\n                reader.readAsDataURL(file)\n            } else if (ACCEPTED_FILE_TYPES.split(\",\").includes(file.type)) {\n                if (simplifiedFileType.includes(\"vnd.adobe.pdf\")) {\n                    simplifiedFileType = \"pdf\"\n                } else if (\n                    simplifiedFileType.includes(\n                        \"vnd.openxmlformats-officedocument.wordprocessingml.document\" ||\n                        \"docx\"\n                    )\n                ) {\n                    simplifiedFileType = \"docx\"\n                }\n\n                setNewMessageFiles(prev => [\n                    ...prev,\n                    {\n                        id: \"loading\",\n                        name: file.name,\n                        type: simplifiedFileType,\n                        file: file\n                    }\n                ])\n\n                // Handle docx files\n                if (\n                    file.type.includes(\n                        \"vnd.openxmlformats-officedocument.wordprocessingml.document\" ||\n                        \"docx\"\n                    )\n                ) {\n                    const arrayBuffer = await file.arrayBuffer()\n                    const result = await mammoth.extractRawText({\n                        arrayBuffer\n                    })\n\n                    const createdFile = await createDocXFile(\n                        result.value,\n                        file,\n                        {\n                            user_id: profile.user_id!,\n                            description: \"\",\n                            file_path: \"\",\n                            name: file.name,\n                            size: file.size,\n                            tokens: 0,\n                            type: simplifiedFileType\n                        },\n                        selectedWorkspace.id,\n                        chatSettings.embeddingsProvider\n                    )\n\n                    setFiles(prev => [...prev, createdFile])\n\n                    setNewMessageFiles(prev =>\n                        prev.map(item =>\n                            item.id === \"loading\"\n                                ? {\n                                    id: createdFile.id,\n                                    name: createdFile.name,\n                                    type: createdFile.type,\n                                    file: file\n                                }\n                                : item\n                        )\n                    )\n\n                    reader.onloadend = null\n\n                    return\n                } else {\n                    // Use readAsArrayBuffer for PDFs and readAsText for other types\n                    file.type.includes(\"pdf\")\n                        ? reader.readAsArrayBuffer(file)\n                        : reader.readAsText(file)\n                }\n            } else {\n                toast.error(\"Unsupported file type\")\n                return\n            }\n\n            reader.onloadend = async function () {\n                try {\n                    if (file.type.includes(\"image\")) {\n                        // Create a temp url for the image file\n                        const imageUrl = URL.createObjectURL(file)\n\n                        // This is a temporary image for display purposes in the chat input\n                        setNewMessageImages(prev => [\n                            ...prev,\n                            {\n                                messageId: \"temp\",\n                                path: \"\",\n                                base64: reader.result as string, // base64 image\n                                url: imageUrl,\n                                file\n                            }\n                        ])\n                    } else {\n                        const createdFile = await createFile(\n                            file,\n                            {\n                                user_id: profile.user_id!,\n                                description: \"\",\n                                file_path: \"\",\n                                name: file.name,\n                                size: file.size,\n                                tokens: 0,\n                                type: simplifiedFileType\n                            },\n                            selectedWorkspace.id,\n                            chatSettings.embeddingsProvider\n                        )\n\n                        setFiles(prev => [...prev, createdFile])\n\n                        setNewMessageFiles(prev =>\n                            prev.map(item =>\n                                item.id === \"loading\"\n                                    ? {\n                                        id: createdFile.id,\n                                        name: createdFile.name,\n                                        type: createdFile.type,\n                                        file: file\n                                    }\n                                    : item\n                            )\n                        )\n                    }\n                } catch (error: any) {\n                    toast.error(\"Failed to upload. \" + error?.message, {\n                        duration: 10000\n                    })\n                    setNewMessageImages(prev =>\n                        prev.filter(img => img.messageId !== \"temp\")\n                    )\n                    setNewMessageFiles(prev => prev.filter(file => file.id !== \"loading\"))\n                }\n            }\n        }\n    }\n\n    return {\n        handleSelectDeviceFile,\n        filesToAccept\n    }\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/collection/CollectionCard.tsx","messages":[{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames '' could be replaced by the 'inset-x-0' shorthand!","line":162,"column":22,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":162,"endColumn":85,"fix":{"range":[5833,5864],"text":"`absolute inset-x-0 bottom-0${"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"\"use client\"\n\nimport { useState, useRef } from \"react\"\nimport Image from \"next/image\"\nimport Link from \"next/link\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { cn } from \"@/lib/utils\"\nimport { calculateTilt, staggerDelay } from \"@/lib/animations\"\nimport { IconLock, IconStar, IconStarFilled } from \"@tabler/icons-react\"\nimport { Rarity, CollectionSoul } from \"@/hooks/use-collection\"\nimport { TYPOGRAPHY, SPACING } from \"@/lib/design-system\"\n\ninterface CollectionCardProps {\n    soul: CollectionSoul\n    animationIndex?: number\n    showLocked?: boolean\n    className?: string\n}\n\n// Rarity color configurations\nconst RARITY_CONFIG: Record<Rarity, {\n    border: string\n    glow: string\n    gradient: string\n    text: string\n    stars: number\n}> = {\n    common: {\n        border: \"border-rp-muted/50\",\n        glow: \"rgba(110, 106, 134, 0.4)\",\n        gradient: \"from-rp-muted/50 to-rp-muted/30\",\n        text: \"text-rp-subtle\",\n        stars: 1\n    },\n    rare: {\n        border: \"border-rp-pine/50\",\n        glow: \"rgba(49, 116, 143, 0.5)\",\n        gradient: \"from-rp-pine/50 to-rp-pine/30\",\n        text: \"text-rp-foam\",\n        stars: 2\n    },\n    epic: {\n        border: \"border-rp-iris/50\",\n        glow: \"rgba(196, 167, 231, 0.5)\",\n        gradient: \"from-rp-iris/50 to-rp-iris/30\",\n        text: \"text-rp-iris\",\n        stars: 3\n    },\n    legendary: {\n        border: \"border-rp-gold/50\",\n        glow: \"rgba(246, 193, 119, 0.6)\",\n        gradient: \"from-rp-gold/50 to-rp-rose/50\",\n        text: \"text-rp-gold\",\n        stars: 4\n    }\n}\n\nexport function CollectionCard({\n    soul,\n    animationIndex = 0,\n    showLocked = true,\n    className\n}: CollectionCardProps) {\n    const cardRef = useRef<HTMLDivElement>(null)\n    const [tiltStyle, setTiltStyle] = useState<React.CSSProperties>({})\n    const [isHovering, setIsHovering] = useState(false)\n\n    const config = RARITY_CONFIG[soul.rarity]\n\n    const handleMouseMove = (e: React.MouseEvent<HTMLDivElement>) => {\n        if (!soul.isOwned) return // No tilt for locked cards\n        const { rotateX, rotateY } = calculateTilt(e, 6)\n        setTiltStyle({\n            transform: `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateZ(5px)`\n        })\n    }\n\n    const handleMouseEnter = () => {\n        setIsHovering(true)\n    }\n\n    const handleMouseLeave = () => {\n        setIsHovering(false)\n        setTiltStyle({\n            transform: 'perspective(1000px) rotateX(0deg) rotateY(0deg) translateZ(0px)'\n        })\n    }\n\n    // Don't show locked souls if showLocked is false\n    if (!soul.isOwned && !showLocked) {\n        return null\n    }\n\n    const cardContent = (\n        <div\n            ref={cardRef}\n            className={cn(\n                \"bg-rp-surface group relative overflow-hidden rounded-xl border-2\",\n                \"animate-card-enter transition-all duration-300 ease-out\",\n                soul.isOwned ? config.border : \"border-rp-muted/20\",\n                soul.isOwned ? \"cursor-pointer\" : \"cursor-default\",\n                className\n            )}\n            style={{\n                ...tiltStyle,\n                animationDelay: `${staggerDelay(animationIndex)}ms`,\n                animationFillMode: 'both',\n                boxShadow: isHovering && soul.isOwned\n                    ? `0 15px 30px rgba(0,0,0,0.3), 0 0 30px ${config.glow}`\n                    : '0 4px 15px rgba(0,0,0,0.15)',\n                borderColor: isHovering && soul.isOwned ? config.glow : undefined,\n                ['--glow-color' as string]: config.glow\n            }}\n            onMouseMove={handleMouseMove}\n            onMouseEnter={handleMouseEnter}\n            onMouseLeave={handleMouseLeave}\n        >\n            {/* Portrait */}\n            <div className=\"relative aspect-[3/4] w-full overflow-hidden\">\n                {soul.isOwned && soul.imageUrl ? (\n                    <Image\n                        src={soul.imageUrl}\n                        alt={`${soul.name} - ${soul.rarity} rarity character`}\n                        fill\n                        className={cn(\n                            \"object-cover transition-transform duration-500 ease-out\",\n                            isHovering ? \"scale-105\" : \"scale-100\"\n                        )}\n                        sizes=\"(max-width: 640px) 50vw, (max-width: 1024px) 25vw, 20vw\"\n                    />\n                ) : (\n                    // Locked/silhouette state\n                    <div className={cn(\n                        \"flex size-full items-center justify-center\",\n                        soul.isOwned\n                            ? `bg-gradient-to-br ${config.gradient}`\n                            : \"from-rp-base/80 to-rp-surface/80 bg-gradient-to-br\"\n                    )}>\n                        {soul.isOwned ? (\n                            <span className=\"text-rp-text/50 text-3xl font-bold\">\n                                {soul.name.slice(0, 2).toUpperCase()}\n                            </span>\n                        ) : (\n                            <IconLock className=\"text-rp-text/20 size-10\" />\n                        )}\n                    </div>\n                )}\n\n                {/* Gradient Overlay */}\n                <div className=\"from-rp-base/80 via-rp-base/20 absolute inset-0 bg-gradient-to-t to-transparent\" />\n\n                {/* Duplicate Count Badge */}\n                {soul.isOwned && soul.pullCount > 1 && (\n                    <div className=\"absolute right-2 top-2\">\n                        <Badge className=\"bg-rp-base/70 text-rp-text rounded-full border-0 px-2 py-0.5 text-xs font-bold backdrop-blur-sm\">\n                            Ã—{soul.pullCount}\n                        </Badge>\n                    </div>\n                )}\n\n                {/* Bottom Content */}\n                <div className={`absolute inset-x-0 bottom-0 ${SPACING.card.small}`}>\n                    {/* Rarity Stars */}\n                    <div className=\"mb-1 flex gap-0.5\">\n                        {Array.from({ length: config.stars }).map((_, i) => (\n                            <IconStarFilled\n                                key={i}\n                                className={cn(\n                                    \"size-3\",\n                                    soul.isOwned ? config.text : \"text-rp-muted\"\n                                )}\n                            />\n                        ))}\n                        {Array.from({ length: 4 - config.stars }).map((_, i) => (\n                            <IconStar\n                                key={i}\n                                className=\"text-rp-muted size-3\"\n                            />\n                        ))}\n                    </div>\n\n                    {/* Name */}\n                    <h3 className={cn(\n                        TYPOGRAPHY.body.small,\n                        \"line-clamp-1 font-semibold leading-tight drop-shadow-lg\",\n                        \"transition-transform duration-300\",\n                        soul.isOwned ? \"text-rp-text\" : \"text-rp-text/40\",\n                        isHovering && soul.isOwned && \"translate-x-0.5\"\n                    )}>\n                        {soul.isOwned ? soul.name : \"???\"}\n                    </h3>\n\n                    {/* Rarity Label */}\n                    <p className={cn(\n                        \"mt-0.5 text-xs capitalize\",\n                        soul.isOwned ? config.text : \"text-rp-muted\"\n                    )}>\n                        {soul.rarity}\n                    </p>\n                </div>\n            </div>\n        </div>\n    )\n\n    // Wrap in Link if owned\n    if (soul.isOwned) {\n        return (\n            <Link href={`/character/${soul.personaId}`} className=\"block\">\n                {cardContent}\n            </Link>\n        )\n    }\n\n    return cardContent\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/discovery/CharacterCard.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":118,"column":32,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":118,"endColumn":151,"fix":{"range":[4344,4451],"text":"bg-rp-base/60 text-rp-rose flex items-center gap-1 rounded-full border-0 px-2 py-1 text-xs backdrop-blur-sm"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames '' could be replaced by the 'inset-x-0' shorthand!","line":125,"column":26,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":125,"endColumn":90,"fix":{"range":[4726,4757],"text":"`absolute inset-x-0 bottom-0${"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":146,"column":40,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":151,"endColumn":26,"fix":{"range":[5867,5921],"text":"text-rp-rose line-clamp-2 leading-tight drop-shadow-lg"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":3,"source":"\"use client\"\n\nimport { useState, useRef, memo } from \"react\"\nimport Link from \"next/link\"\nimport Image from \"next/image\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { MessageCircle } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport { calculateTilt, staggerDelay } from \"@/lib/animations\"\nimport { TYPOGRAPHY, SPACING } from \"@/lib/design-system\"\n\ninterface CharacterCardProps {\n    id: string\n    name: string\n    imageUrl: string | null\n    category: string | null\n    categoryColor?: string | null\n    totalChats: number\n    className?: string\n    animationIndex?: number\n}\n\n// Format large numbers: 12500 -> \"12.5K\"\nfunction formatCount(count: number): string {\n    if (count >= 1000000) {\n        return `${(count / 1000000).toFixed(1)}M`\n    }\n    if (count >= 1000) {\n        return `${(count / 1000).toFixed(1)}K`\n    }\n    return count.toString()\n}\n\nexport const CharacterCard = memo(function CharacterCard({\n    id,\n    name,\n    imageUrl,\n    category,\n    categoryColor,\n    totalChats,\n    className,\n    animationIndex = 0\n}: CharacterCardProps) {\n    const cardRef = useRef<HTMLDivElement>(null)\n    const [tiltStyle, setTiltStyle] = useState<React.CSSProperties>({})\n    const [isHovering, setIsHovering] = useState(false)\n\n    const handleMouseMove = (e: React.MouseEvent<HTMLDivElement>) => {\n        const { rotateX, rotateY } = calculateTilt(e, 8)\n        setTiltStyle({\n            transform: `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateZ(10px)`\n        })\n    }\n\n    const handleMouseEnter = () => {\n        setIsHovering(true)\n    }\n\n    const handleMouseLeave = () => {\n        setIsHovering(false)\n        setTiltStyle({\n            transform: 'perspective(1000px) rotateX(0deg) rotateY(0deg) translateZ(0px)'\n        })\n    }\n\n    // Glow color based on category\n    const glowColor = categoryColor || 'rgba(196, 167, 231, 0.6)' // rp-iris default\n\n    return (\n        <Link href={`/character/${id}`} className=\"block\">\n            <div\n                ref={cardRef}\n                className={cn(\n                    \"border-rp-muted/20 bg-rp-surface group relative overflow-hidden rounded-2xl border\",\n                    \"animate-card-enter transition-all duration-300 ease-out\",\n                    className\n                )}\n                style={{\n                    ...tiltStyle,\n                    animationDelay: `${staggerDelay(animationIndex)}ms`,\n                    animationFillMode: 'both',\n                    boxShadow: isHovering\n                        ? `0 20px 40px rgba(0,0,0,0.4), 0 0 40px ${glowColor}`\n                        : '0 4px 20px rgba(0,0,0,0.2)',\n                    borderColor: isHovering ? glowColor : 'rgba(110, 106, 134, 0.2)',\n                    ['--glow-color' as string]: glowColor\n                }}\n                onMouseMove={handleMouseMove}\n                onMouseEnter={handleMouseEnter}\n                onMouseLeave={handleMouseLeave}\n            >\n                {/* Portrait Image */}\n                <div className=\"relative aspect-[3/4] w-full overflow-hidden\">\n                    {imageUrl ? (\n                        <Image\n                            src={imageUrl}\n                            alt={name}\n                            fill\n                            className={cn(\n                                \"object-cover transition-transform duration-500 ease-out\",\n                                isHovering ? \"scale-105\" : \"scale-100\"\n                            )}\n                            sizes=\"(max-width: 640px) 100vw, (max-width: 768px) 50vw, 33vw\"\n                        />\n                    ) : (\n                        <div className=\"from-rp-iris/50 to-rp-foam/50 flex size-full items-center justify-center bg-gradient-to-br\">\n                            <span className=\"text-rp-text/50 text-4xl font-bold\">\n                                {name.slice(0, 2).toUpperCase()}\n                            </span>\n                        </div>\n                    )}\n\n                    {/* Gradient Overlay */}\n                    <div className=\"from-rp-base/90 via-rp-base/20 absolute inset-0 bg-gradient-to-t to-transparent\" />\n\n                    {/* Stats Badge */}\n                    <div className=\"absolute right-3 top-3\">\n                        <Badge className=\"bg-rp-base/60 flex items-center gap-1 rounded-full border-0 px-2 py-1 text-xs text-rp-rose backdrop-blur-sm\">\n                            <MessageCircle className=\"size-3\" />\n                            <span>{formatCount(totalChats)}</span>\n                        </Badge>\n                    </div>\n\n                    {/* Bottom Content */}\n                    <div className={`absolute inset-x-0 bottom-0 ${SPACING.card.medium}`}>\n                        {/* Category Badge */}\n                        {category && (\n                            <Badge\n                                className={cn(\n                                    \"mb-2 rounded-full border-0 px-2.5 py-0.5 text-xs font-medium\",\n                                    \"transition-all duration-300\",\n                                    isHovering && \"scale-105\"\n                                )}\n                                style={{\n                                    backgroundColor: categoryColor\n                                        ? `${categoryColor}30`\n                                        : \"rgba(196, 167, 231, 0.3)\",\n                                    color: categoryColor || \"#c4a7e7\"\n                                }}\n                            >\n                                {category}\n                            </Badge>\n                        )}\n\n                        {/* Character Name */}\n                        <h3 className={cn(\n                            TYPOGRAPHY.heading.h4,\n                            \"line-clamp-2 leading-tight drop-shadow-lg text-rp-rose\",\n                            \"transition-transform duration-300\",\n                            isHovering && \"translate-x-1\"\n                        )}>\n                            {name}\n                        </h3>\n                    </div>\n                </div>\n            </div>\n        </Link>\n    )\n})\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/discovery/DiscoveryFeed.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":145,"column":34,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":145,"endColumn":65,"fix":{"range":[4245,4264],"text":"text-rp-iris size-5"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"\"use client\"\n\nimport { useState, useCallback } from \"react\"\nimport { CategoryTabs } from \"./CategoryTabs\"\nimport { TrendingCarousel } from \"./TrendingCarousel\"\nimport { UnifiedCard } from \"@/components/cards/UnifiedCard\"\nimport { Button } from \"@/components/ui/button\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport { SearchX, Compass } from \"lucide-react\"\nimport { createClient } from \"@/lib/supabase/client\"\nimport { LottieLoader } from \"@/components/ui/lottie-loader\"\n\ninterface Category {\n    id: string\n    name: string\n    slug: string\n    icon: string | null\n    color: string | null\n}\n\ninterface PersonaWithStats {\n    id: string\n    name: string\n    image_url: string | null\n    category: string | null\n    description: string | null\n    is_featured: boolean | null\n    persona_stats: {\n        total_chats: number\n        trending_score: number\n    } | null\n}\n\ninterface TrendingPersona {\n    id: string\n    name: string\n    imageUrl: string | null\n    description: string | null\n    totalChats: number\n    isFeatured: boolean\n}\n\ninterface DiscoveryFeedProps {\n    initialPersonas: PersonaWithStats[]\n    trendingPersonas: TrendingPersona[]\n    categories: Category[]\n    categoryColors: Record<string, string>\n    initialHasMore: boolean\n}\n\nconst PAGE_SIZE = 12\n\nexport function DiscoveryFeed({\n    initialPersonas,\n    trendingPersonas,\n    categories,\n    categoryColors,\n    initialHasMore\n}: DiscoveryFeedProps) {\n    const [personas, setPersonas] = useState<PersonaWithStats[]>(initialPersonas)\n    const [selectedCategory, setSelectedCategory] = useState<string | null>(null)\n    const [loading, setLoading] = useState(false)\n    const [loadingMore, setLoadingMore] = useState(false)\n    const [hasMore, setHasMore] = useState(initialHasMore)\n    const [offset, setOffset] = useState(PAGE_SIZE)\n    const supabase = createClient()\n\n    const fetchPersonas = useCallback(async (category: string | null, reset = false) => {\n        if (reset) {\n            setLoading(true)\n            setOffset(PAGE_SIZE)\n        } else {\n            setLoadingMore(true)\n        }\n\n        try {\n            const currentOffset = reset ? 0 : offset\n\n            let query = supabase\n                .from(\"personas\")\n                .select(`\n          id,\n          name,\n          image_url,\n          category,\n          description,\n          is_featured,\n          persona_stats(total_chats, trending_score)\n        `)\n                .eq(\"status\", \"approved\")\n                .eq(\"visibility\", \"PUBLIC\")\n                .order(\"created_at\", { ascending: false })\n                .range(currentOffset, currentOffset + PAGE_SIZE - 1)\n\n            if (category) {\n                query = query.eq(\"category\", category)\n            }\n\n            const { data, error } = await query\n\n            if (error) throw error\n\n            const typedData = data as unknown as PersonaWithStats[]\n\n            if (reset) {\n                setPersonas(typedData)\n            } else {\n                setPersonas((prev) => [...prev, ...typedData])\n            }\n\n            setHasMore(typedData.length === PAGE_SIZE)\n            if (!reset) {\n                setOffset((prev) => prev + PAGE_SIZE)\n            }\n        } catch (error) {\n            console.error(\"Error fetching personas:\", error)\n        } finally {\n            setLoading(false)\n            setLoadingMore(false)\n        }\n    }, [offset, supabase])\n\n    const handleCategoryChange = (category: string | null) => {\n        setSelectedCategory(category)\n        fetchPersonas(category, true)\n    }\n\n    const handleLoadMore = () => {\n        fetchPersonas(selectedCategory, false)\n    }\n\n    return (\n        <div className=\"bg-rp-base min-h-screen\">\n            <div className=\"mx-auto max-w-7xl px-4 py-8\">\n                {/* Trending Section */}\n                {trendingPersonas.length > 0 && (\n                    <section className=\"mb-10\">\n                        <TrendingCarousel personas={trendingPersonas} />\n                    </section>\n                )}\n\n                {/* Explore Souls Section */}\n                <section className=\"mb-6\">\n                    <div className=\"mb-4 flex items-center gap-2\">\n                        <Compass className=\"size-5 text-rp-iris\" />\n                        <h2 className=\"font-tiempos-headline font-semibold\" style={{ fontSize: '75px' }}>Explore Souls</h2>\n                    </div>\n                    <CategoryTabs\n                        categories={categories}\n                        selectedCategory={selectedCategory}\n                        onSelectCategory={handleCategoryChange}\n                    />\n                </section>\n\n                {/* Loading State */}\n                {loading && (\n                    <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3\">\n                        {Array.from({ length: 6 }).map((_, i) => (\n                            <div\n                                key={i}\n                                className=\"border-rp-muted/20 bg-rp-surface animate-fade-in overflow-hidden rounded-2xl border\"\n                                style={{ animationDelay: `${i * 50}ms` }}\n                            >\n                                <Skeleton className=\"bg-rp-muted/30 animate-shimmer aspect-[3/4] w-full\" />\n                            </div>\n                        ))}\n                    </div>\n                )}\n\n                {/* Character Grid */}\n                {!loading && (\n                    <>\n                        {personas.length === 0 ? (\n                            <div className=\"flex flex-col items-center justify-center py-20 text-center\">\n                                <SearchX className=\"text-rp-muted mb-4 size-16\" />\n                                <h3 className=\"text-rp-text mb-2 text-xl font-semibold\">\n                                    No characters found\n                                </h3>\n                                <p className=\"text-rp-subtle\">\n                                    Try selecting a different category or check back later.\n                                </p>\n                            </div>\n                        ) : (\n                            <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3\">\n                                {personas.map((persona, index) => (\n                                    <UnifiedCard\n                                        key={persona.id}\n                                        variant=\"character\"\n                                        data={{\n                                            id: persona.id,\n                                            name: persona.name,\n                                            imageUrl: persona.image_url,\n                                            category: persona.category,\n                                            categoryColor: persona.category ? categoryColors[persona.category] : null,\n                                            totalChats: persona.persona_stats?.total_chats ?? 0\n                                        }}\n                                        animationIndex={index}\n                                    />\n                                ))}\n                            </div>\n                        )}\n\n                        {/* Load More Button */}\n                        {hasMore && personas.length > 0 && (\n                            <div className=\"mt-8 flex justify-center\">\n                                <Button\n                                    onClick={handleLoadMore}\n                                    disabled={loadingMore}\n                                    variant=\"outline\"\n                                    className=\"border-rp-muted bg-rp-surface text-rp-text hover:bg-rp-overlay min-w-40 rounded-full\"\n                                >\n                                    {loadingMore ? (\n                                        <>\n                                            <LottieLoader size={16} className=\"mr-2\" />\n                                            Loading...\n                                        </>\n                                    ) : (\n                                        \"Load More\"\n                                    )}\n                                </Button>\n                            </div>\n                        )}\n                    </>\n                )}\n            </div>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/discovery/DraggableGallery.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":105,"column":32,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":110,"endColumn":22,"fix":{"range":[3486,3517],"text":"bg-rp-iris scale-110 text-white"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":105,"column":32,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":110,"endColumn":22,"fix":{"range":[3550,3634],"text":"bg-rp-surface text-rp-iris border-rp-iris hover:bg-rp-iris border-2 hover:text-white"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":2,"source":"\"use client\"\n\nimport { useState } from \"react\"\nimport { EtherealCard } from \"./EtherealCard\"\nimport { cn } from \"@/lib/utils\"\nimport { IconSettings, IconX } from \"@tabler/icons-react\"\nimport Image from \"next/image\"\nimport { TYPOGRAPHY } from \"@/lib/design-system\"\n\ninterface GalleryItem {\n    id: string\n    name: string\n    description?: string | null\n    imageUrl?: string | null\n    rarity?: \"common\" | \"rare\" | \"epic\" | \"legendary\"\n    messageCount?: number\n    followersCount?: number\n}\n\ninterface DraggableGalleryProps {\n    items: GalleryItem[]\n    onItemClick: (item: GalleryItem) => void\n    className?: string\n}\n\ninterface GridConfig {\n    columns: number\n    gap: number\n}\n\nexport function DraggableGallery({\n    items,\n    onItemClick,\n    className\n}: DraggableGalleryProps) {\n    const [showControls, setShowControls] = useState(false)\n    const [expandedItem, setExpandedItem] = useState<GalleryItem | null>(null)\n    const [config, setConfig] = useState<GridConfig>({\n        columns: 6,\n        gap: 32  // Default to 32px\n    })\n\n    // Click to expand flow\n    const handleCardClick = (item: GalleryItem) => {\n        setExpandedItem(item)\n    }\n\n    const handleExpandedClick = () => {\n        if (expandedItem) {\n            onItemClick(expandedItem)\n            setExpandedItem(null)\n        }\n    }\n\n    const handleCloseExpanded = () => {\n        setExpandedItem(null)\n    }\n\n    const handleConfigChange = (key: keyof GridConfig, value: number) => {\n        setConfig(prev => ({ ...prev, [key]: value }))\n    }\n\n    return (\n        <>\n            {/* Grid Container - normal flow, centered */}\n            <div\n                className={cn(\n                    \"w-full px-4 pb-8\",\n                    className\n                )}\n            >\n                {/* Grid with centered auto-fit columns */}\n                <div\n                    className=\"mx-auto max-w-7xl\"\n                    style={{\n                        display: \"grid\",\n                        gridTemplateColumns: `repeat(auto-fit, minmax(200px, 1fr))`,\n                        gap: `${config.gap}px`,\n                        justifyItems: \"center\"\n                    }}\n                >\n                    {items.map((item, index) => (\n                        <div\n                            key={item.id}\n                            className=\"w-full max-w-[280px] cursor-pointer transition-transform duration-200 hover:scale-[1.02]\"\n                            onClick={() => handleCardClick(item)}\n                        >\n                            <EtherealCard\n                                id={item.id}\n                                name={item.name}\n                                description={item.description}\n                                imageUrl={item.imageUrl}\n                                rarity={item.rarity}\n                                messageCount={item.messageCount}\n                                followersCount={item.followersCount}\n                                isNew={index < 3}\n                            />\n                        </div>\n                    ))}\n                </div>\n\n                {/* Settings toggle - fixed position */}\n                <button\n                    onClick={() => setShowControls(!showControls)}\n                    className={cn(\n                        \"fixed bottom-6 right-6 z-40 rounded-full p-3 shadow-lg transition-all\",\n                        showControls\n                            ? \"bg-rp-iris text-white scale-110\"\n                            : \"bg-rp-surface text-rp-iris border-2 border-rp-iris hover:bg-rp-iris hover:text-white\"\n                    )}\n                    title=\"Grid Settings\"\n                >\n                    <IconSettings size={20} />\n                </button>\n\n                {/* Settings panel */}\n                {showControls && (\n                    <div className=\"bg-rp-surface border-rp-muted fixed bottom-20 right-6 z-40 w-64 rounded-xl border p-4 shadow-xl backdrop-blur-md\">\n                        <h4 className={`${TYPOGRAPHY.body.normal} text-rp-text mb-3 font-medium`}>Grid Settings</h4>\n                        <div className=\"space-y-4 text-xs\">\n                            <div>\n                                <label className=\"text-rp-muted mb-1 block\">Gap</label>\n                                <input\n                                    type=\"range\"\n                                    min=\"8\"\n                                    max=\"32\"\n                                    value={config.gap}\n                                    onChange={(e) => handleConfigChange('gap', parseInt(e.target.value))}\n                                    className=\"accent-rp-iris w-full\"\n                                    title=\"Gap size\"\n                                />\n                                <span className=\"text-rp-subtle\">{config.gap}px</span>\n                            </div>\n                        </div>\n                    </div>\n                )}\n            </div>\n\n            {/* Expanded view overlay - PORTAL-LIKE: fixed with highest z-index */}\n            {expandedItem && (\n                <div\n                    className=\"bg-rp-base/90 fixed inset-0 z-[10000] flex items-center justify-center backdrop-blur-sm\"\n                    onClick={handleCloseExpanded}\n                    style={{ position: 'fixed', top: 0, left: 0, right: 0, bottom: 0 }}\n                >\n                    <div\n                        className=\"animate-fade-in-scale relative mx-4 w-full max-w-3xl\"\n                        onClick={(e) => e.stopPropagation()}\n                    >\n                        {/* Close button */}\n                        <button\n                            onClick={handleCloseExpanded}\n                            className=\"text-rp-subtle hover:text-rp-text absolute -top-12 right-0 z-10 p-2 transition-colors\"\n                            title=\"Close\"\n                        >\n                            <IconX size={28} />\n                        </button>\n\n                        {/* Expanded card */}\n                        <div className=\"bg-rp-surface border-rp-highlight-med flex flex-col gap-6 overflow-hidden rounded-2xl border shadow-2xl md:flex-row\">\n                            {/* Large image */}\n                            <div className=\"relative aspect-square min-h-[300px] w-full md:aspect-[3/4] md:w-1/2\">\n                                {expandedItem.imageUrl ? (\n                                    <Image\n                                        src={expandedItem.imageUrl}\n                                        alt={expandedItem.name}\n                                        fill\n                                        className=\"object-cover\"\n                                    />\n                                ) : (\n                                    <div className=\"from-rp-iris/50 to-rp-rose/50 flex size-full items-center justify-center bg-gradient-to-br\">\n                                        <span className=\"text-rp-text/30 text-6xl font-bold\">\n                                            {expandedItem.name.slice(0, 2).toUpperCase()}\n                                        </span>\n                                    </div>\n                                )}\n                            </div>\n\n                            {/* Details */}\n                            <div className=\"flex flex-1 flex-col justify-center p-6 md:p-8\">\n                                {/* Rarity badge */}\n                                {expandedItem.rarity && expandedItem.rarity !== \"common\" && (\n                                    <span className={cn(\n                                        \"mb-4 inline-flex w-fit rounded-full px-3 py-1 text-xs font-bold uppercase\",\n                                        expandedItem.rarity === \"rare\" && \"bg-rp-iris text-rp-base\",\n                                        expandedItem.rarity === \"epic\" && \"bg-rp-rose text-rp-base\",\n                                        expandedItem.rarity === \"legendary\" && \"from-rp-gold to-rp-love text-rp-base bg-gradient-to-r\"\n                                    )}>\n                                        {expandedItem.rarity}\n                                    </span>\n                                )}\n\n                                <h2 className={`${TYPOGRAPHY.heading.h2} text-rp-text mb-4`}>\n                                    {expandedItem.name}\n                                </h2>\n\n                                <p className=\"text-rp-subtle mb-6 text-sm leading-relaxed md:text-base\">\n                                    {expandedItem.description || \"A mysterious soul waiting to be discovered...\"}\n                                </p>\n\n                                {/* Stats */}\n                                <div className=\"text-rp-muted mb-6 flex gap-4 text-sm\">\n                                    <span>ðŸ’¬ {(expandedItem.messageCount || 0).toLocaleString()}</span>\n                                    <span>â¤ï¸ {(expandedItem.followersCount || 0).toLocaleString()}</span>\n                                </div>\n\n                                {/* CTA Button */}\n                                <button\n                                    onClick={handleExpandedClick}\n                                    className=\"from-rp-iris to-rp-rose text-rp-base hover:from-rp-iris/80 hover:to-rp-rose/80 shadow-rp-iris/25 w-full rounded-xl bg-gradient-to-r py-3 font-semibold shadow-lg transition-all md:py-4\"\n                                >\n                                    Start Chatting\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )}\n        </>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/discovery/EtherealCard.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":101,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":101,"endColumn":107,"fix":{"range":[4031,4096],"text":"opacity-0 transition-opacity duration-300 group-hover:opacity-100"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":102,"column":32,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":102,"endColumn":127,"fix":{"range":[4141,4224],"text":"mb-3 line-clamp-3 rounded-lg bg-black/40 p-2 text-sm text-white/90 backdrop-blur-sm"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":2,"source":"\"use client\"\n\nimport Image from \"next/image\"\nimport { cn } from \"@/lib/utils\"\nimport { ElectricCard } from \"@/components/ui/electric-card\"\nimport { IconHeart, IconMessageCircle, IconSparkles } from \"@tabler/icons-react\"\n\ninterface EtherealCardProps {\n    id: string\n    name: string\n    description?: string | null\n    imageUrl?: string | null\n    rarity?: \"common\" | \"rare\" | \"epic\" | \"legendary\"\n    messageCount?: number\n    followersCount?: number\n    isNew?: boolean\n    isFeatured?: boolean\n    onClick?: () => void\n    className?: string\n}\n\nexport function EtherealCard({\n    id,\n    name,\n    description,\n    imageUrl,\n    rarity = \"common\",\n    messageCount = 0,\n    followersCount = 0,\n    isNew = false,\n    isFeatured = false,\n    onClick,\n    className\n}: EtherealCardProps) {\n    const formatCount = (count: number) => {\n        if (count >= 1000000) return `${(count / 1000000).toFixed(1)}M`\n        if (count >= 1000) return `${(count / 1000).toFixed(1)}K`\n        return count.toString()\n    }\n\n    return (\n        <ElectricCard rarity={rarity} onClick={onClick} className={className}>\n            <div className=\"group relative aspect-[3/4] w-full overflow-hidden rounded-xl\">\n                {/* Image */}\n                <div className=\"absolute inset-0\">\n                    {imageUrl ? (\n                        <Image\n                            src={imageUrl}\n                            alt={name}\n                            fill\n                            className=\"object-cover transition-transform duration-500 hover:scale-110\"\n                            sizes=\"(max-width: 640px) 50vw, (max-width: 1024px) 33vw, 25vw\"\n                        />\n                    ) : (\n                        <div className=\"from-rp-iris/50 to-rp-rose/50 flex size-full items-center justify-center bg-gradient-to-br\">\n                            <span className=\"text-rp-text/30 text-4xl font-bold\">\n                                {name.slice(0, 2).toUpperCase()}\n                            </span>\n                        </div>\n                    )}\n                </div>\n\n\n                {/* Badges */}\n                <div className=\"absolute left-3 top-3 flex gap-2\">\n                    {isNew && (\n                        <span className=\"from-rp-foam to-rp-pine text-rp-base rounded-full bg-gradient-to-r px-2 py-0.5 text-xs font-bold uppercase tracking-wider\">\n                            New\n                        </span>\n                    )}\n                    {isFeatured && (\n                        <span className=\"from-rp-gold to-rp-rose text-rp-base flex items-center gap-1 rounded-full bg-gradient-to-r px-2 py-0.5 text-xs font-bold uppercase tracking-wider\">\n                            <IconSparkles size={10} />\n                            Featured\n                        </span>\n                    )}\n                </div>\n\n                {/* Rarity indicator */}\n                {rarity !== \"common\" && (\n                    <div className=\"absolute right-3 top-3\">\n                        <span className={cn(\n                            \"rounded-full px-2 py-0.5 text-xs font-bold uppercase tracking-wider\",\n                            rarity === \"rare\" && \"bg-rp-iris/80 text-rp-base\",\n                            rarity === \"epic\" && \"bg-rp-rose/80 text-rp-base\",\n                            rarity === \"legendary\" && \"from-rp-gold to-rp-love text-rp-base bg-gradient-to-r\"\n                        )}>\n                            {rarity}\n                        </span>\n                    </div>\n                )}\n\n                {/* Content */}\n                <div className=\"absolute inset-x-0 bottom-0 p-4\">\n                    <h3 className=\"mb-1 truncate text-lg font-bold text-white\" style={{ textShadow: '0 2px 8px rgba(0,0,0,0.8), 0 0 20px rgba(0,0,0,0.5)' }}>\n                        {name}\n                    </h3>\n\n                    {/* Description - visible on hover */}\n                    {description && (\n                        <div className=\"opacity-0 group-hover:opacity-100 transition-opacity duration-300\">\n                            <p className=\"mb-3 line-clamp-3 text-sm text-white/90 bg-black/40 backdrop-blur-sm rounded-lg p-2\">\n                                {description}\n                            </p>\n                        </div>\n                    )}\n\n                    {/* Stats */}\n                    <div className=\"flex items-center gap-4 text-xs text-white/50\">\n                        <div className=\"flex items-center gap-1\">\n                            <IconMessageCircle size={14} />\n                            <span>{formatCount(messageCount)}</span>\n                        </div>\n                        <div className=\"flex items-center gap-1\">\n                            <IconHeart size={14} />\n                            <span>{formatCount(followersCount)}</span>\n                        </div>\n                    </div>\n                </div>\n\n                {/* Hover shine effect */}\n                <div className=\"pointer-events-none absolute inset-0 opacity-0 transition-opacity duration-500 hover:opacity-100\">\n                    <div\n                        className=\"absolute inset-0\"\n                        style={{\n                            background: \"linear-gradient(105deg, transparent 40%, rgba(255,255,255,0.1) 45%, transparent 50%)\",\n                            animation: \"shine 2s infinite\"\n                        }}\n                    />\n                </div>\n            </div>\n        </ElectricCard>\n    )\n}\n\n// Add keyframes to globals\n// @keyframes shine {\n//   0% { transform: translateX(-100%); }\n//   100% { transform: translateX(100%); }\n// }\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/discovery/FeaturedCarousel.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":84,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":84,"endColumn":54,"fix":{"range":[2390,2414],"text":"mx-auto w-full max-w-7xl"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":90,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":90,"endColumn":238,"fix":{"range":[2694,2895],"text":"bg-rp-surface text-rp-iris border-rp-iris hover:bg-rp-iris absolute left-4 top-1/2 z-10 flex h-12 w-12 -translate-y-1/2 items-center justify-center rounded-full border-2 transition-all hover:text-white"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-12, h-12' could be replaced by the 'size-12' shorthand!","line":90,"column":25,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":90,"endColumn":238,"fix":{"range":[2694,2895],"text":"absolute left-4 top-1/2 -translate-y-1/2 z-10 size-12 bg-rp-surface text-rp-iris border-2 border-rp-iris hover:bg-rp-iris hover:text-white rounded-full flex items-center justify-center transition-all"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":98,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":98,"endColumn":239,"fix":{"range":[3156,3358],"text":"bg-rp-surface text-rp-iris border-rp-iris hover:bg-rp-iris absolute right-4 top-1/2 z-10 flex h-12 w-12 -translate-y-1/2 items-center justify-center rounded-full border-2 transition-all hover:text-white"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-12, h-12' could be replaced by the 'size-12' shorthand!","line":98,"column":25,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":98,"endColumn":239,"fix":{"range":[3156,3358],"text":"absolute right-4 top-1/2 -translate-y-1/2 z-10 size-12 bg-rp-surface text-rp-iris border-2 border-rp-iris hover:bg-rp-iris hover:text-white rounded-full flex items-center justify-center transition-all"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":105,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":105,"endColumn":89,"fix":{"range":[3590,3641],"text":"relative flex h-[600px] items-center justify-center"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":111,"column":37,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":111,"endColumn":109,"fix":{"range":[3994,4054],"text":"absolute cursor-pointer transition-all duration-500 ease-out"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":116,"column":53,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":120,"endColumn":38,"fix":{"range":[4389,4450],"text":"group relative h-[480px] w-[320px] overflow-hidden rounded-xl"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'left-0, right-0' could be replaced by the 'inset-x-0' shorthand!","line":132,"column":46,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":132,"endColumn":94,"fix":{"range":[5370,5406],"text":"absolute bottom-0 inset-x-0 p-6"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":133,"column":49,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":133,"endColumn":117,"fix":{"range":[5468,5524],"text":"font-tiempos-headline mb-4 text-2xl font-bold text-white"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":140,"column":64,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":144,"endColumn":54,"fix":{"range":[6046,6162],"text":"inline-flex transform items-center gap-2 rounded-lg px-6 py-3 font-semibold shadow-lg transition-all hover:scale-105"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":140,"column":64,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":144,"endColumn":54,"fix":{"range":[6222,6275],"text":"from-rp-iris to-rp-rose text-rp-base bg-gradient-to-r"}},{"ruleId":"tailwindcss/migration-from-tailwind-2","severity":1,"message":"Classname 'transform' is not needed in Tailwind CSS v3!","line":140,"column":64,"nodeType":"CallExpression","messageId":"classnameNotNeeded","endLine":144,"endColumn":54,"fix":{"range":[6046,6162],"text":"inline-flex items-center gap-2 px-6 py-3 rounded-lg transition-all hover:scale-105 shadow-lg font-semibold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":168,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":168,"endColumn":68,"fix":{"range":[7707,7737],"text":"mt-8 flex justify-center gap-2"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":14,"source":"/**\n * Featured Carousel Component\n * \n * 3D carousel for featured characters with real character data and links\n */\n\n\"use client\"\n\nimport React, { useState } from 'react'\nimport { IconChevronLeft, IconChevronRight } from '@tabler/icons-react'\nimport { useRouter } from 'next/navigation'\nimport Image from 'next/image'\nimport { cn } from '@/lib/utils'\n\ninterface FeaturedCharacter {\n    id: string\n    name: string\n    imageUrl: string\n}\n\ninterface FeaturedCarouselProps {\n    characters: FeaturedCharacter[]\n    onCharacterClick?: (character: FeaturedCharacter) => void\n}\n\nexport function FeaturedCarousel({ characters, onCharacterClick }: FeaturedCarouselProps) {\n    // Start at middle for symmetrical display\n    const [currentIndex, setCurrentIndex] = useState(Math.floor(characters.length / 2))\n    const router = useRouter()\n\n    const goToPrevious = () => {\n        setCurrentIndex((prevIndex) =>\n            prevIndex === 0 ? characters.length - 1 : prevIndex - 1\n        )\n    }\n\n    const goToNext = () => {\n        setCurrentIndex((prevIndex) =>\n            prevIndex === characters.length - 1 ? 0 : prevIndex + 1\n        )\n    }\n\n    const getCardStyle = (index: number) => {\n        const diff = index - currentIndex\n        const absPos = Math.abs(diff)\n\n        if (absPos > 2) return { display: 'none' as const }\n\n        // Center card\n        if (diff === 0) {\n            return {\n                transform: 'translateX(0) translateZ(0) scale(1)',\n                opacity: 1,\n                zIndex: 3\n            }\n        }\n\n        // Side cards\n        return {\n            transform: `translateX(${diff * 280}px) translateZ(-${absPos * 200}px) scale(${1 - absPos * 0.15})`,\n            opacity: 1 - absPos * 0.3,\n            zIndex: 3 - absPos\n        }\n    }\n\n    const handleCardClick = (character: FeaturedCharacter, isCenter: boolean) => {\n        if (isCenter) {\n            if (onCharacterClick) {\n                onCharacterClick(character)\n            } else {\n                router.push(`/character/${character.id}`)\n            }\n        } else {\n            // Navigate to this card\n            const index = characters.findIndex(c => c.id === character.id)\n            if (index !== -1) setCurrentIndex(index)\n        }\n    }\n\n    if (characters.length === 0) return null\n\n    return (\n        <div className=\"w-full py-8\">\n            <div className=\"w-full max-w-7xl mx-auto\">\n                {/* Carousel Container */}\n                <div className=\"relative\" style={{ perspective: '2000px' }}>\n                    {/* Navigation Buttons */}\n                    <button\n                        onClick={goToPrevious}\n                        className=\"absolute left-4 top-1/2 -translate-y-1/2 z-10 w-12 h-12 bg-rp-surface text-rp-iris border-2 border-rp-iris hover:bg-rp-iris hover:text-white rounded-full flex items-center justify-center transition-all\"\n                        aria-label=\"Previous\"\n                    >\n                        <IconChevronLeft size={32} />\n                    </button>\n\n                    <button\n                        onClick={goToNext}\n                        className=\"absolute right-4 top-1/2 -translate-y-1/2 z-10 w-12 h-12 bg-rp-surface text-rp-iris border-2 border-rp-iris hover:bg-rp-iris hover:text-white rounded-full flex items-center justify-center transition-all\"\n                        aria-label=\"Next\"\n                    >\n                        <IconChevronRight size={32} />\n                    </button>\n\n                    {/* Cards Container */}\n                    <div className=\"relative h-[600px] flex items-center justify-center\" style={{ transformStyle: 'preserve-3d' }}>\n                        {characters.map((character, index) => {\n                            const isCenter = index === currentIndex\n                            return (\n                                <div\n                                    key={character.id}\n                                    className=\"absolute transition-all duration-500 ease-out cursor-pointer\"\n                                    style={getCardStyle(index)}\n                                    onClick={() => handleCardClick(character, isCenter)}\n                                >\n                                    {/* Card */}\n                                    <div className={cn(\n                                        \"relative w-[320px] h-[480px] rounded-xl overflow-hidden group\",\n                                        \"border-2 transition-all duration-300\",\n                                        isCenter ? \"border-rp-iris/60\" : \"border-rp-muted/20\"\n                                    )}>\n                                        {/* Character Image */}\n                                        <Image\n                                            src={character.imageUrl}\n                                            alt={character.name}\n                                            fill\n                                            className=\"object-cover transition-transform duration-500 group-hover:scale-110\"\n                                            sizes=\"320px\"\n                                            priority={index < 3}\n                                        />\n\n                                        {/* Card Content */}\n                                        <div className=\"absolute bottom-0 left-0 right-0 p-6\">\n                                            <h3 className=\"text-white text-2xl font-bold mb-4 font-tiempos-headline\" style={{ textShadow: '0 2px 8px rgba(0,0,0,0.8), 0 0 20px rgba(0,0,0,0.5)' }}>\n                                                {character.name}\n                                            </h3>\n\n                                            {/* Button - only show on center card */}\n                                            {isCenter && (\n                                                <button\n                                                    className={cn(\n                                                        \"inline-flex items-center gap-2 px-6 py-3 rounded-lg transition-all transform hover:scale-105 shadow-lg font-semibold\",\n                                                        \"bg-gradient-to-r from-rp-iris to-rp-rose text-rp-base\",\n                                                        \"hover:from-rp-iris/80 hover:to-rp-rose/80\"\n                                                    )}\n                                                    onClick={(e) => {\n                                                        e.stopPropagation()\n                                                        handleCardClick(character, true)\n                                                    }}\n                                                >\n                                                    <span>Chat Now</span>\n                                                </button>\n                                            )}\n                                        </div>\n\n                                        {/* Hover Border Effect */}\n                                        <div className={cn(\n                                            \"absolute inset-0 rounded-xl transition-all duration-300\",\n                                            \"border-2\",\n                                            isCenter ? \"border-rp-iris/30\" : \"border-white/0 group-hover:border-white/30\"\n                                        )}></div>\n                                    </div>\n                                </div>\n                            )\n                        })}\n                    </div>\n\n                    {/* Dots Navigation */}\n                    <div className=\"flex justify-center gap-2 mt-8\">\n                        {characters.map((_, index) => (\n                            <button\n                                key={index}\n                                onClick={() => setCurrentIndex(index)}\n                                className={cn(\n                                    \"h-2 rounded-full transition-all\",\n                                    index === currentIndex\n                                        ? 'bg-rp-iris w-8'\n                                        : 'bg-rp-muted/30 hover:bg-rp-muted/50 w-2'\n                                )}\n                                aria-label={`Go to slide ${index + 1}`}\n                            />\n                        ))}\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/discovery/TrendingCarousel.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":60,"column":27,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":60,"endColumn":58,"fix":{"range":[1924,1943],"text":"text-rp-iris size-5"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":61,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":61,"endColumn":68,"fix":{"range":[1983,2014],"text":"text-rp-iris text-2xl font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":100,"column":40,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":103,"endColumn":30,"fix":{"range":[3689,3800],"text":"bg-rp-surface group relative w-72 overflow-hidden rounded-2xl border border-white/5 transition-all duration-300"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":3,"source":"\"use client\"\n\nimport { useRef, useState, useEffect } from \"react\"\nimport Link from \"next/link\"\nimport Image from \"next/image\"\nimport { Button } from \"@/components/ui/button\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { ChevronLeft, ChevronRight, Star, MessageCircle } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\n\ninterface TrendingPersona {\n    id: string\n    name: string\n    imageUrl: string | null\n    description: string | null\n    totalChats: number\n    isFeatured: boolean\n}\n\ninterface TrendingCarouselProps {\n    personas: TrendingPersona[]\n}\n\n// Format large numbers\nfunction formatCount(count: number): string {\n    if (count >= 1000000) return `${(count / 1000000).toFixed(1)}M`\n    if (count >= 1000) return `${(count / 1000).toFixed(1)}K`\n    return count.toString()\n}\n\nexport function TrendingCarousel({ personas }: TrendingCarouselProps) {\n    const scrollRef = useRef<HTMLDivElement>(null)\n    const [canScrollLeft, setCanScrollLeft] = useState(false)\n    const [canScrollRight, setCanScrollRight] = useState(true)\n\n    const updateScrollState = () => {\n        if (!scrollRef.current) return\n        const { scrollLeft, scrollWidth, clientWidth } = scrollRef.current\n        setCanScrollLeft(scrollLeft > 0)\n        setCanScrollRight(scrollLeft < scrollWidth - clientWidth - 10)\n    }\n\n    useEffect(() => {\n        updateScrollState()\n    }, [personas])\n\n    const scroll = (direction: \"left\" | \"right\") => {\n        if (!scrollRef.current) return\n        const scrollAmount = direction === \"left\" ? -320 : 320\n        scrollRef.current.scrollBy({ left: scrollAmount, behavior: \"smooth\" })\n    }\n\n    if (personas.length === 0) return null\n\n    return (\n        <div className=\"relative\">\n            {/* Section Header */}\n            <div className=\"mb-4 flex items-center justify-between\">\n                <div className=\"flex items-center gap-2\">\n                    <Star className=\"size-5 text-rp-iris\" />\n                    <h2 className=\"text-2xl font-bold text-rp-iris\">Featured Souls</h2>\n                </div>\n\n                {/* Arrow Buttons */}\n                <div className=\"flex gap-2\">\n                    <Button\n                        variant=\"ghost\"\n                        size=\"icon\"\n                        onClick={() => scroll(\"left\")}\n                        disabled={!canScrollLeft}\n                        className=\"bg-rp-overlay text-rp-text hover:bg-rp-overlay/80 min-h-[44px] min-w-[44px] rounded-full disabled:opacity-30\"\n                    >\n                        <ChevronLeft className=\"size-5\" />\n                    </Button>\n                    <Button\n                        variant=\"ghost\"\n                        size=\"icon\"\n                        onClick={() => scroll(\"right\")}\n                        disabled={!canScrollRight}\n                        className=\"bg-rp-overlay text-rp-text hover:bg-rp-overlay/80 min-h-[44px] min-w-[44px] rounded-full disabled:opacity-30\"\n                    >\n                        <ChevronRight className=\"size-5\" />\n                    </Button>\n                </div>\n            </div>\n\n            {/* Carousel Container */}\n            <div\n                ref={scrollRef}\n                onScroll={updateScrollState}\n                className=\"scrollbar-hide flex gap-4 overflow-x-auto pb-2\"\n            >\n                {personas.map((persona) => (\n                    <Link\n                        key={persona.id}\n                        href={`/character/${persona.id}`}\n                        className=\"block shrink-0\"\n                    >\n                        <div\n                            className={cn(\n                                \"border-white/5 bg-rp-surface group relative w-72 overflow-hidden rounded-2xl border transition-all duration-300\",\n                                \"hover:border-rp-gold/30 hover:shadow-rp-gold/20 hover:scale-[1.02] hover:shadow-lg\"\n                            )}\n                        >\n                            {/* Image */}\n                            <div className=\"relative aspect-[4/3] w-full overflow-hidden\">\n                                {persona.imageUrl ? (\n                                    <Image\n                                        src={persona.imageUrl}\n                                        alt={persona.name}\n                                        fill\n                                        className=\"object-cover transition-transform duration-500 group-hover:scale-110\"\n                                        sizes=\"288px\"\n                                    />\n                                ) : (\n                                    <div className=\"from-rp-gold/50 to-rp-iris/50 flex size-full items-center justify-center bg-gradient-to-br\">\n                                        <span className=\"text-rp-text/50 text-5xl font-bold\">\n                                            {persona.name.slice(0, 2).toUpperCase()}\n                                        </span>\n                                    </div>\n                                )}\n\n                                {/* Gradient Overlay */}\n                                <div className=\"from-rp-base/90 via-rp-base/30 absolute inset-0 bg-gradient-to-t to-transparent\" />\n\n                                {/* Featured Badge */}\n                                {persona.isFeatured && (\n                                    <Badge className=\"bg-rp-gold/90 text-rp-base absolute left-3 top-3 gap-1 rounded-full border-0 px-2 py-0.5 text-xs\">\n                                        <Star className=\"size-3 fill-current\" />\n                                        Featured\n                                    </Badge>\n                                )}\n\n                                {/* Stats */}\n                                <div className=\"absolute right-3 top-3\">\n                                    <Badge className=\"bg-rp-base/60 text-rp-text flex items-center gap-1 rounded-full border-0 px-2 py-1 text-xs backdrop-blur-sm\">\n                                        <MessageCircle className=\"size-3\" />\n                                        {formatCount(persona.totalChats)}\n                                    </Badge>\n                                </div>\n\n                                {/* Bottom Content */}\n                                <div className=\"absolute inset-x-0 bottom-0 p-4\">\n                                    <h3 className=\"text-rp-text mb-1 text-lg font-bold drop-shadow-lg\">\n                                        {persona.name}\n                                    </h3>\n                                    {persona.description && (\n                                        <p className=\"text-rp-subtle line-clamp-2 text-sm\">\n                                            {persona.description}\n                                        </p>\n                                    )}\n                                </div>\n                            </div>\n                        </div>\n                    </Link>\n                ))}\n            </div>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/gacha/GachaBanner.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":96,"column":24,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":96,"endColumn":95,"fix":{"range":[3402,3461],"text":"text-rp-text/70 mx-auto mt-2 max-w-2xl text-sm md:text-base"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":103,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":103,"endColumn":54,"fix":{"range":[3674,3698],"text":"w-full px-4 py-8 md:px-8"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":108,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":108,"endColumn":238,"fix":{"range":[3935,4136],"text":"bg-rp-surface text-rp-iris border-rp-iris hover:bg-rp-iris absolute left-4 top-1/2 z-10 flex h-12 w-12 -translate-y-1/2 items-center justify-center rounded-full border-2 transition-all hover:text-white"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-12, h-12' could be replaced by the 'size-12' shorthand!","line":108,"column":25,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":108,"endColumn":238,"fix":{"range":[3935,4136],"text":"absolute left-4 top-1/2 -translate-y-1/2 z-10 size-12 bg-rp-surface text-rp-iris border-2 border-rp-iris hover:bg-rp-iris hover:text-white rounded-full flex items-center justify-center transition-all"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":116,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":116,"endColumn":239,"fix":{"range":[4397,4599],"text":"bg-rp-surface text-rp-iris border-rp-iris hover:bg-rp-iris absolute right-4 top-1/2 z-10 flex h-12 w-12 -translate-y-1/2 items-center justify-center rounded-full border-2 transition-all hover:text-white"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-12, h-12' could be replaced by the 'size-12' shorthand!","line":116,"column":25,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":116,"endColumn":239,"fix":{"range":[4397,4599],"text":"absolute right-4 top-1/2 -translate-y-1/2 z-10 size-12 bg-rp-surface text-rp-iris border-2 border-rp-iris hover:bg-rp-iris hover:text-white rounded-full flex items-center justify-center transition-all"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":123,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":123,"endColumn":132,"fix":{"range":[4903,4997],"text":"relative flex h-[400px] items-center justify-center overflow-visible md:h-[500px] lg:h-[600px]"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":154,"column":41,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":154,"endColumn":150,"fix":{"range":[6737,6834],"text":"h-[320px] w-[220px] sm:h-[380px] sm:w-[260px] md:h-[440px] md:w-[300px] lg:h-[480px] lg:w-[320px]"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":188,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":188,"endColumn":70,"fix":{"range":[8367,8407],"text":"mt-8 flex flex-wrap justify-center gap-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":197,"column":32,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":204,"endColumn":22,"fix":{"range":[8772,8837],"text":"relative overflow-hidden rounded-full px-8 py-4 text-lg font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":223,"column":32,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":231,"endColumn":22,"fix":{"range":[10025,10090],"text":"relative overflow-hidden rounded-full px-8 py-4 text-lg font-bold"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":11,"source":"\"use client\"\n\nimport { useState, useEffect, useRef } from \"react\"\nimport Image from \"next/image\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { IconChevronLeft, IconChevronRight, IconDiamond, IconSparkles, IconStar } from \"@tabler/icons-react\"\nimport { GachaPool, GachaPoolItem, SINGLE_PULL_COST, TEN_PULL_COST, RARITY_COLORS } from \"@/lib/hooks/use-gacha\"\nimport { HolographicCard } from \"./HolographicCard\"\n\nimport { TYPOGRAPHY } from \"@/lib/design-system\"\nimport { useSFX } from \"@/lib/hooks/use-sfx\"\n\ninterface GachaBannerProps {\n    pools: GachaPool[]\n    poolItems: Record<string, GachaPoolItem[]>\n    userBalance: number\n    onSinglePull: (poolId: string) => void\n    onTenPull: (poolId: string) => void\n    onPoolChange?: (poolId: string) => void\n    isPulling?: boolean\n    className?: string\n}\n\nexport function GachaBanner({\n    pools,\n    poolItems,\n    userBalance,\n    onSinglePull,\n    onTenPull,\n    onPoolChange,\n    isPulling = false,\n    className\n}: GachaBannerProps) {\n    const [currentIndex, setCurrentIndex] = useState(0) // Pool index\n    const [cardIndex, setCardIndex] = useState(0) // Card carousel index\n\n    const carouselRef = useRef<HTMLDivElement>(null)\n    const { playClick, playHover, playSuccess } = useSFX()\n\n    const currentPool = pools[currentIndex]\n    const currentItems = currentPool ? (poolItems[currentPool.id] || []) : []\n    const featuredItems = currentItems.filter(item => item.is_featured)\n\n    // Initialize card index to center when pool or items change\n    useEffect(() => {\n        setCardIndex(Math.floor(featuredItems.length / 2))\n    }, [currentPool, featuredItems.length])\n\n    // Notify parent when pool changes\n    useEffect(() => {\n        if (currentPool) {\n            onPoolChange?.(currentPool.id)\n        }\n    }, [currentPool, onPoolChange])\n\n    const goToPrevious = () => {\n        playClick()\n        setCardIndex(prev => (prev === 0 ? featuredItems.length - 1 : prev - 1))\n    }\n\n    const goToNext = () => {\n        playClick()\n        setCardIndex(prev => (prev === featuredItems.length - 1 ? 0 : prev + 1))\n    }\n\n    const canAffordSingle = userBalance >= SINGLE_PULL_COST\n    const canAffordTen = userBalance >= TEN_PULL_COST\n\n    if (pools.length === 0) {\n        return (\n            <div className={cn(\n                \"flex flex-col items-center justify-center rounded-3xl p-12\",\n                \"bg-rp-surface\",\n                \"border-rp-muted/20 border\",\n                className\n            )}>\n                <IconSparkles size={48} className=\"text-rp-muted mb-4\" />\n                <h3 className={`${TYPOGRAPHY.heading.h3} text-rp-subtle`}>No Active Banners</h3>\n                <p className=\"text-rp-muted mt-1 text-sm\">Check back later for new soul summons!</p>\n            </div>\n        )\n    }\n\n    return (\n        <div className={cn(\"relative w-full\", className)}>\n            {/* Section Header */}\n            <div className=\"mb-8 px-6 text-center\">\n                <h2 className={`${TYPOGRAPHY.heading.h2} text-rp-text mb-2 inline-flex items-center gap-2`}>\n                    <IconStar className=\"text-rp-gold\" />\n                    {currentPool.name}\n                    <IconStar className=\"text-rp-gold\" />\n                </h2>\n                {currentPool.description && (\n                    <p className=\"text-rp-text/70 max-w-2xl mx-auto text-sm md:text-base mt-2\">\n                        {currentPool.description}\n                    </p>\n                )}\n            </div>\n\n            {/* 3D Carousel with Holographic Cards - Full Width */}\n            <div className=\"w-full py-8 px-4 md:px-8\">\n                <div className=\"relative\" style={{ perspective: '2000px' }}>\n                    {/* Navigation Buttons */}\n                    <button\n                        onClick={goToPrevious}\n                        className=\"absolute left-4 top-1/2 -translate-y-1/2 z-10 w-12 h-12 bg-rp-surface text-rp-iris border-2 border-rp-iris hover:bg-rp-iris hover:text-white rounded-full flex items-center justify-center transition-all\"\n                        aria-label=\"Previous\"\n                    >\n                        <IconChevronLeft size={32} />\n                    </button>\n\n                    <button\n                        onClick={goToNext}\n                        className=\"absolute right-4 top-1/2 -translate-y-1/2 z-10 w-12 h-12 bg-rp-surface text-rp-iris border-2 border-rp-iris hover:bg-rp-iris hover:text-white rounded-full flex items-center justify-center transition-all\"\n                        aria-label=\"Next\"\n                    >\n                        <IconChevronRight size={32} />\n                    </button>\n\n                    {/* Cards Container with 3D Transform - Responsive (Matches Home Page h-[600px] on Desktop) */}\n                    <div className=\"relative h-[400px] md:h-[500px] lg:h-[600px] flex items-center justify-center overflow-visible\" style={{ transformStyle: 'preserve-3d' }}>\n                        {featuredItems.map((item, index) => {\n                            const diff = index - cardIndex\n                            const absPos = Math.abs(diff)\n\n                            if (absPos > 2) return null\n\n                            const isCenter = diff === 0\n\n                            // Premium responsive spacing to prevent cutoff\n                            const baseSpacing = 160 // mobile\n                            const spacing = diff * baseSpacing\n\n                            const cardStyle = {\n                                transform: isCenter\n                                    ? 'translateX(0) translateZ(0) scale(1)'\n                                    : `translateX(calc(${spacing}px + ${diff * 60}px * ((100vw - 640px) / (1024px - 640px)))) translateZ(-${absPos * 200}px) scale(${1 - absPos * 0.15})`,\n                                opacity: isCenter ? 1 : 1 - absPos * 0.3,\n                                zIndex: isCenter ? 3 : 3 - absPos\n                            }\n\n                            return (\n                                <div\n                                    key={item.id}\n                                    className=\"absolute transition-all duration-500 ease-out\"\n                                    style={cardStyle}\n                                >\n                                    <HolographicCard\n                                        imageUrl={item.persona?.image_url || \"/images/placeholder-soul.png\"}\n                                        name={item.persona?.name || \"Unknown Soul\"}\n                                        rarity={item.rarity}\n                                        className=\"w-[220px] h-[320px] sm:w-[260px] sm:h-[380px] md:w-[300px] md:h-[440px] lg:w-[320px] lg:h-[480px]\"\n                                        showBadge={true}\n                                        onClick={() => {\n                                            if (!isCenter) {\n                                                setCardIndex(index)\n                                            }\n                                        }}\n                                    />\n                                </div>\n                            )\n                        })}\n                    </div>\n\n                    {/* Pool Indicators */}\n                    {featuredItems.length > 1 && (\n                        <div className=\"mt-8 flex justify-center gap-2\">\n                            {featuredItems.map((_, index) => (\n                                <button\n                                    key={index}\n                                    onClick={() => setCardIndex(index)}\n                                    className={cn(\n                                        \"h-2 rounded-full transition-all duration-300\",\n                                        index === cardIndex\n                                            ? \"from-rp-iris to-rp-foam w-8 bg-gradient-to-r\"\n                                            : \"bg-rp-muted/30 hover:bg-rp-muted/50 w-2\"\n                                    )}\n                                />\n                            ))}\n                        </div>\n                    )}\n                </div>\n            </div>\n\n            {/* Pull Buttons */}\n            <div className=\"flex flex-wrap justify-center gap-4 mt-8\">\n                {/* Single Pull */}\n                <Button\n                    size=\"lg\"\n                    disabled={!canAffordSingle || isPulling}\n                    onClick={() => {\n                        playSuccess()\n                        onSinglePull(currentPool.id)\n                    }}\n                    className={cn(\n                        \"relative overflow-hidden rounded-full px-8 py-4 font-bold text-lg\",\n                        \"from-rp-iris to-rp-pine bg-gradient-to-r\",\n                        \"hover:opacity-90\",\n                        \"disabled:cursor-not-allowed disabled:opacity-50\",\n                        \"text-rp-base transition-all duration-300 hover:scale-105\",\n                        \"shadow-rp-iris/30 shadow-lg\"\n                    )}\n                >\n                    <span className=\"flex items-center gap-2\">\n                        <span>Single Pull</span>\n                        <span className=\"bg-rp-base/30 flex items-center gap-1 rounded-full px-3 py-1\">\n                            <IconDiamond size={16} className=\"text-rp-gold\" />\n                            <span className=\"text-rp-gold\">{SINGLE_PULL_COST}</span>\n                        </span>\n                    </span>\n                </Button>\n\n                {/* 10-Pull */}\n                <Button\n                    size=\"lg\"\n                    disabled={!canAffordTen || isPulling}\n                    onClick={() => {\n                        playSuccess()\n                        onTenPull(currentPool.id)\n                    }}\n                    className={cn(\n                        \"relative overflow-hidden rounded-full px-8 py-4 font-bold text-lg\",\n                        \"from-rp-gold to-rp-rose bg-gradient-to-r\",\n                        \"hover:opacity-90\",\n                        \"text-rp-base\",\n                        \"disabled:cursor-not-allowed disabled:opacity-50\",\n                        \"transition-all duration-300 hover:scale-105\",\n                        \"shadow-rp-gold/30 shadow-lg\"\n                    )}\n                >\n                    <span className=\"flex items-center gap-2\">\n                        <IconSparkles size={20} />\n                        <span>10-Pull</span>\n                        <span className=\"bg-rp-base/20 flex items-center gap-1 rounded-full px-3 py-1\">\n                            <IconDiamond size={16} />\n                            <span>{TEN_PULL_COST}</span>\n                        </span>\n                    </span>\n                </Button>\n            </div>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/gacha/HolographicCard.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":90,"column":24,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":94,"endColumn":14,"fix":{"range":[2606,2635],"text":"group relative cursor-pointer"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":100,"column":17,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":100,"endColumn":126,"fix":{"range":[2869,2966],"text":"relative h-full w-full overflow-hidden rounded-xl shadow-2xl transition-all duration-200 ease-out"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-full, h-full' could be replaced by the 'size-full' shorthand!","line":100,"column":17,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":100,"endColumn":126,"fix":{"range":[2869,2966],"text":"relative size-full rounded-xl overflow-hidden shadow-2xl transition-all duration-200 ease-out"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":115,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":115,"endColumn":101,"fix":{"range":[3606,3669],"text":"bg-rp-surface relative h-full w-full overflow-hidden rounded-lg"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-full, h-full' could be replaced by the 'size-full' shorthand!","line":115,"column":26,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":115,"endColumn":101,"fix":{"range":[3606,3669],"text":"relative size-full bg-rp-surface rounded-lg overflow-hidden"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":117,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":117,"endColumn":64,"fix":{"range":[3760,3782],"text":"relative h-full w-full"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-full, h-full' could be replaced by the 'size-full' shorthand!","line":117,"column":30,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":117,"endColumn":64,"fix":{"range":[3760,3782],"text":"relative size-full"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":128,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":128,"endColumn":77,"fix":{"range":[4187,4223],"text":"pointer-events-none absolute inset-0"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":159,"column":33,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":159,"endColumn":95,"fix":{"range":[6136,6186],"text":"pointer-events-none absolute inset-0 animate-pulse"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":173,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":173,"endColumn":77,"fix":{"range":[6995,7031],"text":"pointer-events-none absolute inset-0"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":193,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":193,"endColumn":161,"fix":{"range":[7937,8061],"text":"absolute bottom-2 left-1/2 z-10 -translate-x-1/2 rounded-full px-3 py-1 text-sm font-bold uppercase tracking-wider shadow-lg"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":11,"source":"\"use client\"\n\nimport { useState, useRef, MouseEvent } from \"react\"\nimport Image from \"next/image\"\nimport { cn } from \"@/lib/utils\"\nimport { Badge } from \"@/components/ui/badge\"\n\ntype Rarity = \"common\" | \"rare\" | \"epic\" | \"legendary\"\n\ninterface HolographicCardProps {\n    imageUrl: string\n    name: string\n    rarity: Rarity\n    className?: string\n    showBadge?: boolean\n    onClick?: () => void\n}\n\nconst RARITY_COLORS = {\n    common: {\n        primary: \"rgb(59, 130, 246)\", // blue\n        glow: \"rgba(59, 130, 246, 0.6)\",\n        gradient: \"linear-gradient(135deg, #3b82f6 0%, #60a5fa 100%)\"\n    },\n    rare: {\n        primary: \"rgb(168, 85, 247)\", // purple\n        glow: \"rgba(168, 85, 247, 0.6)\",\n        gradient: \"linear-gradient(135deg, #a855f7 0%, #c084fc 100%)\"\n    },\n    epic: {\n        primary: \"rgb(236, 72, 153)\", // pink\n        glow: \"rgba(236, 72, 153, 0.6)\",\n        gradient: \"linear-gradient(135deg, #ec4899 0%, #f472b6 100%)\"\n    },\n    legendary: {\n        primary: \"rgb(245, 158, 11)\", // gold\n        glow: \"rgba(245, 158, 11, 0.8)\",\n        gradient: \"linear-gradient(135deg, #f59e0b 0%, #fbbf24 50%, #f59e0b 100%)\"\n    }\n}\n\nexport function HolographicCard({\n    imageUrl,\n    name,\n    rarity,\n    className,\n    showBadge = true,\n    onClick\n}: HolographicCardProps) {\n    const cardRef = useRef<HTMLDivElement>(null)\n    const [rotateX, setRotateX] = useState(0)\n    const [rotateY, setRotateY] = useState(0)\n    const [glarePosition, setGlarePosition] = useState({ x: 50, y: 50 })\n\n    const handleMouseMove = (e: MouseEvent<HTMLDivElement>) => {\n        if (!cardRef.current) return\n\n        const card = cardRef.current\n        const rect = card.getBoundingClientRect()\n        const x = e.clientX - rect.left\n        const y = e.clientY - rect.top\n        const centerX = rect.width / 2\n        const centerY = rect.height / 2\n\n        // Calculate rotation (-15 to 15 degrees)\n        const rotY = ((x - centerX) / centerX) * 15\n        const rotX = ((centerY - y) / centerY) * 15\n\n        setRotateX(rotX)\n        setRotateY(rotY)\n\n        // Calculate glare position (0-100%)\n        const glareX = (x / rect.width) * 100\n        const glareY = (y / rect.height) * 100\n        setGlarePosition({ x: glareX, y: glareY })\n    }\n\n    const handleMouseLeave = () => {\n        setRotateX(0)\n        setRotateY(0)\n        setGlarePosition({ x: 50, y: 50 })\n    }\n\n    return (\n        <div\n            ref={cardRef}\n            onMouseMove={handleMouseMove}\n            onMouseLeave={handleMouseLeave}\n            onClick={onClick}\n            className={cn(\n                \"relative group cursor-pointer\",\n                \"transition-transform duration-200 ease-out\",\n                className\n            )}\n            style={{\n                perspective: \"1000px\"\n            }}\n        >\n            <div\n                className=\"relative w-full h-full rounded-xl overflow-hidden shadow-2xl transition-all duration-200 ease-out\"\n                style={{\n                    transform: `rotateX(${rotateX}deg) rotateY(${rotateY}deg)`,\n                    transformStyle: \"preserve-3d\",\n                    boxShadow: `0 0 30px ${RARITY_COLORS[rarity].glow}, 0 10px 40px rgba(0,0,0,0.3)`\n                }}\n            >\n                {/* Card Border with Rarity Color */}\n                <div\n                    className=\"absolute inset-0 rounded-xl\"\n                    style={{\n                        background: RARITY_COLORS[rarity].gradient,\n                        padding: \"3px\"\n                    }}\n                >\n                    <div className=\"relative w-full h-full bg-rp-surface rounded-lg overflow-hidden\">\n                        {/* Character Image */}\n                        <div className=\"relative w-full h-full\">\n                            <Image\n                                src={imageUrl}\n                                alt={name}\n                                fill\n                                className=\"object-cover\"\n                            />\n                        </div>\n\n                        {/* Holographic Overlay */}\n                        <div\n                            className=\"absolute inset-0 pointer-events-none\"\n                            style={{\n                                background: rarity === \"legendary\"\n                                    ? `radial-gradient(circle at ${glarePosition.x}% ${glarePosition.y}%, \n                                        rgba(255,255,255,0.8) 0%,\n                                        rgba(255,215,0,0.5) 20%,\n                                        rgba(255,105,180,0.3) 40%,\n                                        rgba(138,43,226,0.2) 60%,\n                                        transparent 80%)`\n                                    : rarity === \"epic\"\n                                        ? `radial-gradient(circle at ${glarePosition.x}% ${glarePosition.y}%, \n                                        rgba(255,255,255,0.6) 0%,\n                                        rgba(236,72,153,0.4) 30%,\n                                        transparent 70%)`\n                                        : rarity === \"rare\"\n                                            ? `radial-gradient(circle at ${glarePosition.x}% ${glarePosition.y}%, \n                                        rgba(255,255,255,0.4) 0%,\n                                        rgba(168,85,247,0.3) 30%,\n                                        transparent 70%)`\n                                            : `radial-gradient(circle at ${glarePosition.x}% ${glarePosition.y}%, \n                                        rgba(255,255,255,0.2) 0%,\n                                        transparent 60%)`,\n                                mixBlendMode: \"overlay\",\n                                opacity: 0.7,\n                                transition: \"opacity 0.3s ease\"\n                            }}\n                        />\n\n                        {/* Sparkle Effect for Legendary */}\n                        {rarity === \"legendary\" && (\n                            <div\n                                className=\"absolute inset-0 pointer-events-none animate-pulse\"\n                                style={{\n                                    background: `\n                                        radial-gradient(circle at 20% 30%, rgba(255,255,255,0.3) 0%, transparent 2%),\n                                        radial-gradient(circle at 80% 20%, rgba(255,255,255,0.3) 0%, transparent 2%),\n                                        radial-gradient(circle at 70% 70%, rgba(255,255,255,0.3) 0%, transparent 2%),\n                                        radial-gradient(circle at 30% 80%, rgba(255,255,255,0.3) 0%, transparent 2%)\n                                    `\n                                }}\n                            />\n                        )}\n\n                        {/* Shimmer Line */}\n                        <div\n                            className=\"absolute inset-0 pointer-events-none\"\n                            style={{\n                                background: `linear-gradient(\n                                    ${Math.atan2(rotateX, rotateY) * (180 / Math.PI)}deg,\n                                    transparent 0%,\n                                    rgba(255,255,255,0.1) 45%,\n                                    rgba(255,255,255,0.3) 50%,\n                                    rgba(255,255,255,0.1) 55%,\n                                    transparent 100%\n                                )`,\n                                transform: `translateX(${rotateY * 2}px)`,\n                                transition: \"transform 0.1s ease-out\"\n                            }}\n                        />\n                    </div>\n                </div>\n\n                {/* Rarity Badge */}\n                {showBadge && (\n                    <Badge\n                        className=\"absolute bottom-2 left-1/2 -translate-x-1/2 z-10 rounded-full px-3 py-1 text-sm font-bold uppercase tracking-wider shadow-lg\"\n                        style={{\n                            background: RARITY_COLORS[rarity].gradient,\n                            color: rarity === \"legendary\" ? \"#191724\" : \"#faf4ed\",\n                            boxShadow: `0 0 15px ${RARITY_COLORS[rarity].glow}`\n                        }}\n                    >\n                        {rarity}\n                    </Badge>\n                )}\n            </div>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/gacha/PullResult.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":31,"column":21,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":31,"endColumn":69,"fix":{"range":[1080,1116],"text":"mx-auto aspect-[2/3] w-full max-w-sm"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"\"use client\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Plus, Coins } from \"lucide-react\"\nimport { PullResult as PullResultType, RARITY_COLORS } from \"@/lib/hooks/use-gacha\"\nimport { HolographicCard } from \"./HolographicCard\"\n\n// This is the single-card display used by PullAnimation\ninterface PullCardProps {\n    result: PullResultType\n    onAddToLibrary: (personaId: string) => void\n    onConvertToAether: (pullId: string) => void\n}\n\nexport function PullResult({\n    result,\n    onAddToLibrary,\n    onConvertToAether\n}: PullCardProps) {\n    const rarityColor = RARITY_COLORS[result.rarity]\n\n    return (\n        <div className=\"flex flex-col items-center gap-4\">\n            {/* Character Card with Holographic Effect */}\n            <div className=\"relative mb-6\">\n                <HolographicCard\n                    imageUrl={result.persona?.image_url || \"/images/placeholder-soul.png\"}\n                    name={result.persona?.name || \"Unknown Soul\"}\n                    rarity={result.rarity}\n                    className=\"w-full max-w-sm mx-auto aspect-[2/3]\"\n                    showBadge={false}\n                />\n            </div>\n\n            {/* Actions */}\n            <div className=\"flex gap-3\">\n                <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => onConvertToAether(result.id)}\n                >\n                    <Coins className=\"mr-2 size-4\" />\n                    Convert (5 Aether)\n                </Button>\n                <Button\n                    size=\"sm\"\n                    onClick={() => onAddToLibrary(result.persona_id)}\n                >\n                    <Plus className=\"mr-2 size-4\" />\n                    Add to Library\n                </Button>\n            </div>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/knowledge/MemorySharing.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":91,"column":14,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":91,"endColumn":99,"fix":{"range":[2811,2884],"text":"mt-2 flex flex-col gap-4 rounded-xl border border-white/10 bg-white/5 p-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":104,"column":24,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":104,"endColumn":84,"fix":{"range":[3497,3545],"text":"relative inline-flex cursor-pointer items-center"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":107,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":107,"endColumn":49,"fix":{"range":[3650,3662],"text":"peer sr-only"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":111,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":111,"endColumn":412,"fix":{"range":[3849,4223],"text":"peer h-6 w-11 rounded-full bg-white/10 after:absolute after:start-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-blue-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none rtl:peer-checked:after:-translate-x-full"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'after:h-5, after:w-5' could be replaced by the 'after:size-5' shorthand!","line":111,"column":26,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":111,"endColumn":412,"fix":{"range":[3849,4223],"text":"w-11 h-6 bg-white/10 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:size-5 after:transition-all peer-checked:bg-blue-600"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":126,"column":33,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":126,"endColumn":200,"fix":{"range":[4847,5002],"text":"flex w-full items-center justify-between rounded-lg border border-white/10 bg-white/5 px-4 py-2.5 text-sm text-white/60 transition-colors hover:bg-white/10"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":141,"column":37,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":141,"endColumn":148,"fix":{"range":[5891,5990],"text":"absolute z-50 mt-2 w-full overflow-hidden rounded-xl border border-white/10 bg-[#1a1a1a] shadow-2xl"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":143,"column":42,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":143,"endColumn":82,"fix":{"range":[6078,6106],"text":"border-b border-white/10 p-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":149,"column":49,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":149,"endColumn":174,"fix":{"range":[6560,6673],"text":"w-full rounded-lg bg-white/5 py-1.5 pl-9 pr-3 text-sm text-white ring-blue-500/50 focus:outline-none focus:ring-1"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":160,"column":49,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":160,"endColumn":163,"fix":{"range":[7401,7503],"text":"group flex w-full items-center gap-3 rounded-lg px-3 py-2 text-left transition-colors hover:bg-white/5"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":162,"column":54,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":162,"endColumn":123,"fix":{"range":[7615,7672],"text":"relative h-8 w-8 overflow-hidden rounded-full bg-white/10"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-8, h-8' could be replaced by the 'size-8' shorthand!","line":162,"column":54,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":162,"endColumn":123,"fix":{"range":[7615,7672],"text":"relative size-8 rounded-full overflow-hidden bg-white/10"}},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":164,"column":57,"nodeType":"JSXOpeningElement","endLine":164,"endColumn":146},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":164,"column":105,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":164,"endColumn":143,"fix":{"range":[7865,7891],"text":"h-full w-full object-cover"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-full, h-full' could be replaced by the 'size-full' shorthand!","line":164,"column":105,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":164,"endColumn":143,"fix":{"range":[7865,7891],"text":"size-full object-cover"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":169,"column":54,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":169,"endColumn":80,"fix":{"range":[8257,8271],"text":"min-w-0 flex-1"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":170,"column":56,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":170,"endColumn":107,"fix":{"range":[8340,8379],"text":"truncate text-sm font-medium text-white"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":173,"column":58,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":173,"endColumn":135,"fix":{"range":[8617,8682],"text":"flex h-5 w-5 items-center justify-center rounded-full bg-blue-500"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-5, h-5' could be replaced by the 'size-5' shorthand!","line":173,"column":58,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":173,"endColumn":135,"fix":{"range":[8617,8682],"text":"size-5 rounded-full bg-blue-500 flex items-center justify-center"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":180,"column":50,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":180,"endColumn":106,"fix":{"range":[9132,9176],"text":"p-4 text-center text-xs italic text-white/40"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":193,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":193,"endColumn":106,"fix":{"range":[9629,9701],"text":"flex animate-pulse items-center gap-1 self-end text-[10px] text-blue-400"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":194,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":194,"endColumn":83,"fix":{"range":[9740,9785],"text":"h-1 w-1 animate-ping rounded-full bg-blue-400"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-1, h-1' could be replaced by the 'size-1' shorthand!","line":194,"column":26,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":194,"endColumn":83,"fix":{"range":[9740,9785],"text":"size-1 bg-blue-400 rounded-full animate-ping"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":23,"fixableErrorCount":0,"fixableWarningCount":22,"source":"'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport {\n    IconGlobe,\n    IconLock,\n    IconChevronDown,\n    IconCheck,\n    IconUser,\n    IconSearch\n} from '@tabler/icons-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { getPersonasByOwnerId } from '@/db/personas';\nimport { toast } from 'sonner';\n\ninterface MemorySharingProps {\n    memoryId: string;\n    initialSharedWithAll: boolean;\n    initialPersonaIds: string[];\n    userId: string;\n    onUpdate: (sharedWithAll: boolean, personaIds: string[]) => void;\n}\n\nexport const MemorySharing: React.FC<MemorySharingProps> = ({\n    memoryId,\n    initialSharedWithAll,\n    initialPersonaIds,\n    userId,\n    onUpdate,\n}) => {\n    const [isSharedWithAll, setIsSharedWithAll] = useState(initialSharedWithAll);\n    const [selectedPersonaIds, setSelectedPersonaIds] = useState<string[]>(initialPersonaIds);\n    const [personas, setPersonas] = useState<any[]>([]);\n    const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n    const [searchQuery, setSearchQuery] = useState('');\n    const [saving, setSaving] = useState(false);\n\n    useEffect(() => {\n        const fetchPersonas = async () => {\n            if (userId) {\n                const data = await getPersonasByOwnerId(userId);\n                setPersonas(data);\n            }\n        };\n        fetchPersonas();\n    }, [userId]);\n\n    const handleToggleAll = async (checked: boolean) => {\n        setIsSharedWithAll(checked);\n        updateSharing(checked, selectedPersonaIds);\n    };\n\n    const togglePersona = (personaId: string) => {\n        const newSelection = selectedPersonaIds.includes(personaId)\n            ? selectedPersonaIds.filter(id => id !== personaId)\n            : [...selectedPersonaIds, personaId];\n\n        setSelectedPersonaIds(newSelection);\n        updateSharing(isSharedWithAll, newSelection);\n    };\n\n    const updateSharing = async (sharedAll: boolean, pIds: string[]) => {\n        setSaving(true);\n        try {\n            const res = await fetch('/api/v2/knowledge', {\n                method: 'PATCH',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({\n                    id: memoryId,\n                    shared_with_all: sharedAll,\n                    persona_ids: pIds\n                })\n            });\n\n            if (!res.ok) throw new Error('Failed to update sharing settings');\n\n            onUpdate(sharedAll, pIds);\n        } catch (error) {\n            console.error(error);\n            toast.error('Failed to save sharing settings');\n        } finally {\n            setSaving(false);\n        }\n    };\n\n    const filteredPersonas = personas.filter(p =>\n        p.name.toLowerCase().includes(searchQuery.toLowerCase())\n    );\n\n    return (\n        <div className=\"flex flex-col gap-4 p-4 bg-white/5 rounded-xl border border-white/10 mt-2\">\n            <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-2\">\n                    {isSharedWithAll ? (\n                        <IconGlobe size={16} className=\"text-blue-400\" />\n                    ) : (\n                        <IconLock size={16} className=\"text-white/40\" />\n                    )}\n                    <span className=\"text-sm font-medium text-white/80\">\n                        {isSharedWithAll ? 'Shared with all Souls' : 'Private / Selective'}\n                    </span>\n                </div>\n\n                <label className=\"relative inline-flex items-center cursor-pointer\">\n                    <input\n                        type=\"checkbox\"\n                        className=\"sr-only peer\"\n                        checked={isSharedWithAll}\n                        onChange={(e) => handleToggleAll(e.target.checked)}\n                    />\n                    <div className=\"w-11 h-6 bg-white/10 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600\"></div>\n                </label>\n            </div>\n\n            <AnimatePresence>\n                {!isSharedWithAll && (\n                    <motion.div\n                        initial={{ height: 0, opacity: 0 }}\n                        animate={{ height: 'auto', opacity: 1 }}\n                        exit={{ height: 0, opacity: 0 }}\n                        className=\"overflow-hidden\"\n                    >\n                        <div className=\"relative\">\n                            <button\n                                onClick={() => setIsDropdownOpen(!isDropdownOpen)}\n                                className=\"w-full flex items-center justify-between px-4 py-2.5 bg-white/5 border border-white/10 rounded-lg text-sm text-white/60 hover:bg-white/10 transition-colors\"\n                            >\n                                <div className=\"flex items-center gap-2 truncate\">\n                                    <IconUser size={16} />\n                                    {selectedPersonaIds.length === 0\n                                        ? 'Select specific Souls...'\n                                        : `${selectedPersonaIds.length} Souls selected`}\n                                </div>\n                                <IconChevronDown size={16} className={`transition-transform ${isDropdownOpen ? 'rotate-180' : ''}`} />\n                            </button>\n\n                            {isDropdownOpen && (\n                                <motion.div\n                                    initial={{ y: 10, opacity: 0 }}\n                                    animate={{ y: 0, opacity: 1 }}\n                                    className=\"absolute z-50 w-full mt-2 bg-[#1a1a1a] border border-white/10 rounded-xl shadow-2xl overflow-hidden\"\n                                >\n                                    <div className=\"p-2 border-b border-white/10\">\n                                        <div className=\"relative\">\n                                            <IconSearch size={14} className=\"absolute left-3 top-1/2 -translate-y-1/2 text-white/40\" />\n                                            <input\n                                                type=\"text\"\n                                                placeholder=\"Search Souls...\"\n                                                className=\"w-full bg-white/5 rounded-lg py-1.5 pl-9 pr-3 text-sm text-white focus:outline-none focus:ring-1 ring-blue-500/50\"\n                                                value={searchQuery}\n                                                onChange={(e) => setSearchQuery(e.target.value)}\n                                            />\n                                        </div>\n                                    </div>\n                                    <div className=\"max-h-48 overflow-y-auto p-1\">\n                                        {filteredPersonas.map(persona => (\n                                            <button\n                                                key={persona.id}\n                                                onClick={() => togglePersona(persona.id)}\n                                                className=\"w-full flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-white/5 transition-colors text-left group\"\n                                            >\n                                                <div className=\"relative w-8 h-8 rounded-full overflow-hidden bg-white/10\">\n                                                    {persona.image_url ? (\n                                                        <img src={persona.image_url} alt={persona.name} className=\"w-full h-full object-cover\" />\n                                                    ) : (\n                                                        <IconUser size={16} className=\"absolute inset-0 m-auto text-white/20\" />\n                                                    )}\n                                                </div>\n                                                <div className=\"flex-1 min-w-0\">\n                                                    <p className=\"text-sm font-medium text-white truncate\">{persona.name}</p>\n                                                </div>\n                                                {selectedPersonaIds.includes(persona.id) && (\n                                                    <div className=\"w-5 h-5 rounded-full bg-blue-500 flex items-center justify-center\">\n                                                        <IconCheck size={12} className=\"text-white\" />\n                                                    </div>\n                                                )}\n                                            </button>\n                                        ))}\n                                        {filteredPersonas.length === 0 && (\n                                            <div className=\"p-4 text-center text-xs text-white/40 italic\">\n                                                No Souls found\n                                            </div>\n                                        )}\n                                    </div>\n                                </motion.div>\n                            )}\n                        </div>\n                    </motion.div>\n                )}\n            </AnimatePresence>\n\n            {saving && (\n                <div className=\"text-[10px] text-blue-400 animate-pulse self-end flex items-center gap-1\">\n                    <div className=\"w-1 h-1 bg-blue-400 rounded-full animate-ping\" />\n                    Saving settings...\n                </div>\n            )}\n        </div>\n    );\n};\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/knowledge/MemoryVault.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":129,"column":14,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":129,"endColumn":74,"fix":{"range":[4032,4080],"text":"mx-auto flex w-full max-w-4xl flex-col gap-8 p-6"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":131,"column":23,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":131,"endColumn":56,"fix":{"range":[4170,4191],"text":"h-8 w-8 text-blue-500"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-8, h-8' could be replaced by the 'size-8' shorthand!","line":131,"column":23,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":131,"endColumn":56,"fix":{"range":[4170,4191],"text":"size-8 text-blue-500"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":132,"column":21,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":132,"endColumn":126,"fix":{"range":[4227,4320],"text":"bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-3xl font-bold text-transparent"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":141,"column":17,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":144,"endColumn":24,"fix":{"range":[4796,4878],"text":"scale-[1.02] border-blue-500 bg-blue-500/10 shadow-[0_0_20px_rgba(59,130,246,0.5)]"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":141,"column":17,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":144,"endColumn":24,"fix":{"range":[4619,4760],"text":"`relative flex flex-col items-center justify-center gap-4 rounded-2xl border-2 border-dashed bg-opacity-5 p-12 transition-all duration-300 ${"}},{"ruleId":"tailwindcss/migration-from-tailwind-2","severity":1,"message":"Classname 'bg-opacity-5' should be replaced by an opacity suffix (eg. '/5')","line":141,"column":17,"nodeType":"JSXAttribute","messageId":"classnameOpacityDeprecated","endLine":144,"endColumn":24},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":148,"column":21,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":148,"endColumn":74,"fix":{"range":[5077,5118],"text":"absolute inset-0 cursor-pointer opacity-0"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":154,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":154,"endColumn":98,"fix":{"range":[5315,5375],"text":"flex w-full max-w-xs flex-col items-center gap-4 text-center"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":155,"column":34,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":155,"endColumn":82,"fix":{"range":[5422,5458],"text":"h-12 w-12 animate-spin text-blue-500"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-12, h-12' could be replaced by the 'size-12' shorthand!","line":155,"column":34,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":155,"endColumn":82,"fix":{"range":[5422,5458],"text":"size-12 text-blue-500 animate-spin"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":156,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":156,"endColumn":93,"fix":{"range":[5503,5554],"text":"h-2 w-full overflow-hidden rounded-full bg-white/10"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":163,"column":28,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":163,"endColumn":61,"fix":{"range":[5889,5910],"text":"text-sm text-white/60"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":167,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":167,"endColumn":112,"fix":{"range":[6066,6136],"text":"flex h-16 w-16 items-center justify-center rounded-full bg-blue-500/20"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-16, h-16' could be replaced by the 'size-16' shorthand!","line":167,"column":30,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":167,"endColumn":112,"fix":{"range":[6066,6136],"text":"size-16 rounded-full bg-blue-500/20 flex items-center justify-center"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":168,"column":37,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":168,"endColumn":110,"fix":{"range":[6186,6197],"text":"`h-8 w-8 ${"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-8, h-8' could be replaced by the 'size-8' shorthand!","line":168,"column":37,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":168,"endColumn":110,"fix":{"range":[6186,6197],"text":"`size-8 ${"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":172,"column":32,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":172,"endColumn":70,"fix":{"range":[6481,6507],"text":"mt-1 text-sm text-white/40"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":179,"column":21,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":179,"endColumn":92,"fix":{"range":[6727,6786],"text":"flex items-center gap-2 text-xl font-semibold text-white/80"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":180,"column":31,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":180,"endColumn":50,"fix":{"range":[6830,6837],"text":"h-5 w-5"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-5, h-5' could be replaced by the 'size-5' shorthand!","line":180,"column":31,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":180,"endColumn":50,"fix":{"range":[6830,6837],"text":"size-5"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":187,"column":42,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":187,"endColumn":94,"fix":{"range":[7097,7137],"text":"h-20 animate-pulse rounded-xl bg-white/5"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":190,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":190,"endColumn":104,"fix":{"range":[7256,7318],"text":"rounded-xl border border-white/10 bg-white/5 py-12 text-center"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":191,"column":32,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":191,"endColumn":64,"fix":{"range":[7363,7383],"text":"italic text-white/30"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":202,"column":37,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":202,"endColumn":153,"fix":{"range":[8015,8119],"text":"group flex flex-col rounded-xl border border-white/10 bg-white/5 p-4 transition-colors hover:bg-white/10"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":206,"column":50,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":206,"endColumn":144,"fix":{"range":[8385,8467],"text":"flex h-10 w-10 items-center justify-center rounded-lg bg-blue-500/10 text-blue-400"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-10, h-10' could be replaced by the 'size-10' shorthand!","line":206,"column":50,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":206,"endColumn":144,"fix":{"range":[8385,8467],"text":"size-10 rounded-lg bg-blue-500/10 flex items-center justify-center text-blue-400"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":207,"column":95,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":207,"endColumn":114,"fix":{"range":[8575,8582],"text":"h-5 w-5"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-5, h-5' could be replaced by the 'size-5' shorthand!","line":207,"column":95,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":207,"endColumn":114,"fix":{"range":[8575,8582],"text":"size-5"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":213,"column":64,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":213,"endColumn":101,"fix":{"range":[9042,9067],"text":"h-3.5 w-3.5 text-blue-400"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-3.5, h-3.5' could be replaced by the 'size-3.5' shorthand!","line":213,"column":64,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":213,"endColumn":101,"fix":{"range":[9042,9067],"text":"size-3.5 text-blue-400"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":215,"column":65,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":215,"endColumn":104,"fix":{"range":[9236,9263],"text":"h-3.5 w-3.5 text-purple-400"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-3.5, h-3.5' could be replaced by the 'size-3.5' shorthand!","line":215,"column":65,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":215,"endColumn":104,"fix":{"range":[9236,9263],"text":"size-3.5 text-purple-400"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":217,"column":63,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":217,"endColumn":100,"fix":{"range":[9399,9424],"text":"h-3.5 w-3.5 text-white/20"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-3.5, h-3.5' could be replaced by the 'size-3.5' shorthand!","line":217,"column":63,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":217,"endColumn":100,"fix":{"range":[9399,9424],"text":"size-3.5 text-white/20"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":231,"column":49,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":233,"endColumn":110,"fix":{"range":[10616,10666],"text":"text-white/20 hover:bg-white/5 hover:text-white/60"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":231,"column":49,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":233,"endColumn":110,"fix":{"range":[10414,10447],"text":"`rounded-lg p-2 transition-all ${"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":236,"column":60,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":236,"endColumn":79,"fix":{"range":[10860,10867],"text":"h-5 w-5"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-5, h-5' could be replaced by the 'size-5' shorthand!","line":236,"column":60,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":236,"endColumn":79,"fix":{"range":[10860,10867],"text":"size-5"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":240,"column":49,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":240,"endColumn":177,"fix":{"range":[11123,11239],"text":"rounded-lg p-2 text-white/20 opacity-0 transition-all hover:bg-red-500/20 hover:text-red-400 group-hover:opacity-100"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":243,"column":57,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":243,"endColumn":76,"fix":{"range":[11424,11431],"text":"h-5 w-5"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'w-5, h-5' could be replaced by the 'size-5' shorthand!","line":243,"column":57,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":243,"endColumn":76,"fix":{"range":[11424,11431],"text":"size-5"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":42,"fixableErrorCount":0,"fixableWarningCount":41,"source":"'use client';\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Upload, FileText, Trash2, Loader2, Book, CheckCircle, AlertCircle, Globe, Lock, Shield, Settings2 } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { toast } from 'sonner';\nimport { MemorySharing } from './MemorySharing';\nimport { createClient } from '@/lib/supabase/client';\n\ninterface KnowledgeItem {\n    id: string;\n    file_name: string;\n    file_type: string;\n    created_at: string;\n    shared_with_all: boolean;\n    persona_ids: string[];\n}\n\nexport const MemoryVault: React.FC = () => {\n    const [items, setItems] = useState<KnowledgeItem[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [uploading, setUploading] = useState(false);\n    const [uploadProgress, setUploadProgress] = useState(0);\n    const [isDragActive, setIsDragActive] = useState(false);\n    const [userId, setUserId] = useState<string | null>(null);\n    const [editingSharingId, setEditingSharingId] = useState<string | null>(null);\n\n    const supabase = createClient();\n\n    const fetchUser = useCallback(async () => {\n        const { data: { user } } = await supabase.auth.getUser();\n        if (user) setUserId(user.id);\n    }, [supabase]);\n\n    const fetchItems = useCallback(async () => {\n        try {\n            const res = await fetch('/api/v2/knowledge');\n            if (!res.ok) throw new Error('Failed to fetch items');\n            const data = await res.json();\n            setItems(data);\n        } catch (error) {\n            console.error(error);\n            toast.error('Failed to load knowledge vault');\n        } finally {\n            setLoading(false);\n        }\n    }, []);\n\n    useEffect(() => {\n        fetchUser();\n        fetchItems();\n    }, [fetchUser, fetchItems]);\n\n    const onDrop = async (e: React.DragEvent) => {\n        e.preventDefault();\n        setIsDragActive(false);\n        const files = Array.from(e.dataTransfer.files);\n        if (files.length > 0) {\n            handleUpload(files[0]);\n        }\n    };\n\n    const handleFileInput = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const files = Array.from(e.target.files || []);\n        if (files.length > 0) {\n            handleUpload(files[0]);\n        }\n    };\n\n    const handleUpload = async (file: File) => {\n        const allowedExtensions = ['pdf', 'txt', 'md', 'json', 'js', 'ts', 'py'];\n        const extension = file.name.split('.').pop()?.toLowerCase() || '';\n\n        if (!allowedExtensions.includes(extension)) {\n            toast.error(`Unsupported file type: .${extension}`);\n            return;\n        }\n\n        setUploading(true);\n        setUploadProgress(10);\n\n        try {\n            const formData = new FormData();\n            formData.append('file', file);\n\n            setUploadProgress(30);\n\n            const res = await fetch('/api/v2/knowledge', {\n                method: 'POST',\n                body: formData,\n            });\n\n            setUploadProgress(80);\n\n            if (!res.ok) {\n                const error = await res.json();\n                throw new Error(error.error || 'Upload failed');\n            }\n\n            setUploadProgress(100);\n            toast.success('Memory uploaded successfully');\n            fetchItems();\n        } catch (error: any) {\n            toast.error(error.message || 'Failed to upload');\n        } finally {\n            setTimeout(() => {\n                setUploading(false);\n                setUploadProgress(0);\n            }, 500);\n        }\n    };\n\n    const handleDelete = async (id: string) => {\n        try {\n            const res = await fetch(`/api/v2/knowledge?id=${id}`, {\n                method: 'DELETE',\n            });\n\n            if (!res.ok) throw new Error('Delete failed');\n\n            toast.success('Memory deleted');\n            setItems(items.filter(item => item.id !== id));\n        } catch (error) {\n            toast.error('Failed to delete memory');\n        }\n    };\n\n    return (\n        <div className=\"flex flex-col gap-8 w-full max-w-4xl mx-auto p-6\">\n            <div className=\"flex items-center gap-3\">\n                <Book className=\"w-8 h-8 text-blue-500\" />\n                <h1 className=\"text-3xl font-bold bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent\">\n                    Knowledge Vault\n                </h1>\n            </div>\n\n            <div\n                onDragOver={(e) => { e.preventDefault(); setIsDragActive(true); }}\n                onDragLeave={() => setIsDragActive(false)}\n                onDrop={onDrop}\n                className={`relative border-2 border-dashed rounded-2xl p-12 transition-all duration-300 flex flex-col items-center justify-center gap-4 bg-opacity-5 ${isDragActive\n                    ? 'border-blue-500 bg-blue-500/10 scale-[1.02] shadow-[0_0_20px_rgba(59,130,246,0.5)]'\n                    : 'border-white/20 bg-white/5 hover:border-white/40'\n                    }`}\n            >\n                <input\n                    type=\"file\"\n                    className=\"absolute inset-0 opacity-0 cursor-pointer\"\n                    onChange={handleFileInput}\n                    accept=\".pdf,.txt,.md,.json,.js,.ts,.py\"\n                />\n\n                {uploading ? (\n                    <div className=\"flex flex-col items-center gap-4 w-full max-w-xs text-center\">\n                        <Loader2 className=\"w-12 h-12 text-blue-500 animate-spin\" />\n                        <div className=\"w-full bg-white/10 rounded-full h-2 overflow-hidden\">\n                            <motion.div\n                                className=\"h-full bg-blue-500\"\n                                initial={{ width: 0 }}\n                                animate={{ width: `${uploadProgress}%` }}\n                            />\n                        </div>\n                        <p className=\"text-white/60 text-sm\">Uploading memory... {uploadProgress}%</p>\n                    </div>\n                ) : (\n                    <>\n                        <div className=\"w-16 h-16 rounded-full bg-blue-500/20 flex items-center justify-center\">\n                            <Upload className={`w-8 h-8 ${isDragActive ? 'text-blue-400' : 'text-blue-500'}`} />\n                        </div>\n                        <div className=\"text-center\">\n                            <p className=\"text-xl font-medium text-white\">Drop your memories here</p>\n                            <p className=\"text-white/40 text-sm mt-1\">Accepts PDF, TXT, MD, JSON, JS, TS, PY</p>\n                        </div>\n                    </>\n                )}\n            </div>\n\n            <div className=\"flex flex-col gap-4\">\n                <h2 className=\"text-xl font-semibold text-white/80 flex items-center gap-2\">\n                    <FileText className=\"w-5 h-5\" />\n                    Stored Memories\n                </h2>\n\n                <div className=\"grid gap-3\">\n                    {loading ? (\n                        Array.from({ length: 3 }).map((_, i) => (\n                            <div key={i} className=\"h-20 bg-white/5 rounded-xl animate-pulse\" />\n                        ))\n                    ) : items.length === 0 ? (\n                        <div className=\"text-center py-12 border border-white/10 rounded-xl bg-white/5\">\n                            <p className=\"text-white/30 italic\">No memories stored yet. Upload some files to feed the AI&apos;s mind.</p>\n                        </div>\n                    ) : (\n                        <AnimatePresence initial={false}>\n                            {items.map((item) => (\n                                <motion.div\n                                    key={item.id}\n                                    layout\n                                    initial={{ opacity: 0, y: 20 }}\n                                    animate={{ opacity: 1, y: 0 }}\n                                    exit={{ opacity: 0, scale: 0.95 }}\n                                    className=\"flex flex-col p-4 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10 transition-colors group\"\n                                >\n                                    <div className=\"flex items-center justify-between\">\n                                        <div className=\"flex items-center gap-4\">\n                                            <div className=\"w-10 h-10 rounded-lg bg-blue-500/10 flex items-center justify-center text-blue-400\">\n                                                {item.file_type === 'pdf' ? 'PDF' : <FileText className=\"w-5 h-5\" />}\n                                            </div>\n                                            <div>\n                                                <div className=\"flex items-center gap-2\">\n                                                    <p className=\"font-medium text-white\">{item.file_name}</p>\n                                                    {item.shared_with_all ? (\n                                                        <Globe className=\"w-3.5 h-3.5 text-blue-400\" />\n                                                    ) : item.persona_ids?.length > 0 ? (\n                                                        <Shield className=\"w-3.5 h-3.5 text-purple-400\" />\n                                                    ) : (\n                                                        <Lock className=\"w-3.5 h-3.5 text-white/20\" />\n                                                    )}\n                                                </div>\n                                                <div className=\"flex items-center gap-2 text-xs text-white/40\">\n                                                    <span className=\"uppercase\">{item.file_type}</span>\n                                                    <span>â€¢</span>\n                                                    <span>{new Date(item.created_at).toLocaleDateString()}</span>\n                                                </div>\n                                            </div>\n                                        </div>\n\n                                        <div className=\"flex items-center gap-2\">\n                                            <button\n                                                onClick={() => setEditingSharingId(editingSharingId === item.id ? null : item.id)}\n                                                className={`p-2 rounded-lg transition-all ${editingSharingId === item.id\n                                                    ? 'bg-blue-500/20 text-blue-400'\n                                                    : 'hover:bg-white/5 text-white/20 hover:text-white/60'}`}\n                                                title=\"Sharing Settings\"\n                                            >\n                                                <Settings2 className=\"w-5 h-5\" />\n                                            </button>\n                                            <button\n                                                onClick={() => handleDelete(item.id)}\n                                                className=\"p-2 rounded-lg hover:bg-red-500/20 text-white/20 hover:text-red-400 transition-all opacity-0 group-hover:opacity-100\"\n                                                title=\"Delete Memory\"\n                                            >\n                                                <Trash2 className=\"w-5 h-5\" />\n                                            </button>\n                                        </div>\n                                    </div>\n\n                                    <AnimatePresence>\n                                        {editingSharingId === item.id && userId && (\n                                            <motion.div\n                                                initial={{ height: 0, opacity: 0 }}\n                                                animate={{ height: 'auto', opacity: 1 }}\n                                                exit={{ height: 0, opacity: 0 }}\n                                                className=\"overflow-hidden\"\n                                            >\n                                                <MemorySharing\n                                                    memoryId={item.id}\n                                                    userId={userId}\n                                                    initialSharedWithAll={item.shared_with_all}\n                                                    initialPersonaIds={item.persona_ids || []}\n                                                    onUpdate={(sharedAll, pIds) => {\n                                                        setItems(items.map(i =>\n                                                            i.id === item.id\n                                                                ? { ...i, shared_with_all: sharedAll, persona_ids: pIds }\n                                                                : i\n                                                        ));\n                                                    }}\n                                                />\n                                            </motion.div>\n                                        )}\n                                    </AnimatePresence>\n                                </motion.div>\n                            ))}\n                        </AnimatePresence>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/layout/Footer.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":71,"column":17,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":71,"endColumn":99,"fix":{"range":[2205,2275],"text":"border-rp-highlight-low bg-rp-base/80 w-full border-t backdrop-blur-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":100,"column":28,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":100,"endColumn":61,"fix":{"range":[3742,3763],"text":"text-rp-muted text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":107,"column":28,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":107,"endColumn":74,"fix":{"range":[4043,4077],"text":"text-rp-text text-sm font-semibold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":110,"column":51,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":110,"endColumn":100,"fix":{"range":[4257,4294],"text":"text-rp-subtle cursor-default text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":119,"column":37,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":119,"endColumn":121,"fix":{"range":[4737,4809],"text":"text-rp-subtle hover:text-rp-rose text-sm transition-colors duration-200"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":127,"column":37,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":127,"endColumn":121,"fix":{"range":[5155,5227],"text":"text-rp-subtle hover:text-rp-rose text-sm transition-colors duration-200"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":137,"column":28,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":137,"endColumn":74,"fix":{"range":[5576,5610],"text":"text-rp-text text-sm font-semibold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":142,"column":33,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":142,"endColumn":117,"fix":{"range":[5852,5924],"text":"text-rp-subtle hover:text-rp-rose text-sm transition-colors duration-200"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":151,"column":28,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":151,"endColumn":74,"fix":{"range":[6233,6267],"text":"text-rp-text text-sm font-semibold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":159,"column":37,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":159,"endColumn":121,"fix":{"range":[6682,6754],"text":"text-rp-subtle hover:text-rp-rose text-sm transition-colors duration-200"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":167,"column":37,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":167,"endColumn":121,"fix":{"range":[7100,7172],"text":"text-rp-subtle hover:text-rp-rose text-sm transition-colors duration-200"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":173,"column":31,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":173,"endColumn":69,"fix":{"range":[7395,7421],"text":"text-rp-muted mt-2 text-xs"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":12,"source":"\"use client\"\n\nimport Image from \"next/image\"\nimport Link from \"next/link\"\nimport { useTheme } from \"next-themes\"\nimport {\n    IconBrandDiscord,\n    IconBrandReddit,\n    IconBrandTiktok,\n    IconBrandX,\n    IconBrandInstagram\n} from \"@tabler/icons-react\"\n\nconst socialLinks = [\n    {\n        href: \"https://discord.gg/remrin\",\n        icon: IconBrandDiscord,\n        label: \"Remrin Discord\"\n    },\n    {\n        href: \"https://reddit.com/r/remrin\",\n        icon: IconBrandReddit,\n        label: \"Remrin Reddit\"\n    },\n    {\n        href: \"https://tiktok.com/@remrin_ai\",\n        icon: IconBrandTiktok,\n        label: \"Remrin TikTok\"\n    },\n    {\n        href: \"https://twitter.com/remrin_ai\",\n        icon: IconBrandX,\n        label: \"Remrin Twitter\"\n    },\n    {\n        href: \"https://instagram.com/remrin_ai\",\n        icon: IconBrandInstagram,\n        label: \"Remrin Instagram\"\n    }\n]\n\nconst featuresLinks = [\n    { href: \"https://remrin.ai/faq\", label: \"FAQ\", external: true },\n    { href: \"#\", label: \"Get App\", isSpan: true },\n    { href: \"/create\", label: \"Create a Persona\", external: false },\n    { href: \"https://remrin.ai/manage-data\", label: \"Your Privacy Choices\", external: true },\n    { href: \"https://remrin.ai/delete-account\", label: \"Delete Account\", external: true }\n]\n\nconst exploreLinks = [\n    { href: \"/featured\", label: \"Featured Characters\" },\n    { href: \"/tags\", label: \"Browse Tags\" },\n    { href: \"/multilingual\", label: \"Multilingual Chat\" },\n    { href: \"/community\", label: \"Community Creations\" },\n    { href: \"/updates\", label: \"Latest Updates\" }\n]\n\nconst overviewLinks = [\n    { href: \"https://remrin.ai/about\", label: \"About Us\", external: true },\n    { href: \"https://blog.remrin.ai\", label: \"Remrin Blog\", external: true },\n    { href: \"https://remrin.ai/contact\", label: \"Contact & Support\", external: true },\n    { href: \"https://remrin.ai/terms\", label: \"Terms of Service\", external: true },\n    { href: \"https://remrin.ai/privacy\", label: \"Privacy Policy\", external: true },\n    { href: \"/guidelines\", label: \"Community Guidelines\", external: false }\n]\n\nexport function Footer() {\n    const { resolvedTheme } = useTheme()\n\n    return (\n        <footer className=\"w-full border-t border-rp-highlight-low bg-rp-base/80 backdrop-blur-sm\">\n            <div className=\"mx-auto max-w-7xl px-4 py-12 sm:px-6 lg:px-8\">\n                <div className=\"grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-4\">\n                    {/* Brand Column */}\n                    <section className=\"flex flex-col items-start gap-4\">\n                        <Image\n                            src={resolvedTheme === \"light\" ? \"/logo_dark.svg\" : \"/logo.svg\"}\n                            alt=\"Remrin logo\"\n                            width={140}\n                            height={40}\n                            className=\"h-10 w-auto\"\n                        />\n\n                        {/* Social Media Links */}\n                        <div className=\"flex items-center gap-3\">\n                            {socialLinks.map((social) => (\n                                <a\n                                    key={social.href}\n                                    href={social.href}\n                                    target=\"_blank\"\n                                    rel=\"noopener noreferrer\"\n                                    className=\"text-rp-subtle hover:text-rp-rose transition-colors duration-200\"\n                                    aria-label={social.label}\n                                >\n                                    <social.icon size={22} stroke={1.5} />\n                                </a>\n                            ))}\n                        </div>\n\n                        <p className=\"text-sm text-rp-muted\">\n                            Copyright Â© 2025 Remrin AI. All rights reserved\n                        </p>\n                    </section>\n\n                    {/* Features Column */}\n                    <nav className=\"flex flex-col gap-3\">\n                        <p className=\"text-sm font-semibold text-rp-text\">Features</p>\n                        {featuresLinks.map((link, index) =>\n                            link.isSpan ? (\n                                <span key={index} className=\"text-sm text-rp-subtle cursor-default\">\n                                    {link.label}\n                                </span>\n                            ) : link.external ? (\n                                <a\n                                    key={link.href}\n                                    href={link.href}\n                                    target=\"_blank\"\n                                    rel=\"noopener noreferrer\"\n                                    className=\"text-sm text-rp-subtle hover:text-rp-rose transition-colors duration-200\"\n                                >\n                                    {link.label}\n                                </a>\n                            ) : (\n                                <Link\n                                    key={link.href}\n                                    href={link.href}\n                                    className=\"text-sm text-rp-subtle hover:text-rp-rose transition-colors duration-200\"\n                                >\n                                    {link.label}\n                                </Link>\n                            )\n                        )}\n                    </nav>\n\n                    {/* Explore Column */}\n                    <nav className=\"flex flex-col gap-3\">\n                        <p className=\"text-sm font-semibold text-rp-text\">Explore</p>\n                        {exploreLinks.map((link) => (\n                            <Link\n                                key={link.href}\n                                href={link.href}\n                                className=\"text-sm text-rp-subtle hover:text-rp-rose transition-colors duration-200\"\n                            >\n                                {link.label}\n                            </Link>\n                        ))}\n                    </nav>\n\n                    {/* Overview Column */}\n                    <nav className=\"flex flex-col gap-3\">\n                        <p className=\"text-sm font-semibold text-rp-text\">Overview</p>\n                        {overviewLinks.map((link) =>\n                            link.external ? (\n                                <a\n                                    key={link.href}\n                                    href={link.href}\n                                    target=\"_blank\"\n                                    rel=\"noopener noreferrer\"\n                                    className=\"text-sm text-rp-subtle hover:text-rp-rose transition-colors duration-200\"\n                                >\n                                    {link.label}\n                                </a>\n                            ) : (\n                                <Link\n                                    key={link.href}\n                                    href={link.href}\n                                    className=\"text-sm text-rp-subtle hover:text-rp-rose transition-colors duration-200\"\n                                >\n                                    {link.label}\n                                </Link>\n                            )\n                        )}\n                        <span className=\"mt-2 text-xs text-rp-muted\">\n                            Powered by Remrin AI\n                        </span>\n                    </nav>\n                </div>\n            </div>\n        </footer>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/layout/HeroHeader.tsx","messages":[{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'px-4, py-4' could be replaced by the 'p-4' shorthand!","line":94,"column":18,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":94,"endColumn":81,"fix":{"range":[2446,2497],"text":"flex items-center justify-between p-4 md:px-6"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":112,"column":41,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":112,"endColumn":96,"fix":{"range":[3445,3482],"text":"border-rp-highlight-med border-l pl-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":114,"column":37,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":114,"endColumn":105,"fix":{"range":[3574,3630],"text":"font-tiempos-headline text-rp-text text-xl font-semibold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":119,"column":36,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":119,"endColumn":70,"fix":{"range":[3835,3857],"text":"text-rp-subtle text-sm"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":4,"source":"\"use client\"\n\nimport { ReactNode } from \"react\"\nimport Link from \"next/link\"\nimport Image from \"next/image\"\nimport { useTheme } from \"next-themes\"\nimport { cn } from \"@/lib/utils\"\n\ntype HeroHeaderVariant = \"default\" | \"minimal\" | \"transparent\"\n\ninterface HeroHeaderProps {\n    /** Header variant affects background and border styling */\n    variant?: HeroHeaderVariant\n    /** Show the logo (default: true) */\n    showLogo?: boolean\n    /** Optional title to display alongside or instead of logo */\n    title?: string\n    /** Optional subtitle below the title */\n    subtitle?: string\n    /** Action elements (buttons, links) for the right side */\n    actions?: ReactNode\n    /** Additional content to render below the main header row */\n    children?: ReactNode\n    /** Additional className for the header */\n    className?: string\n    /** Whether the header should be sticky */\n    sticky?: boolean\n}\n\nconst VARIANT_STYLES: Record<HeroHeaderVariant, string> = {\n    default: \"border-b border-rp-highlight-med bg-rp-base/95 backdrop-blur-sm\",\n    minimal: \"bg-transparent\",\n    transparent: \"bg-transparent border-b border-transparent\",\n}\n\n/**\n * HeroHeader - Unified header component for all pages\n * \n * Features:\n * - Theme-aware logo (light/dark mode)\n * - Configurable variants (default, minimal, transparent)\n * - Actions slot for buttons/links\n * - Optional title/subtitle\n * - Sticky positioning option\n * - Consistent styling across all pages\n * \n * Usage:\n * ```tsx\n * <HeroHeader\n *   showLogo\n *   actions={\n *     <>\n *       <Link href=\"/summon\">Soul Summons</Link>\n *       <Link href=\"/login\">Sign In</Link>\n *     </>\n *   }\n * />\n * ```\n * \n * With title:\n * ```tsx\n * <HeroHeader\n *   title=\"Discover\"\n *   subtitle=\"Explore AI companions\"\n *   actions={<Button>Create</Button>}\n * />\n * ```\n */\nexport function HeroHeader({\n    variant = \"default\",\n    showLogo = true,\n    title,\n    subtitle,\n    actions,\n    children,\n    className,\n    sticky = false,\n}: HeroHeaderProps) {\n    const { resolvedTheme } = useTheme()\n\n    return (\n        <header\n            className={cn(\n                // Base styles\n                \"relative z-50 flex flex-col\",\n                // Variant styles\n                VARIANT_STYLES[variant],\n                // Sticky positioning\n                sticky && \"sticky top-0\",\n                className\n            )}\n        >\n            {/* Main header row */}\n            <div className=\"flex items-center justify-between px-4 py-4 md:px-6\">\n                {/* Left section: Logo and/or Title */}\n                <div className=\"flex items-center gap-4\">\n                    {showLogo && (\n                        <Link href=\"/\" className=\"flex items-center\">\n                            <Image\n                                src={resolvedTheme === \"light\" ? \"/logo_dark.svg\" : \"/logo.svg\"}\n                                alt=\"Remrin\"\n                                width={128}\n                                height={40}\n                                className=\"h-8 w-auto drop-shadow-[0_0_12px_rgba(235,188,186,0.4)] transition-transform duration-300 ease-out hover:rotate-[-5deg] hover:scale-105\"\n                                priority\n                            />\n                        </Link>\n                    )}\n\n                    {/* Title/Subtitle section */}\n                    {(title || subtitle) && (\n                        <div className={cn(showLogo && \"border-l border-rp-highlight-med pl-4\")}>\n                            {title && (\n                                <h1 className=\"font-tiempos-headline text-xl font-semibold text-rp-text\">\n                                    {title}\n                                </h1>\n                            )}\n                            {subtitle && (\n                                <p className=\"text-sm text-rp-subtle\">\n                                    {subtitle}\n                                </p>\n                            )}\n                        </div>\n                    )}\n                </div>\n\n                {/* Right section: Actions */}\n                {actions && (\n                    <div className=\"flex items-center gap-4\">\n                        {actions}\n                    </div>\n                )}\n            </div>\n\n            {/* Optional additional content (search bars, tabs, etc.) */}\n            {children}\n        </header>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/layout/MinimalSidebar.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":71,"column":21,"nodeType":"JSXOpeningElement","endLine":78,"endColumn":23},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":74,"column":36,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":77,"endColumn":26,"fix":{"range":[3086,3113],"text":"absolute scale-75 opacity-0"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":74,"column":36,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":77,"endColumn":26,"fix":{"range":[3118,3139],"text":"scale-100 opacity-100"}},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":81,"column":25,"nodeType":"JSXOpeningElement","endLine":88,"endColumn":27},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":84,"column":40,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":87,"endColumn":30,"fix":{"range":[3562,3583],"text":"scale-100 opacity-100"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":84,"column":40,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":87,"endColumn":30,"fix":{"range":[3588,3615],"text":"absolute scale-90 opacity-0"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":129,"column":37,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":129,"endColumn":120,"fix":{"range":[5747,5818],"text":"font-tiempos-text overflow-hidden whitespace-nowrap text-sm font-medium"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":5,"source":"\"use client\"\n\nimport { useTheme } from \"next-themes\"\nimport { useEffect, useState } from \"react\"\nimport Link from \"next/link\"\nimport { usePathname } from \"next/navigation\"\nimport { motion } from \"framer-motion\"\nimport { cn } from \"@/lib/utils\"\nimport { SIDEBAR } from \"@/lib/design-system\"\nimport { SidebarUserSection } from \"./SidebarUserSection\"\nimport { SidebarRecentChats } from \"./SidebarRecentChats\"\nimport { SidebarCreateButton } from \"./SidebarCreateButton\"\nimport { SidebarThemeToggle } from \"./SidebarThemeToggle\"\nimport {\n    IconHome,\n    IconSparkles,\n    IconDice,\n    IconBooks,\n    IconShoppingBag,\n    IconBrush,\n    IconWallet,\n    IconDatabase,\n} from \"@tabler/icons-react\"\nimport { useContext } from \"react\"\nimport { RemrinContext } from \"@/context/context\"\n\nconst NAV_ITEMS = [\n    { icon: IconHome, label: \"Home\", href: \"/\" },\n    { icon: IconSparkles, label: \"Discover\", href: \"/discover\" },\n    { icon: IconDice, label: \"Summon\", href: \"/summon\" },\n    { icon: IconBooks, label: \"Collection\", href: \"/collection\" },\n    { icon: IconDatabase, label: \"Vault\", href: \"/knowledge\", isWorkspaceSpecific: true },\n    { icon: IconShoppingBag, label: \"Marketplace\", href: \"/marketplace\" },\n    { icon: IconBrush, label: \"Studio\", href: \"/studio\" },\n    { icon: IconWallet, label: \"Wallet\", href: \"/wallet\" },\n]\n\n/**\n * MinimalSidebar - Talkie-AI inspired sidebar with:\n * - Craft a Soul button\n * - Recent chats list\n * - User section with avatar + Subscribe CTA\n */\nexport function MinimalSidebar() {\n    const { resolvedTheme } = useTheme()\n    const [mounted, setMounted] = useState(false)\n    const [isExpanded, setIsExpanded] = useState(false)\n    const [showProfileSettings, setShowProfileSettings] = useState(false)\n    const pathname = usePathname()\n    const { selectedWorkspace } = useContext(RemrinContext)\n\n    useEffect(() => {\n        setMounted(true)\n    }, [])\n\n    const logoSrc = resolvedTheme === \"light\" ? \"/logo_dark.svg\" : \"/logo.svg\"\n\n    return (\n        <motion.nav\n            className=\"bg-rp-surface border-rp-muted/20 fixed left-0 top-0 z-40 hidden h-screen flex-col border-r md:flex\"\n            initial={false}\n            animate={{ width: isExpanded ? SIDEBAR.expanded : SIDEBAR.collapsed }}\n            transition={{ duration: 0.3, ease: [0.4, 0, 0.2, 1] }}\n            onMouseEnter={() => setIsExpanded(true)}\n            onMouseLeave={() => setIsExpanded(false)}\n        >\n            {/* Logo Container - Dual-logo crossfade */}\n            <div className=\"border-rp-muted/20 relative flex h-16 shrink-0 items-center justify-center overflow-hidden border-b\">\n                <Link href=\"/\" className=\"flex items-center justify-center transition-transform duration-300 ease-out hover:rotate-[-5deg] hover:scale-105\">\n                    {/* Small logo - visible when collapsed */}\n                    <img\n                        src=\"/logo_sm.svg\"\n                        alt=\"Remrin\"\n                        className={cn(\n                            \"size-10 transition-all duration-300\",\n                            isExpanded ? \"absolute opacity-0 scale-75\" : \"opacity-100 scale-100\"\n                        )}\n                    />\n                    {/* Full wordmark - visible when expanded */}\n                    {mounted && (\n                        <img\n                            src={logoSrc}\n                            alt=\"Remrin.ai\"\n                            className={cn(\n                                \"h-8 transition-all duration-300\",\n                                isExpanded ? \"opacity-100 scale-100\" : \"absolute opacity-0 scale-90\"\n                            )}\n                        />\n                    )}\n                </Link>\n            </div>\n\n            {/* Craft a Soul Button */}\n            <SidebarCreateButton isExpanded={isExpanded} />\n\n            {/* All Items Container */}\n            <div className=\"flex flex-1 flex-col p-2\">\n                {/* Nav Items */}\n                <div className=\"space-y-1\">\n                    {NAV_ITEMS.map((item) => {\n                        const Icon = item.icon\n                        let href = item.href\n                        if (item.isWorkspaceSpecific && selectedWorkspace) {\n                            href = `/${pathname.split(\"/\")[1]}/${selectedWorkspace.id}${item.href}`\n                        }\n                        const isActive = pathname === href || pathname.startsWith(href + \"/\")\n\n                        return (\n                            <Link\n                                key={item.label}\n                                href={href}\n                                className={cn(\n                                    \"group relative flex min-h-[44px] items-center rounded-lg py-3 transition-all\",\n                                    isActive\n                                        ? \"bg-rp-iris/20 text-rp-iris\"\n                                        : \"text-rp-subtle hover:bg-rp-overlay hover:text-rp-text\",\n                                    // Center icons when collapsed, left align when expanded\n                                    isExpanded ? \"justify-start gap-3 px-4\" : \"justify-center px-0\"\n                                )}\n                            >\n                                {/* Icon container - fixed width for centering */}\n                                <div className={cn(\n                                    \"flex shrink-0 items-center justify-center\",\n                                    !isExpanded && \"w-full\"\n                                )}>\n                                    <Icon size={22} />\n                                </div>\n                                <motion.span\n                                    className=\"font-tiempos-text whitespace-nowrap text-sm font-medium overflow-hidden\"\n                                    initial={false}\n                                    animate={{\n                                        opacity: isExpanded ? 1 : 0,\n                                        width: isExpanded ? \"auto\" : 0\n                                    }}\n                                    transition={{ duration: 0.2 }}\n                                >\n                                    {item.label}\n                                </motion.span>\n                                {isActive && (\n                                    <motion.div\n                                        className=\"bg-rp-iris absolute left-0 h-full w-1 rounded-r\"\n                                        layoutId=\"activeIndicator\"\n                                    />\n                                )}\n                            </Link>\n                        )\n                    })}\n                </div>\n\n                {/* Separator Line */}\n                <div className=\"border-rp-muted/20 -mx-2 my-2 border-t\" />\n\n                {/* Recent Chats Section */}\n                <SidebarRecentChats isExpanded={isExpanded} maxChats={8} />\n\n                {/* Spacer pushes user section to bottom */}\n                <div className=\"flex-1\" />\n\n                {/* Separator Line */}\n                <div className=\"border-rp-muted/20 -mx-2 border-t\" />\n\n                {/* Theme Toggle */}\n                <div className=\"px-2 py-1\">\n                    <SidebarThemeToggle isExpanded={isExpanded} />\n                </div>\n\n                {/* Separator Line */}\n                <div className=\"border-rp-muted/20 -mx-2 border-t\" />\n\n                {/* User Section with Avatar + Subscribe CTA */}\n                <SidebarUserSection\n                    isExpanded={isExpanded}\n                    onProfileClick={() => setShowProfileSettings(true)}\n                />\n            </div>\n\n            {/* Profile Settings Modal */}\n            {showProfileSettings && (\n                <div\n                    className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50\"\n                    onClick={() => setShowProfileSettings(false)}\n                >\n                    <div\n                        className=\"bg-rp-surface border-rp-muted rounded-lg border p-6 shadow-xl\"\n                        onClick={(e) => e.stopPropagation()}\n                    >\n                        <h2 className=\"text-rp-text mb-4 text-xl font-bold\">Profile Settings</h2>\n                        <p className=\"text-rp-subtle mb-4\">Profile settings modal - to be implemented with full functionality</p>\n                        <button\n                            onClick={() => setShowProfileSettings(false)}\n                            className=\"bg-rp-iris hover:bg-rp-iris/80 rounded px-4 py-2 text-white\"\n                        >\n                            Close\n                        </button>\n                    </div>\n                </div>\n            )}\n        </motion.nav>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/layout/MobileNav.tsx","messages":[{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'left-0, right-0' could be replaced by the 'inset-x-0' shorthand!","line":26,"column":14,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":26,"endColumn":132,"fix":{"range":[666,772],"text":"bg-rp-surface/95 border-rp-muted/20 fixed bottom-0 inset-x-0 z-50 border-t backdrop-blur-lg md:hidden"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":36,"column":40,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":39,"endColumn":30,"fix":{"range":[1250,1325],"text":"flex min-h-[44px] flex-1 flex-col items-center gap-1 py-3 transition-colors"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":2,"source":"\"use client\"\n\nimport Link from \"next/link\"\nimport { usePathname } from \"next/navigation\"\nimport { cn } from \"@/lib/utils\"\nimport {\n    IconHome,\n    IconSparkles,\n    IconMessage,\n    IconBooks,\n    IconUser,\n} from \"@tabler/icons-react\"\n\nconst MOBILE_NAV = [\n    { icon: IconHome, label: \"Home\", href: \"/\" },\n    { icon: IconSparkles, label: \"Discover\", href: \"/discover\" },\n    { icon: IconMessage, label: \"Chat\", href: \"/chat\" },\n    { icon: IconBooks, label: \"Collection\", href: \"/collection\" },\n    { icon: IconUser, label: \"Profile\", href: \"/profile\" },\n]\n\nexport function MobileNav() {\n    const pathname = usePathname()\n\n    return (\n        <nav className=\"bg-rp-surface/95 border-rp-muted/20 fixed bottom-0 left-0 right-0 z-50 border-t backdrop-blur-lg md:hidden\">\n            <div className=\"flex items-center justify-around\">\n                {MOBILE_NAV.map((item) => {\n                    const Icon = item.icon\n                    const isActive = pathname === item.href || pathname.startsWith(item.href + \"/\")\n\n                    return (\n                        <Link\n                            key={item.href}\n                            href={item.href}\n                            className={cn(\n                                \"flex flex-1 flex-col items-center gap-1 py-3 transition-colors min-h-[44px]\",\n                                isActive ? \"text-rp-iris\" : \"text-rp-subtle active:text-rp-text\"\n                            )}\n                        >\n                            <Icon size={24} className=\"shrink-0\" />\n                            <span className=\"text-xs font-medium\">{item.label}</span>\n                        </Link>\n                    )\n                })}\n            </div>\n            <div className=\"h-safe-area-inset-bottom\" />\n        </nav>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/layout/PageContainer.tsx","messages":[{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'md:px-8, md:py-8' could be replaced by the 'md:p-8' shorthand!","line":25,"column":24,"nodeType":"CallExpression","messageId":"shorthandCandidateDetected","endLine":29,"endColumn":14,"fix":{"range":[508,548],"text":"mx-auto w-full px-4 py-6 md:p-8"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import { cn } from \"@/lib/utils\"\nimport { ReactNode } from \"react\"\n\ninterface PageContainerProps {\n    children: ReactNode\n    className?: string\n    maxWidth?: \"sm\" | \"md\" | \"lg\" | \"xl\" | \"full\"\n}\n\nconst MAX_WIDTHS = {\n    sm: \"max-w-2xl\",\n    md: \"max-w-4xl\",\n    lg: \"max-w-6xl\",\n    xl: \"max-w-7xl\",\n    full: \"max-w-full\",\n}\n\nexport function PageContainer({\n    children,\n    className,\n    maxWidth = \"xl\",\n}: PageContainerProps) {\n    return (\n        <div\n            className={cn(\n                \"mx-auto w-full px-4 py-6 md:px-8 md:py-8\",\n                MAX_WIDTHS[maxWidth],\n                className\n            )}\n        >\n            {children}\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/layout/PageHeader.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":46,"column":24,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":54,"endColumn":14,"fix":{"range":[1300,1363],"text":"border-rp-highlight-med bg-rp-base/95 border-b backdrop-blur-sm"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'px-4, py-4' could be replaced by the 'p-4' shorthand!","line":46,"column":24,"nodeType":"CallExpression","messageId":"shorthandCandidateDetected","endLine":54,"endColumn":14,"fix":{"range":[1440,1457],"text":"p-4 md:px-6"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":61,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":61,"endColumn":112,"fix":{"range":[1756,1831],"text":"text-rp-subtle hover:text-rp-text flex items-center gap-2 transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":89,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":89,"endColumn":93,"fix":{"range":[3115,3171],"text":"font-tiempos-headline text-rp-text text-xl font-semibold"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":4,"source":"\"use client\"\n\nimport { ReactNode } from \"react\"\nimport Link from \"next/link\"\nimport Image from \"next/image\"\nimport { useTheme } from \"next-themes\"\nimport { cn } from \"@/lib/utils\"\n\ninterface PageHeaderProps {\n    /** Optional title to display */\n    title?: string\n    /** Action buttons or other elements to show on the right */\n    actions?: ReactNode\n    /** Additional className for the header */\n    className?: string\n    /** Show the logo (default: true) */\n    showLogo?: boolean\n    /** Show back button instead of logo */\n    showBackButton?: boolean\n    /** Back button href (default: \"/\") */\n    backHref?: string\n}\n\n/**\n * PageHeader - Standardized header component\n * \n * Features:\n * - Theme-aware logo (light/dark mode)\n * - Optional title display\n * - Actions slot for buttons/links\n * - Proper z-index to stay above sidebar\n * - Consistent styling across all pages\n */\nexport function PageHeader({\n    title,\n    actions,\n    className,\n    showLogo = true,\n    showBackButton = false,\n    backHref = \"/\",\n}: PageHeaderProps) {\n    const { resolvedTheme } = useTheme()\n\n    return (\n        <header\n            className={cn(\n                // Base styles\n                \"relative z-50 flex items-center justify-between\",\n                // Border and background\n                \"border-b border-rp-highlight-med bg-rp-base/95 backdrop-blur-sm\",\n                // Padding - consistent across all pages\n                \"px-4 py-4 md:px-6\",\n                className\n            )}\n        >\n            {/* Left section: Logo or Back button */}\n            <div className=\"flex items-center gap-4\">\n                {showBackButton ? (\n                    <Link\n                        href={backHref}\n                        className=\"flex items-center gap-2 text-rp-subtle hover:text-rp-text transition-colors\"\n                    >\n                        <svg\n                            className=\"size-5\"\n                            fill=\"none\"\n                            viewBox=\"0 0 24 24\"\n                            stroke=\"currentColor\"\n                            strokeWidth={2}\n                        >\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15 19l-7-7 7-7\" />\n                        </svg>\n                        <span className=\"text-sm font-medium\">Back</span>\n                    </Link>\n                ) : showLogo ? (\n                    <Link href=\"/\" className=\"flex items-center\">\n                        <Image\n                            src={resolvedTheme === \"light\" ? \"/logo_dark.svg\" : \"/logo.svg\"}\n                            alt=\"Remrin\"\n                            width={128}\n                            height={40}\n                            className=\"h-8 w-auto drop-shadow-[0_0_12px_rgba(235,188,186,0.4)] transition-transform duration-300 ease-out hover:rotate-[-5deg] hover:scale-105\"\n                            priority\n                        />\n                    </Link>\n                ) : null}\n\n                {/* Optional title */}\n                {title && (\n                    <h1 className=\"font-tiempos-headline text-xl font-semibold text-rp-text\">\n                        {title}\n                    </h1>\n                )}\n            </div>\n\n            {/* Right section: Actions */}\n            {actions && (\n                <div className=\"flex items-center gap-4\">\n                    {actions}\n                </div>\n            )}\n        </header>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/layout/PageTemplate.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":89,"column":25,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":89,"endColumn":79,"fix":{"range":[2364,2401],"text":"bg-rp-base flex min-h-screen flex-col"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'md:px-8, md:py-8' could be replaced by the 'md:p-8' shorthand!","line":95,"column":28,"nodeType":"CallExpression","messageId":"shorthandCandidateDetected","endLine":101,"endColumn":18,"fix":{"range":[2634,2659],"text":"px-4 py-6 md:p-8"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":2,"source":"\"use client\"\n\nimport { ReactNode } from \"react\"\nimport { cn } from \"@/lib/utils\"\nimport { Footer } from \"./Footer\"\nimport { PageHeader } from \"./PageHeader\"\nimport { SIDEBAR } from \"@/lib/design-system\"\n\nconst MAX_WIDTHS = {\n    sm: \"max-w-2xl\",\n    md: \"max-w-4xl\",\n    lg: \"max-w-6xl\",\n    xl: \"max-w-7xl\",\n    full: \"max-w-full\",\n} as const\n\ninterface PageTemplateProps {\n    children: ReactNode\n    /** Custom header content - if provided, replaces default PageHeader */\n    header?: ReactNode\n    /** Show the default header (default: true) - ignored if custom header is provided */\n    showHeader?: boolean\n    /** Show the footer (default: true) */\n    showFooter?: boolean\n    /** Maximum width of the content area */\n    maxWidth?: keyof typeof MAX_WIDTHS\n    /** Additional className for the main wrapper */\n    className?: string\n    /** Additional className for the content area */\n    contentClassName?: string\n    /** Header title (used with default header) */\n    title?: string\n    /** Header action buttons slot (used with default header) */\n    headerActions?: ReactNode\n    /** Whether the page has a full-bleed background (no padding) */\n    fullBleed?: boolean\n}\n\n/**\n * PageTemplate - Standardized page layout component\n * \n * Provides consistent layout with:\n * - Proper sidebar offset (handled by root layout - this component just provides content structure)\n * - Optional header with logo and actions\n * - Main content area with configurable max-width\n * - Optional footer\n * \n * Usage:\n * ```tsx\n * <PageTemplate title=\"My Page\" headerActions={<Button>Action</Button>}>\n *   <YourContent />\n * </PageTemplate>\n * ```\n * \n * Or with custom header:\n * ```tsx\n * <PageTemplate header={<CustomHeader />} showFooter={false}>\n *   <YourContent />\n * </PageTemplate>\n * ```\n */\nexport function PageTemplate({\n    children,\n    header,\n    showHeader = true,\n    showFooter = true,\n    maxWidth = \"xl\",\n    className,\n    contentClassName,\n    title,\n    headerActions,\n    fullBleed = false,\n}: PageTemplateProps) {\n    const renderHeader = () => {\n        // Custom header provided\n        if (header) {\n            return header\n        }\n\n        // Default header\n        if (showHeader) {\n            return <PageHeader title={title} actions={headerActions} />\n        }\n\n        return null\n    }\n\n    return (\n        <div className={cn(\"bg-rp-base min-h-screen flex flex-col\", className)}>\n            {/* Header Section */}\n            {renderHeader()}\n\n            {/* Main Content Area */}\n            <main\n                className={cn(\n                    \"flex-1\",\n                    !fullBleed && \"px-4 py-6 md:px-8 md:py-8\",\n                    !fullBleed && MAX_WIDTHS[maxWidth],\n                    !fullBleed && \"mx-auto w-full\",\n                    contentClassName\n                )}\n            >\n                {children}\n            </main>\n\n            {/* Footer Section */}\n            {showFooter && <Footer />}\n        </div>\n    )\n}\n\n// Re-export for convenience\nexport { PageHeader } from \"./PageHeader\"\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/layout/SidebarCreateButton.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":54,"column":28,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":59,"endColumn":18,"fix":{"range":[2023,2062],"text":"border-rp-muted/30 bg-rp-surface border"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":62,"column":33,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":65,"endColumn":18,"fix":{"range":[2335,2376],"text":"flex shrink-0 items-center justify-center"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":62,"column":33,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":65,"endColumn":18,"fix":{"range":[2400,2444],"text":"bg-rp-iris/10 text-rp-iris size-6 rounded-lg"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":71,"column":21,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":71,"endColumn":117,"fix":{"range":[2665,2749],"text":"font-tiempos-text text-rp-text overflow-hidden whitespace-nowrap text-sm font-medium"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":4,"source":"\"use client\"\n\nimport { useContext, useCallback } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { motion } from \"framer-motion\"\nimport { cn } from \"@/lib/utils\"\nimport { IconSparkles } from \"@tabler/icons-react\"\nimport { RemrinContext } from \"@/context/context\"\nimport { isMotherOfSouls, MOTHER_OF_SOULS_ID } from \"@/lib/forge/is-mother-chat\"\nimport { createClient } from \"@/lib/supabase/client\"\n\ninterface SidebarCreateButtonProps {\n    isExpanded: boolean\n}\n\n/**\n * SidebarCreateButton - \"Craft a Soul\" button\n * \n * Starts the Mother of Souls onboarding ritual.\n * The Mother of Souls is a LEGENDARY card that every user has access to.\n */\nexport function SidebarCreateButton({ isExpanded }: SidebarCreateButtonProps) {\n    const router = useRouter()\n    const {\n        personas,\n        selectedWorkspace,\n        setSelectedPersona,\n        setSelectedChat\n    } = useContext(RemrinContext)\n\n    const handleCraftSoul = useCallback(async () => {\n        console.log(\"ðŸ•¯ï¸ [Craft Soul] Initiating Soul Forge ritual...\")\n\n        if (selectedWorkspace) {\n            // Set flag so we know to auto-select Mother (backup for URL)\n            sessionStorage.setItem('ftue_start_mother_chat', MOTHER_OF_SOULS_ID)\n\n            // Navigate to chat with Mother of Souls pre-selected via URL\n            // This ensures the ritual starts correctly and handles reload/deep-linking\n            router.push(`/${selectedWorkspace.id}/chat?persona=${MOTHER_OF_SOULS_ID}`)\n\n            // Also update context for immediate UI feedback if already on the page\n            setSelectedChat(null)\n        } else {\n            // For guests, go to login first\n            router.push('/login?redirect=soul-forge')\n        }\n    }, [selectedWorkspace, router, setSelectedChat])\n\n    return (\n        <div className=\"p-2\">\n            <button\n                onClick={handleCraftSoul}\n                className={cn(\n                    \"flex min-h-[44px] w-full items-center rounded-xl transition-all\",\n                    \"border border-rp-muted/30 bg-rp-surface\",\n                    \"hover:border-rp-iris/50 hover:bg-rp-overlay\",\n                    isExpanded ? \"gap-3 px-4 py-2.5\" : \"justify-center px-3 py-2.5\"\n                )}\n            >\n                {/* Icon */}\n                <div className={cn(\n                    \"shrink-0 flex items-center justify-center\",\n                    \"size-6 rounded-lg bg-rp-iris/10 text-rp-iris\"\n                )}>\n                    <IconSparkles size={16} strokeWidth={2.5} />\n                </div>\n\n                {/* Text - only when expanded */}\n                <motion.span\n                    className=\"font-tiempos-text text-sm font-medium text-rp-text whitespace-nowrap overflow-hidden\"\n                    initial={false}\n                    animate={{\n                        opacity: isExpanded ? 1 : 0,\n                        width: isExpanded ? \"auto\" : 0\n                    }}\n                    transition={{ duration: 0.2 }}\n                >\n                    Craft a Soul\n                </motion.span>\n            </button>\n        </div>\n    )\n}\n\n\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/layout/SidebarRecentChats.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":77,"column":29,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":80,"endColumn":14,"fix":{"range":[2992,3079],"text":"text-rp-subtle flex items-center px-3 py-2 text-xs font-medium uppercase tracking-wider"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":98,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":98,"endColumn":96,"fix":{"range":[3830,3896],"text":"scrollbar-hide flex max-h-[264px] flex-col gap-0.5 overflow-y-auto"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":103,"column":36,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":108,"endColumn":26,"fix":{"range":[4348,4379],"text":"justify-start gap-3 px-3 py-1.5"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":126,"column":38,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":126,"endColumn":119,"fix":{"range":[5282,5351],"text":"bg-rp-iris/20 text-rp-iris flex size-full items-center justify-center"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":134,"column":35,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":134,"endColumn":83,"fix":{"range":[5669,5705],"text":"text-rp-text flex-1 truncate text-sm"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":5,"source":"\"use client\"\n\nimport { useContext, useMemo } from \"react\"\nimport Link from \"next/link\"\nimport { motion } from \"framer-motion\"\nimport Image from \"next/image\"\nimport { cn } from \"@/lib/utils\"\nimport { RemrinContext } from \"@/context/context\"\nimport { IconMessage } from \"@tabler/icons-react\"\n\ninterface SidebarRecentChatsProps {\n    isExpanded: boolean\n    maxChats?: number\n    showDemo?: boolean // Set to true to show demo content\n}\n\n// Demo data for preview purposes\nconst DEMO_CHATS = [\n    { id: \"demo-1\", name: \"Rem\", imageUrl: \"/images/rem_hero.webp\", href: \"#\" },\n    { id: \"demo-2\", name: \"Marcus\", imageUrl: \"https://picsum.photos/seed/marcus/200\", href: \"#\" },\n    { id: \"demo-3\", name: \"Aria\", imageUrl: \"https://picsum.photos/seed/aria/200\", href: \"#\" },\n    { id: \"demo-4\", name: \"Rex\", imageUrl: \"https://picsum.photos/seed/rex/200\", href: \"#\" },\n    { id: \"demo-5\", name: \"Celeste\", imageUrl: \"https://picsum.photos/seed/celeste/200\", href: \"#\" },\n    { id: \"demo-6\", name: \"Drake\", imageUrl: \"https://picsum.photos/seed/drake/200\", href: \"#\" },\n    { id: \"demo-7\", name: \"Sophia\", imageUrl: \"https://picsum.photos/seed/sophia/200\", href: \"#\" },\n    { id: \"demo-8\", name: \"Atlas\", imageUrl: \"https://picsum.photos/seed/atlas/200\", href: \"#\" },\n]\n\n/**\n * SidebarRecentChats - Talkie-AI inspired recent chats list\n * \n * Shows avatars of recent chat sessions when collapsed,\n * and full names when expanded.\n */\nexport function SidebarRecentChats({ isExpanded, maxChats = 8, showDemo = false }: SidebarRecentChatsProps) {\n    const { chats, personas } = useContext(RemrinContext)\n\n    // Get recent chats sorted by updated_at, with persona info\n    const recentChats = useMemo(() => {\n        // If showDemo is true, return demo data\n        if (showDemo) {\n            return DEMO_CHATS.slice(0, maxChats)\n        }\n\n        if (!chats || chats.length === 0) return []\n\n        // Sort by updated_at (most recent first)\n        const sorted = [...chats].sort((a, b) => {\n            const dateA = new Date(a.updated_at || a.created_at).getTime()\n            const dateB = new Date(b.updated_at || b.created_at).getTime()\n            return dateB - dateA\n        })\n\n        // Map to include persona info for avatars\n        return sorted.slice(0, maxChats).map(chat => {\n            // Try to find persona by matching chat name or assistant_id\n            const persona = personas?.find(p =>\n                p.name === chat.name || p.id === chat.assistant_id\n            )\n            return {\n                id: chat.id,\n                name: chat.name,\n                imageUrl: persona?.image_url || null,\n                href: `/chat/${chat.id}`\n            }\n        })\n    }, [chats, personas, maxChats, showDemo])\n\n    // Don't render if no recent chats (and not in demo mode)\n    if (recentChats.length === 0) {\n        return null\n    }\n\n    return (\n        <div className=\"flex flex-col\">\n            {/* Header */}\n            <div className={cn(\n                \"flex items-center px-3 py-2 text-xs font-medium uppercase tracking-wider text-rp-subtle\",\n                isExpanded ? \"justify-start\" : \"justify-center\"\n            )}>\n                <motion.span\n                    initial={false}\n                    animate={{\n                        opacity: isExpanded ? 1 : 0,\n                        width: isExpanded ? \"auto\" : 0\n                    }}\n                    transition={{ duration: 0.2 }}\n                    className=\"overflow-hidden whitespace-nowrap\"\n                >\n                    Chats\n                </motion.span>\n                {!isExpanded && (\n                    <IconMessage size={16} className=\"text-rp-subtle\" />\n                )}\n            </div>\n\n            {/* Chat List - Compact layout, scrollable, max ~6 visible */}\n            <div className=\"flex flex-col gap-0.5 max-h-[264px] overflow-y-auto scrollbar-hide\">\n                {recentChats.map((chat) => (\n                    <Link\n                        key={chat.id}\n                        href={chat.href}\n                        className={cn(\n                            \"group flex items-center rounded-lg transition-all\",\n                            \"hover:bg-rp-overlay\",\n                            // Always center when collapsed, align left when expanded\n                            isExpanded ? \"gap-3 px-3 py-1.5 justify-start\" : \"justify-center py-1\"\n                        )}\n                        title={chat.name}\n                    >\n                        {/* Avatar - centered */}\n                        <div className={cn(\n                            \"shrink-0 overflow-hidden rounded-lg transition-transform\",\n                            \"group-hover:scale-105\",\n                            isExpanded ? \"size-8\" : \"size-9\"\n                        )}>\n                            {chat.imageUrl ? (\n                                <Image\n                                    src={chat.imageUrl}\n                                    alt={chat.name}\n                                    className=\"object-cover\"\n                                    fill\n                                    sizes=\"36px\"\n                                />\n                            ) : (\n                                <div className=\"flex size-full items-center justify-center bg-rp-iris/20 text-rp-iris\">\n                                    <IconMessage size={14} />\n                                </div>\n                            )}\n                        </div>\n\n                        {/* Name - only render when expanded */}\n                        {isExpanded && (\n                            <span className=\"flex-1 truncate text-sm text-rp-text\">\n                                {chat.name}\n                            </span>\n                        )}\n                    </Link>\n                ))}\n            </div>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/layout/SidebarThemeToggle.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":37,"column":28,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":41,"endColumn":18,"fix":{"range":[1144,1180],"text":"w-full justify-start gap-3 px-3 py-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":51,"column":24,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":55,"endColumn":14,"fix":{"range":[1615,1651],"text":"w-full justify-start gap-3 px-3 py-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":75,"column":17,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":75,"endColumn":100,"fix":{"range":[2396,2467],"text":"font-tiempos-text overflow-hidden whitespace-nowrap text-sm font-medium"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":3,"source":"\"use client\"\n\nimport { useTheme } from \"next-themes\"\nimport { useEffect, useState } from \"react\"\nimport { motion } from \"framer-motion\"\nimport { cn } from \"@/lib/utils\"\nimport { IconSun, IconMoon } from \"@tabler/icons-react\"\n\ninterface SidebarThemeToggleProps {\n    isExpanded: boolean\n}\n\n/**\n * SidebarThemeToggle - Dark/Light mode toggle for sidebar\n * \n * Shows icon-only when collapsed, full toggle when expanded\n */\nexport function SidebarThemeToggle({ isExpanded }: SidebarThemeToggleProps) {\n    const { theme, setTheme, resolvedTheme } = useTheme()\n    const [mounted, setMounted] = useState(false)\n\n    // Avoid hydration mismatch by only rendering after mount\n    useEffect(() => {\n        setMounted(true)\n    }, [])\n\n    const isDark = resolvedTheme === \"dark\"\n\n    const toggleTheme = () => {\n        setTheme(isDark ? \"light\" : \"dark\")\n    }\n\n    // Render placeholder during SSR to avoid hydration mismatch\n    if (!mounted) {\n        return (\n            <div\n                className={cn(\n                    \"flex min-h-[44px] items-center rounded-lg\",\n                    \"text-rp-subtle\",\n                    isExpanded ? \"gap-3 px-3 py-2 justify-start w-full\" : \"justify-center p-2\"\n                )}\n            >\n                <div className=\"size-5\" /> {/* Placeholder for icon */}\n            </div>\n        )\n    }\n\n    return (\n        <button\n            onClick={toggleTheme}\n            className={cn(\n                \"flex min-h-[44px] items-center rounded-lg transition-all\",\n                \"text-rp-subtle hover:bg-rp-overlay hover:text-rp-text\",\n                isExpanded ? \"gap-3 px-3 py-2 justify-start w-full\" : \"justify-center p-2\"\n            )}\n            aria-label={isDark ? \"Switch to light mode\" : \"Switch to dark mode\"}\n            title={isDark ? \"Switch to light mode\" : \"Switch to dark mode\"}\n        >\n            {/* Icon with rotation animation */}\n            <motion.div\n                className=\"shrink-0\"\n                initial={false}\n                animate={{ rotate: isDark ? 0 : 180 }}\n                transition={{ duration: 0.3 }}\n            >\n                {isDark ? (\n                    <IconMoon size={20} />\n                ) : (\n                    <IconSun size={20} />\n                )}\n            </motion.div>\n\n            {/* Label - only when expanded */}\n            <motion.span\n                className=\"font-tiempos-text whitespace-nowrap text-sm font-medium overflow-hidden\"\n                initial={false}\n                animate={{\n                    opacity: isExpanded ? 1 : 0,\n                    width: isExpanded ? \"auto\" : 0\n                }}\n                transition={{ duration: 0.2 }}\n            >\n                {isDark ? \"Dark Mode\" : \"Light Mode\"}\n            </motion.span>\n        </button>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/layout/SidebarUserSection.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'supabase.auth'. Either include it or remove the dependency array.","line":49,"column":8,"nodeType":"ArrayExpression","endLine":49,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [supabase.auth]","fix":{"range":[1710,1712],"text":"[supabase.auth]"}}]},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":94,"column":32,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":98,"endColumn":22,"fix":{"range":[3374,3425],"text":"from-rp-iris to-rp-love bg-gradient-to-r text-white"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":94,"column":32,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":98,"endColumn":22,"fix":{"range":[3453,3509],"text":"hover:shadow-rp-iris/20 hover:opacity-90 hover:shadow-lg"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'px-3, py-3' could be replaced by the 'p-3' shorthand!","line":94,"column":32,"nodeType":"CallExpression","messageId":"shorthandCandidateDetected","endLine":98,"endColumn":22,"fix":{"range":[3259,3346],"text":"flex min-h-[48px] items-center justify-center gap-3 rounded-xl p-3 transition-all"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":128,"column":32,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":133,"endColumn":22,"fix":{"range":[4785,4848],"text":"flex min-h-[48px] w-full items-center rounded-xl transition-all"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'px-2, py-2' could be replaced by the 'p-2' shorthand!","line":128,"column":32,"nodeType":"CallExpression","messageId":"shorthandCandidateDetected","endLine":133,"endColumn":22,"fix":{"range":[4990,5014],"text":"justify-center p-2"}},{"ruleId":"tailwindcss/enforces-negative-arbitrary-values","severity":1,"message":"Arbitrary value classname '-translate-x-[2.5px]' should not start with a dash (-)","line":136,"column":37,"nodeType":"CallExpression","messageId":"negativeArbitraryValue","endLine":139,"endColumn":22},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":145,"column":37,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":145,"endColumn":103,"fix":{"range":[5626,5680],"text":"ring-rp-highlight-med rounded-full object-cover ring-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":151,"column":34,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":151,"endColumn":154,"fix":{"range":[5916,6024],"text":"bg-rp-iris/20 text-rp-iris ring-rp-highlight-med flex size-9 items-center justify-center rounded-full ring-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":156,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":156,"endColumn":129,"fix":{"range":[6233,6320],"text":"ring-rp-surface absolute -bottom-0.5 -right-0.5 size-3 rounded-full bg-green-500 ring-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":169,"column":28,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":169,"endColumn":99,"fix":{"range":[6850,6909],"text":"font-tiempos-text text-rp-text truncate text-sm font-medium"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":183,"column":40,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":186,"endColumn":30,"fix":{"range":[7505,7627],"text":"border-rp-highlight-med bg-rp-surface absolute bottom-full left-0 right-0 mb-2 overflow-hidden rounded-xl border shadow-xl"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'left-0, right-0' could be replaced by the 'inset-x-0' shorthand!","line":183,"column":40,"nodeType":"CallExpression","messageId":"shorthandCandidateDetected","endLine":186,"endColumn":30,"fix":{"range":[7505,7627],"text":"absolute bottom-full inset-x-0 mb-2 overflow-hidden rounded-xl border border-rp-highlight-med bg-rp-surface shadow-xl"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'left-auto, right-auto' could be replaced by the 'inset-x-auto' shorthand!","line":183,"column":40,"nodeType":"CallExpression","messageId":"shorthandCandidateDetected","endLine":186,"endColumn":30,"fix":{"range":[7678,7703],"text":"inset-x-auto w-48"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":192,"column":37,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":192,"endColumn":152,"fix":{"range":[8029,8132],"text":"text-rp-text hover:bg-rp-overlay flex items-center gap-3 rounded-lg px-3 py-2 text-sm transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":197,"column":38,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":197,"endColumn":79,"fix":{"range":[8377,8406],"text":"bg-rp-highlight-med my-1 h-px"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":218,"column":32,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":224,"endColumn":22,"fix":{"range":[9396,9455],"text":"flex items-center overflow-hidden rounded-xl transition-all"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":227,"column":37,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":230,"endColumn":22,"fix":{"range":[9924,9965],"text":"flex shrink-0 items-center justify-center"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":237,"column":35,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":237,"endColumn":115,"fix":{"range":[10380,10448],"text":"font-tiempos-text whitespace-nowrap text-sm font-semibold text-white"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":241,"column":39,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":241,"endColumn":121,"fix":{"range":[10632,10702],"text":"bg-rp-love rounded-full px-1.5 py-0.5 text-[10px] font-bold text-white"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'px-3, py-3' could be replaced by the 'p-3' shorthand!","line":253,"column":32,"nodeType":"CallExpression","messageId":"shorthandCandidateDetected","endLine":258,"endColumn":22,"fix":{"range":[11331,11355],"text":"justify-center p-3"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":262,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":262,"endColumn":109,"fix":{"range":[11546,11618],"text":"font-tiempos-text whitespace-nowrap text-sm font-semibold text-amber-400"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":22,"fixableErrorCount":0,"fixableWarningCount":20,"source":"\"use client\"\n\nimport { useContext, useState, useRef, useEffect } from \"react\"\nimport Link from \"next/link\"\nimport Image from \"next/image\"\nimport { useRouter } from \"next/navigation\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport { cn } from \"@/lib/utils\"\nimport { RemrinContext } from \"@/context/context\"\nimport { IconCrown, IconLogin, IconUser, IconLogout, IconSettings, IconUserCircle } from \"@tabler/icons-react\"\nimport { createClient } from \"@/lib/supabase/client\"\nimport { User } from \"@supabase/supabase-js\"\n\ninterface SidebarUserSectionProps {\n    isExpanded: boolean\n    onProfileClick?: () => void\n}\n\n/**\n * SidebarUserSection - Talkie-AI inspired user section for sidebar\n * \n * Shows different states:\n * - Logged out: Sign In button\n * - Logged in: Avatar + Subscribe/Upgrade CTA (or Pro badge if subscribed)\n */\nexport function SidebarUserSection({ isExpanded, onProfileClick }: SidebarUserSectionProps) {\n    const { profile } = useContext(RemrinContext)\n    const [user, setUser] = useState<User | null>(null)\n    const [showDropdown, setShowDropdown] = useState(false)\n    const dropdownRef = useRef<HTMLDivElement>(null)\n    const router = useRouter()\n    const supabase = createClient()\n\n    // Check auth status directly from Supabase\n    useEffect(() => {\n        // Get initial session\n        supabase.auth.getSession().then(({ data: { session } }) => {\n            setUser(session?.user ?? null)\n        })\n\n        // Listen for auth changes\n        const {\n            data: { subscription }\n        } = supabase.auth.onAuthStateChange((_event, session) => {\n            setUser(session?.user ?? null)\n        })\n\n        return () => subscription.unsubscribe()\n    }, [])\n\n    // Check if user is logged in (use Supabase user as source of truth)\n    const isLoggedIn = !!user\n\n    // For now, we'll assume all users can see the subscribe CTA\n    // This can be connected to a subscription status later\n    const isSubscribed = false // TODO: Connect to actual subscription status\n    const discountPercent = 50 // Promotional discount\n\n    // Close dropdown when clicking outside\n    useEffect(() => {\n        function handleClickOutside(event: MouseEvent) {\n            if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n                setShowDropdown(false)\n            }\n        }\n\n        if (showDropdown) {\n            document.addEventListener('mousedown', handleClickOutside)\n            return () => document.removeEventListener('mousedown', handleClickOutside)\n        }\n    }, [showDropdown])\n\n    const handleSignOut = async () => {\n        try {\n            // Call server-side signout API to properly clear cookies\n            await fetch('/api/auth/signout', { method: 'POST' })\n\n            await supabase.auth.signOut({ scope: 'global' })\n\n            // Redirect to home\n            router.push('/')\n            router.refresh()\n        } catch (error) {\n            console.error('Error signing out:', error)\n        }\n    }\n\n    if (!isLoggedIn) {\n        // Logged out state - show Sign In button\n        return (\n            <div className=\"p-2\">\n                <Link\n                    href=\"/login\"\n                    className={cn(\n                        \"flex min-h-[48px] items-center justify-center gap-3 rounded-xl px-3 py-3 transition-all\",\n                        \"bg-gradient-to-r from-rp-iris to-rp-love text-white\",\n                        \"hover:opacity-90 hover:shadow-lg hover:shadow-rp-iris/20\"\n                    )}\n                >\n                    <IconLogin size={22} className=\"shrink-0\" />\n                    <motion.span\n                        className=\"font-tiempos-text whitespace-nowrap text-sm font-medium\"\n                        initial={false}\n                        animate={{\n                            opacity: isExpanded ? 1 : 0,\n                            width: isExpanded ? \"auto\" : 0\n                        }}\n                        transition={{ duration: 0.2 }}\n                    >\n                        Sign In\n                    </motion.span>\n                </Link>\n            </div>\n        )\n    }\n\n    // Get display info from profile or user metadata\n    const displayName = profile?.display_name || user?.user_metadata?.full_name || user?.email?.split('@')[0] || \"User\"\n    const avatarUrl = profile?.image_url || user?.user_metadata?.avatar_url\n\n    // Logged in state - show avatar + subscribe/upgrade CTA\n    return (\n        <div className=\"space-y-2 p-2\">\n            {/* User Info Row with Dropdown */}\n            <div className=\"relative\" ref={dropdownRef}>\n                <button\n                    onClick={() => setShowDropdown(!showDropdown)}\n                    className={cn(\n                        \"flex w-full min-h-[48px] items-center rounded-xl transition-all\",\n                        \"text-rp-subtle hover:bg-rp-overlay hover:text-rp-text\",\n                        isExpanded ? \"gap-3 px-3 py-2\" : \"justify-center px-2 py-2\",\n                        showDropdown && \"bg-rp-overlay text-rp-text\"\n                    )}\n                >\n                    {/* Avatar */}\n                    <div className={cn(\n                        \"relative shrink-0\",\n                        !isExpanded && \"-translate-x-[2.5px]\"\n                    )}>\n                        {avatarUrl ? (\n                            <div className=\"relative size-9\">\n                                <Image\n                                    src={avatarUrl}\n                                    alt={displayName}\n                                    className=\"rounded-full object-cover ring-2 ring-rp-highlight-med\"\n                                    fill\n                                    sizes=\"36px\"\n                                />\n                            </div>\n                        ) : (\n                            <div className=\"flex size-9 items-center justify-center rounded-full bg-rp-iris/20 text-rp-iris ring-2 ring-rp-highlight-med\">\n                                <IconUser size={18} />\n                            </div>\n                        )}\n                        {/* Online indicator */}\n                        <div className=\"absolute -bottom-0.5 -right-0.5 size-3 rounded-full bg-green-500 ring-2 ring-rp-surface\" />\n                    </div>\n\n                    {/* Username - only show when expanded */}\n                    <motion.div\n                        className=\"flex-1 overflow-hidden text-left\"\n                        initial={false}\n                        animate={{\n                            opacity: isExpanded ? 1 : 0,\n                            width: isExpanded ? \"auto\" : 0\n                        }}\n                        transition={{ duration: 0.2 }}\n                    >\n                        <p className=\"font-tiempos-text truncate text-sm font-medium text-rp-text\">\n                            {displayName}\n                        </p>\n                    </motion.div>\n                </button>\n\n                {/* Dropdown Menu */}\n                <AnimatePresence>\n                    {showDropdown && (\n                        <motion.div\n                            initial={{ opacity: 0, y: -10 }}\n                            animate={{ opacity: 1, y: 0 }}\n                            exit={{ opacity: 0, y: -10 }}\n                            transition={{ duration: 0.15 }}\n                            className={cn(\n                                \"absolute bottom-full left-0 right-0 mb-2 overflow-hidden rounded-xl border border-rp-highlight-med bg-rp-surface shadow-xl\",\n                                !isExpanded && \"left-auto right-auto w-48\"\n                            )}\n                        >\n                            <div className=\"p-1\">\n                                <Link\n                                    href=\"/settings/llm\"\n                                    onClick={() => setShowDropdown(false)}\n                                    className=\"flex items-center gap-3 rounded-lg px-3 py-2 text-sm text-rp-text transition-colors hover:bg-rp-overlay\"\n                                >\n                                    <IconSettings size={18} />\n                                    <span>Settings</span>\n                                </Link>\n                                <div className=\"my-1 h-px bg-rp-highlight-med\" />\n                                <button\n                                    onClick={() => {\n                                        setShowDropdown(false)\n                                        handleSignOut()\n                                    }}\n                                    className=\"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-sm text-red-500 transition-colors hover:bg-red-500/10\"\n                                >\n                                    <IconLogout size={18} />\n                                    <span>Logout</span>\n                                </button>\n                            </div>\n                        </motion.div>\n                    )}\n                </AnimatePresence>\n            </div>\n\n            {/* Subscribe/Upgrade CTA - Compact size matching profile avatar */}\n            {!isSubscribed && (\n                <Link\n                    href=\"/pricing\"\n                    className={cn(\n                        \"flex items-center rounded-xl transition-all overflow-hidden\",\n                        \"bg-gradient-to-r from-amber-600/90 to-orange-600/90\",\n                        \"hover:from-amber-500 hover:to-orange-500\",\n                        \"shadow-lg shadow-amber-500/20\",\n                        isExpanded ? \"gap-2 px-3 py-1.5\" : \"justify-center p-1.5\"\n                    )}\n                >\n                    {/* Crown Icon - same size as profile avatar icon */}\n                    <div className={cn(\n                        \"shrink-0 flex items-center justify-center\",\n                        \"size-7\"\n                    )}>\n                        <IconCrown size={18} className=\"text-amber-100\" />\n                    </div>\n\n                    {/* Subscribe Text + Discount Badge - only when expanded */}\n                    {isExpanded && (\n                        <div className=\"flex flex-1 items-center justify-between gap-2\">\n                            <span className=\"font-tiempos-text text-sm font-semibold text-white whitespace-nowrap\">\n                                Subscribe\n                            </span>\n                            {discountPercent > 0 && (\n                                <span className=\"rounded-full bg-rp-love px-1.5 py-0.5 text-[10px] font-bold text-white\">\n                                    -{discountPercent}%\n                                </span>\n                            )}\n                        </div>\n                    )}\n                </Link>\n            )}\n\n            {/* If subscribed, show Pro badge instead */}\n            {isSubscribed && (\n                <div\n                    className={cn(\n                        \"flex min-h-[48px] items-center rounded-xl\",\n                        \"bg-gradient-to-r from-amber-600/30 to-orange-600/30\",\n                        \"border border-amber-500/30\",\n                        isExpanded ? \"gap-3 px-4 py-3\" : \"justify-center px-3 py-3\"\n                    )}\n                >\n                    <IconCrown size={24} className=\"shrink-0 text-amber-400\" />\n                    <motion.span\n                        className=\"font-tiempos-text text-sm font-semibold text-amber-400 whitespace-nowrap\"\n                        initial={false}\n                        animate={{\n                            opacity: isExpanded ? 1 : 0,\n                            width: isExpanded ? \"auto\" : 0\n                        }}\n                        transition={{ duration: 0.2 }}\n                    >\n                        Pro Member\n                    </motion.span>\n                </div>\n            )}\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/marketplace/ListingCard.tsx","messages":[{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames '' could be replaced by the 'inset-x-0' shorthand!","line":157,"column":22,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":157,"endColumn":86,"fix":{"range":[5820,5851],"text":"`absolute inset-x-0 bottom-0${"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"\"use client\"\n\nimport { useState, useRef } from \"react\"\nimport Image from \"next/image\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Button } from \"@/components/ui/button\"\nimport { cn } from \"@/lib/utils\"\nimport { calculateTilt, staggerDelay } from \"@/lib/animations\"\nimport { IconDiamond, IconFlame, IconSparkles } from \"@tabler/icons-react\"\nimport { TYPOGRAPHY, SPACING } from \"@/lib/design-system\"\n\ninterface ListingCardProps {\n    id: string\n    personaId: string\n    personaName: string\n    personaImage: string | null\n    creatorId: string\n    creatorName?: string\n    priceAether: number\n    totalSales: number\n    isLimitedEdition: boolean\n    quantityRemaining?: number | null\n    className?: string\n    animationIndex?: number\n    onBuyClick?: (listingId: string) => void\n}\n\n// Format large numbers: 12500 -> \"12.5K\"\nfunction formatCount(count: number): string {\n    if (count >= 1000000) {\n        return `${(count / 1000000).toFixed(1)}M`\n    }\n    if (count >= 1000) {\n        return `${(count / 1000).toFixed(1)}K`\n    }\n    return count.toString()\n}\n\nexport function ListingCard({\n    id,\n    personaId,\n    personaName,\n    personaImage,\n    creatorId,\n    creatorName,\n    priceAether,\n    totalSales,\n    isLimitedEdition,\n    quantityRemaining,\n    className,\n    animationIndex = 0,\n    onBuyClick\n}: ListingCardProps) {\n    const cardRef = useRef<HTMLDivElement>(null)\n    const [tiltStyle, setTiltStyle] = useState<React.CSSProperties>({})\n    const [isHovering, setIsHovering] = useState(false)\n\n    const handleMouseMove = (e: React.MouseEvent<HTMLDivElement>) => {\n        const { rotateX, rotateY } = calculateTilt(e, 8)\n        setTiltStyle({\n            transform: `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateZ(10px)`\n        })\n    }\n\n    const handleMouseEnter = () => {\n        setIsHovering(true)\n    }\n\n    const handleMouseLeave = () => {\n        setIsHovering(false)\n        setTiltStyle({\n            transform: 'perspective(1000px) rotateX(0deg) rotateY(0deg) translateZ(0px)'\n        })\n    }\n\n    const handleBuyClick = (e: React.MouseEvent) => {\n        e.preventDefault()\n        e.stopPropagation()\n        onBuyClick?.(id)\n    }\n\n    // Gold/amber glow for marketplace cards\n    const glowColor = isLimitedEdition\n        ? 'rgba(235, 111, 146, 0.6)' // rp-love for limited\n        : 'rgba(246, 193, 119, 0.6)' // rp-gold for regular\n\n    return (\n        <div\n            ref={cardRef}\n            className={cn(\n                \"border-rp-muted/20 bg-rp-surface group relative overflow-hidden rounded-2xl border\",\n                \"animate-card-enter transition-all duration-300 ease-out\",\n                className\n            )}\n            style={{\n                ...tiltStyle,\n                animationDelay: `${staggerDelay(animationIndex)}ms`,\n                animationFillMode: 'both',\n                boxShadow: isHovering\n                    ? `0 20px 40px rgba(0,0,0,0.4), 0 0 40px ${glowColor}`\n                    : '0 4px 20px rgba(0,0,0,0.2)',\n                borderColor: isHovering ? glowColor : 'rgba(110, 106, 134, 0.2)',\n                ['--glow-color' as string]: glowColor\n            }}\n            onMouseMove={handleMouseMove}\n            onMouseEnter={handleMouseEnter}\n            onMouseLeave={handleMouseLeave}\n        >\n            {/* Portrait Image */}\n            <div className=\"relative aspect-[3/4] w-full overflow-hidden\">\n                {personaImage ? (\n                    <Image\n                        src={personaImage}\n                        alt={`${personaName} - AI character portrait`}\n                        fill\n                        className={cn(\n                            \"object-cover transition-transform duration-500 ease-out\",\n                            isHovering ? \"scale-105\" : \"scale-100\"\n                        )}\n                        sizes=\"(max-width: 640px) 100vw, (max-width: 768px) 50vw, 33vw\"\n                    />\n                ) : (\n                    <div className=\"from-rp-gold/50 to-rp-rose/50 flex size-full items-center justify-center bg-gradient-to-br\">\n                        <span className=\"text-rp-text/50 text-4xl font-bold\">\n                            {personaName.slice(0, 2).toUpperCase()}\n                        </span>\n                    </div>\n                )}\n\n                {/* Gradient Overlay */}\n                <div className=\"from-rp-base/90 via-rp-base/30 absolute inset-0 bg-gradient-to-t to-transparent\" />\n\n                {/* Limited Edition Badge */}\n                {isLimitedEdition && (\n                    <div className=\"absolute left-3 top-3\">\n                        <Badge className=\"bg-rp-love/90 text-rp-base flex items-center gap-1 rounded-full border-0 px-2 py-1 text-xs font-semibold backdrop-blur-sm\">\n                            <IconSparkles className=\"size-3\" />\n                            <span>Limited</span>\n                            {quantityRemaining !== null && quantityRemaining !== undefined && (\n                                <span className=\"text-rp-base/80 ml-1\">\n                                    {quantityRemaining} left\n                                </span>\n                            )}\n                        </Badge>\n                    </div>\n                )}\n\n                {/* Sales Badge */}\n                <div className=\"absolute right-3 top-3\">\n                    <Badge className=\"bg-rp-base/60 text-rp-text flex items-center gap-1 rounded-full border-0 px-2 py-1 text-xs backdrop-blur-sm\">\n                        <IconFlame className=\"text-rp-gold size-3\" />\n                        <span>{formatCount(totalSales)} sold</span>\n                    </Badge>\n                </div>\n\n                {/* Bottom Content */}\n                <div className={`absolute inset-x-0 bottom-0 ${SPACING.card.medium}`}>\n                    {/* Character Name */}\n                    <h3 className={cn(\n                        TYPOGRAPHY.heading.h4,\n                        \"text-rp-text line-clamp-1 leading-tight drop-shadow-lg\",\n                        \"transition-transform duration-300\",\n                        isHovering && \"translate-x-1\"\n                    )}>\n                        {personaName}\n                    </h3>\n\n                    {/* Creator */}\n                    {creatorName && (\n                        <p className=\"text-rp-subtle mt-0.5 text-xs\">\n                            by {creatorName}\n                        </p>\n                    )}\n\n                    {/* Price and Buy Button Row */}\n                    <div className=\"mt-3 flex items-center justify-between\">\n                        {/* Price */}\n                        <div className=\"flex items-center gap-1.5\">\n                            <IconDiamond className=\"text-rp-gold size-5\" />\n                            <span className=\"text-rp-gold text-lg font-bold\">\n                                {priceAether.toLocaleString()}\n                            </span>\n                            <span className=\"text-rp-subtle text-xs\">Aether</span>\n                        </div>\n\n                        {/* Buy Button */}\n                        <Button\n                            size=\"sm\"\n                            onClick={handleBuyClick}\n                            className={cn(\n                                \"from-rp-gold to-rp-rose text-rp-base rounded-full bg-gradient-to-r px-4 font-semibold\",\n                                \"hover:from-rp-gold/80 hover:to-rp-rose/80\",\n                                \"transition-all duration-300\",\n                                isHovering && \"shadow-rp-gold/30 scale-105 shadow-lg\"\n                            )}\n                        >\n                            Buy Now\n                        </Button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/moments/MomentCard.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":76,"column":24,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":81,"endColumn":14,"fix":{"range":[2159,2227],"text":"hover:border-rp-iris/50 border-white/10 bg-white/5 hover:bg-white/10"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":76,"column":24,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":81,"endColumn":14,"fix":{"range":[2247,2311],"text":"hover:scale-[1.02] hover:shadow-[0_0_30px_rgba(196,167,231,0.2)]"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":2,"source":"\"use client\"\n\nimport Image from \"next/image\"\nimport { cn } from \"@/lib/utils\"\nimport { IconHeart, IconHeartFilled } from \"@tabler/icons-react\"\nimport { useState, memo } from \"react\"\nimport { TYPOGRAPHY, SPACING } from \"@/lib/design-system\"\n\ninterface MomentCardProps {\n    id: string\n    imageUrl: string\n    caption: string | null\n    likesCount: number\n    isLiked: boolean\n    personaName: string\n    personaImageUrl: string | null\n    onClick?: () => void\n    onLike?: (id: string, liked: boolean) => Promise<void>\n    className?: string\n}\n\n// Format large numbers: 12500 -> \"12.5K\"\nfunction formatCount(count: number): string {\n    if (count >= 1000000) {\n        return `${(count / 1000000).toFixed(1)}M`\n    }\n    if (count >= 1000) {\n        return `${(count / 1000).toFixed(1)}K`\n    }\n    return count.toString()\n}\n\nexport const MomentCard = memo(function MomentCard({\n    id,\n    imageUrl,\n    caption,\n    likesCount,\n    isLiked: initialIsLiked,\n    personaName,\n    personaImageUrl,\n    onClick,\n    onLike,\n    className\n}: MomentCardProps) {\n    const [isLiked, setIsLiked] = useState(initialIsLiked)\n    const [currentLikes, setCurrentLikes] = useState(likesCount)\n    const [isLiking, setIsLiking] = useState(false)\n\n    const handleLikeClick = async (e: React.MouseEvent) => {\n        e.stopPropagation()\n        if (isLiking || !onLike) return\n\n        setIsLiking(true)\n        const newLikedState = !isLiked\n\n        // Optimistic update\n        setIsLiked(newLikedState)\n        setCurrentLikes((prev) => (newLikedState ? prev + 1 : Math.max(0, prev - 1)))\n\n        try {\n            await onLike(id, newLikedState)\n        } catch (error) {\n            // Revert on error\n            setIsLiked(!newLikedState)\n            setCurrentLikes((prev) =>\n                newLikedState ? Math.max(0, prev - 1) : prev + 1\n            )\n            console.error(\"Error toggling like:\", error)\n        } finally {\n            setIsLiking(false)\n        }\n    }\n\n    return (\n        <div\n            className={cn(\n                \"group relative cursor-pointer overflow-hidden rounded-2xl border transition-all duration-300\",\n                \"bg-white/5 border-white/10 hover:bg-white/10 hover:border-rp-iris/50\",\n                \"hover:shadow-[0_0_30px_rgba(196,167,231,0.2)] hover:scale-[1.02]\",\n                className\n            )}\n            onClick={onClick}\n        >\n            {/* Moment Image */}\n            < div className=\"relative aspect-[4/5] w-full overflow-hidden\" >\n                <Image\n                    src={imageUrl}\n                    alt={caption || \"Moment\"}\n                    fill\n                    className=\"object-cover transition-transform duration-500 group-hover:scale-110\"\n                    sizes=\"(max-width: 640px) 50vw, (max-width: 768px) 33vw, 25vw\"\n                />\n\n                {/* Gradient Overlay - stronger on hover */}\n                < div className=\"from-rp-base/80 absolute inset-0 bg-gradient-to-t via-transparent to-transparent opacity-60 transition-opacity duration-300 group-hover:opacity-100\" />\n\n                {/* Glassmorphism overlay on hover */}\n                < div className=\"bg-rp-base/20 absolute inset-0 opacity-0 backdrop-blur-[2px] transition-opacity duration-300 group-hover:opacity-100\" />\n\n                {/* Persona Avatar + Name (top left) */}\n                < div className=\"absolute left-3 top-3 flex items-center gap-2\" >\n                    <div className=\"border-rp-muted/20 bg-rp-surface/50 relative size-8 overflow-hidden rounded-full border-2 backdrop-blur-sm\">\n                        {personaImageUrl ? (\n                            <Image\n                                src={personaImageUrl}\n                                alt={personaName}\n                                fill\n                                className=\"object-cover\"\n                            />\n                        ) : (\n                            <div className=\"from-rp-iris to-rp-foam text-rp-base flex size-full items-center justify-center bg-gradient-to-br text-xs font-bold\">\n                                {personaName.slice(0, 1).toUpperCase()}\n                            </div>\n                        )}\n                    </div>\n                    <span className=\"text-rp-text text-sm font-medium opacity-0 drop-shadow-lg transition-opacity duration-300 group-hover:opacity-100\">\n                        {personaName}\n                    </span>\n                </div >\n\n                {/* Bottom Content */}\n                < div className=\"absolute inset-x-0 bottom-0 p-4\" >\n                    {/* Caption - truncated, full on hover */}\n                    {\n                        caption && (\n                            <p className=\"text-rp-text/90 mb-3 line-clamp-2 text-sm drop-shadow-lg transition-all duration-300 group-hover:line-clamp-none\">\n                                {caption}\n                            </p>\n                        )\n                    }\n\n                    {/* Like Button */}\n                    <button\n                        onClick={handleLikeClick}\n                        disabled={isLiking}\n                        className={cn(\n                            \"flex items-center gap-1.5 rounded-full px-3 py-1.5 text-sm font-medium transition-all duration-200\",\n                            \"bg-rp-base/20 hover:bg-rp-base/40 backdrop-blur-sm\",\n                            isLiked ? \"text-rp-love\" : \"text-rp-text/80 hover:text-rp-text\"\n                        )}\n                    >\n                        <div className={cn(\n                            \"size-4 transition-transform duration-200\",\n                            isLiked && \"text-rp-love scale-110\",\n                            isLiking && \"animate-pulse\"\n                        )}>\n                            {isLiked ? <IconHeartFilled className=\"size-full\" /> : <IconHeart className=\"size-full\" />}\n                        </div>\n                        <span>{formatCount(currentLikes)}</span>\n                    </button>\n                </div >\n            </div >\n        </div >\n    )\n})\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/moments/MomentModal.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":99,"column":28,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":99,"endColumn":197,"fix":{"range":[2823,2980],"text":"flex max-h-[95vh] max-w-5xl flex-col gap-0 overflow-hidden border-white/10 bg-black/80 p-0 shadow-[0_0_50px_rgba(0,0,0,0.5)] backdrop-blur-2xl sm:rounded-2xl"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"\"use client\"\n\nimport Image from \"next/image\"\nimport Link from \"next/link\"\nimport { useEffect, useCallback } from \"react\"\nimport { Dialog, DialogContent, DialogTitle } from \"@/components/ui/dialog\"\nimport { Button } from \"@/components/ui/button\"\nimport { Heart, Share2, ChevronLeft, ChevronRight, X, User } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport { VisuallyHidden } from \"@radix-ui/react-visually-hidden\"\n\ninterface MomentModalProps {\n    isOpen: boolean\n    onClose: () => void\n    moment: {\n        id: string\n        imageUrl: string\n        caption: string | null\n        likesCount: number\n        isLiked: boolean\n        persona: {\n            id: string\n            name: string\n            imageUrl: string | null\n        }\n    }\n    onLike?: (id: string, liked: boolean) => Promise<void>\n    onPrev?: () => void\n    onNext?: () => void\n}\n\n// Format large numbers: 12500 -> \"12.5K\"\nfunction formatCount(count: number): string {\n    if (count >= 1000000) {\n        return `${(count / 1000000).toFixed(1)}M`\n    }\n    if (count >= 1000) {\n        return `${(count / 1000).toFixed(1)}K`\n    }\n    return count.toString()\n}\n\nexport function MomentModal({\n    isOpen,\n    onClose,\n    moment,\n    onLike,\n    onPrev,\n    onNext\n}: MomentModalProps) {\n    // Keyboard navigation\n    const handleKeyDown = useCallback(\n        (e: KeyboardEvent) => {\n            if (e.key === \"ArrowLeft\" && onPrev) {\n                onPrev()\n            } else if (e.key === \"ArrowRight\" && onNext) {\n                onNext()\n            } else if (e.key === \"Escape\") {\n                onClose()\n            }\n        },\n        [onPrev, onNext, onClose]\n    )\n\n    useEffect(() => {\n        if (isOpen) {\n            window.addEventListener(\"keydown\", handleKeyDown)\n            return () => window.removeEventListener(\"keydown\", handleKeyDown)\n        }\n    }, [isOpen, handleKeyDown])\n\n    const handleShare = async () => {\n        if (navigator.share) {\n            try {\n                await navigator.share({\n                    title: `Moment by ${moment.persona.name}`,\n                    text: moment.caption || `Check out this moment!`,\n                    url: window.location.href\n                })\n            } catch (error) {\n                // User cancelled or share failed\n                console.log(\"Share cancelled or failed\")\n            }\n        } else {\n            // Fallback: copy link to clipboard\n            await navigator.clipboard.writeText(window.location.href)\n            // Could show a toast here\n        }\n    }\n\n    const handleLikeClick = async () => {\n        if (onLike) {\n            await onLike(moment.id, !moment.isLiked)\n        }\n    }\n\n    return (\n        <Dialog open={isOpen} onOpenChange={(open) => !open && onClose()}>\n            <DialogContent className=\"border-white/10 bg-black/80 flex max-h-[95vh] max-w-5xl flex-col gap-0 overflow-hidden p-0 backdrop-blur-2xl sm:rounded-2xl shadow-[0_0_50px_rgba(0,0,0,0.5)]\">\n                <VisuallyHidden>\n                    <DialogTitle>Moment by {moment.persona.name}</DialogTitle>\n                </VisuallyHidden>\n\n                {/* Close Button */}\n                <button\n                    onClick={onClose}\n                    className=\"bg-rp-base/50 text-rp-text/70 hover:bg-rp-base/70 hover:text-rp-text absolute right-4 top-4 z-50 rounded-full p-2 backdrop-blur-sm transition-colors\"\n                    aria-label=\"Close modal\"\n                >\n                    <X className=\"size-5\" />\n                </button>\n\n                <div className=\"flex flex-1 flex-col overflow-hidden md:flex-row\">\n                    {/* Image Section */}\n                    <div className=\"bg-rp-base relative flex-1\">\n                        {/* Navigation Arrows */}\n                        {onPrev && (\n                            <button\n                                onClick={onPrev}\n                                className=\"bg-rp-base/50 text-rp-text/70 hover:bg-rp-base/70 hover:text-rp-text absolute left-4 top-1/2 z-40 -translate-y-1/2 rounded-full p-3 backdrop-blur-sm transition-all\"\n                                aria-label=\"Previous moment\"\n                            >\n                                <ChevronLeft className=\"size-6\" />\n                            </button>\n                        )}\n                        {onNext && (\n                            <button\n                                onClick={onNext}\n                                className=\"bg-rp-base/50 text-rp-text/70 hover:bg-rp-base/70 hover:text-rp-text absolute right-4 top-1/2 z-40 -translate-y-1/2 rounded-full p-3 backdrop-blur-sm transition-all\"\n                                aria-label=\"Next moment\"\n                            >\n                                <ChevronRight className=\"size-6\" />\n                            </button>\n                        )}\n\n                        {/* Main Image */}\n                        <div className=\"relative aspect-square w-full md:aspect-auto md:h-full\">\n                            <Image\n                                src={moment.imageUrl}\n                                alt={moment.caption || \"Moment\"}\n                                fill\n                                className=\"object-contain\"\n                                sizes=\"(max-width: 768px) 100vw, 60vw\"\n                                priority\n                            />\n                        </div>\n                    </div>\n\n                    {/* Details Section */}\n                    <div className=\"border-rp-muted/20 flex w-full flex-col border-t md:w-80 md:border-l md:border-t-0\">\n                        {/* Persona Header */}\n                        <div className=\"border-rp-muted/20 flex items-center gap-3 border-b p-4\">\n                            <div className=\"border-rp-muted/20 relative size-10 overflow-hidden rounded-full border-2\">\n                                {moment.persona.imageUrl ? (\n                                    <Image\n                                        src={moment.persona.imageUrl}\n                                        alt={moment.persona.name}\n                                        fill\n                                        className=\"object-cover\"\n                                    />\n                                ) : (\n                                    <div className=\"from-rp-iris to-rp-foam text-rp-base flex size-full items-center justify-center bg-gradient-to-br text-sm font-bold\">\n                                        {moment.persona.name.slice(0, 1).toUpperCase()}\n                                    </div>\n                                )}\n                            </div>\n                            <div className=\"flex-1\">\n                                <p className=\"text-rp-text font-semibold\">\n                                    {moment.persona.name}\n                                </p>\n                            </div>\n                        </div>\n\n                        {/* Caption */}\n                        <div className=\"flex-1 overflow-y-auto p-4\">\n                            {moment.caption ? (\n                                <p className=\"text-rp-text text-sm leading-relaxed\">\n                                    {moment.caption}\n                                </p>\n                            ) : (\n                                <p className=\"text-rp-muted text-sm italic\">\n                                    No caption\n                                </p>\n                            )}\n                        </div>\n\n                        {/* Actions */}\n                        <div className=\"border-rp-muted/20 space-y-3 border-t p-4\">\n                            {/* Action Buttons */}\n                            <div className=\"flex items-center gap-4\">\n                                <button\n                                    onClick={handleLikeClick}\n                                    className={cn(\n                                        \"flex items-center gap-2 transition-colors\",\n                                        moment.isLiked\n                                            ? \"text-rp-love\"\n                                            : \"text-rp-subtle hover:text-rp-text\"\n                                    )}\n                                    aria-label={moment.isLiked ? \"Unlike moment\" : \"Like moment\"}\n                                    aria-pressed={moment.isLiked}\n                                >\n                                    <Heart\n                                        className={cn(\n                                            \"size-6\",\n                                            moment.isLiked && \"fill-rp-love\"\n                                        )}\n                                    />\n                                    <span className=\"font-medium\">\n                                        {formatCount(moment.likesCount)}\n                                    </span>\n                                </button>\n\n                                <button\n                                    onClick={handleShare}\n                                    className=\"text-rp-subtle hover:text-rp-text flex items-center gap-2 transition-colors\"\n                                    aria-label=\"Share moment\"\n                                >\n                                    <Share2 className=\"size-5\" />\n                                    <span>Share</span>\n                                </button>\n                            </div>\n\n                            {/* View Character Link */}\n                            <Link href={`/character/${moment.persona.id}`}>\n                                <Button\n                                    variant=\"outline\"\n                                    className=\"border-rp-muted/20 bg-rp-surface hover:bg-rp-overlay w-full rounded-xl\"\n                                >\n                                    <User className=\"mr-2 size-4\" />\n                                    View Character\n                                </Button>\n                            </Link>\n                        </div>\n                    </div>\n                </div>\n            </DialogContent>\n        </Dialog>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/soul-forge/MotherMessage.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":124,"column":39,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":124,"endColumn":101,"fix":{"range":[4255,4305],"text":"bg-rp-pine h-1.5 w-1.5 animate-bounce rounded-full"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-1.5, w-1.5' could be replaced by the 'size-1.5' shorthand!","line":124,"column":39,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":124,"endColumn":101,"fix":{"range":[4255,4305],"text":"size-1.5 animate-bounce rounded-full bg-rp-pine"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":125,"column":39,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":125,"endColumn":101,"fix":{"range":[4393,4443],"text":"bg-rp-pine h-1.5 w-1.5 animate-bounce rounded-full"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-1.5, w-1.5' could be replaced by the 'size-1.5' shorthand!","line":125,"column":39,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":125,"endColumn":101,"fix":{"range":[4393,4443],"text":"size-1.5 animate-bounce rounded-full bg-rp-pine"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":126,"column":39,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":126,"endColumn":101,"fix":{"range":[4533,4583],"text":"bg-rp-pine h-1.5 w-1.5 animate-bounce rounded-full"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-1.5, w-1.5' could be replaced by the 'size-1.5' shorthand!","line":126,"column":39,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":126,"endColumn":101,"fix":{"range":[4533,4583],"text":"size-1.5 animate-bounce rounded-full bg-rp-pine"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":6,"source":"\"use client\"\n\nimport { cn } from \"@/lib/utils\"\nimport { speakText } from \"@/lib/voice/tts\"\nimport { IconVolume } from \"@tabler/icons-react\"\nimport React, { FC, useEffect, useRef, useState } from \"react\"\n\ninterface MotherMessageProps {\n    /** The message content from the Mother (for TTS) */\n    message?: string\n    /** Auto-play TTS when message appears */\n    autoPlay?: boolean\n    /** Voice ID for TTS (defaults to Mother's voice) */\n    voiceId?: string\n    /** Callback when speaking completes */\n    onSpeakComplete?: () => void\n    /** Additional CSS classes */\n    className?: string\n    /** Content to render */\n    children?: React.ReactNode\n    /** Whether the message is still streaming */\n    isStreaming?: boolean\n}\n\n// Default voice for the Mother of Souls\nconst MOTHER_VOICE_ID = \"female-mystical\" // Ancient, mystical voice\n\n/**\n * MotherMessage - Special styling for Mother of Souls messages\n * Features subtle blue glow/aura and optional auto-TTS playback\n */\nexport const MotherMessage: FC<MotherMessageProps> = ({\n    message,\n    autoPlay = true,\n    voiceId = MOTHER_VOICE_ID,\n    onSpeakComplete,\n    className,\n    children,\n    isStreaming = false\n}) => {\n    const [isSpeaking, setIsSpeaking] = useState(false)\n    const speechControlRef = useRef<{ cancel: () => void } | null>(null)\n    const hasAutoPlayedRef = useRef(false)\n\n    // Auto-play TTS on mount if enabled\n    useEffect(() => {\n        if (autoPlay && !hasAutoPlayedRef.current && message) {\n            hasAutoPlayedRef.current = true\n\n            // Small delay to let the message animate in first\n            const timer = setTimeout(() => {\n                setIsSpeaking(true)\n                const control = speakText(message, voiceId, {\n                    onEnd: () => {\n                        setIsSpeaking(false)\n                        onSpeakComplete?.()\n                    },\n                    onError: () => {\n                        setIsSpeaking(false)\n                    }\n                })\n                speechControlRef.current = control\n            }, 500)\n\n            return () => {\n                clearTimeout(timer)\n                speechControlRef.current?.cancel()\n            }\n        }\n    }, [autoPlay, message, voiceId, onSpeakComplete])\n\n    // Cleanup on unmount\n    useEffect(() => {\n        return () => {\n            speechControlRef.current?.cancel()\n        }\n    }, [])\n\n    return (\n        <div\n            className={cn(\n                \"animate-fade-in-up relative max-w-[85%]\",\n                className\n            )}\n        >\n            {/* Outer glow effect */}\n            <div\n                className={cn(\n                    \"absolute -inset-2 rounded-2xl blur-xl\",\n                    \"from-rp-pine/20 via-rp-foam/20 to-rp-pine/20 bg-gradient-to-r\",\n                    \"animate-mother-glow\",\n                    isSpeaking && \"opacity-75\"\n                )}\n            />\n\n            {/* Message bubble */}\n            <div\n                className={cn(\n                    \"relative rounded-2xl px-5 py-4\",\n                    \"from-rp-surface/90 via-rp-surface/80 to-rp-base/90 bg-gradient-to-br\",\n                    \"border-rp-pine/30 border\",\n                    \"backdrop-blur-sm\",\n                    \"shadow-rp-pine/10 shadow-lg\"\n                )}\n            >\n                {/* Speaking indicator */}\n                {isSpeaking && (\n                    <div className=\"bg-rp-pine/80 absolute -right-2 -top-2 flex animate-pulse items-center gap-1 rounded-full px-2 py-1\">\n                        <IconVolume size={12} className=\"text-white\" />\n                        <span className=\"text-xs font-medium text-white\">Speaking</span>\n                    </div>\n                )}\n\n                {/* Message content */}\n                <div className=\"text-rp-text/90 text-sm leading-relaxed\">\n                    {children || (\n                        <p className=\"whitespace-pre-wrap\">\n                            {message}\n                        </p>\n                    )}\n                    {isStreaming && !children && (\n                        <div className=\"mt-2\">\n                            <div className=\"flex gap-1\">\n                                <span className=\"h-1.5 w-1.5 animate-bounce rounded-full bg-rp-pine\" style={{ animationDelay: '0ms' }} />\n                                <span className=\"h-1.5 w-1.5 animate-bounce rounded-full bg-rp-pine\" style={{ animationDelay: '150ms' }} />\n                                <span className=\"h-1.5 w-1.5 animate-bounce rounded-full bg-rp-pine\" style={{ animationDelay: '300ms' }} />\n                            </div>\n                        </div>\n                    )}\n                </div>\n\n                {/* Decorative element */}\n                <div className=\"from-rp-pine absolute bottom-0 left-4 h-[2px] w-8 rounded-full bg-gradient-to-r to-transparent\" />\n            </div>\n        </div>\n    )\n}\n\nexport default MotherMessage\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/studio/ImportExportPanel.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":108,"column":14,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":108,"endColumn":110,"fix":{"range":[3830,3903],"text":"`border-rp-highlight-med bg-rp-surface space-y-4 rounded-xl border p-4 ${"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":111,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":111,"endColumn":69,"fix":{"range":[4038,4070],"text":"text-rp-text text-lg font-medium"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":112,"column":24,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":112,"endColumn":58,"fix":{"range":[4130,4152],"text":"text-rp-subtle text-sm"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-4, w-4' could be replaced by the 'size-4' shorthand!","line":123,"column":41,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":123,"endColumn":78,"fix":{"range":[4709,4734],"text":"mr-2 size-4 animate-spin"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-4, w-4' could be replaced by the 'size-4' shorthand!","line":125,"column":43,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":125,"endColumn":67,"fix":{"range":[4822,4834],"text":"mr-2 size-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":133,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":133,"endColumn":78,"fix":{"range":[5138,5179],"text":"bg-rp-iris hover:bg-rp-iris/90 text-white"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-4, w-4' could be replaced by the 'size-4' shorthand!","line":136,"column":41,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":136,"endColumn":78,"fix":{"range":[5295,5320],"text":"mr-2 size-4 animate-spin"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-4, w-4' could be replaced by the 'size-4' shorthand!","line":138,"column":41,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":138,"endColumn":65,"fix":{"range":[5406,5418],"text":"mr-2 size-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":154,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":154,"endColumn":81,"fix":{"range":[5932,5975],"text":"text-rp-subtle flex justify-between text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":158,"column":54,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":158,"endColumn":89,"fix":{"range":[6180,6203],"text":"bg-rp-highlight-low h-1"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":10,"source":"\"use client\"\n\nimport { useState, useRef } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Progress } from \"@/components/ui/progress\"\nimport { IconDownload, IconUpload, IconReload, IconCheck, IconAlertCircle } from \"@tabler/icons-react\"\nimport { toast } from \"sonner\"\n\ninterface ImportExportPanelProps {\n    className?: string\n}\n\nexport function ImportExportPanel({ className }: ImportExportPanelProps) {\n    const [isExporting, setIsExporting] = useState(false)\n    const [isImporting, setIsImporting] = useState(false)\n    const [importProgress, setImportProgress] = useState(0)\n    const fileInputRef = useRef<HTMLInputElement>(null)\n\n    const handleExport = async () => {\n        setIsExporting(true)\n        try {\n            const response = await fetch(\"/api/v2/personas/export\")\n            if (!response.ok) throw new Error(\"Export failed\")\n\n            const blob = await response.blob()\n            const url = window.URL.createObjectURL(blob)\n            const a = document.createElement(\"a\")\n            const fileName = response.headers.get(\"Content-Disposition\")?.split(\"filename=\")[1]?.replace(/\"/g, \"\") || \"personas_backup.json\"\n\n            a.href = url\n            a.download = fileName\n            document.body.appendChild(a)\n            a.click()\n            window.URL.revokeObjectURL(url)\n            document.body.removeChild(a)\n\n            toast.success(\"Personas exported successfully\")\n        } catch (error: any) {\n            console.error(\"Export error:\", error)\n            toast.error(`Export failed: ${error.message}`)\n        } finally {\n            setIsExporting(false)\n        }\n    }\n\n    const handleImportClick = () => {\n        fileInputRef.current?.click()\n    }\n\n    const handleFileChange = async (event: React.ChangeEvent<HTMLInputElement>) => {\n        const file = event.target.files?.[0]\n        if (!file) return\n\n        setIsImporting(true)\n        setImportProgress(10)\n\n        try {\n            const reader = new FileReader()\n            reader.onload = async (e) => {\n                try {\n                    const content = e.target?.result as string\n                    const data = JSON.parse(content)\n\n                    setImportProgress(30)\n\n                    const response = await fetch(\"/api/v2/personas/import\", {\n                        method: \"POST\",\n                        headers: { \"Content-Type\": \"application/json\" },\n                        body: JSON.stringify(data)\n                    })\n\n                    setImportProgress(80)\n\n                    const result = await response.json()\n\n                    if (!response.ok) throw new Error(result.error || \"Import failed\")\n\n                    setImportProgress(100)\n                    toast.success(`Import complete: ${result.success} succeeded, ${result.failed} failed`)\n\n                    if (result.errors.length > 0) {\n                        result.errors.forEach((err: string) => console.warn(\"Import warning:\", err))\n                    }\n\n                    // Reset input\n                    if (fileInputRef.current) fileInputRef.current.value = \"\"\n\n                    // Optional: Refresh page or trigger a reload of the list\n                    // window.location.reload()\n                } catch (error: any) {\n                    toast.error(`Import failed: ${error.message}`)\n                } finally {\n                    setTimeout(() => {\n                        setIsImporting(false)\n                        setImportProgress(0)\n                    }, 500)\n                }\n            }\n            reader.readAsText(file)\n        } catch (error: any) {\n            toast.error(`Failed to read file: ${error.message}`)\n            setIsImporting(false)\n            setImportProgress(0)\n        }\n    }\n\n    return (\n        <div className={`space-y-4 rounded-xl border border-rp-highlight-med bg-rp-surface p-4 ${className}`}>\n            <div className=\"flex items-center justify-between\">\n                <div>\n                    <h3 className=\"text-lg font-medium text-rp-text\">Backup & Migration</h3>\n                    <p className=\"text-sm text-rp-subtle\">Export your Souls or import them from a backup file.</p>\n                </div>\n                <div className=\"flex gap-2\">\n                    <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={handleExport}\n                        disabled={isExporting || isImporting}\n                        className=\"border-rp-highlight-med bg-rp-overlay/50 hover:bg-rp-highlight-low\"\n                    >\n                        {isExporting ? (\n                            <IconReload className=\"mr-2 h-4 w-4 animate-spin\" />\n                        ) : (\n                            <IconDownload className=\"mr-2 h-4 w-4\" />\n                        )}\n                        Export\n                    </Button>\n                    <Button\n                        size=\"sm\"\n                        onClick={handleImportClick}\n                        disabled={isExporting || isImporting}\n                        className=\"bg-rp-iris text-white hover:bg-rp-iris/90\"\n                    >\n                        {isImporting ? (\n                            <IconReload className=\"mr-2 h-4 w-4 animate-spin\" />\n                        ) : (\n                            <IconUpload className=\"mr-2 h-4 w-4\" />\n                        )}\n                        Bulk Import\n                    </Button>\n                    <input\n                        type=\"file\"\n                        ref={fileInputRef}\n                        onChange={handleFileChange}\n                        accept=\".json\"\n                        className=\"hidden\"\n                    />\n                </div>\n            </div>\n\n            {isImporting && (\n                <div className=\"space-y-2\">\n                    <div className=\"flex justify-between text-xs text-rp-subtle\">\n                        <span>Importing Souls...</span>\n                        <span>{importProgress}%</span>\n                    </div>\n                    <Progress value={importProgress} className=\"h-1 bg-rp-highlight-low\" />\n                </div>\n            )}\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/studio/SoulSplicer.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'linkedKnowledge' logical expression could make the dependencies of useCallback Hook (at line 85) change on every render. To fix this, wrap the initialization of 'linkedKnowledge' in its own useMemo() Hook.","line":47,"column":11,"nodeType":"VariableDeclarator","endLine":47,"endColumn":83},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":90,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":90,"endColumn":91,"fix":{"range":[3390,3451],"text":"border-rp-highlight-med flex items-center gap-3 border-b pb-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":91,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":91,"endColumn":129,"fix":{"range":[3486,3581],"text":"from-rp-iris to-rp-rose flex h-12 w-12 items-center justify-center rounded-lg bg-gradient-to-br"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-12, w-12' could be replaced by the 'size-12' shorthand!","line":91,"column":22,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":91,"endColumn":129,"fix":{"range":[3486,3581],"text":"flex size-12 items-center justify-center rounded-lg bg-gradient-to-br from-rp-iris to-rp-rose"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":95,"column":25,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":95,"endColumn":67,"fix":{"range":[3729,3759],"text":"text-rp-text text-xl font-bold"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":96,"column":24,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":96,"endColumn":58,"fix":{"range":[3813,3835],"text":"text-rp-subtle text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":104,"column":27,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":104,"endColumn":76,"fix":{"range":[4137,4174],"text":"bg-rp-surface grid w-full grid-cols-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":136,"column":47,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":136,"endColumn":125,"fix":{"range":[5648,5714],"text":"border-rp-highlight-med bg-rp-base space-y-6 rounded-lg border p-6"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":144,"column":33,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":144,"endColumn":110,"fix":{"range":[6146,6211],"text":"border-rp-highlight-med bg-rp-surface text-rp-text mt-2 font-mono"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":155,"column":33,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":155,"endColumn":100,"fix":{"range":[6741,6796],"text":"border-rp-highlight-med bg-rp-surface text-rp-text mt-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":166,"column":33,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":166,"endColumn":110,"fix":{"range":[7340,7405],"text":"border-rp-highlight-med bg-rp-surface text-rp-text mt-2 font-mono"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-32, w-32' could be replaced by the 'size-32' shorthand!","line":171,"column":42,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":171,"endColumn":81,"fix":{"range":[7675,7702],"text":"relative size-32 shrink-0"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":175,"column":45,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":175,"endColumn":104,"fix":{"range":[7940,7987],"text":"border-rp-iris rounded-lg border-2 object-cover"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":190,"column":33,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":190,"endColumn":100,"fix":{"range":[8686,8741],"text":"border-rp-highlight-med bg-rp-surface text-rp-text mt-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":198,"column":32,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":198,"endColumn":71,"fix":{"range":[9088,9115],"text":"text-rp-subtle mb-3 text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":210,"column":45,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":210,"endColumn":123,"fix":{"range":[9600,9666],"text":"border-rp-highlight-med bg-rp-base space-y-6 rounded-lg border p-6"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":215,"column":38,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":215,"endColumn":110,"fix":{"range":[9985,10045],"text":"bg-rp-overlay flex items-center gap-2 rounded-full px-3 py-1"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":217,"column":43,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":217,"endColumn":85,"fix":{"range":[10192,10222],"text":"text-rp-iris font-mono text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":226,"column":33,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":226,"endColumn":132,"fix":{"range":[10700,10787],"text":"border-rp-highlight-med bg-rp-surface text-rp-text mt-2 min-h-[300px] font-mono text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":229,"column":32,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":229,"endColumn":71,"fix":{"range":[10919,10946],"text":"text-rp-subtle mt-2 text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":248,"column":47,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":248,"endColumn":81,"fix":{"range":[12078,12100],"text":"text-rp-iris font-mono"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":267,"column":47,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":267,"endColumn":81,"fix":{"range":[13215,13237],"text":"text-rp-rose font-mono"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":286,"column":47,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":286,"endColumn":81,"fix":{"range":[14383,14405],"text":"text-rp-foam font-mono"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":293,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":293,"endColumn":94,"fix":{"range":[14720,14772],"text":"border-rp-gold/20 bg-rp-gold/5 rounded-lg border p-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":294,"column":32,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":294,"endColumn":64,"fix":{"range":[14817,14837],"text":"text-rp-gold text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":305,"column":50,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":305,"endColumn":128,"fix":{"range":[15421,15487],"text":"border-rp-highlight-med bg-rp-base space-y-6 rounded-lg border p-6"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":309,"column":32,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":309,"endColumn":71,"fix":{"range":[15694,15721],"text":"text-rp-subtle mb-3 text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":323,"column":43,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":323,"endColumn":77,"fix":{"range":[16569,16591],"text":"text-rp-iris font-mono"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":331,"column":32,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":331,"endColumn":71,"fix":{"range":[16971,16998],"text":"text-rp-subtle mb-3 text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":345,"column":43,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":345,"endColumn":77,"fix":{"range":[17849,17871],"text":"text-rp-rose font-mono"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":353,"column":32,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":353,"endColumn":71,"fix":{"range":[18241,18268],"text":"text-rp-subtle mb-3 text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":367,"column":43,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":367,"endColumn":77,"fix":{"range":[19107,19129],"text":"text-rp-gold font-mono"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":373,"column":30,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":373,"endColumn":94,"fix":{"range":[19389,19441],"text":"border-rp-foam/20 bg-rp-foam/5 rounded-lg border p-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":374,"column":32,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":374,"endColumn":64,"fix":{"range":[19486,19506],"text":"text-rp-foam text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":384,"column":48,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":384,"endColumn":126,"fix":{"range":[20045,20111],"text":"border-rp-highlight-med bg-rp-base space-y-6 rounded-lg border p-6"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":388,"column":32,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":388,"endColumn":71,"fix":{"range":[20325,20352],"text":"text-rp-subtle mb-4 text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":394,"column":34,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":394,"endColumn":112,"fix":{"range":[20645,20711],"text":"border-rp-muted/20 bg-rp-surface rounded-lg border p-8 text-center"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":395,"column":53,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":395,"endColumn":91,"fix":{"range":[20777,20803],"text":"text-rp-muted mx-auto mb-3"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":396,"column":36,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":396,"endColumn":70,"fix":{"range":[20854,20876],"text":"text-rp-subtle text-sm"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":399,"column":36,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":399,"endColumn":74,"fix":{"range":[21031,21057],"text":"text-rp-muted mt-2 text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":408,"column":41,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":408,"endColumn":184,"fix":{"range":[21519,21650],"text":"border-rp-highlight-med bg-rp-surface hover:bg-rp-overlay flex items-center justify-between rounded-lg border p-3 transition-colors"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":411,"column":50,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":411,"endColumn":126,"fix":{"range":[21832,21896],"text":"bg-rp-overlay flex h-10 w-10 items-center justify-center rounded"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-10, w-10' could be replaced by the 'size-10' shorthand!","line":411,"column":50,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":411,"endColumn":126,"fix":{"range":[21832,21896],"text":"flex size-10 items-center justify-center rounded bg-rp-overlay"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":415,"column":52,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":415,"endColumn":96,"fix":{"range":[22158,22190],"text":"text-rp-text text-sm font-medium"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":418,"column":52,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":418,"endColumn":86,"fix":{"range":[22377,22399],"text":"text-rp-subtle text-xs"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":433,"column":34,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":433,"endColumn":98,"fix":{"range":[23155,23207],"text":"border-rp-iris/20 bg-rp-iris/5 rounded-lg border p-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":434,"column":36,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":434,"endColumn":68,"fix":{"range":[23256,23276],"text":"text-rp-iris text-xs"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":47,"fixableErrorCount":0,"fixableWarningCount":46,"source":"\"use client\"\n\nimport Image from \"next/image\"\nimport { useState, useCallback } from \"react\"\nimport { Label } from \"@/components/ui/label\"\nimport { Input } from \"@/components/ui/input\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { Button } from \"@/components/ui/button\"\nimport { Slider } from \"@/components/ui/slider\"\nimport { Switch } from \"@/components/ui/switch\"\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\nimport {\n    IconDna,\n    IconBrain,\n    IconMoodHappy,\n    IconBook,\n    IconSparkles,\n    IconAlertCircle\n} from \"@tabler/icons-react\"\nimport { StudioPersona } from \"@/app/[locale]/studio/types\"\nimport { VibeSelector } from \"./VibeSelector\"\n\ninterface SoulSplicerProps {\n    persona: StudioPersona\n    onUpdate: (updates: Partial<StudioPersona>) => void\n    knowledgeItems?: Array<{ id: string; file_name: string; file_type: string }>\n}\n\nexport function SoulSplicer({ persona, onUpdate, knowledgeItems = [] }: SoulSplicerProps) {\n    const [activeTab, setActiveTab] = useState(\"identity\")\n\n    // Token count estimation (rough approximation: 1 token â‰ˆ 4 characters)\n    const estimateTokens = (text: string) => Math.ceil(text.length / 4)\n    const systemPromptTokens = estimateTokens(persona.system_prompt || \"\")\n\n    // Get config values with defaults\n    const temperature = persona.config?.brain_params?.temperature ?? 0.7\n    const topP = persona.config?.brain_params?.top_p ?? 0.9\n    const frequencyPenalty = persona.config?.brain_params?.frequency_penalty ?? 0\n\n    // Personality traits from behavioral_blueprint\n    const formality = (persona.behavioral_blueprint?.formality as number) ?? 50\n    const empathy = (persona.behavioral_blueprint?.empathy as number) ?? 50\n    const sarcasm = (persona.behavioral_blueprint?.sarcasm as number) ?? 50\n\n    // Knowledge vault integration\n    const linkedKnowledge = (persona.metadata?.linked_knowledge as string[]) ?? []\n\n    const updateBrainParams = useCallback((key: string, value: number) => {\n        onUpdate({\n            config: {\n                ...persona.config,\n                brain_params: {\n                    ...persona.config?.brain_params,\n                    temperature: persona.config?.brain_params?.temperature ?? 0.7,\n                    top_p: persona.config?.brain_params?.top_p ?? 0.9,\n                    frequency_penalty: persona.config?.brain_params?.frequency_penalty ?? 0,\n                    [key]: value\n                }\n            }\n        })\n    }, [persona.config, onUpdate])\n\n    const updatePersonalityTrait = useCallback((trait: string, value: number) => {\n        onUpdate({\n            behavioral_blueprint: {\n                ...persona.behavioral_blueprint,\n                [trait]: value\n            }\n        })\n    }, [persona.behavioral_blueprint, onUpdate])\n\n    const toggleKnowledgeLink = useCallback((knowledgeId: string) => {\n        const current = linkedKnowledge\n        const updated = current.includes(knowledgeId)\n            ? current.filter(id => id !== knowledgeId)\n            : [...current, knowledgeId]\n\n        onUpdate({\n            metadata: {\n                ...persona.metadata,\n                linked_knowledge: updated\n            }\n        })\n    }, [linkedKnowledge, persona.metadata, onUpdate])\n\n    return (\n        <div className=\"space-y-6\">\n            {/* Header */}\n            <div className=\"flex items-center gap-3 border-b border-rp-highlight-med pb-4\">\n                <div className=\"flex h-12 w-12 items-center justify-center rounded-lg bg-gradient-to-br from-rp-iris to-rp-rose\">\n                    <IconDna size={24} className=\"text-white\" />\n                </div>\n                <div>\n                    <h2 className=\"text-xl font-bold text-rp-text\">Soul Splicer</h2>\n                    <p className=\"text-sm text-rp-subtle\">\n                        Advanced persona editor with fine-tuned control\n                    </p>\n                </div>\n            </div>\n\n            {/* Multi-Panel Tabs */}\n            <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\n                <TabsList className=\"grid w-full grid-cols-4 bg-rp-surface\">\n                    <TabsTrigger\n                        value=\"identity\"\n                        className=\"data-[state=active]:bg-rp-overlay data-[state=active]:text-rp-iris\"\n                    >\n                        <IconSparkles size={16} className=\"mr-2\" />\n                        Identity\n                    </TabsTrigger>\n                    <TabsTrigger\n                        value=\"cortex\"\n                        className=\"data-[state=active]:bg-rp-overlay data-[state=active]:text-rp-iris\"\n                    >\n                        <IconBrain size={16} className=\"mr-2\" />\n                        Cortex\n                    </TabsTrigger>\n                    <TabsTrigger\n                        value=\"personality\"\n                        className=\"data-[state=active]:bg-rp-overlay data-[state=active]:text-rp-iris\"\n                    >\n                        <IconMoodHappy size={16} className=\"mr-2\" />\n                        Personality\n                    </TabsTrigger>\n                    <TabsTrigger\n                        value=\"knowledge\"\n                        className=\"data-[state=active]:bg-rp-overlay data-[state=active]:text-rp-iris\"\n                    >\n                        <IconBook size={16} className=\"mr-2\" />\n                        Knowledge\n                    </TabsTrigger>\n                </TabsList>\n\n                {/* Panel A: Core Identity */}\n                <TabsContent value=\"identity\" className=\"space-y-6 rounded-lg border border-rp-highlight-med bg-rp-base p-6\">\n                    <div className=\"space-y-4\">\n                        <div>\n                            <Label htmlFor=\"name\" className=\"text-rp-text\">Soul Name</Label>\n                            <Input\n                                id=\"name\"\n                                value={persona.name}\n                                onChange={(e) => onUpdate({ name: e.target.value })}\n                                className=\"mt-2 border-rp-highlight-med bg-rp-surface font-mono text-rp-text\"\n                                placeholder=\"Enter persona name...\"\n                            />\n                        </div>\n\n                        <div>\n                            <Label htmlFor=\"tagline\" className=\"text-rp-text\">Tagline</Label>\n                            <Input\n                                id=\"tagline\"\n                                value={persona.tagline || \"\"}\n                                onChange={(e) => onUpdate({ tagline: e.target.value })}\n                                className=\"mt-2 border-rp-highlight-med bg-rp-surface text-rp-text\"\n                                placeholder=\"A brief, catchy description...\"\n                            />\n                        </div>\n\n                        <div>\n                            <Label htmlFor=\"avatar\" className=\"text-rp-text\">Avatar URL</Label>\n                            <Input\n                                id=\"avatar\"\n                                value={persona.image_url || \"\"}\n                                onChange={(e) => onUpdate({ image_url: e.target.value })}\n                                className=\"mt-2 border-rp-highlight-med bg-rp-surface font-mono text-rp-text\"\n                                placeholder=\"https://...\"\n                            />\n                            {persona.image_url && (\n                                <div className=\"mt-3 flex justify-center\">\n                                    <div className=\"relative h-32 w-32 shrink-0\">\n                                        <Image\n                                            src={persona.image_url}\n                                            alt=\"Avatar preview\"\n                                            className=\"rounded-lg border-2 border-rp-iris object-cover\"\n                                            fill\n                                            sizes=\"128px\"\n                                        />\n                                    </div>\n                                </div>\n                            )}\n                        </div>\n\n                        <div>\n                            <Label htmlFor=\"category\" className=\"text-rp-text\">Category</Label>\n                            <Input\n                                id=\"category\"\n                                value={persona.category || \"\"}\n                                onChange={(e) => onUpdate({ category: e.target.value })}\n                                className=\"mt-2 border-rp-highlight-med bg-rp-surface text-rp-text\"\n                                placeholder=\"e.g., romance, helper, adventure...\"\n                            />\n                        </div>\n\n                        {/* Vibe Keywords */}\n                        <div>\n                            <Label className=\"text-rp-text\">Vibe Keywords</Label>\n                            <p className=\"mb-3 text-xs text-rp-subtle\">\n                                Add tags that influence the AI&apos;s tone and style\n                            </p>\n                            <VibeSelector\n                                persona={persona}\n                                onUpdate={onUpdate}\n                            />\n                        </div>\n                    </div>\n                </TabsContent>\n\n                {/* Panel B: The Cortex */}\n                <TabsContent value=\"cortex\" className=\"space-y-6 rounded-lg border border-rp-highlight-med bg-rp-base p-6\">\n                    <div className=\"space-y-6\">\n                        <div>\n                            <div className=\"flex items-center justify-between\">\n                                <Label htmlFor=\"system-prompt\" className=\"text-rp-text\">System Prompt</Label>\n                                <div className=\"flex items-center gap-2 rounded-full bg-rp-overlay px-3 py-1\">\n                                    <IconAlertCircle size={14} className=\"text-rp-iris\" />\n                                    <span className=\"font-mono text-xs text-rp-iris\">\n                                        ~{systemPromptTokens} tokens\n                                    </span>\n                                </div>\n                            </div>\n                            <Textarea\n                                id=\"system-prompt\"\n                                value={persona.system_prompt}\n                                onChange={(e) => onUpdate({ system_prompt: e.target.value })}\n                                className=\"mt-2 min-h-[300px] border-rp-highlight-med bg-rp-surface font-mono text-sm text-rp-text\"\n                                placeholder=\"You are...\"\n                            />\n                            <p className=\"mt-2 text-xs text-rp-subtle\">\n                                The core instructions that define how this persona thinks and responds\n                            </p>\n                        </div>\n\n                        <div className=\"grid gap-6 md:grid-cols-3\">\n                            <div>\n                                <Label className=\"text-rp-text\">Temperature</Label>\n                                <div className=\"mt-3 space-y-3\">\n                                    <Slider\n                                        value={[temperature]}\n                                        onValueChange={([value]) => updateBrainParams(\"temperature\", value)}\n                                        min={0}\n                                        max={2}\n                                        step={0.1}\n                                        className=\"[&_[role=slider]]:bg-rp-iris\"\n                                    />\n                                    <div className=\"flex justify-between text-xs\">\n                                        <span className=\"text-rp-subtle\">Focused</span>\n                                        <span className=\"font-mono text-rp-iris\">{temperature.toFixed(1)}</span>\n                                        <span className=\"text-rp-subtle\">Creative</span>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div>\n                                <Label className=\"text-rp-text\">Top P</Label>\n                                <div className=\"mt-3 space-y-3\">\n                                    <Slider\n                                        value={[topP]}\n                                        onValueChange={([value]) => updateBrainParams(\"top_p\", value)}\n                                        min={0}\n                                        max={1}\n                                        step={0.05}\n                                        className=\"[&_[role=slider]]:bg-rp-rose\"\n                                    />\n                                    <div className=\"flex justify-between text-xs\">\n                                        <span className=\"text-rp-subtle\">Narrow</span>\n                                        <span className=\"font-mono text-rp-rose\">{topP.toFixed(2)}</span>\n                                        <span className=\"text-rp-subtle\">Diverse</span>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div>\n                                <Label className=\"text-rp-text\">Frequency Penalty</Label>\n                                <div className=\"mt-3 space-y-3\">\n                                    <Slider\n                                        value={[frequencyPenalty]}\n                                        onValueChange={([value]) => updateBrainParams(\"frequency_penalty\", value)}\n                                        min={0}\n                                        max={2}\n                                        step={0.1}\n                                        className=\"[&_[role=slider]]:bg-rp-foam\"\n                                    />\n                                    <div className=\"flex justify-between text-xs\">\n                                        <span className=\"text-rp-subtle\">Repetitive</span>\n                                        <span className=\"font-mono text-rp-foam\">{frequencyPenalty.toFixed(1)}</span>\n                                        <span className=\"text-rp-subtle\">Varied</span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div className=\"rounded-lg border border-rp-gold/20 bg-rp-gold/5 p-4\">\n                            <p className=\"text-xs text-rp-gold\">\n                                <strong>ðŸ’¡ Cortex Parameters:</strong> These control the AI&apos;s thinking process.\n                                Higher temperature = more creative but less predictable.\n                                Top P controls vocabulary diversity.\n                                Frequency penalty reduces repetition.\n                            </p>\n                        </div>\n                    </div>\n                </TabsContent>\n\n                {/* Panel C: Personality Toggles */}\n                <TabsContent value=\"personality\" className=\"space-y-6 rounded-lg border border-rp-highlight-med bg-rp-base p-6\">\n                    <div className=\"space-y-8\">\n                        <div>\n                            <Label className=\"text-rp-text\">Formality Level</Label>\n                            <p className=\"mb-3 text-xs text-rp-subtle\">\n                                How formal or casual should this persona speak?\n                            </p>\n                            <div className=\"space-y-3\">\n                                <Slider\n                                    value={[formality]}\n                                    onValueChange={([value]) => updatePersonalityTrait(\"formality\", value)}\n                                    min={0}\n                                    max={100}\n                                    step={5}\n                                    className=\"[&_[role=slider]]:bg-rp-iris\"\n                                />\n                                <div className=\"flex justify-between text-xs\">\n                                    <span className=\"text-rp-subtle\">Casual & Relaxed</span>\n                                    <span className=\"font-mono text-rp-iris\">{formality}%</span>\n                                    <span className=\"text-rp-subtle\">Formal & Professional</span>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div>\n                            <Label className=\"text-rp-text\">Empathy Level</Label>\n                            <p className=\"mb-3 text-xs text-rp-subtle\">\n                                How emotionally attuned and supportive should they be?\n                            </p>\n                            <div className=\"space-y-3\">\n                                <Slider\n                                    value={[empathy]}\n                                    onValueChange={([value]) => updatePersonalityTrait(\"empathy\", value)}\n                                    min={0}\n                                    max={100}\n                                    step={5}\n                                    className=\"[&_[role=slider]]:bg-rp-rose\"\n                                />\n                                <div className=\"flex justify-between text-xs\">\n                                    <span className=\"text-rp-subtle\">Logical & Direct</span>\n                                    <span className=\"font-mono text-rp-rose\">{empathy}%</span>\n                                    <span className=\"text-rp-subtle\">Warm & Caring</span>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div>\n                            <Label className=\"text-rp-text\">Sarcasm Level</Label>\n                            <p className=\"mb-3 text-xs text-rp-subtle\">\n                                How much wit, humor, and playful sarcasm?\n                            </p>\n                            <div className=\"space-y-3\">\n                                <Slider\n                                    value={[sarcasm]}\n                                    onValueChange={([value]) => updatePersonalityTrait(\"sarcasm\", value)}\n                                    min={0}\n                                    max={100}\n                                    step={5}\n                                    className=\"[&_[role=slider]]:bg-rp-gold\"\n                                />\n                                <div className=\"flex justify-between text-xs\">\n                                    <span className=\"text-rp-subtle\">Serious & Literal</span>\n                                    <span className=\"font-mono text-rp-gold\">{sarcasm}%</span>\n                                    <span className=\"text-rp-subtle\">Witty & Sarcastic</span>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div className=\"rounded-lg border border-rp-foam/20 bg-rp-foam/5 p-4\">\n                            <p className=\"text-xs text-rp-foam\">\n                                <strong>ðŸŽ­ Personality Matrix:</strong> These traits shape how your persona\n                                expresses themselves. Adjust them to create unique communication stylesâ€”from\n                                a formal academic advisor to a casual, sarcastic friend.\n                            </p>\n                        </div>\n                    </div>\n                </TabsContent>\n\n                {/* Panel D: Knowledge Vault */}\n                <TabsContent value=\"knowledge\" className=\"space-y-6 rounded-lg border border-rp-highlight-med bg-rp-base p-6\">\n                    <div className=\"space-y-4\">\n                        <div>\n                            <Label className=\"text-rp-text\">Linked Knowledge Files</Label>\n                            <p className=\"mb-4 text-xs text-rp-subtle\">\n                                Connect files from your Knowledge Vault to give this persona access to specific information\n                            </p>\n                        </div>\n\n                        {knowledgeItems.length === 0 ? (\n                            <div className=\"rounded-lg border border-rp-muted/20 bg-rp-surface p-8 text-center\">\n                                <IconBook size={48} className=\"mx-auto mb-3 text-rp-muted\" />\n                                <p className=\"text-sm text-rp-subtle\">\n                                    No knowledge files available yet\n                                </p>\n                                <p className=\"mt-2 text-xs text-rp-muted\">\n                                    Upload files to your Knowledge Vault to link them here\n                                </p>\n                            </div>\n                        ) : (\n                            <div className=\"space-y-2\">\n                                {knowledgeItems.map((item) => (\n                                    <div\n                                        key={item.id}\n                                        className=\"flex items-center justify-between rounded-lg border border-rp-highlight-med bg-rp-surface p-3 transition-colors hover:bg-rp-overlay\"\n                                    >\n                                        <div className=\"flex items-center gap-3\">\n                                            <div className=\"flex h-10 w-10 items-center justify-center rounded bg-rp-overlay\">\n                                                <IconBook size={20} className=\"text-rp-iris\" />\n                                            </div>\n                                            <div>\n                                                <p className=\"text-sm font-medium text-rp-text\">\n                                                    {item.file_name}\n                                                </p>\n                                                <p className=\"text-xs text-rp-subtle\">\n                                                    {item.file_type.toUpperCase()}\n                                                </p>\n                                            </div>\n                                        </div>\n                                        <Switch\n                                            checked={linkedKnowledge.includes(item.id)}\n                                            onCheckedChange={() => toggleKnowledgeLink(item.id)}\n                                        />\n                                    </div>\n                                ))}\n                            </div>\n                        )}\n\n                        {linkedKnowledge.length > 0 && (\n                            <div className=\"rounded-lg border border-rp-iris/20 bg-rp-iris/5 p-4\">\n                                <p className=\"text-xs text-rp-iris\">\n                                    <strong>ðŸ“š {linkedKnowledge.length} file(s) linked:</strong> This persona\n                                    will have access to the content of these files during conversations.\n                                </p>\n                            </div>\n                        )}\n                    </div>\n                </TabsContent>\n            </Tabs>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/studio/VibeSelector.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":85,"column":22,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":85,"endColumn":86,"fix":{"range":[2645,2697],"text":"border-rp-iris/30 bg-rp-iris/5 rounded-lg border p-4"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":86,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":86,"endColumn":99,"fix":{"range":[2736,2797],"text":"text-rp-iris mb-2 text-xs font-medium uppercase tracking-wide"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":93,"column":33,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":93,"endColumn":200,"fix":{"range":[3126,3281],"text":"border-rp-iris bg-rp-overlay hover:border-rp-rose hover:bg-rp-rose/10 group relative flex items-center gap-2 rounded-full border px-3 py-1.5 transition-all"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":95,"column":39,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":95,"endColumn":83,"fix":{"range":[3362,3394],"text":"text-rp-text text-sm font-medium"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":100,"column":37,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":100,"endColumn":216,"fix":{"range":[3645,3812],"text":"bg-rp-rose/20 text-rp-rose hover:bg-rp-rose flex h-4 w-4 items-center justify-center rounded-full opacity-0 transition-opacity hover:text-white group-hover:opacity-100"}},{"ruleId":"tailwindcss/enforces-shorthand","severity":1,"message":"Classnames 'h-4, w-4' could be replaced by the 'size-4' shorthand!","line":100,"column":37,"nodeType":"JSXAttribute","messageId":"shorthandCandidateDetected","endLine":100,"endColumn":216,"fix":{"range":[3645,3812],"text":"flex size-4 items-center justify-center rounded-full bg-rp-rose/20 text-rp-rose opacity-0 transition-opacity hover:bg-rp-rose hover:text-white group-hover:opacity-100"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":113,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":113,"endColumn":96,"fix":{"range":[4237,4295],"text":"text-rp-subtle text-xs font-medium uppercase tracking-wide"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":128,"column":33,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":128,"endColumn":205,"fix":{"range":[5045,5205],"text":"border-rp-muted/30 bg-rp-surface text-rp-subtle hover:border-rp-iris hover:bg-rp-iris/10 hover:text-rp-iris rounded-full border px-3 py-1 text-sm transition-all"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":138,"column":18,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":138,"endColumn":82,"fix":{"range":[5469,5521],"text":"border-rp-foam/20 bg-rp-foam/5 rounded-lg border p-3"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":139,"column":20,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":139,"endColumn":52,"fix":{"range":[5554,5574],"text":"text-rp-foam text-xs"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":10,"source":"\"use client\"\n\nimport { useState } from \"react\"\nimport { Input } from \"@/components/ui/input\"\nimport { Button } from \"@/components/ui/button\"\nimport { IconPlus, IconX } from \"@tabler/icons-react\"\nimport { StudioPersona } from \"@/app/[locale]/studio/types\"\n\ninterface VibeSelectorProps {\n    persona: StudioPersona\n    onUpdate: (updates: Partial<StudioPersona>) => void\n}\n\nexport function VibeSelector({ persona, onUpdate }: VibeSelectorProps) {\n    const [inputValue, setInputValue] = useState(\"\")\n\n    // Get vibe keywords from metadata\n    const vibeKeywords = (persona.metadata?.vibe_keywords as string[]) ?? []\n\n    const addKeyword = () => {\n        const trimmed = inputValue.trim()\n        if (!trimmed) return\n        if (vibeKeywords.includes(trimmed)) {\n            setInputValue(\"\")\n            return\n        }\n\n        onUpdate({\n            metadata: {\n                ...persona.metadata,\n                vibe_keywords: [...vibeKeywords, trimmed]\n            }\n        })\n        setInputValue(\"\")\n    }\n\n    const removeKeyword = (keyword: string) => {\n        onUpdate({\n            metadata: {\n                ...persona.metadata,\n                vibe_keywords: vibeKeywords.filter(k => k !== keyword)\n            }\n        })\n    }\n\n    const handleKeyPress = (e: React.KeyboardEvent) => {\n        if (e.key === \"Enter\") {\n            e.preventDefault()\n            addKeyword()\n        }\n    }\n\n    // Predefined suggestions\n    const suggestions = [\n        \"playful\", \"mysterious\", \"wise\", \"energetic\", \"calm\",\n        \"witty\", \"serious\", \"romantic\", \"adventurous\", \"supportive\",\n        \"analytical\", \"creative\", \"rebellious\", \"gentle\", \"bold\"\n    ]\n\n    const availableSuggestions = suggestions.filter(s => !vibeKeywords.includes(s))\n\n    return (\n        <div className=\"space-y-4\">\n            {/* Input */}\n            <div className=\"flex gap-2\">\n                <Input\n                    value={inputValue}\n                    onChange={(e) => setInputValue(e.target.value)}\n                    onKeyPress={handleKeyPress}\n                    placeholder=\"Add a vibe keyword...\"\n                    className=\"border-rp-highlight-med bg-rp-surface text-rp-text\"\n                />\n                <Button\n                    onClick={addKeyword}\n                    disabled={!inputValue.trim()}\n                    size=\"icon\"\n                    className=\"bg-rp-iris hover:bg-rp-iris/90\"\n                >\n                    <IconPlus size={18} />\n                </Button>\n            </div>\n\n            {/* Current Keywords Cloud */}\n            {vibeKeywords.length > 0 && (\n                <div className=\"rounded-lg border border-rp-iris/30 bg-rp-iris/5 p-4\">\n                    <div className=\"mb-2 text-xs font-medium uppercase tracking-wide text-rp-iris\">\n                        Active Vibes ({vibeKeywords.length})\n                    </div>\n                    <div className=\"flex flex-wrap gap-2\">\n                        {vibeKeywords.map((keyword) => (\n                            <div\n                                key={keyword}\n                                className=\"group relative flex items-center gap-2 rounded-full border border-rp-iris bg-rp-overlay px-3 py-1.5 transition-all hover:border-rp-rose hover:bg-rp-rose/10\"\n                            >\n                                <span className=\"text-sm font-medium text-rp-text\">\n                                    {keyword}\n                                </span>\n                                <button\n                                    onClick={() => removeKeyword(keyword)}\n                                    className=\"flex h-4 w-4 items-center justify-center rounded-full bg-rp-rose/20 text-rp-rose opacity-0 transition-opacity hover:bg-rp-rose hover:text-white group-hover:opacity-100\"\n                                >\n                                    <IconX size={12} />\n                                </button>\n                            </div>\n                        ))}\n                    </div>\n                </div>\n            )}\n\n            {/* Suggestions */}\n            {availableSuggestions.length > 0 && (\n                <div className=\"space-y-2\">\n                    <div className=\"text-xs font-medium uppercase tracking-wide text-rp-subtle\">\n                        Quick Add\n                    </div>\n                    <div className=\"flex flex-wrap gap-2\">\n                        {availableSuggestions.slice(0, 10).map((suggestion) => (\n                            <button\n                                key={suggestion}\n                                onClick={() => {\n                                    onUpdate({\n                                        metadata: {\n                                            ...persona.metadata,\n                                            vibe_keywords: [...vibeKeywords, suggestion]\n                                        }\n                                    })\n                                }}\n                                className=\"rounded-full border border-rp-muted/30 bg-rp-surface px-3 py-1 text-sm text-rp-subtle transition-all hover:border-rp-iris hover:bg-rp-iris/10 hover:text-rp-iris\"\n                            >\n                                + {suggestion}\n                            </button>\n                        ))}\n                    </div>\n                </div>\n            )}\n\n            {/* Info */}\n            <div className=\"rounded-lg border border-rp-foam/20 bg-rp-foam/5 p-3\">\n                <p className=\"text-xs text-rp-foam\">\n                    <strong>âœ¨ Vibe Keywords:</strong> These tags subtly influence the AI&apos;s tone and\n                    personality. They&apos;re stored in the metadata and can be used by the chat engine\n                    to adjust responses dynamically.\n                </p>\n            </div>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/tier/FeatureGate.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":44,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":44,"endColumn":114,"fix":{"range":[1211,1287],"text":"bg-rp-iris flex items-center gap-1 rounded-full px-2 py-1 text-xs text-white"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":55,"column":24,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":55,"endColumn":58,"fix":{"range":[1720,1742],"text":"text-rp-subtle text-sm"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":2,"source":"'use client'\n\nimport { ReactNode } from 'react'\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { IconLock, IconSparkles } from '@tabler/icons-react'\nimport Link from 'next/link'\n\ninterface FeatureGateProps {\n    featureKey: string\n    featureName: string\n    featureDescription?: string\n    enabled: boolean\n    requiredTier?: string\n    children: ReactNode\n    fallback?: ReactNode\n}\n\nexport function FeatureGate({\n    featureKey,\n    featureName,\n    featureDescription,\n    enabled,\n    requiredTier = 'Soul Weaver',\n    children,\n    fallback\n}: FeatureGateProps) {\n    if (enabled) {\n        return <>{children}</>\n    }\n\n    if (fallback) {\n        return <>{fallback}</>\n    }\n\n    return (\n        <Card className=\"border-rp-iris/50 bg-rp-iris/5\">\n            <CardHeader>\n                <div className=\"flex items-start justify-between\">\n                    <div className=\"flex items-center gap-2\">\n                        <IconLock size={20} className=\"text-rp-iris\" />\n                        <CardTitle>{featureName}</CardTitle>\n                    </div>\n                    <div className=\"flex items-center gap-1 rounded-full bg-rp-iris px-2 py-1 text-xs text-white\">\n                        <IconSparkles size={12} />\n                        {requiredTier}\n                    </div>\n                </div>\n                {featureDescription && (\n                    <CardDescription>{featureDescription}</CardDescription>\n                )}\n            </CardHeader>\n            <CardContent>\n                <div className=\"flex items-center justify-between\">\n                    <p className=\"text-sm text-rp-subtle\">\n                        Upgrade to unlock this feature\n                    </p>\n                    <Button asChild className=\"bg-rp-iris hover:bg-rp-iris/90\">\n                        <Link href=\"/pricing\">\n                            Upgrade Now\n                        </Link>\n                    </Button>\n                </div>\n            </CardContent>\n        </Card>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/ui/button.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":7,"column":24,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":34,"endColumn":2,"fix":{"range":[207,488],"text":"focus-visible:ring-rp-iris inline-flex min-h-[44px] items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":7,"column":24,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":34,"endColumn":2,"fix":{"range":[1188,1215],"text":"h-10 min-h-[44px] px-4 py-2"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":7,"column":24,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":34,"endColumn":2,"fix":{"range":[1231,1263],"text":"h-9 min-h-[40px] rounded-md px-3"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":7,"column":24,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":34,"endColumn":2,"fix":{"range":[1279,1312],"text":"h-11 min-h-[48px] rounded-md px-8"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":4,"source":"import { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-rp-iris focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 min-h-[44px]\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-rp-iris text-rp-base hover:bg-rp-iris/90 hover:scale-105 active:scale-95\",\n        destructive:\n          \"bg-rp-love text-rp-base hover:bg-rp-love/90 hover:scale-105 active:scale-95\",\n        outline:\n          \"border-rp-muted/20 bg-rp-surface hover:bg-rp-overlay hover:border-rp-iris/50 border hover:scale-105 active:scale-95\",\n        secondary:\n          \"bg-rp-overlay text-rp-text hover:bg-rp-overlay/80 hover:scale-105 active:scale-95\",\n        ghost: \"hover:bg-rp-overlay hover:text-rp-text hover:scale-105 active:scale-95\",\n        link: \"text-rp-iris underline-offset-4 hover:underline\"\n      },\n      size: {\n        default: \"h-10 px-4 py-2 min-h-[44px]\",\n        sm: \"h-9 rounded-md px-3 min-h-[40px]\",\n        lg: \"h-11 rounded-md px-8 min-h-[48px]\",\n        icon: \"size-10 min-h-[44px] min-w-[44px]\"\n      }\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\"\n    }\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n  VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/ui/skeleton.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":10,"column":18,"nodeType":"CallExpression","messageId":"invalidOrder","endLine":10,"endColumn":76,"fix":{"range":[230,271],"text":"bg-rp-surface/50 animate-pulse rounded-md"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import { cn } from \"@/lib/utils\"\n\ninterface SkeletonProps extends React.HTMLAttributes<HTMLDivElement> {\n  className?: string\n}\n\nfunction Skeleton({ className, ...props }: SkeletonProps) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-rp-surface/50\", className)}\n      role=\"status\"\n      aria-label=\"Loading\"\n      {...props}\n    />\n  )\n}\n\n// Preset skeleton components for common use cases\nfunction SkeletonCard() {\n  return (\n    <div className=\"bg-rp-surface border-rp-muted/20 rounded-2xl border p-4\">\n      <Skeleton className=\"h-64 w-full rounded-xl\" />\n      <Skeleton className=\"mt-3 h-4 w-3/4\" />\n      <Skeleton className=\"mt-2 h-4 w-1/2\" />\n    </div>\n  )\n}\n\nfunction SkeletonCharacterCard() {\n  return (\n    <div className=\"bg-rp-surface border-rp-muted/20 overflow-hidden rounded-2xl border\">\n      <Skeleton className=\"aspect-[3/4] w-full\" />\n      <div className=\"p-4\">\n        <Skeleton className=\"h-5 w-2/3\" />\n        <Skeleton className=\"mt-2 h-3 w-1/2\" />\n      </div>\n    </div>\n  )\n}\n\nfunction SkeletonText({ lines = 3 }: { lines?: number }) {\n  return (\n    <div className=\"space-y-2\">\n      {Array.from({ length: lines }).map((_, i) => (\n        <Skeleton\n          key={i}\n          className={cn(\n            \"h-4\",\n            i === lines - 1 ? \"w-2/3\" : \"w-full\"\n          )}\n        />\n      ))}\n    </div>\n  )\n}\n\nexport { Skeleton, SkeletonCard, SkeletonCharacterCard, SkeletonText }\n\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/utility/profile-settings.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":345,"column":47,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":345,"endColumn":121,"fix":{"range":[10562,10624],"text":"hover:text-rp-rose transition-all duration-200 hover:scale-110"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import { RemrinContext } from \"@/context/context\"\nimport {\n  PROFILE_CONTEXT_MAX,\n  PROFILE_DISPLAY_NAME_MAX,\n  PROFILE_USERNAME_MAX,\n  PROFILE_USERNAME_MIN\n} from \"@/db/limits\"\nimport { updateProfile } from \"@/db/profile\"\nimport { uploadProfileImage } from \"@/db/storage/profile-images\"\nimport { exportLocalStorageAsJSON } from \"@/lib/export-old-data\"\nimport { fetchOpenRouterModels } from \"@/lib/models/fetch-models\"\nimport { LLM_LIST_MAP } from \"@/lib/models/llm/llm-list\"\nimport { supabase } from \"@/lib/supabase/browser-client\"\nimport { cn } from \"@/lib/utils\"\nimport { OpenRouterLLM } from \"@/types\"\nimport {\n  IconCircleCheckFilled,\n  IconCircleXFilled,\n  IconFileDownload,\n  IconLoader2,\n  IconLock,\n  IconLogout,\n  IconUser,\n  IconCreditCard\n} from \"@tabler/icons-react\"\nimport { Badge } from \"../ui/badge\"\nimport { Tables } from \"@/supabase/types\"\nimport Image from \"next/image\"\nimport { useRouter } from \"next/navigation\"\nimport { FC, useCallback, useContext, useEffect, useRef, useState, useMemo } from \"react\"\nimport { toast } from \"sonner\"\nimport { SIDEBAR_ICON_SIZE } from \"@/lib/legacy-constants\"\nimport { Button } from \"../ui/button\"\nimport ImagePicker from \"../ui/image-picker\"\nimport { Input } from \"../ui/input\"\nimport { Label } from \"../ui/label\"\nimport { LimitDisplay } from \"../ui/limit-display\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetHeader,\n  SheetTitle,\n  SheetTrigger\n} from \"../ui/sheet\"\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"../ui/tabs\"\nimport { TextareaAutosize } from \"../ui/textarea-autosize\"\nimport { WithTooltip } from \"../ui/with-tooltip\"\nimport { ThemeSwitcher } from \"./theme-switcher\"\n\ninterface ProfileSettingsProps { }\n\nexport const ProfileSettings: FC<ProfileSettingsProps> = ({ }) => {\n  const {\n    profile,\n    setProfile,\n    envKeyMap,\n    setAvailableHostedModels,\n    setAvailableOpenRouterModels,\n    availableOpenRouterModels\n  } = useContext(RemrinContext)\n\n  const router = useRouter()\n\n  const buttonRef = useRef<HTMLButtonElement>(null)\n\n  const [isOpen, setIsOpen] = useState(false)\n  const [wallet, setWallet] = useState<Tables<\"wallets\"> | null>(null)\n\n  useEffect(() => {\n    if (isOpen && profile && profile.user_id) {\n      supabase\n        .from(\"wallets\")\n        .select(\"*\")\n        .eq(\"user_id\", profile.user_id)\n        .single()\n        .then(({ data }) => {\n          if (data) setWallet(data)\n        })\n    }\n  }, [isOpen, profile])\n\n  const [displayName, setDisplayName] = useState(profile?.display_name || \"\")\n  const [username, setUsername] = useState(profile?.username || \"\")\n  const [usernameAvailable, setUsernameAvailable] = useState(true)\n  const [loadingUsername, setLoadingUsername] = useState(false)\n  const [profileImageSrc, setProfileImageSrc] = useState(\n    profile?.image_url || \"\"\n  )\n  const [profileImageFile, setProfileImageFile] = useState<File | null>(null)\n  const [profileInstructions, setProfileInstructions] = useState(\n    profile?.profile_context || \"\"\n  )\n\n  const [useAzureOpenai, setUseAzureOpenai] = useState(\n    profile?.use_azure_openai\n  )\n  const [openaiAPIKey, setOpenaiAPIKey] = useState(\n    profile?.openai_api_key || \"\"\n  )\n  const [openaiOrgID, setOpenaiOrgID] = useState(\n    profile?.openai_organization_id || \"\"\n  )\n  const [azureOpenaiAPIKey, setAzureOpenaiAPIKey] = useState(\n    profile?.azure_openai_api_key || \"\"\n  )\n  const [azureOpenaiEndpoint, setAzureOpenaiEndpoint] = useState(\n    profile?.azure_openai_endpoint || \"\"\n  )\n  const [azureOpenai35TurboID, setAzureOpenai35TurboID] = useState(\n    profile?.azure_openai_35_turbo_id || \"\"\n  )\n  const [azureOpenai45TurboID, setAzureOpenai45TurboID] = useState(\n    profile?.azure_openai_45_turbo_id || \"\"\n  )\n  const [azureOpenai45VisionID, setAzureOpenai45VisionID] = useState(\n    profile?.azure_openai_45_vision_id || \"\"\n  )\n  const [azureEmbeddingsID, setAzureEmbeddingsID] = useState(\n    profile?.azure_openai_embeddings_id || \"\"\n  )\n  const [anthropicAPIKey, setAnthropicAPIKey] = useState(\n    profile?.anthropic_api_key || \"\"\n  )\n  const [googleGeminiAPIKey, setGoogleGeminiAPIKey] = useState(\n    profile?.google_gemini_api_key || \"\"\n  )\n  const [mistralAPIKey, setMistralAPIKey] = useState(\n    profile?.mistral_api_key || \"\"\n  )\n  const [groqAPIKey, setGroqAPIKey] = useState(profile?.groq_api_key || \"\")\n  const [perplexityAPIKey, setPerplexityAPIKey] = useState(\n    profile?.perplexity_api_key || \"\"\n  )\n\n  const [openrouterAPIKey, setOpenrouterAPIKey] = useState(\n    profile?.openrouter_api_key || \"\"\n  )\n\n  const handleSignOut = async () => {\n    try {\n      // Call server-side signout API to properly clear cookies\n      await fetch('/api/auth/signout', { method: 'POST' })\n      // Also sign out client-side\n      await supabase.auth.signOut({ scope: 'global' })\n      // Clear cached state\n      setProfile(null)\n      // Use window.location for full page reload instead of router\n      // This ensures all cached state is cleared\n      window.location.href = '/login'\n    } catch (error) {\n      console.error('Sign out error:', error)\n      // Force redirect even on error\n      window.location.href = '/login'\n    }\n  }\n\n  const handleSave = async () => {\n    if (!profile) return\n    let profileImageUrl = profile.image_url\n    let profileImagePath = \"\"\n\n    if (profileImageFile) {\n      const { path, url } = await uploadProfileImage(profile, profileImageFile)\n      profileImageUrl = url ?? profileImageUrl\n      profileImagePath = path\n    }\n\n    const updatedProfile = await updateProfile(profile.id, {\n      ...profile,\n      display_name: displayName,\n      username,\n      profile_context: profileInstructions,\n      image_url: profileImageUrl,\n      image_path: profileImagePath,\n      openai_api_key: openaiAPIKey,\n      openai_organization_id: openaiOrgID,\n      anthropic_api_key: anthropicAPIKey,\n      google_gemini_api_key: googleGeminiAPIKey,\n      mistral_api_key: mistralAPIKey,\n      groq_api_key: groqAPIKey,\n      perplexity_api_key: perplexityAPIKey,\n      use_azure_openai: useAzureOpenai,\n      azure_openai_api_key: azureOpenaiAPIKey,\n      azure_openai_endpoint: azureOpenaiEndpoint,\n      azure_openai_35_turbo_id: azureOpenai35TurboID,\n      azure_openai_45_turbo_id: azureOpenai45TurboID,\n      azure_openai_45_vision_id: azureOpenai45VisionID,\n      azure_openai_embeddings_id: azureEmbeddingsID,\n      openrouter_api_key: openrouterAPIKey\n    })\n\n    setProfile(updatedProfile)\n\n    toast.success(\"Profile updated!\")\n\n    const providers = [\n      \"openai\",\n      \"google\",\n      \"azure\",\n      \"anthropic\",\n      \"mistral\",\n      \"groq\",\n      \"perplexity\",\n      \"openrouter\"\n    ]\n\n    providers.forEach(async provider => {\n      let providerKey: keyof typeof profile\n\n      if (provider === \"google\") {\n        providerKey = \"google_gemini_api_key\"\n      } else if (provider === \"azure\") {\n        providerKey = \"azure_openai_api_key\"\n      } else {\n        providerKey = `${provider}_api_key` as keyof typeof profile\n      }\n\n      const models = LLM_LIST_MAP[provider]\n      const envKeyActive = envKeyMap[provider]\n\n      if (!envKeyActive) {\n        const hasApiKey = !!updatedProfile[providerKey]\n\n        if (provider === \"openrouter\") {\n          if (hasApiKey && availableOpenRouterModels.length === 0) {\n            const openrouterModels: OpenRouterLLM[] =\n              await fetchOpenRouterModels()\n            setAvailableOpenRouterModels(prev => {\n              const newModels = openrouterModels.filter(\n                model =>\n                  !prev.some(prevModel => prevModel.modelId === model.modelId)\n              )\n              return [...prev, ...newModels]\n            })\n          } else {\n            setAvailableOpenRouterModels([])\n          }\n        } else {\n          if (hasApiKey && Array.isArray(models)) {\n            setAvailableHostedModels(prev => {\n              const newModels = models.filter(\n                model =>\n                  !prev.some(prevModel => prevModel.modelId === model.modelId)\n              )\n              return [...prev, ...newModels]\n            })\n          } else if (!hasApiKey && Array.isArray(models)) {\n            setAvailableHostedModels(prev =>\n              prev.filter(model => !models.includes(model))\n            )\n          }\n        }\n      }\n    })\n\n    setIsOpen(false)\n  }\n\n  const debounce = (func: (...args: any[]) => void, wait: number) => {\n    let timeout: NodeJS.Timeout | null\n\n    return (...args: any[]) => {\n      const later = () => {\n        if (timeout) clearTimeout(timeout)\n        func(...args)\n      }\n\n      if (timeout) clearTimeout(timeout)\n      timeout = setTimeout(later, wait)\n    }\n  }\n\n  const debouncedCheck = useMemo(\n    () =>\n      debounce(async (username: string) => {\n        if (!username) return\n\n        if (username.length < PROFILE_USERNAME_MIN) {\n          setUsernameAvailable(false)\n          return\n        }\n\n        if (username.length > PROFILE_USERNAME_MAX) {\n          setUsernameAvailable(false)\n          return\n        }\n\n        const usernameRegex = /^[a-zA-Z0-9_]+$/\n        if (!usernameRegex.test(username)) {\n          setUsernameAvailable(false)\n          toast.error(\n            \"Username must be letters, numbers, or underscores only - no other characters or spacing allowed.\"\n          )\n          return\n        }\n\n        setLoadingUsername(true)\n\n        const response = await fetch(`/api/username/available`, {\n          method: \"POST\",\n          body: JSON.stringify({ username })\n        })\n\n        const data = await response.json()\n        const isAvailable = data.isAvailable\n\n        setUsernameAvailable(isAvailable)\n\n        if (username === profile?.username) {\n          setUsernameAvailable(true)\n        }\n\n        setLoadingUsername(false)\n      }, 500),\n    [profile?.username]\n  )\n\n  const checkUsernameAvailability = useCallback(\n    (username: string) => {\n      debouncedCheck(username)\n    },\n    [debouncedCheck]\n  )\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLDivElement>) => {\n    if (e.key === \"Enter\") {\n      buttonRef.current?.click()\n    }\n  }\n\n  if (!profile) return null\n\n  return (\n    <Sheet open={isOpen} onOpenChange={setIsOpen}>\n      <SheetTrigger asChild>\n        {profile.image_url ? (\n          <Image\n            className=\"mt-2 size-[34px] cursor-pointer rounded hover:opacity-50\"\n            src={profile.image_url + \"?\" + new Date().getTime()}\n            height={34}\n            width={34}\n            alt={\"Image\"}\n          />\n        ) : (\n          <Button size=\"icon\" variant=\"ghost\" className=\"transition-all duration-200 hover:scale-110 hover:text-rp-rose\">\n            <IconUser size={SIDEBAR_ICON_SIZE} />\n          </Button>\n        )}\n      </SheetTrigger>\n\n      <SheetContent\n        className=\"flex flex-col justify-between\"\n        side=\"left\"\n        onKeyDown={handleKeyDown}\n      >\n        <div className=\"grow overflow-auto\">\n          <SheetHeader>\n            <SheetTitle className=\"flex items-center justify-between space-x-2\">\n              <div className=\"flex items-center\">\n                User Settings\n                {profile.user_id && (\n                  <Badge variant=\"secondary\" className=\"border-rp-muted/20 bg-rp-surface ml-2 capitalize\">\n                    {wallet?.tier?.replace(\"_\", \" \") || \"Free\"}\n                  </Badge>\n                )}\n              </div>\n\n              <Button\n                tabIndex={-1}\n                className=\"text-xs\"\n                size=\"sm\"\n                onClick={handleSignOut}\n              >\n                <IconLogout className=\"mr-1\" size={20} />\n                Logout\n              </Button>\n            </SheetTitle>\n          </SheetHeader>\n\n          <Tabs defaultValue=\"profile\">\n            <TabsList className=\"mt-4 grid w-full grid-cols-3\">\n              <TabsTrigger value=\"profile\">Profile</TabsTrigger>\n              <TabsTrigger value=\"billing\">Billing</TabsTrigger>\n              <TabsTrigger value=\"keys\">Advanced</TabsTrigger>\n            </TabsList>\n\n            <TabsContent className=\"mt-4 space-y-4\" value=\"profile\">\n              <div className=\"space-y-1\">\n                <div className=\"flex items-center space-x-2\">\n                  <Label>Username</Label>\n\n                  <div className=\"text-xs\">\n                    {username !== profile.username ? (\n                      usernameAvailable ? (\n                        <div className=\"text-green-500\">AVAILABLE</div>\n                      ) : (\n                        <div className=\"text-red-500\">UNAVAILABLE</div>\n                      )\n                    ) : null}\n                  </div>\n                </div>\n\n                <div className=\"relative\">\n                  <Input\n                    className=\"pr-10\"\n                    placeholder=\"Username...\"\n                    value={username}\n                    onChange={e => {\n                      setUsername(e.target.value)\n                      checkUsernameAvailability(e.target.value)\n                    }}\n                    minLength={PROFILE_USERNAME_MIN}\n                    maxLength={PROFILE_USERNAME_MAX}\n                  />\n\n                  {username !== profile.username ? (\n                    <div className=\"absolute inset-y-0 right-0 flex items-center pr-3\">\n                      {loadingUsername ? (\n                        <IconLoader2 className=\"animate-spin\" />\n                      ) : usernameAvailable ? (\n                        <IconCircleCheckFilled className=\"text-rp-foam\" />\n                      ) : (\n                        <IconCircleXFilled className=\"text-rp-love\" />\n                      )}\n                    </div>\n                  ) : null}\n                </div>\n\n                <LimitDisplay\n                  used={username.length}\n                  limit={PROFILE_USERNAME_MAX}\n                />\n              </div>\n\n              <div className=\"space-y-1\">\n                <Label>Profile Image</Label>\n\n                <ImagePicker\n                  src={profileImageSrc}\n                  image={profileImageFile}\n                  height={50}\n                  width={50}\n                  onSrcChange={setProfileImageSrc}\n                  onImageChange={setProfileImageFile}\n                />\n              </div>\n\n              <div className=\"space-y-1\">\n                <Label>Chat Display Name</Label>\n\n                <Input\n                  placeholder=\"Chat display name...\"\n                  value={displayName}\n                  onChange={e => setDisplayName(e.target.value)}\n                  maxLength={PROFILE_DISPLAY_NAME_MAX}\n                />\n              </div>\n\n              <div className=\"space-y-1\">\n                <Label className=\"text-sm\">\n                  What would you like the AI to know about you to provide better\n                  responses?\n                </Label>\n\n                <TextareaAutosize\n                  value={profileInstructions}\n                  onValueChange={setProfileInstructions}\n                  placeholder=\"Profile context... (optional)\"\n                  minRows={6}\n                  maxRows={10}\n                />\n\n                <LimitDisplay\n                  used={profileInstructions.length}\n                  limit={PROFILE_CONTEXT_MAX}\n                />\n              </div>\n            </TabsContent>\n\n            <TabsContent className=\"mt-4 space-y-4\" value=\"billing\">\n              <div className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                  <Label>Current Plan</Label>\n                  <div className=\"bg-accent/50 flex items-center justify-between rounded-md border p-3\">\n                    <span className=\"font-medium capitalize\">{wallet?.tier ? wallet.tier.replace(\"_\", \" \") : \"Free Tier\"}</span>\n                    {wallet?.tier && (\n                      <Badge variant=\"default\" className=\"bg-primary\">Active</Badge>\n                    )}\n                  </div>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label>Aether Balance</Label>\n                  <div className=\"bg-accent/50 flex items-center justify-between rounded-md border p-3\">\n                    <span className=\"font-medium\">{wallet?.balance_aether?.toLocaleString() || 0} Credits</span>\n                  </div>\n                </div>\n\n                <div className=\"space-y-3 pt-4\">\n                  {wallet?.tier ? (\n                    <Button\n                      className=\"w-full\"\n                      onClick={async () => {\n                        try {\n                          const response = await fetch(\"/api/stripe/portal\", {\n                            method: \"POST\",\n                            headers: { \"Content-Type\": \"application/json\" }\n                          })\n                          const { url } = await response.json()\n                          if (url) window.location.href = url\n                        } catch (error) {\n                          toast.error(\"Failed to redirect to billing portal\")\n                        }\n                      }}\n                    >\n                      <IconCreditCard className=\"mr-2\" size={18} />\n                      Manage Subscription\n                    </Button>\n                  ) : (\n                    <Button\n                      className=\"w-full\"\n                      onClick={() => {\n                        setIsOpen(false)\n                        router.push(\"/pricing\")\n                      }}\n                    >\n                      <IconCreditCard className=\"mr-2\" size={18} />\n                      Upgrade Plan\n                    </Button>\n                  )}\n\n                  <Button\n                    variant=\"outline\"\n                    className=\"w-full\"\n                    onClick={() => {\n                      setIsOpen(false)\n                      // Trigger wallet top-up modal if accessible, or navigate to marketplace\n                      // Since we are in settings, maybe just direct to pricing or let them use the wallet widget\n                      const walletTrigger = document.getElementById(\"wallet-trigger-button\")\n                      if (walletTrigger) {\n                        walletTrigger.click()\n                      } else {\n                        // Fallback check\n                        toast.info(\"Please use the wallet icon in the sidebar to buy credits.\")\n                      }\n                    }}\n                  >\n                    Buy Aether Credits\n                  </Button>\n                </div>\n              </div>\n            </TabsContent>\n\n            <TabsContent className=\"mt-4 space-y-4\" value=\"keys\">\n              {wallet?.tier !== \"architect\" && wallet?.tier !== \"titan\" ? (\n                <div className=\"border-rp-muted/20 bg-rp-surface flex flex-col items-center justify-center space-y-3 rounded-lg border py-10 text-center\">\n                  <IconLock size={48} className=\"text-rp-muted opacity-50\" />\n                  <div className=\"text-rp-text text-lg font-medium\">Advanced Settings Locked</div>\n                  <p className=\"text-rp-subtle max-w-xs text-sm\">\n                    API Key configuration is available for Architect and Titan tiers.\n                  </p>\n                </div>\n              ) : (\n                <>\n                  <div className=\"mt-5 space-y-2\">\n                    <Label className=\"flex items-center\">\n                      {useAzureOpenai\n                        ? envKeyMap[\"azure\"]\n                          ? \"\"\n                          : \"Azure OpenAI API Key\"\n                        : envKeyMap[\"openai\"]\n                          ? \"\"\n                          : \"OpenAI API Key\"}\n\n                      <Button\n                        className={cn(\n                          \"h-[18px] w-[150px] text-xs\",\n                          (useAzureOpenai && !envKeyMap[\"azure\"]) ||\n                            (!useAzureOpenai && !envKeyMap[\"openai\"])\n                            ? \"ml-3\"\n                            : \"mb-3\"\n                        )}\n                        onClick={() => setUseAzureOpenai(!useAzureOpenai)}\n                      >\n                        {useAzureOpenai\n                          ? \"Switch To Standard OpenAI\"\n                          : \"Switch To Azure OpenAI\"}\n                      </Button>\n                    </Label>\n\n                    {useAzureOpenai ? (\n                      <>\n                        {envKeyMap[\"azure\"] ? (\n                          <Label>Azure OpenAI API key set by admin.</Label>\n                        ) : (\n                          <Input\n                            placeholder=\"Azure OpenAI API Key\"\n                            type=\"password\"\n                            value={azureOpenaiAPIKey}\n                            onChange={e => setAzureOpenaiAPIKey(e.target.value)}\n                          />\n                        )}\n                      </>\n                    ) : (\n                      <>\n                        {envKeyMap[\"openai\"] ? (\n                          <Label>OpenAI API key set by admin.</Label>\n                        ) : (\n                          <Input\n                            placeholder=\"OpenAI API Key\"\n                            type=\"password\"\n                            value={openaiAPIKey}\n                            onChange={e => setOpenaiAPIKey(e.target.value)}\n                          />\n                        )}\n                      </>\n                    )}\n                  </div>\n\n                  <div className=\"ml-8 space-y-3\">\n                    {useAzureOpenai ? (\n                      <>\n                        {\n                          <div className=\"space-y-1\">\n                            {envKeyMap[\"azure_openai_endpoint\"] ? (\n                              <Label className=\"text-xs\">\n                                Azure endpoint set by admin.\n                              </Label>\n                            ) : (\n                              <>\n                                <Label>Azure Endpoint</Label>\n\n                                <Input\n                                  placeholder=\"https://your-endpoint.openai.azure.com\"\n                                  value={azureOpenaiEndpoint}\n                                  onChange={e =>\n                                    setAzureOpenaiEndpoint(e.target.value)\n                                  }\n                                />\n                              </>\n                            )}\n                          </div>\n                        }\n\n                        {\n                          <div className=\"space-y-1\">\n                            {envKeyMap[\"azure_gpt_35_turbo_name\"] ? (\n                              <Label className=\"text-xs\">\n                                Azure GPT-3.5 Turbo deployment name set by admin.\n                              </Label>\n                            ) : (\n                              <>\n                                <Label>Azure GPT-3.5 Turbo Deployment Name</Label>\n\n                                <Input\n                                  placeholder=\"Azure GPT-3.5 Turbo Deployment Name\"\n                                  value={azureOpenai35TurboID}\n                                  onChange={e =>\n                                    setAzureOpenai35TurboID(e.target.value)\n                                  }\n                                />\n                              </>\n                            )}\n                          </div>\n                        }\n\n                        {\n                          <div className=\"space-y-1\">\n                            {envKeyMap[\"azure_gpt_45_turbo_name\"] ? (\n                              <Label className=\"text-xs\">\n                                Azure GPT-4.5 Turbo deployment name set by admin.\n                              </Label>\n                            ) : (\n                              <>\n                                <Label>Azure GPT-4.5 Turbo Deployment Name</Label>\n\n                                <Input\n                                  placeholder=\"Azure GPT-4.5 Turbo Deployment Name\"\n                                  value={azureOpenai45TurboID}\n                                  onChange={e =>\n                                    setAzureOpenai45TurboID(e.target.value)\n                                  }\n                                />\n                              </>\n                            )}\n                          </div>\n                        }\n\n                        {\n                          <div className=\"space-y-1\">\n                            {envKeyMap[\"azure_gpt_45_vision_name\"] ? (\n                              <Label className=\"text-xs\">\n                                Azure GPT-4.5 Vision deployment name set by admin.\n                              </Label>\n                            ) : (\n                              <>\n                                <Label>Azure GPT-4.5 Vision Deployment Name</Label>\n\n                                <Input\n                                  placeholder=\"Azure GPT-4.5 Vision Deployment Name\"\n                                  value={azureOpenai45VisionID}\n                                  onChange={e =>\n                                    setAzureOpenai45VisionID(e.target.value)\n                                  }\n                                />\n                              </>\n                            )}\n                          </div>\n                        }\n\n                        {\n                          <div className=\"space-y-1\">\n                            {envKeyMap[\"azure_embeddings_name\"] ? (\n                              <Label className=\"text-xs\">\n                                Azure Embeddings deployment name set by admin.\n                              </Label>\n                            ) : (\n                              <>\n                                <Label>Azure Embeddings Deployment Name</Label>\n\n                                <Input\n                                  placeholder=\"Azure Embeddings Deployment Name\"\n                                  value={azureEmbeddingsID}\n                                  onChange={e =>\n                                    setAzureEmbeddingsID(e.target.value)\n                                  }\n                                />\n                              </>\n                            )}\n                          </div>\n                        }\n                      </>\n                    ) : (\n                      <>\n                        <div className=\"space-y-1\">\n                          {envKeyMap[\"openai_organization_id\"] ? (\n                            <Label className=\"text-xs\">\n                              OpenAI Organization ID set by admin.\n                            </Label>\n                          ) : (\n                            <>\n                              <Label>OpenAI Organization ID</Label>\n\n                              <Input\n                                placeholder=\"OpenAI Organization ID (optional)\"\n                                disabled={\n                                  !!process.env.NEXT_PUBLIC_OPENAI_ORGANIZATION_ID\n                                }\n                                type=\"password\"\n                                value={openaiOrgID}\n                                onChange={e => setOpenaiOrgID(e.target.value)}\n                              />\n                            </>\n                          )}\n                        </div>\n                      </>\n                    )}\n                  </div>\n\n                  <div className=\"space-y-1\">\n                    {envKeyMap[\"anthropic\"] ? (\n                      <Label>Anthropic API key set by admin.</Label>\n                    ) : (\n                      <>\n                        <Label>Anthropic API Key</Label>\n                        <Input\n                          placeholder=\"Anthropic API Key\"\n                          type=\"password\"\n                          value={anthropicAPIKey}\n                          onChange={e => setAnthropicAPIKey(e.target.value)}\n                        />\n                      </>\n                    )}\n                  </div>\n\n                  <div className=\"space-y-1\">\n                    {envKeyMap[\"google\"] ? (\n                      <Label>Google Gemini API key set by admin.</Label>\n                    ) : (\n                      <>\n                        <Label>Google Gemini API Key</Label>\n                        <Input\n                          placeholder=\"Google Gemini API Key\"\n                          type=\"password\"\n                          value={googleGeminiAPIKey}\n                          onChange={e => setGoogleGeminiAPIKey(e.target.value)}\n                        />\n                      </>\n                    )}\n                  </div>\n\n                  <div className=\"space-y-1\">\n                    {envKeyMap[\"mistral\"] ? (\n                      <Label>Mistral API key set by admin.</Label>\n                    ) : (\n                      <>\n                        <Label>Mistral API Key</Label>\n                        <Input\n                          placeholder=\"Mistral API Key\"\n                          type=\"password\"\n                          value={mistralAPIKey}\n                          onChange={e => setMistralAPIKey(e.target.value)}\n                        />\n                      </>\n                    )}\n                  </div>\n\n                  <div className=\"space-y-1\">\n                    {envKeyMap[\"groq\"] ? (\n                      <Label>Groq API key set by admin.</Label>\n                    ) : (\n                      <>\n                        <Label>Groq API Key</Label>\n                        <Input\n                          placeholder=\"Groq API Key\"\n                          type=\"password\"\n                          value={groqAPIKey}\n                          onChange={e => setGroqAPIKey(e.target.value)}\n                        />\n                      </>\n                    )}\n                  </div>\n\n                  <div className=\"space-y-1\">\n                    {envKeyMap[\"perplexity\"] ? (\n                      <Label>Perplexity API key set by admin.</Label>\n                    ) : (\n                      <>\n                        <Label>Perplexity API Key</Label>\n                        <Input\n                          placeholder=\"Perplexity API Key\"\n                          type=\"password\"\n                          value={perplexityAPIKey}\n                          onChange={e => setPerplexityAPIKey(e.target.value)}\n                        />\n                      </>\n                    )}\n                  </div>\n\n                  <div className=\"space-y-1\">\n                    {envKeyMap[\"openrouter\"] ? (\n                      <Label>OpenRouter API key set by admin.</Label>\n                    ) : (\n                      <>\n                        <Label>OpenRouter API Key</Label>\n                        <Input\n                          placeholder=\"OpenRouter API Key\"\n                          type=\"password\"\n                          value={openrouterAPIKey}\n                          onChange={e => setOpenrouterAPIKey(e.target.value)}\n                        />\n                      </>\n                    )}\n                  </div>\n                </>\n              )}\n            </TabsContent>\n          </Tabs>\n        </div>\n\n        <div className=\"mt-6 flex items-center\">\n          <div className=\"flex items-center space-x-1\">\n            <ThemeSwitcher />\n\n            <WithTooltip\n              display={\n                <div>\n                  Download Remrin.ai 1.0 data as JSON. Import coming soon!\n                </div>\n              }\n              trigger={\n                <IconFileDownload\n                  className=\"cursor-pointer hover:opacity-50\"\n                  size={32}\n                  onClick={exportLocalStorageAsJSON}\n                />\n              }\n            />\n          </div>\n\n          <div className=\"ml-auto space-x-2\">\n            <Button variant=\"ghost\" onClick={() => setIsOpen(false)}>\n              Cancel\n            </Button>\n\n            <Button ref={buttonRef} onClick={handleSave}>\n              Save\n            </Button>\n          </div>\n        </div>\n      </SheetContent>\n    </Sheet >\n  )\n}\n","usedDeprecatedRules":[]},{"filePath":"/mnt/Data68/remrin/chat/components/voice/StartSpeakingButton.tsx","messages":[{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":32,"column":13,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":32,"endColumn":72,"fix":{"range":[831,867],"text":"`hover:bg-rp-iris/20 rounded-full ${"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":38,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":38,"endColumn":70,"fix":{"range":[1092,1124],"text":"text-rp-iris size-4 animate-spin"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":40,"column":29,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":40,"endColumn":74,"fix":{"range":[1198,1231],"text":"text-rp-love size-4 animate-pulse"}},{"ruleId":"tailwindcss/classnames-order","severity":1,"message":"Invalid Tailwind CSS classnames order","line":42,"column":26,"nodeType":"JSXAttribute","messageId":"invalidOrder","endLine":42,"endColumn":78,"fix":{"range":[1290,1330],"text":"text-rp-subtle hover:text-rp-iris size-4"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":4,"source":"\"use client\"\n\nimport { Button } from \"@/components/ui/button\"\nimport { useTTS } from \"@/lib/hooks/use-tts\"\nimport { Volume2, Loader2, StopCircle } from \"lucide-react\"\n\ninterface StartSpeakingButtonProps {\n    text: string\n    voiceId?: string\n    className?: string\n}\n\nexport function StartSpeakingButton({ text, voiceId, className }: StartSpeakingButtonProps) {\n    const { speak, stop, isPlaying, isLoading } = useTTS({\n        voiceId,\n        onError: (err) => console.warn(\"TTS Error:\", err)\n    })\n\n    const handleClick = (e: React.MouseEvent) => {\n        e.stopPropagation() // Prevent triggering parent card clicks\n        if (isPlaying) {\n            stop()\n        } else {\n            speak(text)\n        }\n    }\n\n    return (\n        <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className={`rounded-full hover:bg-rp-iris/20 ${className}`}\n            onClick={handleClick}\n            disabled={isLoading || !text}\n            title={isPlaying ? \"Stop Speaking\" : \"Read Aloud\"}\n        >\n            {isLoading ? (\n                <Loader2 className=\"size-4 animate-spin text-rp-iris\" />\n            ) : isPlaying ? (\n                <StopCircle className=\"size-4 text-rp-love animate-pulse\" />\n            ) : (\n                <Volume2 className=\"size-4 text-rp-subtle hover:text-rp-iris\" />\n            )}\n        </Button>\n    )\n}\n","usedDeprecatedRules":[]}]

info  - Need to disable some ESLint rules? Learn more here: https://nextjs.org/docs/basic-features/eslint#disabling-rules
